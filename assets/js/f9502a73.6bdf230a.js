"use strict";(self.webpackChunkmapml_viewer_doc=self.webpackChunkmapml_viewer_doc||[]).push([[5943],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),m=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},s=function(e){var t=m(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=m(a),c=r,h=u["".concat(p,".").concat(c)]||u[c]||d[c]||o;return a?n.createElement(h,l(l({ref:t},s),{},{components:a})):n.createElement(h,l({ref:t},s))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=c;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var m=2;m<o;m++)l[m]=a[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(6010);const o={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,l),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>v});var n=a(7462),r=a(7294),o=a(6010),l=a(2466),i=a(6550),p=a(1980),m=a(7392),s=a(12);function u(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function d(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??u(a);return function(e){const t=(0,m.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function c(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,p._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function k(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=d(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!c({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[p,m]=h({queryString:a,groupId:n}),[u,k]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,s.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),g=(()=>{const e=p??u;return c({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{g&&i(g)}),[g]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!c({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),m(e),k(e)}),[m,k,o]),tabValues:o}}var g=a(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function N(e){let{className:t,block:a,selectedValue:i,selectValue:p,tabValues:m}=e;const s=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),d=e=>{const t=e.currentTarget,a=s.indexOf(t),n=m[a].value;n!==i&&(u(t),p(n))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=s.indexOf(e.currentTarget)+1;t=s[a]??s[0];break}case"ArrowLeft":{const a=s.indexOf(e.currentTarget)-1;t=s[a]??s[s.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},m.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>s.push(e),onKeyDown:c,onClick:d},l,{className:(0,o.Z)("tabs__item",f.tabItem,l?.className,{"tabs__item--active":i===t})}),a??t)})))}function b(e){let{lazy:t,children:a,selectedValue:n}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function y(e){const t=k(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",f.tabList)},r.createElement(N,(0,n.Z)({},e,t)),r.createElement(b,(0,n.Z)({},e,t)))}function v(e){const t=(0,g.Z)();return r.createElement(y,(0,n.Z)({key:String(t)},e))}},8808:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>h,frontMatter:()=>i,metadata:()=>m,toc:()=>u});var n=a(7462),r=(a(7294),a(3905)),o=a(4866),l=a(5162);const i={id:"mapml-viewer-api",title:"HTMLMapmlViewerElement",slug:"/api/mapml-viewer-api"},p="HTMLMapmlViewerElement",m={unversionedId:"api/mapml-viewer-api",id:"api/mapml-viewer-api",title:"HTMLMapmlViewerElement",description:"The HTMLMapmlViewerElement interface represents the `` element.",source:"@site/docs/api/mapml-viewer-api.mdx",sourceDirName:"api",slug:"/api/mapml-viewer-api",permalink:"/web-map-doc/docs/api/mapml-viewer-api",draft:!1,tags:[],version:"current",frontMatter:{id:"mapml-viewer-api",title:"HTMLMapmlViewerElement",slug:"/api/mapml-viewer-api"},sidebar:"sidebar",previous:{title:"<map-style>",permalink:"/web-map-doc/docs/elements/style/"},next:{title:"HTMLLayerElement",permalink:"/web-map-doc/docs/api/layer-api"}},s={},u=[{value:"Properties",id:"properties",level:2},{value:"controls",id:"controls",level:3},{value:"controlsList",id:"controlslist",level:3},{value:"extent",id:"extent",level:3},{value:"lat",id:"lat",level:3},{value:"lon",id:"lon",level:3},{value:"projection",id:"projection",level:3},{value:"zoom",id:"zoom",level:3},{value:"Methods",id:"methods",level:2},{value:"back()",id:"back",level:3},{value:"forward()",id:"forward",level:3},{value:"reload()",id:"reload",level:3},{value:"toggleDebug()",id:"toggledebug",level:3},{value:"viewSource()",id:"viewsource",level:3},{value:"defineCustomProjection(options)",id:"definecustomprojectionoptions",level:3},{value:"zoomTo(lat, lon, zoom)",id:"zoomtolat-lon-zoom",level:3},{value:"geojson2mapml(json, options)",id:"geojson2mapmljson-options",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Options",id:"options",level:4},{value:"Events",id:"events",level:2},{value:"Examples",id:"examples",level:2},{value:"geojson2mapml",id:"geojson2mapml",level:3},{value:"Basic options usage",id:"basic-options-usage",level:4},{value:"Options string",id:"options-string",level:4},{value:"Options function",id:"options-function",level:4},{value:"Default options",id:"default-options",level:4},{value:"defineCustomProjection",id:"definecustomprojection",level:3},{value:"Basic options usage",id:"basic-options-usage-1",level:4},{value:"Specifications",id:"specifications",level:2},{value:"Requirements",id:"requirements",level:2}],d={toc:u},c="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"htmlmapmlviewerelement"},"HTMLMapmlViewerElement"),(0,r.kt)("p",null,"The HTMLMapmlViewerElement interface represents the ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element."),(0,r.kt)("h2",{id:"properties"},"Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#controls"},"controls")),(0,r.kt)("td",{parentName:"tr",align:null},"Turns native map controls on or off. Reflects the controls attribute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#controlslist"},"controlsList")),(0,r.kt)("td",{parentName:"tr",align:null},"Allows to change the set of native controls. Reflects the controlslist attribute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#extent"},"extent")),(0,r.kt)("td",{parentName:"tr",align:null},"Returns the extent of the current map view. Read only.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#lat"},"lat")),(0,r.kt)("td",{parentName:"tr",align:null},"Get or set the map's latitude. Reflects to the lat content attribute. No effect on map dynamic state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#lon"},"lon")),(0,r.kt)("td",{parentName:"tr",align:null},"Get or set the map's longitude. Reflects to the lon content attribute. No effect on map dynamic state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#projection"},"projection")),(0,r.kt)("td",{parentName:"tr",align:null},"The map's projection. Reflects the projection attribute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoom"},"zoom")),(0,r.kt)("td",{parentName:"tr",align:null},"Get or set the map's zoom level. Reflects to the zoom content attribute. No effect on map dynamic state.")))),(0,r.kt)("h3",{id:"controls"},"controls"),(0,r.kt)("p",null,"To add controls to the map:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.controls = true; // or false to remove controls\n")),(0,r.kt)("p",null,"To check whether the map has controls toggled on or off:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet controlsAdded = map.controls;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"controlslist"},"controlsList"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"controlsList")," property returns a ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList"},"DOMTokenList"),"\nthat helps the user select what controls to display on the ",(0,r.kt)("inlineCode",{parentName:"p"},"mapml-viewer")," element based on the ",(0,r.kt)("a",{parentName:"p",href:"../elements/mapml-viewer/#controlslist"},"possible values"),"."),(0,r.kt)("p",null,"To set the controlslist attribute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.controlsList.value = \"noreload nozoom\"; // values can be noreload | nofullscreen | nozoom | nolayer\nmap.controlsList.add(\"nofullscreen\"); // can also add using the 'add' method\nmap.controlsList.toggle(\"nolayer\"); // can also toggle using the 'toggle' method\n// view all methods here - https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList\n")),(0,r.kt)("p",null,"To get the value of the controlslist:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet controlsList = map.controlsList.value;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"extent"},"extent"),(0,r.kt)("p",null,"Read-only. To get the map's extent:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet extent = map.extent;\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"View Sample Extent"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/**\n*extent = \n*  {\n*    {\n*      "topLeft": {\n*        "tcrs": [\n*          {\n*            "horizontal": 906.7586206896551,\n*            "vertical": 981.7241379310345\n*          },\n*          ...\n*        ],\n*        "tilematrix": [\n*          {\n*            "horizontal": 3.5420258620689653,\n*            "vertical": 3.8348599137931036\n*          },\n*          ...\n*        ],\n*        "gcrs": {\n*          "horizontal": -93.05456518322721,\n*          "vertical": 63.783997873304855\n*        },\n*        "pcrs": {\n*          "horizontal": 131686.24163915217,\n*          "vertical": 1646487.1729743406\n*        }\n*      },\n*      "bottomRight": {\n*        "tcrs": [\n*          {\n*            "horizontal": 914.9655172413793,\n*            "vertical": 1015.5172413793102\n*          },\n*          ...\n*        ],\n*        "tilematrix": [\n*          {\n*            "horizontal": 3.574084051724138,\n*            "vertical": 3.9668642241379306\n*          },\n*          ...\n*        ],\n*        "gcrs": {\n*          "horizontal": -85.62509797700041,\n*          "vertical": 52.14641630380798\n*        },\n*        "pcrs": {\n*          "horizontal": 446541.0380154103,\n*          "vertical": 350026.2467191592\n*        }\n*      },\n*      "projection": "CBMTILE",\n*      "zoom": {\n*        "minZoom": 0,\n*        "maxZoom": 25\n*      }\n*    }\n*  }\n*/\n'))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"lat"},"lat"),(0,r.kt)("p",null,"To set the latitude:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.lat = 21.4; // if it's an invalid value, nothing happens\n")),(0,r.kt)("p",null,"Note that the value supplied does not affect the map viewer state, except at\ndocument load, or when an instance of a ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element is constructed\nand programmatically added to the DOM. To change the value, use ",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()"),";"),(0,r.kt)("p",null,"To get the latitude:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet latitude = map.lat;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"lon"},"lon"),(0,r.kt)("p",null,"To set the longitude:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.lon = 21.4; // if it's an invalid value, nothing happens\n")),(0,r.kt)("p",null,"Note that the value supplied does not affect the map viewer state, except at\ndocument load, or when an instance of a ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element is constructed\nand programmatically added to the DOM. To change the value, use ",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()"),";"),(0,r.kt)("p",null,"To get the longitude:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet longitude = map.lon;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"projection"},"projection"),(0,r.kt)("p",null,"To set/update the projection:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.projection = \"CBMTILE\"; // if it's an invalid/undefined projection, nothing happens\n")),(0,r.kt)("p",null,"To get the projection:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet projection = map.projection;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"zoom"},"zoom"),(0,r.kt)("p",null,"To set the zoom:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.zoom = 3; // if it's an invalid value, will default to 0\n")),(0,r.kt)("p",null,"Note that the value supplied does not affect the map viewer state, except at\ndocument load, or when an instance of a ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element is constructed\nand programmatically added to the DOM. To change the value, use ",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()"),";"),(0,r.kt)("p",null,"To get the longitude:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet zoom = map.zoom;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"methods"},"Methods"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Method"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#back"},"back()")),(0,r.kt)("td",{parentName:"tr",align:null},"Navigates back one state in the map's movement history.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#forward"},"forward()")),(0,r.kt)("td",{parentName:"tr",align:null},"Navigates forward in the map's panning history.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#reload"},"reload()")),(0,r.kt)("td",{parentName:"tr",align:null},"Clear the map's panning history and return to the starting location.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#toggledebug"},"toggleDebug()")),(0,r.kt)("td",{parentName:"tr",align:null},"Toggle the debug functionality of the map.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#viewsource"},"viewSource()")),(0,r.kt)("td",{parentName:"tr",align:null},"View the source of the map.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#definecustomprojectionoptions"},"defineCustomProjection(options)")),(0,r.kt)("td",{parentName:"tr",align:null},"Define a custom projection for use by the page.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoomtolat-lon-zoom"},"zoomTo(lat, lon, zoom)")),(0,r.kt)("td",{parentName:"tr",align:null},"Fly or pan the map to a (new) location and zoom level.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoomtolat-lon-zoom"},"geojson2mapml(json, options)")),(0,r.kt)("td",{parentName:"tr",align:null},"Add a GeoJSON Layer to the map.")))),(0,r.kt)("h3",{id:"back"},"back()"),(0,r.kt)("p",null,"To go back in the map's history:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.back();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"forward"},"forward()"),(0,r.kt)("p",null,"To go forward in the map's history:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.forward();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"reload"},"reload()"),(0,r.kt)("p",null,"To clear the map's history and return to the initial location:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.reload();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"toggledebug"},"toggleDebug()"),(0,r.kt)("p",null,"To toggle the map's debug mode:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.toggleDebug();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"viewsource"},"viewSource()"),(0,r.kt)("p",null,"To view the map's view source:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.viewSource();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"definecustomprojectionoptions"},"defineCustomProjection(options)"),(0,r.kt)("p",null,"MapML defines a few built-in tiled CRS projections, including Web Mercator (OSMTILE), pseudo-plate carr\xe9e (WGS84), and  Canada's base map tile grid (CBMTILE). "),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," custom element provides the custom projections API, which gives you the ability to create custom projections and use them in the ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),' element, defined using extended JSON-based "proj4" syntax, supported by the proj4js library.'),(0,r.kt)("p",null,"We won't discuss the actual ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element here, except to say that the map ",(0,r.kt)("inlineCode",{parentName:"p"},"projection")," attribute should have the exact same value of the ",(0,r.kt)("inlineCode",{parentName:"p"},"projection")," member of the JSON object you pass to the custom projections API's ",(0,r.kt)("inlineCode",{parentName:"p"},"defineCustomProjection")," method, and every ",(0,r.kt)("inlineCode",{parentName:"p"},"<layer->")," element in the map must declare and be encoded in that coordinate system, in order to display correctly."),(0,r.kt)("p",null,"The custom projections API is provided by the ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," element.  In a browser implementation, the API might be defined on the window object, but because of the ES6 modules used by custom elements, it is convenient to locate it on the mapping element which uses it."),(0,r.kt)("p",null,"To successfully call the ",(0,r.kt)("inlineCode",{parentName:"p"},"defineCustomProjection")," method, you need to encode the projection method and parameters as members of a JSON string.  The process of doing this is not always simple, but is helped by resources such as ",(0,r.kt)("a",{parentName:"p",href:"https://spatialreference.org"},"https://spatialreference.org"),", where you can obtain the proj4 version of virtually any CRS definition. "),(0,r.kt)("p",null,'Remember to enclose member names in quotes followed by a colon: e.g. "projection": "MY_PROJECTION_NAME".  String values are also enclosed in quotes, and numbers and arrays following normal ',(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON"},"JSON syntax"),"."),(0,r.kt)("p",null,"There are several required members to a custom projection definition:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"projection"),' - this is a string name you give to your projection. We recommend using UPPERCASE to make projection names stand out. Colon ":" characters in the name are not permitted, because these names should not be confused with EPSG: or ogc: URI code lists, because what is being defined here is a CRS that has Web mapping specific parameters, discussed below.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"proj4string")," - This string is processed by ",(0,r.kt)("a",{parentName:"li",href:"http://proj4js.org/"},"proj4js"),", so needs to provide parameters of a projection method supported by that library, in the format that it supports."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"origin"),' - an array of two numbers representing the origin of the tile grid in coordinates of the projected coordinate system, typically meters.  The origin is always at the upper left of the tile grid space, and the column and row numbers increase to the right and down, respectively, following the WMTS standard.  If your tile source is configured according to the "TMS" community standard, you'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resolutions"),' - an array of numbers, sorted in descending order of size in meters, of the "real-world" dimensions of a square pixel. The resolution is calculated using a nominal pixel size of 0.28mm, defined by the WMTS standard. NOTE THIS IS NOT TYPICALLY THE SAME VALUE THAT IS USED BY ESRI TILE SERVICES, WHICH USE 96 DPI AS THE NOMINAL SIZE (settable). Because scale varies over the extent of any projected coordinate system, the pixel resolution is usually valid only in limited locations, for example in Web Mercator, along the equator. The locations where pixel resolution is valid depend on the projection method and parameters.  The set of resolutions must match the set of resolutions of tiles in a cache, if you intend to use your custom projection with an existing tile service.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bounds")," - an array of two arrays of coordinate pairs, defining a bounding box around part of the projected coordinate system, in meters typically. Requests should be valid and latitude / longitude are defined within these bounds.  Requests for maps, tiles and coordinate transformations that fall completely outside these bounds will not execute, preventing redundant traffic and errors.  "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tilesize")," - tiles are always square, and usually 256 pixels on a side.  You can specify another size here as an integer value.  Values of 256, 512, 1024, 2048 or 4096 should work.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"zoomtolat-lon-zoom"},"zoomTo(lat, lon, zoom)"),(0,r.kt)("p",null,"To change the map's center location and zoom level:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var options = {\n  enableHighAccuracy: true,\n  timeout: 5000,\n  maximumAge: 0\n};\n\nfunction success(pos) {\n  var crd = pos.coords;\n\n  let map = document.querySelector('mapml-viewer');\n  map.zoomTo(crd.latitude,crd.longitude, 17); // hard-coded zoom\n  // could calculate a zoom based on accuracy of position\n  console.log(`More or less ${crd.accuracy} meters.`);\n}\n\nfunction error(err) {\n  console.warn(`ERROR(${err.code}): ${err.message}`);\n}\n\nnavigator.geolocation.getCurrentPosition(success, error, options);\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"geojson2mapmljson-options"},"geojson2mapml(json, options)"),(0,r.kt)("p",null,"Convert a GeoJSON feature or feature collection string or object to MapML ",(0,r.kt)("a",{parentName:"p",href:"/web-map-doc/docs/layers/layer/"},(0,r.kt)("inlineCode",{parentName:"a"},"<layer->"))," containing one or more ",(0,r.kt)("a",{parentName:"p",href:"/web-map-doc/docs/elements/feature/"},(0,r.kt)("inlineCode",{parentName:"a"},"<map-feature>"))," elements. Returns and adds the converted layer element to the map."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Check out ",(0,r.kt)("a",{parentName:"p",href:"https://maps4html.org/experiments/api/custom-map-ui/geoname-search-ui.html"},"this application")," using the geojson2mapml API!")),(0,r.kt)("h4",{id:"parameters"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<String","\xa0","|","\xa0","Object>","\xa0","json"),(0,r.kt)("td",{parentName:"tr",align:null},"A GeoJSON string or object.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<","Object",">"," options"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. A set of key/value pairs that customize the output MapML layer. All options are optional and described below.")))),(0,r.kt)("h4",{id:"options"},"Options"),(0,r.kt)("p",null,"<","Object",">"," A set of key/value pairs that customize the output MapML layer. All options are optional and detailed below."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"label")),(0,r.kt)("td",{parentName:"tr",align:null},"<String",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"json.name"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"json.title"),' or "Layer"'),(0,r.kt)("td",{parentName:"tr",align:null},"Sets the output layer's ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/layers/layer/#label"},"label"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"projection")),(0,r.kt)("td",{parentName:"tr",align:null},"<String",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"map"),".",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/elements/mapml-viewer/#projection"},"projection")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"OSMTILE")),(0,r.kt)("td",{parentName:"tr",align:null},"Sets the output layer's ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/elements/mapml-viewer/#projection"},"projection"),". Defined values include: ",(0,r.kt)("inlineCode",{parentName:"td"},"OSMTILE"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"CBMTILE"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"WGS84"),", and ",(0,r.kt)("inlineCode",{parentName:"td"},"APSTILE"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"caption")),(0,r.kt)("td",{parentName:"tr",align:null},"<String","\xa0","|","\xa0","Function",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"json.features[i].id")," or the ",(0,r.kt)("inlineCode",{parentName:"td"},"label")," value"),(0,r.kt)("td",{parentName:"tr",align:null},"A function that accepts the feature JSON and returns a string, OR a string that is the name of a property to be mapped to the ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/elements/feature/#map-featurecaption"},"featurecaption"),". If a matching property is not found, the string provided will be used as the feature caption value. See ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"basic options usage")," for an example.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{id:"option-properties"},(0,r.kt)("inlineCode",{parentName:"td"},"properties"))),(0,r.kt)("td",{parentName:"tr",align:null},"<Function","\xa0","|","\xa0","String","\xa0","|","\xa0","HTMLElement",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"Properties will be mapped to an HTML ",(0,r.kt)("a",{parentName:"em",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"},"table"),".")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies how the properties are mapped. <Function",">"," - A function that accepts one argument - the GeoJSON feature object - and which must return an HTMLElement that becomes the single child element of the <properties",">"," element. <String",">"," - A string that will be parsed and used as the single child element of the ",(0,r.kt)("inlineCode",{parentName:"td"},"<properties>")," element for all features. <HTMLElement",">"," - an element that will be used as the single child element of ",(0,r.kt)("inlineCode",{parentName:"td"},"<properties>")," element for all features. See ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"basic options usage")," for an example.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"geometryFunction")),(0,r.kt)("td",{parentName:"tr",align:null},"<Function",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"MapML geometry will mirror the GeoJSON geometry value")),(0,r.kt)("td",{parentName:"tr",align:null},"<Function",">"," A function to modify the generated ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/elements/geometry/#child-elements"},"descendants")," of ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," which can add classes, ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/other-elements/map-a/"},"hyperlinks")," and ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/other-elements/span/"},"span's")," to the instance. Plain ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," element will be created by default. The function accepts two arguments: The generated ",(0,r.kt)("a",{parentName:"td",href:"/web-map-doc/docs/elements/geometry/#child-elements"},"child element")," of ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," and the ",(0,r.kt)("a",{parentName:"td",href:"https://www.rfc-editor.org/rfc/rfc7946#section-3.2"},"feature json object")," to return a modified child element of the ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," element. See ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"basic options usage")," for an example.")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"events"},"Events"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Event name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"layerchange"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when a layer changes src, usually by the user following a link.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"load"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when all layers have finished loading content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"click"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when the map receives both mousedown and mouseup events")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dblclick"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when the user double clicks or taps the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mousemove"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired repeatedly as the mouse cursor traverses the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseover"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired once as the mouse cursor enters the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseout"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired once as the mouse cursor exits the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mousedown"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when the mouse's primary key is pressed down with cursor over the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseup"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when the mouse's primary key is released with cursor over the map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"movestart"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired before the map starts to move / viewport changes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"move"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired repeatedly as the map moves.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"moveend"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired after the map stops moving")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoomstart"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired before the map changes zoom level")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoom"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired repeatedly as the map changes zoom")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoomend"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired after the map has changed zoom level")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"preclick"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired before a click on the map is triggered.  May not be a primitive.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"contextmenu"),(0,r.kt)("td",{parentName:"tr",align:null},"Fired when user right-clicks or long presses on map. May not be a primitive.")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("h3",{id:"geojson2mapml"},"geojson2mapml"),(0,r.kt)("h4",{id:"basic-options-usage"},"Basic options usage"),(0,r.kt)("p",null,"Showcasing how use each option."),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"label",label:"label",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml label option"',title:'"geojson2mapml',label:!0,'option"':!0},'geojson2mapml(json, {label: "Downtown Ottawa"});\n'))),(0,r.kt)(l.Z,{value:"projection",label:"projection",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml projection option"',title:'"geojson2mapml',projection:!0,'option"':!0},'geojson2mapml(json, {projection: "CBMTILE"});\n'))),(0,r.kt)(l.Z,{value:"caption",label:"caption",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml caption option - function-valued"',title:'"geojson2mapml',caption:!0,option:!0,"-":!0,'function-valued"':!0},'// caption function\ngeojson2mapml(json, {caption: function(feature) {\n    return feature.properties.desc + ", not a Polygon";\n    }\n});\n// caption option string value referencing a property name\ngeojson2mapml(json, {caption: "desc"});\n'))),(0,r.kt)(l.Z,{value:"properties",label:"properties",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml properties option - function-valued"',title:'"geojson2mapml',properties:!0,option:!0,"-":!0,'function-valued"':!0},'// properties function\ngeojson2mapml(json, {properties: function(feature) {\n    let parser = new DOMParser();\n    return parser.parseFromString("<h1>" + feature.properties.desc + "\'s property</h1>", "text/html").body.firstChild;\n    }\n});\n// properties option - string valued - make sure you sanitize user-supplied strings\ngeojson2mapml(json, {properties: "<p>This property was inserted using a properties string</p>"});\n'))),(0,r.kt)(l.Z,{value:"geometryFunction",label:"geometryFunction",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml geometryFunction option"',title:'"geojson2mapml',geometryFunction:!0,'option"':!0},'let options = {\n                geometryFunction: function (g, f) {\n                  g.setAttribute("class", f.properties.class);\n                  return g;}\n              };\ngeojson2mapml(json, options);\n')))),(0,r.kt)("h4",{id:"options-string"},"Options string"),(0,r.kt)("p",null,"An example showcasing how strings can be used to set ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"projection"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"caption")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"properties")," options."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n    "name": "Default Name",\n    "type": "Feature",\n    "geometry": {\n        "type": "Point",\n        "coordinates": [-75.6916809,45.4186964]\n    },\n    "properties": {"desc": "This is a Point"}\n};\n\n// GeoJSON To MapML\nlet output = map.geojson2mapml(json, {label: "Example 1", projection: "CBMTILE", caption: "desc", properties: "<h3>This is a property heading</h3>"});\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click to view the output HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Example 1" checked="">\n   <map-meta name="projection" content="CBMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>This is a Point</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <h3>This is a property heading</h3>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("h4",{id:"options-function"},"Options function"),(0,r.kt)("p",null,"An example showcasing how functions can be used to set ",(0,r.kt)("inlineCode",{parentName:"p"},"caption")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"properties")," options."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n    "name": "Default Name",\n    "type": "Feature",\n    "geometry": {\n        "type": "Point",\n        "coordinates": [-75.6916809,45.4186964]\n    },\n    "properties": {"desc": "This is a Point"}\n};\n\n// function to set caption\nlet cap = function c(j) {\n  let str = "This point is located at: (" + j.geometry.coordinates[0] + ", " + j.geometry.coordinates[1] + ").";\n  return str;\n}\n\n// function to set properties\nlet prop = function f(p) {\n  let parser = new DOMParser();\n  return parser.parseFromString("<h1>" + p.properties.desc + "\'s property</h1>", "text/html").body.firstChild;\n}\n\n// GeoJSON To MapML\nlet output = map.geojson2mapml(json, {label: "Example 2", caption: cap, properties: prop});\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click to view the output HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Example 2" checked="">\n   <map-meta name="projection" content="OSMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>This point is located at: (-75.6916809, 45.4186964).</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <h1>This is a Point\'s property</h1>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("h4",{id:"default-options"},"Default options"),(0,r.kt)("p",null,"An example showcasing default output when no options are provided."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n "title": "Point Geometry",\n "bbox": [-75.916809, 45.886964, -75.516809, 45.26964],\n "type": "FeatureCollection",\n "features": [{\n     "type": "Feature",\n     "geometry": {\n         "type": "Point",\n         "coordinates": [-75.6916809, 45.4186964]\n     },\n     "properties": {\n         "prop0": "This is a Point"\n     }\n }]\n};\n\n// GeoJSON To MapML\nlet output = map.geojson2mapml(json);\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click to view the output HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Point Geometry" checked="">\n   <map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta>\n   <map-meta name="projection" content="OSMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>Point Geometry</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <table>\n            <thead>\n               <tr>\n                  <th role="columnheader" scope="col">Property name</th>\n                  <th role="columnheader" scope="col">Property value</th>\n               </tr>\n            </thead>\n            <tbody>\n               <tr>\n                  <th scope="row">prop0</th>\n                  <td itemprop="prop0">This is a Point</td>\n               </tr>\n            </tbody>\n         </table>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"definecustomprojection"},"defineCustomProjection"),(0,r.kt)("h4",{id:"basic-options-usage-1"},"Basic options usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<!doctype html>\n<html lang="en">\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <title>Example Custom Projection</title>\n  <script type="module" src="web-map/mapml-viewer.js"><\/script>\n  <script type="module">\n    let customProjectionDefinition = `{\n      "projection": "ATLAS_POLAR_MAP",\n      "proj4string" : "+proj=aeqd +lat_0=90 +lon_0=-90 +x_0=0 +y_0=0 +ellps=sphere +units=m +no_defs +type=crs",\n      "origin" : [-20015200,20015200],\n      "resolutions" :  [33073,16536.5,8268.246,4134.123,2067.061,1033.531,516.765],\n      "bounds" : [[4979939,-4846977],[-5139071,3980038]],\n      "tilesize" : 256\n      }`;\n    let map = document.querySelector("mapml-viewer");\n    let cProjection = map.defineCustomProjection(customProjectionDefinition);    \n    map.projection = cProjection;\n  <\/script>\n</head>\n<body>\n  <mapml-viewer projection="ATLAS_POLAR_MAP" zoom="2" lat="83.48919" lon="-87.7687" controls>\n    <layer- label="Atlas of Canada Polar Wall Map" checked>\n    <map-link rel="license" title="Canadian Federal Geospatial Platform" href="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN/MapServer/"></map-link>\n      <map-extent units="ATLAS_POLAR_MAP" checked hidden>\n        <map-input type="zoom" name="z" min="0" max="6" value="6" ></map-input>\n        <map-input type="location" name="x" axis="column" units="tilematrix" min="116" max="186"></map-input>\n        <map-input type="location" name="y" axis="row" units="tilematrix" min="125" max="184"></map-input>\n        <map-link rel="tile" tref="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN/MapServer/tile/{z}/{y}/{x}/"></map-link>\n        <map-link rel="tile" tref="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN_A/MapServer/tile/{z}/{y}/{x}/"></map-link>\n      </map-extent>\n    </layer->\n  </mapml-viewer>\n</body>\n</html>\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"specifications"},"Specifications"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/MapML-Specification/spec/#dom-htmlmapmlviewerelement"},"HTMLMapmlViewerElement"))))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/Maps4HTML/HTML-Map-Element-UseCases-Requirements/issues/new?title=-SUMMARIZE+THE+PROBLEM-&body=-DESCRIBE+THE+PROBLEM-"},"Report problems with these requirements on GitHub")),(0,r.kt)("p",null,(0,r.kt)("b",null,(0,r.kt)("span",{class:"requirement"},"requirement"),(0,r.kt)("span",{class:"enhancement"},"enhancement"),(0,r.kt)("span",{class:"impractical"},"impractical"),(0,r.kt)("span",{class:"undecided"},"undecided"),(0,r.kt)("span",{class:"discussion"},"under discussion"))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Spec"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Viewer"),(0,r.kt)("th",{parentName:"tr",align:"center"},"API"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#properties"},(0,r.kt)("strong",{parentName:"a"},"Properties"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"full")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#methods"},(0,r.kt)("strong",{parentName:"a"},"Methods"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"partial *"),(0,r.kt)("td",{parentName:"tr",align:"center"},"full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"partial *")))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Exceptions *"),(0,r.kt)("ol",null,(0,r.kt)("li",null,"No specification will be provided for toggleDebug() or viewSource() methods."),(0,r.kt)("li",null,"The defineCustomProjection method is implemented, but ",(0,r.kt)("a",{href:"https://github.com/Maps4HTML/MapML-Specification/issues/249"},"not yet specified")),(0,r.kt)("li",null,"The custom projections API (defineCustomProjection) is under discussion, in particular, the options parameter's format."),(0,r.kt)("li",null,"The geojson2mapml method's ",(0,r.kt)("a",{href:"#options"},"options")," parameter specification is not final."))),(0,r.kt)("hr",null),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Maps4HTML/web-map-doc/edit/main/docs/api/mapml-viewer-api.mdx"},"Edit this page on ",(0,r.kt)("strong",{parentName:"a"},"Github"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://gitter.im/Maps4HTML/chat"},"Chat with us on ",(0,r.kt)("strong",{parentName:"a"},"Gitter"))))))}h.isMDXComponent=!0}}]);