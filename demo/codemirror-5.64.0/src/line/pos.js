import{getLine}from"./utils_line.js";export function Pos(t,n,e=null){if(!(this instanceof Pos))return new Pos(t,n,e);this.line=t,this.ch=n,this.sticky=e}export function cmp(t,n){return t.line-n.line||t.ch-n.ch}export function equalCursorPos(t,n){return t.sticky==n.sticky&&0==cmp(t,n)}export function copyPos(t){return Pos(t.line,t.ch)}export function maxPos(t,n){return cmp(t,n)<0?n:t}export function minPos(t,n){return cmp(t,n)<0?t:n}export function clipLine(t,n){return Math.max(t.first,Math.min(n,t.first+t.size-1))}export function clipPos(t,n){if(n.line<t.first)return Pos(t.first,0);let e=t.first+t.size-1;return n.line>e?Pos(e,getLine(t,e).text.length):clipToLen(n,getLine(t,n.line).text.length)}function clipToLen(t,n){let e=t.ch;return null==e||e>n?Pos(t.line,n):e<0?Pos(t.line,0):t}export function clipPosArray(t,n){let e=[];for(let i=0;i<n.length;i++)e[i]=clipPos(t,n[i]);return e}