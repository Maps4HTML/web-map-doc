!function(){"use strict";var t=CodeMirror.Pos;namespace="emacs_";var r={};function l(t){var l,e,n,a=r[C];if(a)return a;var o,C=t.replace(/\w+-/g,(function(t){return"Ctrl-"==t?l=!0:"Alt-"==t?n=!0:"Shift-"==t&&(e=!0),""}));for(var i in CodeMirror.keyNames)if(CodeMirror.keyNames[i]==C){o=i;break}if(null==o)throw new Error("Unknown key: "+C);return r[t]={type:"keydown",keyCode:o,ctrlKey:l,shiftKey:e,altKey:n,preventDefault:function(){},stopPropagation:function(){}}}function e(r,e){var n=Array.prototype.slice.call(arguments,2);testCM(r,(function(r){for(var e=0;e<n.length;++e){var a=n[e];a instanceof t?r.setCursor(a):a.call?a(r):r.triggerOnKeyDown(l(a))}}),{keyMap:"emacs",value:e,mode:"javascript"})}function n(t){return function(r){r.openDialog=function(r,l){l(t)}}}function a(r,l,e){return function(n){eqCursorPos(n.getCursor(),t(r,l,e))}}function o(t){return function(r){eq(r.getValue(),t)}}e("motionHSimple","abc","Ctrl-F","Ctrl-F","Ctrl-B",a(0,1,"after")),e("motionHMulti","abcde","Ctrl-4","Ctrl-F",a(0,4,"before"),"Ctrl--","Ctrl-2","Ctrl-F",a(0,2,"after"),"Ctrl-5","Ctrl-B",a(0,0,"after")),e("motionHWord","abc. def ghi","Alt-F",a(0,3,"before"),"Alt-F",a(0,8,"before"),"Ctrl-B","Alt-B",a(0,5,"after"),"Alt-B",a(0,0,"after")),e("motionHWordMulti","abc. def ghi ","Ctrl-3","Alt-F",a(0,12,"before"),"Ctrl-2","Alt-B",a(0,5,"after"),"Ctrl--","Alt-B",a(0,8,"before")),e("motionVSimple","a\nb\nc\n","Ctrl-N","Ctrl-N","Ctrl-P",a(1,0,"after")),e("motionVMulti","a\nb\nc\nd\ne\n","Ctrl-2","Ctrl-N",a(2,0,"after"),"Ctrl-F","Ctrl--","Ctrl-N",a(1,1,"before"),"Ctrl--","Ctrl-3","Ctrl-P",a(4,1,"before")),e("killYank","abc\ndef\nghi","Ctrl-F","Ctrl-Space","Ctrl-N","Ctrl-N","Ctrl-W","Ctrl-E","Ctrl-Y",o("ahibc\ndef\ng")),e("killRing","abcdef","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Y","Alt-Y",o("acdef")),e("copyYank","abcd","Ctrl-Space","Ctrl-E","Alt-W","Ctrl-Y",o("abcdabcd")),e("killLineSimple","foo\nbar","Ctrl-F","Ctrl-K",o("f\nbar")),e("killLineEmptyLine","foo\n  \nbar","Ctrl-N","Ctrl-K",o("foo\nbar")),e("killLineMulti","foo\nbar\nbaz","Ctrl-F","Ctrl-F","Ctrl-K","Ctrl-K","Ctrl-K","Ctrl-A","Ctrl-Y",o("o\nbarfo\nbaz")),e("moveByParagraph","abc\ndef\n\n\nhij\nklm\n\n","Ctrl-F","Ctrl-Down",a(2,0),"Ctrl-Down",a(6,0),"Ctrl-N","Ctrl-Up",a(3,0),"Ctrl-Up",a(0,0),t(1,2),"Ctrl-Down",a(2,0),t(4,2),"Ctrl-Up",a(3,0)),e("moveByParagraphMulti","abc\n\ndef\n\nhij\n\nklm","Ctrl-U","2","Ctrl-Down",a(3,0),"Shift-Alt-.","Ctrl-3","Ctrl-Up",a(1,0)),e("moveBySentence","sentence one! sentence\ntwo\n\nparagraph two","Alt-E",a(0,13),"Alt-E",a(1,3),"Ctrl-F","Alt-A",a(0,13)),e("moveByExpr","function foo(a, b) {}","Ctrl-Alt-F",a(0,8),"Ctrl-Alt-F",a(0,12),"Ctrl-Alt-F",a(0,18),"Ctrl-Alt-B",a(0,12),"Ctrl-Alt-B",a(0,9)),e("moveByExprMulti","foo bar baz bug","Ctrl-2","Ctrl-Alt-F",a(0,7),"Ctrl--","Ctrl-Alt-F",a(0,4),"Ctrl--","Ctrl-2","Ctrl-Alt-B",a(0,11)),e("delExpr","var x = [\n  a,\n  b\n  c\n];",t(0,8),"Ctrl-Alt-K",o("var x = ;"),"Ctrl-/",t(4,1),"Ctrl-Alt-Backspace",o("var x = ;")),e("delExprMulti","foo bar baz","Ctrl-2","Ctrl-Alt-K",o(" baz"),"Ctrl-/","Ctrl-E","Ctrl-2","Ctrl-Alt-Backspace",o("foo ")),e("justOneSpace","hi      bye  ",t(0,4),"Alt-Space",o("hi bye  "),t(0,4),"Alt-Space",o("hi b ye  "),"Ctrl-A","Alt-Space","Ctrl-E","Alt-Space",o(" hi b ye ")),e("openLine","foo bar","Alt-F","Ctrl-O",o("foo\n bar")),e("transposeChar","abcd\ne","Ctrl-F","Ctrl-T","Ctrl-T",o("bcad\ne"),a(0,3),"Ctrl-F","Ctrl-T","Ctrl-T","Ctrl-T",o("bcda\ne"),a(0,4),"Ctrl-F","Ctrl-T",o("bcde\na"),a(1,1)),e("manipWordCase","foo BAR bAZ","Alt-C","Alt-L","Alt-U",o("Foo bar BAZ"),"Ctrl-A","Alt-U","Alt-L","Alt-C",o("FOO bar Baz")),e("manipWordCaseMulti","foo Bar bAz","Ctrl-2","Alt-U",o("FOO BAR bAz"),"Ctrl-A","Ctrl-3","Alt-C",o("Foo Bar Baz")),e("upExpr","foo {\n  bar[];\n  baz(blah);\n}",t(2,7),"Ctrl-Alt-U",a(2,5),"Ctrl-Alt-U",a(0,4)),e("transposeExpr","do foo[bar] dah",t(0,6),"Ctrl-Alt-T",o("do [bar]foo dah")),e("clearMark","abcde",t(0,2),"Ctrl-Space","Ctrl-F","Ctrl-F","Ctrl-G","Ctrl-W",o("abcde")),e("delRegion","abcde","Ctrl-Space","Ctrl-F","Ctrl-F","Delete",o("cde")),e("backspaceRegion","abcde","Ctrl-Space","Ctrl-F","Ctrl-F","Backspace",o("cde")),e("backspaceDoesntAddToRing","foobar","Ctrl-F","Ctrl-F","Ctrl-F","Ctrl-K","Backspace","Backspace","Ctrl-Y",o("fbar")),e("gotoLine","0\n1\n2\n3",n("3"),"Alt-G","G",a(2,0)),e("gotoInvalidLineFloat","0\n1\n2\n3",n("2.2"),"Alt-G","G",a(0,0)),testCM("gotoDialogTemplate",(function(t){t.openDialog=function(t,r){var l=t.querySelector("input");eq(t.textContent,"Goto line: "),eq(l.tagName,"INPUT")},t.triggerOnKeyDown(l("Alt-G")),t.triggerOnKeyDown(l("G"))}),{value:"",keyMap:"emacs"}),testCM("save",(function(t){var r=!1;CodeMirror.commands.save=function(t){r=t.getValue()},t.triggerOnKeyDown(l("Ctrl-X")),t.triggerOnKeyDown(l("Ctrl-S")),is(r,"hi")}),{value:"hi",keyMap:"emacs"})}();