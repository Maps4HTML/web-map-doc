"use strict";(self.webpackChunkmapml_viewer_doc=self.webpackChunkmapml_viewer_doc||[]).push([[2431],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>d});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(t),d=a,v=m["".concat(p,".").concat(d)]||m[d]||c[d]||i;return t?r.createElement(v,o(o({ref:n},u),{},{components:t})):r.createElement(v,o({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3534:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=t(7462),a=(t(7294),t(3905));const i={id:"custom-rendering",title:"API de rendu personnalis\xe9",slug:"/api/custom-rendering"},o=void 0,l={unversionedId:"api/custom-rendering",id:"api/custom-rendering",title:"API de rendu personnalis\xe9",description:"L\u2019interface de programmation d\u2019applications (API) de rendu personnalis\xe9 permet aux d\xe9veloppeurs de contourner la fonction de rendu de MapML et de dessiner ce qu\u2019ils veulent sur la carte, \xe0 condition que cela fasse partie du domaine HTML.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/api/custom-rendering.md",sourceDirName:"api",slug:"/api/custom-rendering",permalink:"/web-map-doc/fr/docs/api/custom-rendering",draft:!1,tags:[],version:"current",frontMatter:{id:"custom-rendering",title:"API de rendu personnalis\xe9",slug:"/api/custom-rendering"},sidebar:"sidebar",previous:{title:"API de projections personnalis\xe9es",permalink:"/web-map-doc/fr/docs/api/custom-projections"},next:{title:"\xc0 propos de l'extension",permalink:"/web-map-doc/fr/docs/extension/about"}},p={},s=[{value:"Pav\xe9s personnalis\xe9s",id:"pav\xe9s-personnalis\xe9s",level:2},{value:"\xc9v\xe9nement <code>tileloadstart</code>",id:"\xe9v\xe9nement-tileloadstart",level:3},{value:"Exemple :",id:"exemple-",level:3},{value:"Image personnalis\xe9e",id:"image-personnalis\xe9e",level:2}],u={toc:s};function c(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"L\u2019interface de programmation d\u2019applications (API) de rendu personnalis\xe9 permet aux d\xe9veloppeurs de contourner la fonction de rendu de MapML et de dessiner ce qu\u2019ils veulent sur la carte, \xe0 condition que cela fasse partie du domaine HTML."),(0,a.kt)("h2",{id:"pav\xe9s-personnalis\xe9s"},"Pav\xe9s personnalis\xe9s"),(0,a.kt)("p",null,"Pour effectuer le rendu de pav\xe9s personnalis\xe9s avec JavaScript, \xe9coutez l\u2019\xe9v\xe9nement ",(0,a.kt)("inlineCode",{parentName:"p"},"tileloadstart")," sur un \xe9l\xe9ment ",(0,a.kt)("inlineCode",{parentName:"p"},'<map-link rel="tile">')," d\u2019une couche produite suivant un mod\xe8le."),(0,a.kt)("h3",{id:"\xe9v\xe9nement-tileloadstart"},"\xc9v\xe9nement ",(0,a.kt)("inlineCode",{parentName:"h3"},"tileloadstart")),(0,a.kt)("p",null,"Cet \xe9v\xe9nement est d\xe9clench\xe9 \xe0 la cr\xe9ation d\u2019un pav\xe9, et contient la structure suivante dans sa propri\xe9t\xe9 des d\xe9tails :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"{\n  x: 1,    // valeur x de tilematrix du pav\xe9 charg\xe9\n  y: 2,    // valeur y de tilematrix du pav\xe9 charg\xe9\n  zoom: 3, // niveau de zoom du pav\xe9 charg\xe9\n  appendTile: function appendTile ( customTile ) {...} // transmet le pav\xe9 personnalis\xe9 comme un argument de fonction\n}\n")),(0,a.kt)("h3",{id:"exemple-"},"Exemple :"),(0,a.kt)("p",null,"La carte :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<mapml-viewer projection="OSMTILE" zoom="0" lat="45" lon="-75" controls>\n  <layer- label="pav\xe9s personnalis\xe9s" checked>\n    <map-meta name="zoom" content="min=0,max=23" ></map-meta>\n    <map-extent units="OSMTILE">\n      <map-input name="zoomLevel" type="zoom" min="0" max="23" value="1" ></map-input>\n      <map-input name="row" type="location" axis="row" units="tilematrix" min="0" max="2" ></map-input>\n      <map-input name="col" type="location" axis="column" units="tilematrix" min="0" max="2" ></map-input>\n      <!\u2014\xe9coutez l\u2019\xe9v\xe9nement tileloadstart sur cet \xe9l\xe9ment --\x3e\n      <map-link rel="tile" title="" tref="" ></map-link>\n    </map-extent>\n  </layer->\n</mapml-viewer>\n')),(0,a.kt)("p",null,"Script Java pour cr\xe9er des pav\xe9s personnalis\xe9s :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let layer = document.querySelector("body > mapml-viewer > layer- > map-extent > map-link");\n    layer.addEventListener("tileloadstart", (e) => {\n      let customTile = document.createElement("p");\n      customTile.innerHTML = `x: {e.detail.x} y: {e.detail.y} zoom: {e.detail.zoom}`;\n      e.detail.appendTile(customTile);\n    });\n')),(0,a.kt)("p",null,"Dans cet exemple, ",(0,a.kt)("inlineCode",{parentName:"p"},"customTile")," est une balise HTML ",(0,a.kt)("inlineCode",{parentName:"p"},"<p>"),", mais vous  pouvez utiliser n\u2019importe quel \xe9l\xe9ment HTML. Il suffit d\u2019ajouter l\u2019\xe9l\xe9ment cr\xe9\xe9 avec la fonction ",(0,a.kt)("inlineCode",{parentName:"p"},"(tileloadstart event).detail.appendTile()"),", ce qui transmet le pav\xe9 personnalis\xe9 en argument de la fonction."),(0,a.kt)("h2",{id:"image-personnalis\xe9e"},"Image personnalis\xe9e"),(0,a.kt)("admonition",{type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\xc0 mettre en \u0153uvre.")))}c.isMDXComponent=!0}}]);