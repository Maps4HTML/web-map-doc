"use strict";(self.webpackChunkmapml_viewer_doc=self.webpackChunkmapml_viewer_doc||[]).push([[6281],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=r,k=m["".concat(p,".").concat(d)]||m[d]||c[d]||l;return n?a.createElement(k,o(o({ref:t},u),{},{components:n})):a.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[m]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),r=n(6010);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(7462),r=n(7294),l=n(6010),o=n(2466),i=n(6550),p=n(1980),s=n(7392),u=n(12);function m(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function c(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??m(n);return function(e){const t=(0,s.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function k(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,p._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=c(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:l}))),[p,s]=k({queryString:n,groupId:a}),[m,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,l]=(0,u.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:a}),N=(()=>{const e=p??m;return d({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{N&&i(N)}),[N]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),s(e),g(e)}),[s,g,l]),tabValues:l}}var N=n(2389);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:t,block:n,selectedValue:i,selectValue:p,tabValues:s}=e;const u=[],{blockElementScrollPositionUntilNextRender:m}=(0,o.o5)(),c=e=>{const t=e.currentTarget,n=u.indexOf(t),a=s[n].value;a!==i&&(m(t),p(a))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},s.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>u.push(e),onKeyDown:d,onClick:c},o,{className:(0,l.Z)("tabs__item",h.tabItem,o?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function b(e){const t=g(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",h.tabList)},r.createElement(f,(0,a.Z)({},e,t)),r.createElement(v,(0,a.Z)({},e,t)))}function y(e){const t=(0,N.Z)();return r.createElement(b,(0,a.Z)({key:String(t)},e))}},3706:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>k,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var a=n(7462),r=(n(7294),n(3905)),l=n(4866),o=n(5162);const i={id:"mapml-viewer-api",title:"HTMLMapmlViewerElement",slug:"/api/mapml-viewer-api"},p="HTMLMapmlViewerElement",s={unversionedId:"api/mapml-viewer-api",id:"api/mapml-viewer-api",title:"HTMLMapmlViewerElement",description:"L\u2019interface HTMLMapmlViewerElement repr\xe9sente l\u2019\xe9l\xe9ment ``.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/api/mapml-viewer-api.mdx",sourceDirName:"api",slug:"/api/mapml-viewer-api",permalink:"/web-map-doc/fr/docs/api/mapml-viewer-api",draft:!1,tags:[],version:"current",frontMatter:{id:"mapml-viewer-api",title:"HTMLMapmlViewerElement",slug:"/api/mapml-viewer-api"},sidebar:"sidebar",previous:{title:"<map-style>",permalink:"/web-map-doc/fr/docs/elements/style/"},next:{title:"HTMLLayerElement",permalink:"/web-map-doc/fr/docs/api/layer-api"}},u={},m=[{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:2},{value:"controls",id:"controls",level:3},{value:"controlsList",id:"controlslist",level:3},{value:"extent",id:"extent",level:3},{value:"lat",id:"lat",level:3},{value:"lon",id:"lon",level:3},{value:"projection",id:"projection",level:3},{value:"zoom",id:"zoom",level:3},{value:"M\xe9thodes",id:"m\xe9thodes",level:2},{value:"back()",id:"back",level:3},{value:"forward()",id:"forward",level:3},{value:"reload()",id:"reload",level:3},{value:"toggleDebug()",id:"toggledebug",level:3},{value:"viewSource()",id:"viewsource",level:3},{value:"defineCustomProjection(options)",id:"definecustomprojectionoptions",level:3},{value:"zoomTo(lat, lon, zoom)",id:"zoomtolat-lon-zoom",level:3},{value:"geojson2mapml(json, options)",id:"geojson2mapmljson-options",level:3},{value:"Param\xe8tres",id:"param\xe8tres",level:4},{value:"Options",id:"options",level:4},{value:"\xc9v\xe9nements",id:"\xe9v\xe9nements",level:2},{value:"Exemples",id:"exemples",level:2},{value:"geojson2mapml",id:"geojson2mapml",level:3},{value:"Utilisation des options de base",id:"utilisation-des-options-de-base",level:4},{value:"Cha\xeene d\u2019options",id:"cha\xeene-doptions",level:4},{value:"Fonction d\u2019options",id:"fonction-doptions",level:4},{value:"Options par d\xe9faut",id:"options-par-d\xe9faut",level:4},{value:"defineCustomProjection",id:"definecustomprojection",level:3},{value:"Basic options usage",id:"basic-options-usage",level:4},{value:"Sp\xe9cifications",id:"sp\xe9cifications",level:2},{value:"Exigences",id:"exigences",level:2}],c={toc:m},d="wrapper";function k(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"htmlmapmlviewerelement"},"HTMLMapmlViewerElement"),(0,r.kt)("p",null,"L\u2019interface HTMLMapmlViewerElement repr\xe9sente l\u2019\xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),"."),(0,r.kt)("h2",{id:"propri\xe9t\xe9s"},"Propri\xe9t\xe9s"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Nom de la propri\xe9t\xe9"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#controls"},"controls")),(0,r.kt)("td",{parentName:"tr",align:null},"Active ou d\xe9sactive les contr\xf4les natifs de la carte. Reproduit l\u2019attribut controls.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#controlslist"},"controlsList")),(0,r.kt)("td",{parentName:"tr",align:null},"Permet de changer l\u2019ensemble des contr\xf4les natifs. Reproduit l\u2019attribut controlslist.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#extent"},"extent")),(0,r.kt)("td",{parentName:"tr",align:null},"Retourne l\u2019\xe9tendue de la carte affich\xe9e. En lecture seule.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#lat"},"lat")),(0,r.kt)("td",{parentName:"tr",align:null},"Obtient ou d\xe9finit la latitude de la carte. Reproduit dans l\u2019attribut de contenu lat. Aucun effet sur l'\xe9tat dynamique de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#lon"},"lon")),(0,r.kt)("td",{parentName:"tr",align:null},"Obtient ou d\xe9finit la longitude de la carte. Reproduit dans l\u2019attribut de contenu lon. Aucun effet sur l'\xe9tat dynamique de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#projection"},"projection")),(0,r.kt)("td",{parentName:"tr",align:null},"Projection de la carte. Reproduit l\u2019attribut projection.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoom"},"zoom")),(0,r.kt)("td",{parentName:"tr",align:null},"Obtient ou d\xe9finit le niveau de zoom de la carte. Reproduit dans l\u2019attribut de contenu zoom. Aucun effet sur l'\xe9tat dynamique de la carte.")))),(0,r.kt)("h3",{id:"controls"},"controls"),(0,r.kt)("p",null,"Pour ajouter des contr\xf4les \xe0 la carte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.controls = true; // ou false pour supprimer des contr\xf4les\n")),(0,r.kt)("p",null,"Pour v\xe9rifier si les contr\xf4les de la carte sont activ\xe9s ou d\xe9sactiv\xe9s :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet controlsAdded = map.controls;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"controlslist"},"controlsList"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"controlsList")," renvoie une ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/API/DOMTokenList"},"DOMTokenList"),"\nqui aide l'utilisateur \xe0 s\xe9lectionner les contr\xf4les \xe0 afficher sur l'\xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"mapml-viewer")," en fonction des ",(0,r.kt)("a",{parentName:"p",href:"../elements/mapml-viewer/#controlslist"},"valeurs possibles"),"."),(0,r.kt)("p",null,"Pour d\xe9finir l\u2019attribut controlslist :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.controlsList.value = \"noreload nozoom\"; // les valeurs peuvent \xeatre noreload | nofullscreen | nozoom | nolayer\nmap.controlsList.add(\"nofullscreen\"); // peut \xe9galement \xeatre ajout\xe9 \xe0 l'aide de la m\xe9thode 'add'\nmap.controlsList.toggle(\"nolayer\"); // peut \xe9galement \xeatre bascul\xe9 \xe0 l'aide de la m\xe9thode 'toggle.\n// Voir toutes les m\xe9thodes ici - https://developer.mozilla.org/fr/docs/Web/API/DOMTokenList\n")),(0,r.kt)("p",null,"Pour obtenir la valeur de controlslist :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet controlsList = map.controlsList.value;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"extent"},"extent"),(0,r.kt)("p",null,"Lire seulement. Pour obtenir l\u2019\xe9tendue de la carte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet extent = map.extent;\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Afficher un exemple d\u2019\xe9tendue"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/**\n*extent = \n*  {\n*    {\n*      "topLeft": {\n*        "tcrs": [\n*          {\n*            "horizontal": 906.7586206896551,\n*            "vertical": 981.7241379310345\n*          },\n*          ...\n*        ],\n*        "tilematrix": [\n*          {\n*            "horizontal": 3.5420258620689653,\n*            "vertical": 3.8348599137931036\n*          },\n*          ...\n*        ],\n*        "gcrs": {\n*          "horizontal": -93.05456518322721,\n*          "vertical": 63.783997873304855\n*        },\n*        "pcrs": {\n*          "horizontal": 131686.24163915217,\n*          "vertical": 1646487.1729743406\n*        }\n*      },\n*      "bottomRight": {\n*        "tcrs": [\n*          {\n*            "horizontal": 914.9655172413793,\n*            "vertical": 1015.5172413793102\n*          },\n*          ...\n*        ],\n*        "tilematrix": [\n*          {\n*            "horizontal": 3.574084051724138,\n*            "vertical": 3.9668642241379306\n*          },\n*          ...\n*        ],\n*        "gcrs": {\n*          "horizontal": -85.62509797700041,\n*          "vertical": 52.14641630380798\n*        },\n*        "pcrs": {\n*          "horizontal": 446541.0380154103,\n*          "vertical": 350026.2467191592\n*        }\n*      },\n*      "projection": "CBMTILE",\n*      "zoom": {\n*        "minZoom": 0,\n*        "maxZoom": 25\n*      }\n*    }\n*  }\n*/\n'))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"lat"},"lat"),(0,r.kt)("p",null,"Pour d\xe9finir la latitude : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.lat = 21.4; // rien ne se produit si la valeur n\u2019est pas valide\n")),(0,r.kt)("p",null,"Notez que la valeur fournie n'affecte pas l'\xe9tat de la visionneuse de carte,\nsauf au chargement du document, ou lorsqu'une instance d'un \xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),"\nest construite et ajout\xe9e par programme au DOM. Pour modifier la valeur, utilisez\n",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()")),(0,r.kt)("p",null,"Pour obtenir la latitude :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet latitude = map.lat;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"lon"},"lon"),(0,r.kt)("p",null,"Pour d\xe9finir la longitude :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.lon = 21.4; // rien ne se produit si la valeur n\u2019est pas valide\n")),(0,r.kt)("p",null,"Notez que la valeur fournie n'affecte pas l'\xe9tat de la visionneuse de carte,\nsauf au chargement du document, ou lorsqu'une instance d'un \xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),"\nest construite et ajout\xe9e par programme au DOM. Pour modifier la valeur, utilisez\n",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()")),(0,r.kt)("p",null,"Pour obtenir la longitude :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet longitude = map.lon;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"projection"},"projection"),(0,r.kt)("p",null,"Pour fixer ou modifier la projection:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.projection = \"CBMTILE\"; // rien ne se produit si la projection n\u2019est pas valide ou d\xe9finie\n")),(0,r.kt)("p",null,"Pour obtenir la projection :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet projection = map.projection;\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"zoom"},"zoom"),(0,r.kt)("p",null,"Pour d\xe9finir le niveau de zoom :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.zoom = 3; // rien ne se produit si la valeur n\u2019est pas valide\n")),(0,r.kt)("p",null,"Notez que la valeur fournie n'affecte pas l'\xe9tat de la visionneuse de carte,\nsauf au chargement du document, ou lorsqu'une instance d'un \xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),"\nest construite et ajout\xe9e par programme au DOM. Pour modifier la valeur, utilisez\n",(0,r.kt)("a",{parentName:"p",href:"#zoomTo"},"zoomTo()")),(0,r.kt)("p",null,"Pour obtenir la longitude :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nlet zoom = map.zoom;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"m\xe9thodes"},"M\xe9thodes"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"M\xe9thode"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#back"},"back()")),(0,r.kt)("td",{parentName:"tr",align:null},"Revient \xe0 l\u2019\xe9tat pr\xe9c\xe9dent dans l\u2019historique des mouvements de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#forward"},"forward()")),(0,r.kt)("td",{parentName:"tr",align:null},"Passe au mouvement panoramique suivant dans l\u2019historique de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#reload"},"reload()")),(0,r.kt)("td",{parentName:"tr",align:null},"Efface l\u2019historique des mouvements panoramiques de la carte et retourne \xe0 l\u2019emplacement de d\xe9part.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#toggledebug"},"toggleDebug()")),(0,r.kt)("td",{parentName:"tr",align:null},"Active ou d\xe9sactive le d\xe9bogage de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#viewsource"},"viewSource()")),(0,r.kt)("td",{parentName:"tr",align:null},"Affiche la source de la carte.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#definecustomprojectionoptions"},"defineCustomProjection(options)")),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9finir une projection personnalis\xe9e \xe0 utiliser par la page.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoomtolat-lon-zoom"},"zoomTo(lat, lon, zoom)")),(0,r.kt)("td",{parentName:"tr",align:null},"Survole la carte ou effectue un mouvement panoramique vers un (nouvel) emplacement et \xe0 un autre niveau de zoom.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#zoomtolat-lon-zoom"},"geojson2mapml(json, options)")),(0,r.kt)("td",{parentName:"tr",align:null},"Convertit une caract\xe9ristique GeoJSON ou une cha\xeene ou un objet de collection de caract\xe9ristiques en \xe9l\xe9ment MapML ",(0,r.kt)("inlineCode",{parentName:"td"},"<layer->")," contenant un ou plusieurs \xe9l\xe9ments ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-feature>"),".")))),(0,r.kt)("h3",{id:"back"},"back()"),(0,r.kt)("p",null,"Pour reculer dans l\u2019historique de la carte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.back();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"forward"},"forward()"),(0,r.kt)("p",null,"Pour avancer dans l\u2019historique de la carte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.forward();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"reload"},"reload()"),(0,r.kt)("p",null,"Pour effacer l\u2019historique de la carte et retourner \xe0 l\u2019emplacement initial :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.reload();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"toggledebug"},"toggleDebug()"),(0,r.kt)("p",null,"Pour activer ou d\xe9sactiver le d\xe9bogage de la carte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.toggleDebug();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"viewsource"},"viewSource()"),(0,r.kt)("p",null,"Pour afficher la source de la carte affich\xe9e :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let map = document.querySelector('mapml-viewer');\nmap.viewSource();\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"definecustomprojectionoptions"},"defineCustomProjection(options)"),(0,r.kt)("p",null,"MapML d\xe9finit quelques projections CRS (Syst\xe8me de r\xe9f\xe9rence des coordonn\xe9es) int\xe9gr\xe9es en pav\xe9s, dont la projection Web Mercator (OSMTILE), la projection pseudo-plate carr\xe9e (WGS84) et la grille de pav\xe9s de base du Canada (CBMTILE). "),(0,r.kt)("p",null,"L\u2019\xe9l\xe9ment personnalis\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," fournit l\u2019interface de programmation d\u2019applications (API) personnalis\xe9e des projections, qui vous permet de cr\xe9er vos propres projections et de les utiliser dans l\u2019\xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),', d\xe9fini avec la syntaxe "proj4" \xe9tendue du langage JSON et prise en charge par la biblioth\xe8que proj4js.'),(0,r.kt)("p",null,"Nous n\u2019examinerons pas l\u2019\xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>")," lui-m\xeame ici, sauf pour dire que l\u2019attribut ",(0,r.kt)("inlineCode",{parentName:"p"},"projection")," de la carte doit avoir la m\xeame valeur que le membre ",(0,r.kt)("inlineCode",{parentName:"p"},"projection")," de l\u2019objet JSON que vous transmettez \xe0 la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"defineCustomProjection")," de l\u2019API personnalis\xe9e des projections, et que chaque \xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<layer->")," pr\xe9sent dans la carte doit comporter une d\xe9claration et \xeatre programm\xe9 dans ce syst\xe8me de coordonn\xe9es pour s\u2019afficher correctement."),(0,r.kt)("p",null,"L\u2019API personnalis\xe9e des projections est fournie par l\u2019\xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"p"},"<mapml-viewer>"),". Dans un navigateur, elle peut \xeatre d\xe9finie sur l\u2019objet de fen\xeatre. Toutefois, parce que des \xe9l\xe9ments personnalis\xe9s utilisent des modules ES6, il est pratique de la placer sur l\u2019\xe9l\xe9ment de mappage qui l\u2019utilise."),(0,r.kt)("p",null,"Pour que l\u2019appel de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"defineCustomProjection")," r\xe9ussisse, vous devez coder la m\xe9thode de projection et les param\xe8tres de projection sous la forme de membres d\u2019une cha\xeene JSON. La marche \xe0 suivre pour ce faire n\u2019est pas toujours simple, mais diverses ressources peuvent vous faciliter la vie, comme ",(0,r.kt)("a",{parentName:"p",href:"https://spatialreference.org"},"https://spatialreference.org")," o\xf9 vous pouvez obtenir la version proj4 de pratiquement n\u2019importe quelle d\xe9finition SRC."),(0,r.kt)("p",null,'N\u2019oubliez pas de mettre le nom du membre entre guillemets, suivi d\u2019un deux-points. Par exemple, "projection": "NOM_DE_MA_PROJECTION". Les valeurs comportant une cha\xeene sont \xe9galement ins\xe9r\xe9es dans des guillemets, et les nombres et tableaux suivent la ',"[syntaxe JSON]"," normale (",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Learn/JavaScript/Objects/JSON"},"https://developer.mozilla.org/fr/docs/Learn/JavaScript/Objects/JSON"),")."),(0,r.kt)("p",null,"La d\xe9finition d\u2019une projection personnalis\xe9e requiert plusieurs membres."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"projection"),' - Nom (cha\xeene de caract\xe8res) donn\xe9 \xe0 votre projection. Nous recommandons d\u2019utiliser uniquement des majuscules pour mettre en \xe9vidence le nom des projections. Vous ne pouvez pas mettre un deux-points (":") dans le nom, car ceci cr\xe9erait une confusion avec celui des listes de codes URI EPSG: ou ogc:. En effet, nous d\xe9finissons ici une projection CRS qui comporte des param\xe8tres propres au mappage en ligne, dont nous parlerons plus loin.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"proj4string")," - Cette cha\xeene \xe9tant trait\xe9e par ",(0,r.kt)("a",{parentName:"li",href:"http://proj4js.org/"},"proj4js"),", il faut fournir les param\xe8tres d\u2019une m\xe9thode de projection prise en charge par cette biblioth\xe8que et dans un format compatible avec celle-ci."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"origin")," - Tableau \xe0 deux nombres qui repr\xe9sentent l\u2019origine de la grille de pav\xe9s en coordonn\xe9es du syst\xe8me de coordonn\xe9es projet\xe9es, dont les unit\xe9s sont habituellement des m\xe8tres. L\u2019origine se trouve toujours dans le coin sup\xe9rieur gauche de la grille de pav\xe9s, et les num\xe9ros de colonnes et de rang\xe9es augmentent de fa\xe7on s\xe9quentielle, respectivement vers la droite et vers le bas, comme le pr\xe9voit la norme du service Web des pav\xe9s cartographiques (SWPC).  "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resolutions")," - Tableau de nombres, tri\xe9s selon leur taille en m\xe8tres en ordre d\xe9croissant, des dimensions \xab r\xe9elles \xbb d\u2019un pixel carr\xe9. La r\xe9solution est calcul\xe9e sur la base d\u2019une taille de pixel nominale \xe9tablie \xe0 0,28 mm, telle que d\xe9finie par la norme SWPC. PRENEZ NOTE QUE LES SERVICES DE PAV\xc9S DE L\u2019ENVIRONMENTAL SYSTEMS RESEARCH INSTITUTE (ESRI) NE SE SERVENT HABITUELLEMENT PAS DE CETTE VALEUR PARCE QU\u2019ILS UTILISENT UNE TAILLE NOMINALE DE 96 POINTS PAR POUCES (PPP) (r\xe9glable). Puisque l\u2019\xe9chelle varie dans l\u2019\xe9tendue de tout syst\xe8me de coordonn\xe9es projet\xe9es, la r\xe9solution en pixels n\u2019est habituellement valide que l\xe0 o\xf9 les dimensions sont limit\xe9es, par exemple le long de l\u2019\xe9quateur dans la projection Web Mercator. Les endroits o\xf9 la r\xe9solution en pixels est valide changent en fonction de la m\xe9thode et des param\xe8tres de la projection. Si vous voulez utiliser votre projection personnalis\xe9e avec un service de pav\xe9s existants, l\u2019ensemble de r\xe9solutions doit correspondre \xe0 celui des pav\xe9s dans un cache."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bounds")," - Tableau compos\xe9 de deux tableaux de paires de coordonn\xe9es, qui d\xe9finit une zone de d\xe9limitation autour d\u2019une partie du syst\xe8me de r\xe9f\xe9rence des coordonn\xe9es projet\xe9es, habituellement en m\xe8tres. Les requ\xeates doivent \xeatre valides, la latitude et la longitude \xe9tant d\xe9finies \xe0 l\u2019int\xe9rieur de ces limites. Les requ\xeates visant des cartes, des pav\xe9s et des transformations de coordonn\xe9es qui d\xe9passent ces limites ne seront pas ex\xe9cut\xe9es pour \xe9liminer le trafic redondant et les erreurs.  "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tilesize")," - Les pav\xe9s sont toujours carr\xe9s et ont habituellement 256 pixels d\u2019ar\xeate, mais vous pouvez ajuster cette dimension par un nombre entier. Les nombres 256, 512, 1024, 2048 ou 4096 devraient tous fonctionner.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"zoomtolat-lon-zoom"},"zoomTo(lat, lon, zoom)"),(0,r.kt)("p",null,"Pour d\xe9placer le centre de la carte et modifier le niveau de zoom :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var options = {\n  enableHighAccuracy: true,\n  timeout: 5000,\n  maximumAge: 0\n};\n\nfunction success(pos) {\n  var crd = pos.coords;\n\n  let map = document.querySelector('mapml-viewer');\n  map.zoomTo(crd.latitude,crd.longitude, 17); // zoom cod\xe9 en dur\n  // peut calculer le niveau de zoom en fonction du degr\xe9 de pr\xe9cision de la position\n  console.log(`Plus ou moins ${crd.accuracy} m\xe8tres.`);\n}\n\nfunction error(err) {\n  console.warn(`ERROR(${err.code}): ${err.message}`);\n}\n\nnavigator.geolocation.getCurrentPosition(success, error, options);\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"geojson2mapmljson-options"},"geojson2mapml(json, options)"),(0,r.kt)("p",null,"Convertit une caract\xe9ristique GeoJSON ou une cha\xeene ou un objet de collection de caract\xe9ristiques en \xe9l\xe9ment MapML ",(0,r.kt)("inlineCode",{parentName:"p"},"<layer->")," contenant un ou plusieurs \xe9l\xe9ments ",(0,r.kt)("inlineCode",{parentName:"p"},"<map-feature>"),"."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Jetez un coup d\u2019\u0153il \xe0 ",(0,r.kt)("a",{parentName:"p",href:"https://maps4html.org/experiments/api/custom-map-ui/geoname-search-ui.html"},"cette application")," au moyen de l\u2019API geojson2mapml!")),(0,r.kt)("h4",{id:"param\xe8tres"},"Param\xe8tres"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<String","\xa0","|","\xa0","Object>","\xa0","json"),(0,r.kt)("td",{parentName:"tr",align:null},"Cha\xeene ou objet GeoJSON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Options ","<","Object",">"),(0,r.kt)("td",{parentName:"tr",align:null},"Ensemble de paires de cl\xe9s ou de valeurs qui personnalise la couche de sortie MapML. Toutes les options sont facultatives et d\xe9crites ci-apr\xe8s.")))),(0,r.kt)("h4",{id:"options"},"Options"),(0,r.kt)("p",null,"<","Object",">"," Ensemble de paires de cl\xe9s ou de valeurs qui personnalise la couche de sortie MapML. Toutes les options sont facultatives et d\xe9crites ci-apr\xe8s."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"label")),(0,r.kt)("td",{parentName:"tr",align:null},"<String",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"json.name"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"json.title"),' ou "Layer"'),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9finit la ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/layers/layer/#label"},"label")," de la couche de sortie.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"projection")),(0,r.kt)("td",{parentName:"tr",align:null},"<String",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"OSMTILE")),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9finit la ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/elements/mapml-viewer/#projection"},"projection")," de la couche de sortie. Les valeurs d\xe9finies incluent : ",(0,r.kt)("inlineCode",{parentName:"td"},"OSMTILE"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"CBMTILE"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"WGS84"),", and ",(0,r.kt)("inlineCode",{parentName:"td"},"APSTILE"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"caption")),(0,r.kt)("td",{parentName:"tr",align:null},"<String","\xa0","|","\xa0","Function",">"),(0,r.kt)("td",{parentName:"tr",align:null},"Utilise la valeur ",(0,r.kt)("inlineCode",{parentName:"td"},"label")),(0,r.kt)("td",{parentName:"tr",align:null},"Fonction qui accepte la caract\xe9ristique JSON et retourne une cha\xeene, OU une cha\xeene qui est le nom d\u2019une propri\xe9t\xe9 \xe0 mapper sur ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/elements/feature/#map-featurecaption"},"featurecaption"),". Si aucune propri\xe9t\xe9 associ\xe9e n\u2019est trouv\xe9e, la cha\xeene fournie sert de valeur de la l\xe9gende de la caract\xe9ristique. Voir la section ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"Utilisation des options de base")," pour un exemple.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{id:"option-properties"},(0,r.kt)("inlineCode",{parentName:"td"},"properties"))),(0,r.kt)("td",{parentName:"tr",align:null},"<Function","\xa0","|","\xa0","String","\xa0","|","\xa0","HTMLElement",">"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"Les propri\xe9t\xe9s seront mapp\xe9es \xe0 un ",(0,r.kt)("a",{parentName:"em",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"},"table")," HTML.")),(0,r.kt)("td",{parentName:"tr",align:null},"Pr\xe9cise la fa\xe7on dont les propri\xe9t\xe9s sont mapp\xe9es. <Function",">"," - Fonction qui accepte un argument \u2013 l\u2019objet GeoJSON feature \u2013 et qui doit retourner un HTMLElement qui devient l\u2019unique \xe9l\xe9ment-enfant de <properties",">",". <String",">"," - Cha\xeene qui sera analys\xe9e syntaxiquement et utilis\xe9e comme unique \xe9l\xe9ment-enfant de ",(0,r.kt)("inlineCode",{parentName:"td"},"<properties>")," avec toutes les caract\xe9ristiques. <HTMLElement",">"," - \xc9l\xe9ment qui servira d\u2019unique \xe9l\xe9ment- enfant de ",(0,r.kt)("inlineCode",{parentName:"td"},"<properties>")," avec toutes les caract\xe9ristiques. Voir la section ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"utilisation des options de base")," pour un exemple.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"geometryFunction")),(0,r.kt)("td",{parentName:"tr",align:null},"<Function",">"),(0,r.kt)("td",{parentName:"tr",align:null},"La g\xe9om\xe9trie ",(0,r.kt)("em",{parentName:"td"},"MapML reproduit la valeur g\xe9om\xe9trique GeoJSON")),(0,r.kt)("td",{parentName:"tr",align:null},"<Function",">"," Fonction pour modifier les ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/elements/geometry/#child-elements"},"descendants g\xe9n\xe9r\xe9s")," de ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," qui peut ajouter des classes, ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/other-elements/map-a/"},"hyperlinks")," et des ",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/other-elements/span/"},"spans")," \xe0 l\u2019instance. Un \xe9l\xe9ment ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," simple est cr\xe9\xe9 par d\xe9faut. La fonction accepte deux arguments : l\u2019",(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/web-map-doc/docs/elements/geometry/#child-elements"},"\xe9l\xe9ment-enfant g\xe9n\xe9r\xe9")," de ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>")," et ",(0,r.kt)("a",{parentName:"td",href:"https://www.rfc-editor.org/rfc/rfc7946#section-3.2"},"l\u2019objet de la caract\xe9ristique JSON")," pour retourner un \xe9l\xe9ment-enfant modifi\xe9 de ",(0,r.kt)("inlineCode",{parentName:"td"},"<map-geometry>"),". Voir la section ",(0,r.kt)("a",{parentName:"td",href:"#basic-options-usage"},"Utilisation des options de base")," pour un exemple.")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"\xe9v\xe9nements"},"\xc9v\xe9nements"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Nom de l\u2019\xe9v\xe9nement"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"layerchange"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsqu\u2019une couche change de src, habituellement lorsque l\u2019utilisateur clique sur un lien.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"load"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 apr\xe8s que le contenu de toutes les couches a \xe9t\xe9 charg\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"click"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque la carte re\xe7oit les \xe9v\xe9nements mousedown et mouseup")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dblclick"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque l\u2019utilisateur double-clique sur la carte ou touche celle-ci")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mousemove"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 \xe0 r\xe9p\xe9tition lorsque le pointeur de la souris est d\xe9plac\xe9 sur la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseover"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 une fois lorsque le pointeur de la souris est plac\xe9 sur la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseout"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 une fois lorsque le pointeur de la souris sort de la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mousedown"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque l\u2019utilisateur appuie sur le bouton principal de la souris alors que le pointeur de la souris se trouve sur la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mouseup"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque l\u2019utilisateur rel\xe2che le bouton principal de la souris alors que le pointeur de la souris se trouve sur la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"movestart"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 avant que la carte commence \xe0 bouger ou que la fen\xeatre d\u2019affichage change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"move"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 \xe0 r\xe9p\xe9tition lorsque la carte bouge")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"moveend"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque la carte ne bouge plus")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoomstart"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 avant que le niveau de zoom de la carte change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoom"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 \xe0 r\xe9p\xe9tition lorsque le niveau de zoom de la carte change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zoomend"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 apr\xe8s que le niveau de zoom de la carte a chang\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"preclick"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 avant que l\u2019utilisateur clique sur la carte")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"contextmenu"),(0,r.kt)("td",{parentName:"tr",align:null},"D\xe9clench\xe9 lorsque l\u2019utilisateur fait un clic droit sur la carte ou touche celle-ci")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"exemples"},"Exemples"),(0,r.kt)("h3",{id:"geojson2mapml"},"geojson2mapml"),(0,r.kt)("h4",{id:"utilisation-des-options-de-base"},"Utilisation des options de base"),(0,r.kt)("p",null,"Utilisation de chaque option en contexte"),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"label",label:"label",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="option d\u2019\xe9tiquette geojson2mapml"',title:'"option',"d\u2019\xe9tiquette":!0,'geojson2mapml"':!0},'geojson2mapml(json, {label: "Centre-ville d\u2019Ottawa"});\n'))),(0,r.kt)(o.Z,{value:"projection",label:"projection",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml projection option"',title:'"geojson2mapml',projection:!0,'option"':!0},'geojson2mapml(json, {projection: "CBMTILE"});\n'))),(0,r.kt)(o.Z,{value:"caption",label:"caption",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="option de l\xe9gende geojson2mapml \u2013 valeur contenant une fonction"',title:'"option',de:!0,"l\xe9gende":!0,geojson2mapml:!0,"\u2013":!0,valeur:!0,contenant:!0,une:!0,'fonction"':!0},'// fonction de l\xe9gende\ngeojson2mapml(json, {caption: function(feature) {\n    return feature.properties.desc + ", not a Polygon";\n    }\n});\n// valeur de la cha\xeene de l\u2019option de l\xe9gende qui renvoie \xe0 un nom de propri\xe9t\xe9\ngeojson2mapml(json, {caption: "desc"});\n'))),(0,r.kt)(o.Z,{value:"properties",label:"properties",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml properties option - function-valued"',title:'"geojson2mapml',properties:!0,option:!0,"-":!0,'function-valued"':!0},'// fonction de propri\xe9t\xe9s\ngeojson2mapml(json, {properties: function(feature) {\n    let parser = new DOMParser();\n    return parser.parseFromString("<h1>" + feature.properties.desc + "propri\xe9t\xe9 de</h1>", "text/html").body.firstChild;\n    }\n});\n// option de propri\xe9t\xe9s \u2013 valeur contenant une cha\xeene \u2013 assurez-vous de nettoyer les cha\xeenes fournies par les utilisateurs\ngeojson2mapml(json, {properties: "<p>Cette propri\xe9t\xe9 a \xe9t\xe9 ajout\xe9e \xe0 l\u2019aide d\u2019une cha\xeene de propri\xe9t\xe9s </p>"});\n'))),(0,r.kt)(o.Z,{value:"geometryFunction",label:"geometryFunction",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="geojson2mapml geometryFunction option"',title:'"geojson2mapml',geometryFunction:!0,'option"':!0},'let options = {\n                geometryFunction: function (g, f) {\n                  g.setAttribute("class", f.properties.class);\n                  return g;}\n              };\ngeojson2mapml(json, options);\n')))),(0,r.kt)("h4",{id:"cha\xeene-doptions"},"Cha\xeene d\u2019options"),(0,r.kt)("p",null,"Exemple montrant comment utiliser des cha\xeenes pour d\xe9finir les options ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"projection"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"caption")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"properties"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n    "name": "Nom par d\xe9faut",\n    "type": "Feature",\n    "geometry": {\n        "type": "Point",\n        "coordinates": [-75.6916809,45.4186964]\n    },\n    "properties": {"desc": "Ceci est un point"}\n};\n\n// GeoJSON \xe0 MapML\nlet output = map.geojson2mapml(json, {label: "Exemple 1", projection: "CBMTILE", caption: "desc", properties: "<h3>Ceci est un en-t\xeate de propri\xe9t\xe9</h3>"});\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Cliquez pour afficher la sortie HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Example 1" checked="">\n   <map-meta name="projection" content="CBMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>Ceci est un point</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <h3>Ceci est un en-t\xeate de propri\xe9t\xe9</h3>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("h4",{id:"fonction-doptions"},"Fonction d\u2019options"),(0,r.kt)("p",null,"Exemple montrant comment les fonctions peuvent servir \xe0 d\xe9finir les options ",(0,r.kt)("inlineCode",{parentName:"p"},"caption")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"properties"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n    "name": "Nom par d\xe9faut",\n    "type": "Feature",\n    "geometry": {\n        "type": "Point",\n        "coordinates": [-75.6916809,45.4186964]\n    },\n    "properties": {"desc": "Ceci est un point"}\n};\n\n// function to set caption\nlet cap = function c(j) {\n  let str = "Ce point se trouve \xe0 : (" + j.geometry.coordinates[0] + ", " + j.geometry.coordinates[1] + ").";\n  return str;\n}\n\n// fonction pour d\xe9finir des propri\xe9t\xe9s\nlet prop = function f(p) {\n  let parser = new DOMParser();\n  return parser.parseFromString("<h1>" + p.properties.desc + "\'s property</h1>", "text/html").body.firstChild;\n}\n\n// GeoJSON \xe0 MapML\nlet output = map.geojson2mapml(json, {label: "Exemple 2", caption: cap, properties: prop});\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Cliquez pour afficher la sortie HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Example 2" checked="">\n   <map-meta name="projection" content="OSMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>Ce point se trouve \xe0 : (-75.6916809, 45.4186964).</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <h1>Ceci est une propri\xe9t\xe9 du point</h1>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("h4",{id:"options-par-d\xe9faut"},"Options par d\xe9faut"),(0,r.kt)("p",null,"Exemple montrant la sortie par d\xe9faut lorsqu\u2019aucune option n\u2019est fournie."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'let map = document.querySelector(\'mapml-viewer\');\nlet json = {\n "title": "G\xe9om\xe9trie du point",\n "bbox": [-75.916809, 45.886964, -75.516809, 45.26964],\n "type": "FeatureCollection",\n "features": [{\n     "type": "Feature",\n     "geometry": {\n         "type": "Point",\n         "coordinates": [-75.6916809, 45.4186964]\n     },\n     "properties": {\n         "prop0": "Ceci est un point"\n     }\n }]\n};\n\n// GeoJSON \xe0 MapML\nlet output = map.geojson2mapml(json);\n')),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Cliquez pour afficher la sortie HTMLElement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="G\xe9om\xe9trie du point" checked="">\n   <map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta>\n   <map-meta name="projection" content="OSMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>G\xe9om\xe9trie du point</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <table>\n            <thead>\n               <tr>\n                  <th role="columnheader" scope="col">Property name</th>\n                  <th role="columnheader" scope="col">Property value</th>\n               </tr>\n            </thead>\n            <tbody>\n               <tr>\n                  <th scope="row">prop0</th>\n                  <td itemprop="prop0">This is a Point</td>\n               </tr>\n            </tbody>\n         </table>\n      </map-properties>\n   </map-feature>\n</layer->\n'))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"definecustomprojection"},"defineCustomProjection"),(0,r.kt)("h4",{id:"basic-options-usage"},"Basic options usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<!doctype html>\n<html lang="fr">\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <title>Exemple d\'un projection personnalis\xe9e</title>\n  <script type="module" src="web-map/mapml-viewer.js"><\/script>\n  <script type="module">\n    let customProjectionDefinition = `{\n      "projection": "ATLAS_POLAR_MAP",\n      "proj4string" : "+proj=aeqd +lat_0=90 +lon_0=-90 +x_0=0 +y_0=0 +ellps=sphere +units=m +no_defs +type=crs",\n      "origin" : [-20015200,20015200],\n      "resolutions" :  [33073,16536.5,8268.246,4134.123,2067.061,1033.531,516.765],\n      "bounds" : [[4979939,-4846977],[-5139071,3980038]],\n      "tilesize" : 256\n      }`;\n    let map = document.querySelector("mapml-viewer");\n    let cProjection = map.defineCustomProjection(customProjectionDefinition);    \n    map.projection = cProjection;\n  <\/script>\n</head>\n<body>\n  <mapml-viewer projection="ATLAS_POLAR_MAP" zoom="2" lat="83.48919" lon="-87.7687" controls>\n    <layer- label="Carte polaire murale de l\u2019Atlas du Canada" checked>\n    <map-link rel="license" title="Plateforme g\xe9ospatiale f\xe9d\xe9rale canadienne" href="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN/MapServer/"></map-link>\n      <map-extent units="ATLAS_POLAR_MAP">\n        <map-input type="zoom" name="z" min="0" max="6" value="6" ></map-input>\n        <map-input type="location" name="x" axis="column" units="tilematrix" min="116" max="186"></map-input>\n        <map-input type="location" name="y" axis="row" units="tilematrix" min="125" max="184"></map-input>\n        <map-link rel="tile" tref="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN/MapServer/tile/{z}/{y}/{x}/"></map-link>\n        <map-link rel="tile" tref="https://geoappext.nrcan.gc.ca/arcgis/rest/services/FGP/NCR_RCN_A/MapServer/tile/{z}/{y}/{x}/"></map-link>\n      </map-extent>\n    </layer->\n  </mapml-viewer>\n</body>\n</html>\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"sp\xe9cifications"},"Sp\xe9cifications"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Sp\xe9cification"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://maps4html.org/MapML/spec/#dom-htmlmapmlviewerelement"},"HTMLMapmlViewerElement"))))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"exigences"},"Exigences"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/Maps4HTML/HTML-Map-Element-UseCases-Requirements/issues/new?title=-SUMMARIZE+THE+PROBLEM-&body=-DESCRIBE+THE+PROBLEM-"},"Signaler les probl\xe8mes li\xe9s \xe0 ces exigences sur GitHub")),(0,r.kt)("p",null,(0,r.kt)("b",null,(0,r.kt)("span",{class:"requirement"},"exigence"),(0,r.kt)("span",{class:"enhancement"},"am\xe9lioration"),(0,r.kt)("span",{class:"impractical"},"peu pratique"),(0,r.kt)("span",{class:"undecided"},"ind\xe9cis"),(0,r.kt)("span",{class:"discussion"},"en cours de discussion"))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Sp\xe9c."),(0,r.kt)("th",{parentName:"tr",align:"center"},"Visualiseur"),(0,r.kt)("th",{parentName:"tr",align:"center"},"API"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#propri%C3%A9t%C3%A9s"},(0,r.kt)("strong",{parentName:"a"},"Propri\xe9t\xe9s"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"complet"),(0,r.kt)("td",{parentName:"tr",align:"center"},"complet"),(0,r.kt)("td",{parentName:"tr",align:"center"},"complet")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"#m%C3%A9thodes"},(0,r.kt)("strong",{parentName:"a"},"M\xe9thodes"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"limit\xe9 *"),(0,r.kt)("td",{parentName:"tr",align:"center"},"complet"),(0,r.kt)("td",{parentName:"tr",align:"center"},"limit\xe9 *")))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Exceptions *"),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Aucune sp\xe9cification ne sera fournie pour les m\xe9thodes toggleDebug() ou viewSource()."),(0,r.kt)("li",null,"La m\xe9thode defineCustomProjection est impl\xe9ment\xe9e, mais ",(0,r.kt)("a",{href:"https://github.com/Maps4HTML/MapML/issues/249"},"n'est pas encore sp\xe9cifi\xe9e")),(0,r.kt)("li",null,"L'API des projections personnalis\xe9es (defineCustomProjection) est en cours de discussion, en particulier le format du param\xe8tre options"),(0,r.kt)("li",null,"La sp\xe9cification du param\xe8tre ",(0,r.kt)("a",{href:"#options"},"options")," de la m\xe9thode geojson2mapml n'est pas d\xe9finitive."))),(0,r.kt)("hr",null),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Maps4HTML/web-map-doc/edit/main/i18n/fr/docusaurus-plugin-content-docs/current/api/mapml-viewer.mdx"},"Modifier cette page sur ",(0,r.kt)("strong",{parentName:"a"},"Github"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://gitter.im/Maps4HTML/chat"},"Discutez avec nous sur ",(0,r.kt)("strong",{parentName:"a"},"Gitter"))))))}k.isMDXComponent=!0}}]);