{"version":3,"file":"map-caption.js","sources":["../src/map-caption.js"],"sourcesContent":["/* \nimplemented for both mapml-viewer and web-map; however web-map does not focus on map element in the browser resulting in NVDA \nnot being able to read out map-caption and stating that it's an interactive map region\n*/\nexport class MapCaption extends HTMLElement {\n    constructor() {\n        super();\n    }\n\n    // called when element is inserted into DOM (setup code)\n    connectedCallback() {\n        if (this.parentElement.nodeName === \"MAPML-VIEWER\" || this.parentElement.nodeName === \"MAP\") {\n            \n            // calls MutationObserver; needed to observe changes to content between <map-caption> tags and update to aria-label\n            let mapcaption = this.parentElement.querySelector('map-caption').textContent;\n\n            this.observer = new MutationObserver(() => {\n                let mapcaptionupdate = this.parentElement.querySelector('map-caption').textContent;\n\n                if (mapcaptionupdate !== mapcaption) {\n                    this.parentElement.setAttribute('aria-label', this.parentElement.querySelector('map-caption').textContent);\n                }\n            });\n\n            this.observer.observe(this, {\n                characterData: true,\n                subtree: true,\n                attributes: true,\n                childList: true\n            });\n            \n            // don't change aria-label if one already exists from user  (checks when element is first created)\n            if (!this.parentElement.hasAttribute('aria-label')) {\n                const ariaLabel = this.textContent;\n                this.parentElement.setAttribute('aria-label', ariaLabel);\n            }\n        }\n    }\n    disconnectedCallback() {\n        this.observer.disconnect();\n    }\n}\n"],"names":["MapCaption","HTMLElement","constructor","super","connectedCallback","this","parentElement","nodeName","let","mapcaption","querySelector","textContent","ariaLabel","observer","MutationObserver","setAttribute","observe","characterData","subtree","attributes","childList","hasAttribute","disconnectedCallback","disconnect"],"mappings":";;MAIaA,mBAAmBC,YAC5BC,cACIC,QAIJC,oBACI,GAAoC,iBAAhCC,KAAKC,cAAcC,UAA+D,QAAhCF,KAAKC,cAAcC,SAAoB,CAGzFC,IAAIC,EAAaJ,KAAKC,cAAcI,cAAc,eAAeC,YAkBjE,IACUC,EAjBVP,KAAKQ,SAAW,IAAIC,iBAAiB,KACVT,KAAKC,cAAcI,cAAc,eAAeC,cAE9CF,GACrBJ,KAAKC,cAAcS,aAAa,aAAcV,KAAKC,cAAcI,cAAc,eAAeC,eAItGN,KAAKQ,SAASG,QAAQX,KAAM,CACxBY,eAAe,EACfC,SAAS,EACTC,YAAY,EACZC,WAAW,IAIVf,KAAKC,cAAce,aAAa,gBAC3BT,EAAYP,KAAKM,YACvBN,KAAKC,cAAcS,aAAa,aAAcH,KAI1DU,uBACIjB,KAAKQ,SAASU,qBAnCTvB"}