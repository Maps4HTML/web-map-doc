{"version":3,"file":"mapml.js","sources":["mapml.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  var StaticTileLayer = L.GridLayer.extend({\n    initialize: function (options) {\n      L.setOptions(this, options);\n      this.zoomBounds = this._getZoomBounds(\n        options.tileContainer,\n        options.maxZoomBound\n      );\n      L.extend(this.options, this.zoomBounds);\n      this._groups = this._groupTiles(\n        this.options.tileContainer.getElementsByTagName('map-tile')\n      );\n      this._bounds = this._getLayerBounds(this._groups, this.options.projection); //stores meter values of bounds\n      this.layerBounds = this._bounds[Object.keys(this._bounds)[0]];\n      for (let key of Object.keys(this._bounds)) {\n        this.layerBounds.extend(this._bounds[key].min);\n        this.layerBounds.extend(this._bounds[key].max);\n      }\n    },\n\n    onAdd: function (map) {\n      this._map = map;\n      L.GridLayer.prototype.onAdd.call(this, this._map);\n      this._handleMoveEnd();\n    },\n\n    getEvents: function () {\n      let events = L.GridLayer.prototype.getEvents.call(this, this._map);\n      this._parentOnMoveEnd = events.moveend;\n      events.moveend = this._handleMoveEnd;\n      events.move = () => {}; //needed to prevent moveend from running\n      return events;\n    },\n\n    isVisible: function () {\n      let mapZoom = this._map.getZoom();\n      let zoomLevel = mapZoom;\n      zoomLevel =\n        zoomLevel > this.options.maxNativeZoom\n          ? this.options.maxNativeZoom\n          : zoomLevel;\n      zoomLevel =\n        zoomLevel < this.options.minNativeZoom\n          ? this.options.minNativeZoom\n          : zoomLevel;\n      return (\n        mapZoom <= this.zoomBounds.maxZoom &&\n        mapZoom >= this.zoomBounds.minZoom &&\n        this._bounds[zoomLevel] &&\n        this._bounds[zoomLevel].overlaps(\n          M.pixelToPCRSBounds(\n            this._map.getPixelBounds(),\n            this._map.getZoom(),\n            this._map.options.projection\n          )\n        )\n      );\n    },\n\n    //sets the bounds flag of the layer and calls default moveEnd if within bounds\n    //its the zoom level is between the nativeZoom and zoom then it uses the nativeZoom value to get the bound its checking\n    _handleMoveEnd: function (e) {\n      if (!this.isVisible()) return; //onMoveEnd still gets fired even when layer is out of bounds??, most likely need to overrride _onMoveEnd\n      this._parentOnMoveEnd();\n    },\n\n    _isValidTile(coords) {\n      return this._groups[this._tileCoordsToKey(coords)];\n    },\n\n    createTile: function (coords) {\n      let tileGroup = this._groups[this._tileCoordsToKey(coords)] || [],\n        tileElem = document.createElement('map-tile'),\n        tileSize = this.getTileSize();\n      tileElem.setAttribute('col', coords.x);\n      tileElem.setAttribute('row', coords.y);\n      tileElem.setAttribute('zoom', coords.z);\n\n      for (let i = 0; i < tileGroup.length; i++) {\n        let tile = document.createElement('img');\n        tile.width = tileSize.x;\n        tile.height = tileSize.y;\n        tile.alt = '';\n        tile.setAttribute('role', 'presentation');\n        tile.src = tileGroup[i].src;\n        tileElem.appendChild(tile);\n      }\n      return tileElem;\n    },\n\n    _getLayerBounds: function (tileGroups, projection) {\n      let layerBounds = {},\n        tileSize = M[projection].options.crs.tile.bounds.max.x;\n      for (let tile in tileGroups) {\n        let sCoords = tile.split(':'),\n          pixelCoords = {};\n        pixelCoords.x = +sCoords[0] * tileSize;\n        pixelCoords.y = +sCoords[1] * tileSize;\n        pixelCoords.z = +sCoords[2]; //+String same as parseInt(String)\n        if (sCoords[2] in layerBounds) {\n          layerBounds[sCoords[2]].extend(L.point(pixelCoords.x, pixelCoords.y));\n          layerBounds[sCoords[2]].extend(\n            L.point(pixelCoords.x + tileSize, pixelCoords.y + tileSize)\n          );\n        } else {\n          layerBounds[sCoords[2]] = L.bounds(\n            L.point(pixelCoords.x, pixelCoords.y),\n            L.point(pixelCoords.x + tileSize, pixelCoords.y + tileSize)\n          );\n        }\n      }\n      // TODO: optimize by removing 2nd loop, add util function to convert point in pixels to point in pcrs, use that instead then this loop\n      // won't be needed\n      for (let pixelBounds in layerBounds) {\n        let zoom = +pixelBounds;\n        layerBounds[pixelBounds] = M.pixelToPCRSBounds(\n          layerBounds[pixelBounds],\n          zoom,\n          projection\n        );\n      }\n      return layerBounds;\n    },\n\n    _getZoomBounds: function (container, maxZoomBound) {\n      if (!container) return null;\n      // should read zoom information from map-meta (of layer-) instead of the zoom attribute value of map-tile\n      let meta = M._metaContentToObject(\n          this.options._leafletLayer._layerEl\n            .querySelector('map-meta[name=zoom]')\n            .getAttribute('content')\n        ),\n        zoom = {},\n        tiles = container.getElementsByTagName('map-tile');\n      zoom.nativeZoom = +meta.value || 0;\n      zoom.maxNativeZoom = 0;\n      zoom.minNativeZoom = maxZoomBound;\n      for (let i = 0; i < tiles.length; i++) {\n        let lZoom = +tiles[i].getAttribute('zoom');\n        if (!tiles[i].getAttribute('zoom')) lZoom = zoom.nativeZoom;\n        zoom.minNativeZoom = Math.min(zoom.minNativeZoom, lZoom);\n        zoom.maxNativeZoom = Math.max(zoom.maxNativeZoom, lZoom);\n      }\n\n      // currently the min and max zoom bounds of staticTileLayer is set based on map-meta\n      // can be hard coded to only natively zoom out 2 levels, any more and too many tiles are going to be loaded in at one time\n      // it will avoid lagging the users computer, but it will also cause the bug that the initial zoom level of map is inproperly set\n      zoom.minZoom = +meta.min || 0;\n      zoom.maxZoom = +meta.max || maxZoomBound;\n      return zoom;\n    },\n\n    _groupTiles: function (tiles) {\n      let tileMap = {};\n      for (let i = 0; i < tiles.length; i++) {\n        let tile = {};\n        tile.row = +tiles[i].getAttribute('row');\n        tile.col = +tiles[i].getAttribute('col');\n        tile.zoom = +tiles[i].getAttribute('zoom') || this.options.nativeZoom;\n        tile.src = tiles[i].getAttribute('src');\n        let tileCode = tile.col + ':' + tile.row + ':' + tile.zoom;\n        if (tileCode in tileMap) {\n          tileMap[tileCode].push(tile);\n        } else {\n          tileMap[tileCode] = [tile];\n        }\n      }\n      return tileMap;\n    }\n  });\n\n  var staticTileLayer = function (options) {\n    return new StaticTileLayer(options);\n  };\n\n  var LayerControl = L.Control.Layers.extend({\n    /* removes 'base' layers as a concept */\n    options: {\n      autoZIndex: false,\n      sortLayers: true,\n      sortFunction: function (layerA, layerB) {\n        return layerA.options.zIndex < layerB.options.zIndex\n          ? -1\n          : layerA.options.zIndex > layerB.options.zIndex\n          ? 1\n          : 0;\n      }\n    },\n    initialize: function (overlays, options) {\n      L.setOptions(this, options);\n\n      // the _layers array contains objects like {layer: layer, name: \"name\", overlay: true}\n      // the array index is the id of the layer returned by L.stamp(layer) which I guess is a unique hash\n      this._layerControlInputs = [];\n      this._layers = [];\n      this._lastZIndex = 0;\n      this._handlingClick = false;\n\n      for (var i in overlays) {\n        this._addLayer(overlays[i], i, true);\n      }\n    },\n    onAdd: function () {\n      this._initLayout();\n      // Adding event on layer control button\n      L.DomEvent.on(\n        this._container.getElementsByTagName('a')[0],\n        'keydown',\n        this._focusFirstLayer,\n        this._container\n      );\n      L.DomEvent.on(\n        this._container,\n        'contextmenu',\n        this._preventDefaultContextMenu,\n        this\n      );\n      this._update();\n      if (this._layers.length < 1 && !this._map._showControls) {\n        this._container.setAttribute('hidden', '');\n      } else {\n        this._map._showControls = true;\n      }\n      return this._container;\n    },\n    onRemove: function (map) {\n      L.DomEvent.off(\n        this._container.getElementsByTagName('a')[0],\n        'keydown',\n        this._focusFirstLayer,\n        this._container\n      );\n    },\n    addOrUpdateOverlay: function (layer, name) {\n      var alreadyThere = false;\n      for (var i = 0; i < this._layers.length; i++) {\n        if (this._layers[i].layer === layer) {\n          alreadyThere = true;\n          this._layers[i].name = name;\n          // replace the controls with updated controls if necessary.\n          break;\n        }\n      }\n      if (!alreadyThere) {\n        this.addOverlay(layer, name);\n      }\n      if (this._layers.length > 0) {\n        this._container.removeAttribute('hidden');\n        this._map._showControls = true;\n      }\n      return this._map ? this._update() : this;\n    },\n    removeLayer: function (layer) {\n      L.Control.Layers.prototype.removeLayer.call(this, layer);\n      if (this._layers.length === 0) {\n        this._container.setAttribute('hidden', '');\n      }\n    },\n\n    _checkDisabledLayers: function () {},\n\n    // focus the first layer in the layer control when enter is pressed\n    _focusFirstLayer: function (e) {\n      if (\n        e.key === 'Enter' &&\n        this.className ===\n          'leaflet-control-layers leaflet-control leaflet-control-layers-expanded'\n      ) {\n        var elem =\n          this.children[1].children[2].children[0].children[0].children[0]\n            .children[0];\n        if (elem) setTimeout(() => elem.focus(), 0);\n      }\n    },\n\n    // imported from leaflet with slight modifications\n    // for layerControl ordering based on zIndex\n    _update: function () {\n      if (!this._container) {\n        return this;\n      }\n\n      L.DomUtil.empty(this._baseLayersList);\n      L.DomUtil.empty(this._overlaysList);\n\n      this._layerControlInputs = [];\n      var baseLayersPresent,\n        overlaysPresent,\n        i,\n        obj,\n        baseLayersCount = 0;\n\n      // <----------- MODIFICATION from the default _update method\n      // sort the layercontrol layers object based on the zIndex\n      // provided by MapMLLayer\n      if (this.options.sortLayers) {\n        this._layers.sort((a, b) =>\n          this.options.sortFunction(a.layer, b.layer, a.name, b.name)\n        );\n      }\n      // -------------------------------------------------->\n      for (i = 0; i < this._layers.length; i++) {\n        obj = this._layers[i];\n        this._addItem(obj);\n        overlaysPresent = overlaysPresent || obj.overlay;\n        baseLayersPresent = baseLayersPresent || !obj.overlay;\n        baseLayersCount += !obj.overlay ? 1 : 0;\n      }\n\n      // Hide base layers section if there's only one layer.\n      if (this.options.hideSingleBase) {\n        baseLayersPresent = baseLayersPresent && baseLayersCount > 1;\n        this._baseLayersList.style.display = baseLayersPresent ? '' : 'none';\n      }\n\n      this._separator.style.display =\n        overlaysPresent && baseLayersPresent ? '' : 'none';\n\n      return this;\n    },\n\n    _addItem: function (obj) {\n      var layercontrols = obj.layer._layerEl._layerControlHTML;\n      // the input is required by Leaflet...\n      obj.input = layercontrols.querySelector(\n        'input.leaflet-control-layers-selector'\n      );\n\n      this._layerControlInputs.push(obj.input);\n      obj.input.layerId = L.stamp(obj.layer);\n\n      this._overlaysList.appendChild(layercontrols);\n      return layercontrols;\n    },\n\n    //overrides collapse and conditionally collapses the panel\n    collapse: function (e) {\n      // if layer control is not expanded, return\n      if (!this._container.className.includes('expanded')) {\n        return;\n      }\n      // return if layer contextmenu is still open\n      if (\n        !this._map.contextMenu._extentLayerMenu.hidden ||\n        !this._map.contextMenu._layerMenu.hidden\n      ) {\n        return;\n      }\n      if (\n        e.target.tagName === 'SELECT' ||\n        (e.relatedTarget &&\n          e.relatedTarget.parentElement &&\n          (e.relatedTarget.className === 'mapml-contextmenu mapml-layer-menu' ||\n            e.relatedTarget.parentElement.className ===\n              'mapml-contextmenu mapml-layer-menu')) ||\n        (this._map && this._map.contextMenu._layerMenu.style.display === 'block')\n      )\n        return this;\n\n      L.DomUtil.removeClass(this._container, 'leaflet-control-layers-expanded');\n      if (e.originalEvent?.pointerType === 'touch') {\n        this._container._isExpanded = false;\n      }\n      return this;\n    },\n    _preventDefaultContextMenu: function (e) {\n      let latlng = this._map.mouseEventToLatLng(e);\n      let containerPoint = this._map.mouseEventToContainerPoint(e);\n      e.preventDefault();\n      // for touch devices, when the layer control is not expanded,\n      // the layer context menu should not show on map\n      if (!this._container._isExpanded && e.pointerType === 'touch') {\n        this._container._isExpanded = true;\n        return;\n      }\n      this._map.fire('contextmenu', {\n        originalEvent: e,\n        containerPoint: containerPoint,\n        latlng: latlng\n      });\n    }\n  });\n  var layerControl = function (layers, options) {\n    return new LayerControl(layers, options);\n  };\n\n  var FeatureLayer = L.FeatureGroup.extend({\n    /*\n     * M.MapML turns any MapML feature data into a Leaflet layer. Based on L.GeoJSON.\n     *\n     * Used by MapMLLayer to create _mapmlvectors property, used to render features\n     */\n    initialize: function (mapml, options) {\n      /*\n          mapml:\n          1. for query: an array of map-feature elements that it fetches\n          2. for static templated feature: null\n          3. for non-templated feature: layer- (with no src) or mapml file (with src)\n        */\n      // options.extent: when you use a FeatureLayer, you can either get it to calculate the\n      // .layerBounds dynamically (the default), based on adds/removes of features from the layer/\n      // or you can construct it with a bounds (via options.extent),\n      // which will then remain static for the lifetime of the layer\n\n      L.FeatureGroup.prototype.initialize.call(this, null, options);\n      // this.options.static is false ONLY for tiled vector features\n      // this._staticFeature is ONLY true when not used by TemplatedFeaturesLayer\n      // this.options.query true when created by QueryHandler.js\n\n      if (!this.options.tiles) {\n        // not a tiled vector layer\n        this._container = null;\n        if (this.options.query) {\n          this._container = L.DomUtil.create(\n            'div',\n            'leaflet-layer',\n            this.options.pane\n          );\n          // must have leaflet-pane class because of new/changed rule in leaflet.css\n          // info: https://github.com/Leaflet/Leaflet/pull/4597\n          L.DomUtil.addClass(\n            this._container,\n            'leaflet-pane mapml-vector-container'\n          );\n        } else if (this.options._leafletLayer) {\n          this._container = L.DomUtil.create(\n            'div',\n            'leaflet-layer',\n            this.options.pane\n          );\n          L.DomUtil.addClass(\n            this._container,\n            'leaflet-pane mapml-vector-container'\n          );\n          // static mapmlvector should always at the top\n          //        this._container.style.zIndex = 1000;\n        } else {\n          // if the current featureLayer is a sublayer of templatedFeatureLayer,\n          // append <svg> directly to the templated feature container (passed in as options.pane)\n          this._container = this.options.pane;\n          L.DomUtil.addClass(\n            this._container,\n            'leaflet-pane mapml-vector-container'\n          );\n        }\n        L.setOptions(this.options.renderer, { pane: this._container });\n      }\n      if (this.options.query) {\n        this._queryFeatures = mapml.features ? mapml.features : mapml;\n      } else if (!mapml) {\n        // use this.options._leafletLayer to distinguish the featureLayer constructed for initialization and for templated features / tiles\n        if (this.options._leafletLayer) {\n          // this._staticFeature should be set to true to make sure the _getEvents works properly\n          this._features = {};\n          this._staticFeature = true;\n        }\n      }\n    },\n\n    isVisible: function () {\n      let map = this.options.mapEl._map;\n      // if query, isVisible is unconditionally true\n      if (this.options.query) return true;\n      // if the featureLayer is for static features, i.e. it is the mapmlvector layer,\n      // if it is empty, isVisible = false\n      // this._staticFeature: flag to determine if the featureLayer is used by static features only\n      // this._features: check if the current static featureLayer is empty\n      // (Object.keys(this._features).length === 0 => this._features is an empty object)\n      else if (this._staticFeature && Object.keys(this._features).length === 0) {\n        return false;\n      } else {\n        let mapZoom = map.getZoom(),\n          zoomBounds = this.zoomBounds || this.options.zoomBounds,\n          layerBounds = this.layerBounds || this.options.layerBounds,\n          withinZoom = zoomBounds\n            ? mapZoom <= zoomBounds.maxZoom && mapZoom >= zoomBounds.minZoom\n            : false;\n        return (\n          withinZoom &&\n          this._layers &&\n          layerBounds &&\n          layerBounds.overlaps(\n            M.pixelToPCRSBounds(\n              map.getPixelBounds(),\n              mapZoom,\n              map.options.projection\n            )\n          )\n        );\n      }\n    },\n\n    onAdd: function (map) {\n      this._map = map;\n      L.FeatureGroup.prototype.onAdd.call(this, map);\n      if (this._staticFeature) {\n        this._validateRendering();\n      }\n      if (this._queryFeatures)\n        map.on('featurepagination', this.showPaginationFeature, this);\n    },\n    addLayer: function (layerToAdd) {\n      L.FeatureGroup.prototype.addLayer.call(this, layerToAdd);\n      // static FeatureLayer (e.g. MapMLLayer._mapmlvectors) NEVER has a\n      // .layerBounds property, so if there is this.options.layerBounds, don't\n      // go copying it to this.layerBounds.  Same for zoomBounds.\n      // bug alert: it's necessary to create a new bounds object to initialize\n      // this.layerBounds, to avoid changing the layerBounds of the first geometry\n      // added to this layer\n      if (!this.options.layerBounds) {\n        this.layerBounds = this.layerBounds\n          ? this.layerBounds.extend(layerToAdd.layerBounds)\n          : L.bounds(layerToAdd.layerBounds.min, layerToAdd.layerBounds.max);\n\n        if (this.zoomBounds) {\n          if (layerToAdd.zoomBounds.minZoom < this.zoomBounds.minZoom)\n            this.zoomBounds.minZoom = layerToAdd.zoomBounds.minZoom;\n          if (layerToAdd.zoomBounds.maxZoom > this.zoomBounds.maxZoom)\n            this.zoomBounds.maxZoom = layerToAdd.zoomBounds.maxZoom;\n          if (layerToAdd.zoomBounds.minNativeZoom < this.zoomBounds.minNativeZoom)\n            this.zoomBounds.minNativeZoom = layerToAdd.zoomBounds.minNativeZoom;\n          if (layerToAdd.zoomBounds.maxNativeZoom > this.zoomBounds.maxNativeZoom)\n            this.zoomBounds.maxNativeZoom = layerToAdd.zoomBounds.maxNativeZoom;\n        } else {\n          this.zoomBounds = layerToAdd.zoomBounds;\n        }\n      }\n      if (this._staticFeature) {\n        // TODO: validate the use the feature.zoom which is new (was in createGeometry)\n        let featureZoom = layerToAdd.options.mapmlFeature.zoom;\n        if (featureZoom in this._features) {\n          this._features[featureZoom].push(layerToAdd);\n        } else {\n          this._features[featureZoom] = [layerToAdd];\n        }\n        // hide/display features based on the their zoom limits\n        this._validateRendering();\n      }\n      return this;\n    },\n    addRendering: function (featureToAdd) {\n      L.FeatureGroup.prototype.addLayer.call(this, featureToAdd);\n    },\n    onRemove: function (map) {\n      if (this._queryFeatures) {\n        map.off('featurepagination', this.showPaginationFeature, this);\n        delete this._queryFeatures;\n        L.DomUtil.remove(this._container);\n      }\n      L.FeatureGroup.prototype.onRemove.call(this, map);\n      this._map.featureIndex.cleanIndex();\n    },\n\n    removeLayer: function (featureToRemove) {\n      L.FeatureGroup.prototype.removeLayer.call(this, featureToRemove);\n      if (!this.options.layerBounds) {\n        delete this.layerBounds;\n        // this ensures that the <layer->.extent gets recalculated if needed\n        delete this.options._leafletLayer.bounds;\n        delete this.zoomBounds;\n        // this ensures that the <layer->.extent gets recalculated if needed\n        delete this.options._leafletLayer.zoomBounds;\n        delete this._layers[featureToRemove._leaflet_id];\n        this._removeFromFeaturesList(featureToRemove);\n        // iterate through all remaining layers\n        let layerBounds, zoomBounds;\n        let layerIds = Object.keys(this._layers);\n        // re-calculate the layerBounds and zoomBounds for the whole layer when\n        // a feature is permanently removed from the overall layer\n        // bug alert: it's necessary to create a new bounds object to initialize\n        // this.layerBounds, to avoid changing the layerBounds of the first geometry\n        // added to this layer\n        for (let id of layerIds) {\n          let layer = this._layers[id];\n          if (layerBounds) {\n            layerBounds.extend(layer.layerBounds);\n          } else {\n            layerBounds = L.bounds(layer.layerBounds.min, layer.layerBounds.max);\n          }\n          if (zoomBounds) {\n            if (layer.zoomBounds.minZoom < zoomBounds.minZoom)\n              zoomBounds.minZoom = layer.zoomBounds.minZoom;\n            if (layer.zoomBounds.maxZoom > zoomBounds.maxZoom)\n              zoomBounds.maxZoom = layer.zoomBounds.maxZoom;\n            if (layer.zoomBounds.minNativeZoom < zoomBounds.minNativeZoom)\n              zoomBounds.minNativeZoom = layer.zoomBounds.minNativeZoom;\n            if (layer.zoomBounds.maxNativeZoom > zoomBounds.maxNativeZoom)\n              zoomBounds.maxNativeZoom = layer.zoomBounds.maxNativeZoom;\n          } else {\n            zoomBounds = {};\n            zoomBounds.minZoom = layer.zoomBounds.minZoom;\n            zoomBounds.maxZoom = layer.zoomBounds.maxZoom;\n            zoomBounds.minNativeZoom = layer.zoomBounds.minNativeZoom;\n            zoomBounds.maxNativeZoom = layer.zoomBounds.maxNativeZoom;\n          }\n        }\n        // If the last feature is removed, we should remove the .layerBounds and\n        // .zoomBounds properties, so that the FeatureLayer may be ignored\n        if (layerBounds) {\n          this.layerBounds = layerBounds;\n        } else {\n          delete this.layerBounds;\n        }\n        if (zoomBounds) {\n          this.zoomBounds = zoomBounds;\n        } else {\n          delete this.zoomBounds;\n          delete this.options.zoomBounds;\n        }\n      }\n      return this;\n    },\n    /**\n     * Remove the geomtry rendering (an svg g/ M.Geomtry) from the L.FeatureGroup\n     * _layers array, so that it's not visible on the map, but still contributes\n     * to the bounds and zoom limits of the M.FeatureLayer.\n     *\n     * @param {type} featureToRemove\n     * @returns {undefined}\n     */\n    removeRendering: function (featureToRemove) {\n      L.FeatureGroup.prototype.removeLayer.call(this, featureToRemove);\n    },\n    _removeFromFeaturesList: function (feature) {\n      for (let zoom in this._features)\n        for (let i = 0; i < this._features[zoom].length; ++i) {\n          let feature = this._features[zoom][i];\n          if (feature._leaflet_id === feature._leaflet_id) {\n            this._features[zoom].splice(i, 1);\n            break;\n          }\n        }\n    },\n    getEvents: function () {\n      if (this._staticFeature) {\n        return {\n          moveend: this._handleMoveEnd,\n          zoomend: this._handleZoomEnd\n        };\n      }\n      return {};\n    },\n\n    // for query\n    showPaginationFeature: function (e) {\n      if (this.options.query && this._queryFeatures[e.i]) {\n        let feature = this._queryFeatures[e.i];\n        feature._linkEl.shadowRoot.replaceChildren();\n        this.clearLayers();\n        // append all map-meta from mapml document\n        if (feature.meta) {\n          for (let i = 0; i < feature.meta.length; i++) {\n            feature._linkEl.shadowRoot.appendChild(feature.meta[i]);\n          }\n        }\n        feature._linkEl.shadowRoot.appendChild(feature);\n        feature.addFeature(this);\n        e.popup._navigationBar.querySelector('p').innerText =\n          e.i + 1 + '/' + this.options._leafletLayer._totalFeatureCount;\n        e.popup._content\n          .querySelector('iframe')\n          .setAttribute('sandbox', 'allow-same-origin allow-forms');\n        e.popup._content.querySelector('iframe').srcdoc =\n          feature.querySelector('map-properties').innerHTML;\n        // \"zoom to here\" link need to be re-set for every pagination\n        this._map.fire('attachZoomLink', { i: e.i, currFeature: feature });\n        this._map.once(\n          'popupclose',\n          function (e) {\n            this.shadowRoot.innerHTML = '';\n          },\n          feature._linkEl\n        );\n      }\n    },\n\n    _handleMoveEnd: function () {\n      this._removeCSS();\n    },\n\n    _handleZoomEnd: function (e) {\n      // handle zoom end gets called twice for every zoom, this condition makes it go through once only.\n      if (this.zoomBounds) {\n        this._validateRendering();\n      }\n    },\n    /*\n     * _validateRendering prunes the features currently in the _features hashmap (created\n     * by us).  _features categorizes features by zoom, and is used to remove or add\n     * features from the map based on the map-feature min/max getters.  It also\n     * maintains the _map.featureIndex property, which is used to control the tab\n     * order for interactive (static) features currently rendered on the map.\n     * @private\n     *  */\n    _validateRendering: function () {\n      // since features are removed and re-added by zoom level, need to clean the feature index before re-adding\n      if (this._map) this._map.featureIndex.cleanIndex();\n      let map = this._map || this.options._leafletLayer._map;\n      // it's important that we not try to validate rendering if the FeatureLayer\n      // isn't actually  being rendered (i.e. on the map.  the _map property can't\n      // be used because once it's assigned  (by onAdd, above) it's never unassigned.\n      if (!map.hasLayer(this)) return;\n      if (this._features) {\n        for (let zoom in this._features) {\n          for (let k = 0; k < this._features[zoom].length; k++) {\n            let geometry = this._features[zoom][k],\n              renderable = geometry._checkRender(\n                map.getZoom(),\n                this.zoomBounds.minZoom,\n                this.zoomBounds.maxZoom\n              );\n            if (!renderable) {\n              // insert a placeholder in the dom rendering for the geometry\n              // so that it retains its layering order when it is next rendered\n              let placeholder = document.createElement('span');\n              placeholder.id = geometry._leaflet_id;\n              // geometry.defaultOptions.group is the rendered svg g element in sd\n              geometry.defaultOptions.group.insertAdjacentElement(\n                'beforebegin',\n                placeholder\n              );\n              // removing the rendering without removing the feature from the feature list\n              this.removeRendering(geometry);\n            } else if (\n              // checking for _map so we do not enter this code block during the connectedCallBack of the map-feature\n              !map.hasLayer(geometry) &&\n              !geometry._map\n            ) {\n              this.addRendering(geometry);\n              // update the layerbounds\n              let placeholder =\n                geometry.defaultOptions.group.parentNode.querySelector(\n                  `span[id=\"${geometry._leaflet_id}\"]`\n                );\n              placeholder.replaceWith(geometry.defaultOptions.group);\n            }\n          }\n        }\n      }\n    },\n\n    _setZoomTransform: function (center, clampZoom) {\n      var scale = this._map.getZoomScale(this._map.getZoom(), clampZoom),\n        translate = center\n          .multiplyBy(scale)\n          .subtract(this._map._getNewPixelOrigin(center, this._map.getZoom()))\n          .round();\n\n      if (any3d) {\n        L.setTransform(this._layers[clampZoom], translate, scale);\n      } else {\n        L.setPosition(this._layers[clampZoom], translate);\n      }\n    },\n\n    /**\n     * Render a <map-feature> as a Leaflet layer that can be added to a map or\n     * LayerGroup as required.  Kind of a \"factory\" method.\n     *\n     * Uses this.options, so if you need to, you can construct an M.featureLayer\n     * with options set as required\n     *\n     * @param feature - a <map-feature> element\n     * @param {String} fallbackCS - \"gcrs\" | \"pcrs\"\n     * @param {String} tileZoom - the zoom of the map at which the coordinates will exist\n     *\n     * @returns M.Geometry, which is an L.FeatureGroup\n     * @public\n     */\n    createGeometry: function (feature, fallbackCS, tileZoom) {\n      // was let options = this.options, but that was causing unwanted side-effects\n      // because we were adding .layerBounds and .zoomBounds to it before passing\n      // to _createGeometry, which meant that FeatureLayer was sprouting\n      // options.layerBounds and .zoomBounds when it should not have those props\n      let options = Object.assign({}, this.options);\n\n      if (options.filter && !options.filter(feature)) {\n        return;\n      }\n\n      if (feature.classList.length) {\n        options.className = feature.classList.value;\n      }\n      // tileZoom is only used when the map-feature is discarded i.e. for rendering\n      // vector tiles' feature geometries in bulk (in this case only the geomtry\n      // is rendered on a tile-shaped FeatureLayer\n      let zoom = feature.zoom ?? tileZoom,\n        title = feature.querySelector('map-featurecaption');\n      title = title ? title.innerHTML : 'Feature';\n\n      if (feature.querySelector('map-properties')) {\n        options.properties = document.createElement('div');\n        options.properties.classList.add('mapml-popup-content');\n        options.properties.insertAdjacentHTML(\n          'afterbegin',\n          feature.querySelector('map-properties').innerHTML\n        );\n      }\n      let cs =\n        feature.getElementsByTagName('map-geometry')[0]?.getAttribute('cs') ??\n        fallbackCS;\n      // options.layerBounds and options.zoomBounds are set by TemplatedTileLayer._createFeatures\n      // each geometry needs bounds so that it can be a good community member of this._layers\n      if (this._staticFeature || this.options.query) {\n        options.layerBounds = M.extentToBounds(feature.extent, 'PCRS');\n        options.zoomBounds = feature.extent.zoom;\n      }\n      let geometry = this._geometryToLayer(feature, options, cs, +zoom, title);\n      if (geometry && Object.keys(geometry._layers).length !== 0) {\n        // if the layer is being used as a query handler output, it will have\n        // a color option set.  Otherwise, copy classes from the feature\n        if (!geometry.options.color && feature.hasAttribute('class')) {\n          geometry.options.className = feature.getAttribute('class');\n        }\n        geometry.defaultOptions = geometry.options;\n        this.resetStyle(geometry);\n\n        if (options.onEachFeature) {\n          geometry.bindTooltip(title, { interactive: true, sticky: true });\n        }\n        if (feature.tagName.toUpperCase() === 'MAP-FEATURE') {\n          feature._groupEl = geometry.options.group;\n        }\n        return geometry;\n      }\n    },\n\n    resetStyle: function (layer) {\n      var style = this.options.style;\n      if (style) {\n        // reset any custom styles\n        L.Util.extend(layer.options, layer.defaultOptions);\n        this._setLayerStyle(layer, style);\n      }\n    },\n\n    setStyle: function (style) {\n      this.eachLayer(function (layer) {\n        this._setLayerStyle(layer, style);\n      }, this);\n    },\n\n    _setLayerStyle: function (layer, style) {\n      if (typeof style === 'function') {\n        style = style(layer.feature);\n      }\n      if (layer.setStyle) {\n        layer.setStyle(style);\n      }\n    },\n    _removeCSS: function () {\n      let toDelete = this._container.querySelectorAll(\n        'link[rel=stylesheet],style'\n      );\n      for (let i = 0; i < toDelete.length; i++) {\n        this._container.removeChild(toDelete[i]);\n      }\n    },\n    _geometryToLayer: function (feature, vectorOptions, cs, zoom, title) {\n      let geometry = feature.getElementsByTagName('map-geometry')[0],\n        group = [],\n        svgGroup = L.SVG.create('g'),\n        copyOptions = Object.assign({}, vectorOptions);\n      svgGroup._featureEl = feature; // rendered <g> has a reference to map-feature\n      if (geometry) {\n        for (let geo of geometry.querySelectorAll(\n          'map-polygon, map-linestring, map-multilinestring, map-point, map-multipoint'\n        )) {\n          group.push(\n            M.path(\n              geo,\n              Object.assign(copyOptions, {\n                nativeCS: cs,\n                nativeZoom: zoom,\n                projection: this.options.projection,\n                featureID: feature.id,\n                group: svgGroup,\n                wrappers: this._getGeometryParents(geo.parentElement),\n                featureLayer: this,\n                _leafletLayer: this.options._leafletLayer\n              })\n            )\n          );\n        }\n        let groupOptions = {\n            group: svgGroup,\n            mapmlFeature: feature,\n            featureID: feature.id,\n            accessibleTitle: title,\n            onEachFeature: vectorOptions.onEachFeature,\n            properties: vectorOptions.properties,\n            _leafletLayer: this.options._leafletLayer,\n            layerBounds: vectorOptions.layerBounds,\n            zoomBounds: vectorOptions.zoomBounds\n          },\n          collections =\n            geometry.querySelector('map-multipolygon') ||\n            geometry.querySelector('map-geometrycollection');\n        if (collections)\n          groupOptions.wrappers = this._getGeometryParents(\n            collections.parentElement\n          );\n        return M.geometry(group, groupOptions);\n      }\n    },\n\n    _getGeometryParents: function (subType, elems = []) {\n      if (subType && subType.tagName.toUpperCase() !== 'MAP-GEOMETRY') {\n        if (\n          subType.tagName.toUpperCase() === 'MAP-MULTIPOLYGON' ||\n          subType.tagName.toUpperCase() === 'MAP-GEOMETRYCOLLECTION'\n        )\n          return this._getGeometryParents(subType.parentElement, elems);\n        return this._getGeometryParents(\n          subType.parentElement,\n          elems.concat([subType])\n        );\n      } else {\n        return elems;\n      }\n    }\n  });\n  var featureLayer = function (mapml, options) {\n    return new FeatureLayer(mapml, options);\n  };\n\n  var TemplatedTileLayer = L.TileLayer.extend({\n    // a TemplateTileLayer is similar to a L.TileLayer except its templates are\n    // defined by the <map-extent><template/></map-extent>\n    // content found in the MapML document.  As such, the client map does not\n    // 'revisit' the server for more MapML content, it simply fills the map extent\n    // with tiles for which it generates requests on demand (as the user pans/zooms/resizes\n    // the map)\n    initialize: function (template, options) {\n      // _setUpTileTemplateVars needs options.crs, not available unless we set\n      // options first...\n      options.tms = template.tms;\n      // it's critical to have this.options.minZoom, minNativeZoom, maxZoom, maxNativeZoom\n      // because they are used by Leaflet Map and GridLayer, but we\n      // don't need two copies of that info on our options object, so set the\n      // .zoomBounds property (which is used externally), then delete the option\n      // before unpacking the zoomBound object's properties onto this.options.minZ... etc.\n      this.zoomBounds = Object.assign({}, options.zoomBounds);\n      // unpack object to this.options.minZ... etc where minZ... are the props\n      // of the this.zoomBounds object:\n      L.extend(options, this.zoomBounds);\n      L.setOptions(this, options);\n      // _setup call here relies on this.options.minZ.. etc\n      this._setUpTileTemplateVars(template);\n      this._linkEl = options.linkEl;\n      this.extentBounds = this.options.extentBounds;\n      // get rid of duplicate information as it is confusing\n      delete this.options.zoomBounds;\n      delete this.options.extentBounds;\n\n      this._template = template;\n      this._initContainer();\n      // call the parent constructor with the template tref value, per the\n      // Leaflet tutorial: http://leafletjs.com/examples/extending/extending-1-classes.html#methods-of-the-parent-class\n      L.TileLayer.prototype.initialize.call(\n        this,\n        template.template,\n        L.extend(options, { pane: this.options.pane })\n      );\n    },\n    onAdd: function (map) {\n      this.options.pane.appendChild(this._container);\n      L.TileLayer.prototype.onAdd.call(this, map);\n      this._handleMoveEnd();\n    },\n\n    onRemove: function () {\n      L.DomUtil.remove(this._container);\n      // should clean up the container\n      for (let child of this._container.children) {\n        L.DomUtil.remove(child);\n      }\n    },\n\n    getEvents: function () {\n      let events = L.TileLayer.prototype.getEvents.call(this, this._map);\n      this._parentOnMoveEnd = events.moveend;\n      events.moveend = this._handleMoveEnd;\n      return events;\n    },\n\n    isVisible: function () {\n      let map = this._linkEl.getMapEl()._map;\n      let mapZoom = map.getZoom();\n      let mapBounds = M.pixelToPCRSBounds(\n        map.getPixelBounds(),\n        mapZoom,\n        map.options.projection\n      );\n      return (\n        mapZoom <= this.zoomBounds.maxZoom &&\n        mapZoom >= this.zoomBounds.minZoom &&\n        this.extentBounds.overlaps(mapBounds)\n      );\n    },\n\n    _initContainer: function () {\n      if (this._container) {\n        return;\n      }\n\n      this._container = L.DomUtil.create(\n        'div',\n        'leaflet-layer',\n        this.options.pane\n      );\n      L.DomUtil.addClass(this._container, 'mapml-templated-tile-container');\n      this._updateZIndex();\n    },\n\n    _handleMoveEnd: function (e) {\n      if (!this.isVisible()) return;\n      this._parentOnMoveEnd();\n    },\n    createTile: function (coords) {\n      let tileGroup = document.createElement('DIV'),\n        tileSize = this.getTileSize();\n      L.DomUtil.addClass(tileGroup, 'mapml-tile-group');\n      L.DomUtil.addClass(tileGroup, 'leaflet-tile');\n\n      this._template.linkEl.dispatchEvent(\n        new CustomEvent('tileloadstart', {\n          detail: {\n            x: coords.x,\n            y: coords.y,\n            zoom: coords.z,\n            appendTile: (elem) => {\n              tileGroup.appendChild(elem);\n            }\n          }\n        })\n      );\n\n      if (this._template.type.startsWith('image/')) {\n        let tile = L.TileLayer.prototype.createTile.call(\n          this,\n          coords,\n          function () {}\n        );\n        tile.width = tileSize.x;\n        tile.height = tileSize.y;\n        tileGroup.appendChild(tile);\n      } else if (!this._url.includes(M.BLANK_TT_TREF)) {\n        // tiles of type=\"text/mapml\" will have to fetch content while creating\n        // the tile here, unless there can be a callback associated to the element\n        // that will render the content in the alread-placed tile\n        // var tile = L.DomUtil.create('canvas', 'leaflet-tile');\n        this._fetchTile(coords, tileGroup);\n      }\n      return tileGroup;\n    },\n    _mapmlTileReady: function (tile) {\n      L.DomUtil.addClass(tile, 'leaflet-tile-loaded');\n    },\n    // instead of being child of a pane, the TemplatedTileLayers are 'owned' by the group,\n    // and so are DOM children of the group, not the pane element (the MapMLLayer is\n    // a child of the overlay pane and always has a set of sub-layers)\n    getPane: function () {\n      return this.options.pane;\n    },\n    _fetchTile: function (coords, tile) {\n      let url = this.getTileUrl(coords);\n      if (url) {\n        fetch(url, { redirect: 'follow' })\n          .then(function (response) {\n            if (response.status >= 200 && response.status < 300) {\n              return Promise.resolve(response);\n            } else {\n              console.log(\n                'Looks like there was a problem. Status Code: ' + response.status\n              );\n              return Promise.reject(response);\n            }\n          })\n          .then(function (response) {\n            return response.text();\n          })\n          .then((text) => {\n            var parser = new DOMParser();\n            return parser.parseFromString(text, 'application/xml');\n          })\n          .then((mapml) => {\n            this._createFeatures(mapml, coords, tile);\n            this._mapmlTileReady(tile);\n          })\n          .catch((err) => {\n            console.log('Error Creating Tile');\n          });\n      }\n    },\n\n    // TO DO: get rid of this function altogether; see TO DO below re: map-link\n    // shadow root\n    // _parseStylesheetAsHTML parses map-link and map-style from mapml and inserts them to the container as HTML\n    _parseStylesheetAsHTML: function (mapml, base, container) {\n      if (\n        !(container instanceof Element) ||\n        !mapml ||\n        !mapml.querySelector('map-link[rel=stylesheet],map-style')\n      )\n        return;\n\n      if (base instanceof Element) {\n        base = base.getAttribute('href')\n          ? base.getAttribute('href')\n          : document.URL;\n      } else if (!base || base === '' || base instanceof Object) {\n        return;\n      }\n\n      var ss = [];\n      var stylesheets = mapml.querySelectorAll(\n        'map-link[rel=stylesheet],map-style'\n      );\n      for (var i = 0; i < stylesheets.length; i++) {\n        if (stylesheets[i].nodeName.toUpperCase() === 'MAP-LINK') {\n          var href = stylesheets[i].hasAttribute('href')\n            ? new URL(stylesheets[i].getAttribute('href'), base).href\n            : null;\n          if (href) {\n            if (!container.querySelector(\"link[href='\" + href + \"']\")) {\n              var linkElm = document.createElement('link');\n              copyAttributes(stylesheets[i], linkElm);\n              linkElm.setAttribute('href', href);\n              ss.push(linkElm);\n            }\n          }\n        } else {\n          // <map-style>\n          var styleElm = document.createElement('style');\n          copyAttributes(stylesheets[i], styleElm);\n          styleElm.textContent = stylesheets[i].textContent;\n          ss.push(styleElm);\n        }\n      }\n      // insert <link> or <style> elements after the begining  of the container\n      // element, in document order as copied from original mapml document\n      // note the code below assumes hrefs have been resolved and elements\n      // re-parsed from xml and serialized as html elements ready for insertion\n      for (var s = ss.length - 1; s >= 0; s--) {\n        container.insertAdjacentElement('afterbegin', ss[s]);\n      }\n      function copyAttributes(source, target) {\n        return Array.from(source.attributes).forEach((attribute) => {\n          if (attribute.nodeName !== 'href')\n            target.setAttribute(attribute.nodeName, attribute.nodeValue);\n        });\n      }\n    },\n\n    _createFeatures: function (markup, coords, tile) {\n      // TO DO: create a shadow root for the <map-link> that hosts this layer,\n      // populate it with map-tile, map-link and map-style elements that are\n      // fetched.\n      let stylesheets = markup.querySelector(\n        'map-link[rel=stylesheet],map-style'\n      );\n      if (stylesheets) {\n        let base =\n          markup.querySelector('map-base') &&\n          markup.querySelector('map-base').hasAttribute('href')\n            ? new URL(markup.querySelector('map-base').getAttribute('href')).href\n            : markup.URL;\n        this._parseStylesheetAsHTML(markup, base, tile);\n      }\n\n      let svg = L.SVG.create('svg'),\n        g = L.SVG.create('g'),\n        tileSize = this._map.options.crs.options.crs.tile.bounds.max.x,\n        xOffset = coords.x * tileSize,\n        yOffset = coords.y * tileSize;\n\n      let tileFeatures = M.featureLayer(null, {\n        projection: this._map.options.projection,\n        tiles: true,\n        layerBounds: this.extentBounds,\n        zoomBounds: this.zoomBounds,\n        interactive: false,\n        mapEl: this._linkEl.getMapEl()\n      });\n      let fallback = M.getNativeVariables(markup);\n      let features = markup.querySelectorAll('map-feature:has(> map-geometry)');\n      for (let i = 0; i < features.length; i++) {\n        let feature = tileFeatures.createGeometry(\n          features[i],\n          fallback.cs,\n          coords.z\n        );\n        for (let featureID in feature._layers) {\n          let layer = feature._layers[featureID];\n          M.FeatureRenderer.prototype._initPath(layer, false);\n          layer._project(this._map, L.point([xOffset, yOffset]), coords.z);\n          M.FeatureRenderer.prototype._addPath(layer, g, false);\n          M.FeatureRenderer.prototype._updateFeature(layer);\n        }\n      }\n      svg.setAttribute('width', tileSize.toString());\n      svg.setAttribute('height', tileSize.toString());\n      svg.appendChild(g);\n      tile.appendChild(svg);\n    },\n\n    getTileUrl: function (coords) {\n      if (\n        coords.z >= this._template.tilematrix.bounds.length ||\n        !this._template.tilematrix.bounds[coords.z].contains(coords)\n      ) {\n        return '';\n      }\n      var obj = {},\n        linkEl = this._template.linkEl,\n        zoomInput = linkEl.zoomInput;\n      obj[this._template.tilematrix.col.name] = coords.x;\n      obj[this._template.tilematrix.row.name] = coords.y;\n      if (\n        zoomInput &&\n        linkEl.hasAttribute('tref') &&\n        linkEl\n          .getAttribute('tref')\n          .includes(`{${zoomInput.getAttribute('name')}}`)\n      ) {\n        obj[this._template.zoom.name] = this._getZoomForUrl();\n      }\n      obj[this._template.pcrs.easting.left] = this._tileMatrixToPCRSPosition(\n        coords,\n        'top-left'\n      ).x;\n      obj[this._template.pcrs.easting.right] = this._tileMatrixToPCRSPosition(\n        coords,\n        'top-right'\n      ).x;\n      obj[this._template.pcrs.northing.top] = this._tileMatrixToPCRSPosition(\n        coords,\n        'top-left'\n      ).y;\n      obj[this._template.pcrs.northing.bottom] = this._tileMatrixToPCRSPosition(\n        coords,\n        'bottom-left'\n      ).y;\n      for (var v in this._template.tile) {\n        if (\n          ['row', 'col', 'zoom', 'left', 'right', 'top', 'bottom'].indexOf(v) < 0\n        ) {\n          obj[v] = this._template.tile[v];\n        }\n      }\n      if (this._map && !this._map.options.crs.infinite) {\n        let invertedY = this._globalTileRange.max.y - coords.y;\n        if (this.options.tms) {\n          obj[this._template.tilematrix.row.name] = invertedY;\n        }\n        //obj[`-${this._template.tilematrix.row.name}`] = invertedY; //leaflet has this but I dont see a use in storing row and -row as it doesnt follow that pattern\n      }\n      obj.r =\n        this.options.detectRetina && L.Browser.retina && this.options.maxZoom > 0\n          ? '@2x'\n          : '';\n      return L.Util.template(this._url, obj);\n    },\n    _tileMatrixToPCRSPosition: function (coords, pos) {\n      // this is a tile:\n      //\n      //   top-left         top-center           top-right\n      //      +------------------+------------------+\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      + center-left    center               + center-right\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      |                  |                  |\n      //      +------------------+------------------+\n      //   bottom-left     bottom-center      bottom-right\n\n      var map = this._map,\n        crs = map.options.crs,\n        tileSize = this.getTileSize(),\n        nwPoint = coords.scaleBy(tileSize),\n        sePoint = nwPoint.add(tileSize),\n        centrePoint = nwPoint.add(Math.floor(tileSize / 2)),\n        nw = crs.transformation.untransform(nwPoint, crs.scale(coords.z)),\n        se = crs.transformation.untransform(sePoint, crs.scale(coords.z)),\n        cen = crs.transformation.untransform(centrePoint, crs.scale(coords.z)),\n        result = null;\n\n      switch (pos) {\n        case 'top-left':\n          result = nw;\n          break;\n        case 'bottom-left':\n          result = new L.Point(nw.x, se.y);\n          break;\n        case 'center-left':\n          result = new L.Point(nw.x, cen.y);\n          break;\n        case 'top-right':\n          result = new L.Point(se.x, nw.y);\n          break;\n        case 'bottom-right':\n          result = se;\n          break;\n        case 'center-right':\n          result = new L.Point(se.x, cen.y);\n          break;\n        case 'top-center':\n          result = new L.Point(cen.x, nw.y);\n          break;\n        case 'bottom-center':\n          result = new L.Point(cen.x, se.y);\n          break;\n        case 'center':\n          result = cen;\n          break;\n      }\n      return result;\n    },\n    _setUpTileTemplateVars: function (template) {\n      // process the inputs associated to template and create an object named\n      // tile with member properties as follows:\n      // {row: 'rowvarname',\n      //  col: 'colvarname',\n      //  left: 'leftvarname',\n      //  right: 'rightvarname',\n      //  top: 'topvarname',\n      //  bottom: 'bottomvarname'}\n      template.tile = {};\n      var inputs = template.values,\n        crs = this.options.crs.options,\n        east,\n        north,\n        row,\n        col;\n\n      for (var i = 0; i < template.values.length; i++) {\n        var type = inputs[i].getAttribute('type'),\n          units = inputs[i].getAttribute('units'),\n          axis = inputs[i].getAttribute('axis'),\n          name = inputs[i].getAttribute('name'),\n          position = inputs[i].getAttribute('position'),\n          select = inputs[i].tagName.toLowerCase() === 'map-select';\n          inputs[i].getAttribute('value');\n          var min = inputs[i].getAttribute('min'),\n          max = inputs[i].getAttribute('max');\n        if (type === 'location' && units === 'tilematrix') {\n          switch (axis) {\n            case 'column':\n              col = {\n                name: name,\n                min: crs.crs.tilematrix.horizontal.min,\n                max: crs.crs.tilematrix.horizontal.max(crs.resolutions.length - 1)\n              };\n              if (!isNaN(Number.parseFloat(min))) {\n                col.min = Number.parseFloat(min);\n              }\n              if (!isNaN(Number.parseFloat(max))) {\n                col.max = Number.parseFloat(max);\n              }\n              break;\n            case 'row':\n              row = {\n                name: name,\n                min: crs.crs.tilematrix.vertical.min,\n                max: crs.crs.tilematrix.vertical.max(crs.resolutions.length - 1)\n              };\n              if (!isNaN(Number.parseFloat(min))) {\n                row.min = Number.parseFloat(min);\n              }\n              if (!isNaN(Number.parseFloat(max))) {\n                row.max = Number.parseFloat(max);\n              }\n              break;\n            case 'longitude':\n            case 'easting':\n              if (!east) {\n                east = {\n                  min: crs.crs.pcrs.horizontal.min,\n                  max: crs.crs.pcrs.horizontal.max\n                };\n              }\n              if (!isNaN(Number.parseFloat(min))) {\n                east.min = Number.parseFloat(min);\n              }\n              if (!isNaN(Number.parseFloat(max))) {\n                east.max = Number.parseFloat(max);\n              }\n              if (position) {\n                if (position.match(/.*?-left/i)) {\n                  east.left = name;\n                } else if (position.match(/.*?-right/i)) {\n                  east.right = name;\n                }\n              }\n              break;\n            case 'latitude':\n            case 'northing':\n              if (!north) {\n                north = {\n                  min: crs.crs.pcrs.vertical.min,\n                  max: crs.crs.pcrs.vertical.max\n                };\n              }\n              if (!isNaN(Number.parseFloat(min))) {\n                north.min = Number.parseFloat(min);\n              }\n              if (!isNaN(Number.parseFloat(max))) {\n                north.max = Number.parseFloat(max);\n              }\n              if (position) {\n                if (position.match(/top-.*?/i)) {\n                  north.top = name;\n                } else if (position.match(/bottom-.*?/i)) {\n                  north.bottom = name;\n                }\n              }\n              break;\n            // unsuportted axis value\n          }\n        } else if (select) {\n          /*jshint -W104 */\n          const parsedselect = inputs[i].htmlselect;\n          template.tile[name] = function () {\n            return parsedselect.value;\n          };\n        } else if (type === 'hidden') {\n          // needs to be a const otherwise it gets overwritten\n          /*jshint -W104 */\n          const input = inputs[i];\n          template.tile[name] = function () {\n            return input.getAttribute('value');\n          };\n        }\n      }\n      var transformation = this.options.crs.transformation,\n        tileSize = this.options.crs.options.crs.tile.bounds.max.x,\n        scale = L.bind(this.options.crs.scale, this.options.crs),\n        pcrs2tilematrix = function (c, zoom) {\n          return transformation\n            .transform(c, scale(zoom))\n            .divideBy(tileSize)\n            .floor();\n        };\n      if (east && north) {\n        template.pcrs = {};\n        template.pcrs.bounds = L.bounds(\n          [east.min, north.min],\n          [east.max, north.max]\n        );\n        template.pcrs.easting = east;\n        template.pcrs.northing = north;\n      } else if (col && row && !isNaN(template.zoom.initialValue)) {\n        // convert the tile bounds at this zoom to a pcrs bounds, then\n        // go through the zoom min/max and create a tile-based bounds\n        // at each zoom that applies to the col/row values that constrain what tiles\n        // will be requested so that we don't generate too many 404s\n        if (!template.pcrs) {\n          template.pcrs = {};\n          template.pcrs.easting = '';\n          template.pcrs.northing = '';\n        }\n\n        template.pcrs.bounds = M.boundsToPCRSBounds(\n          L.bounds(L.point([col.min, row.min]), L.point([col.max, row.max])),\n          template.zoom.initialValue,\n          this.options.crs,\n          M.axisToCS('column')\n        );\n\n        template.tilematrix = {};\n        template.tilematrix.col = col;\n        template.tilematrix.row = row;\n      }\n\n      if (!template.tilematrix) {\n        template.tilematrix = {};\n        template.tilematrix.col = {};\n        template.tilematrix.row = {};\n      }\n      template.tilematrix.bounds = [];\n      var pcrsBounds = template.pcrs.bounds;\n      // the template should _always_ have a zoom, because we force it to\n      // by first processing the extent to determine the zoom and if none, adding\n      // one and second by copying that zoom into the set of template variable inputs\n      // even if it is not referenced by one of the template's variable references\n      var zmin = this.options.minNativeZoom,\n        zmax = this.options.maxNativeZoom;\n      for (var z = 0; z <= zmax; z++) {\n        template.tilematrix.bounds[z] =\n          z >= zmin\n            ? L.bounds(\n                pcrs2tilematrix(pcrsBounds.min, z),\n                pcrs2tilematrix(pcrsBounds.max, z)\n              )\n            : L.bounds(L.point([-1, -1]), L.point([-1, -1]));\n      }\n    },\n    _clampZoom: function (zoom) {\n      let clamp = L.GridLayer.prototype._clampZoom.call(this, zoom);\n      if (this._template.step > this.options.maxNativeZoom)\n        this._template.step = this.options.maxNativeZoom;\n\n      if (zoom !== clamp) {\n        zoom = clamp;\n      } else {\n        if (zoom % this._template.step !== 0) {\n          zoom = Math.floor(zoom / this._template.step) * this._template.step;\n        }\n      }\n      return zoom;\n    }\n  });\n  var templatedTileLayer = function (template, options) {\n    return new TemplatedTileLayer(template, options);\n  };\n\n  var ExtentLayer = L.LayerGroup.extend({\n    initialize: function (options) {\n      // TODO: should invoke prototype.initialize to trigger the leaflet initialization for proper setup\n      //       otherwise the initialize we provide will override the init that leaflet provides\n      //       but we still need to create the container and the pane by ourselves\n      L.LayerGroup.prototype.initialize.call(this, null, options);\n      this._container = L.DomUtil.create('div', 'leaflet-layer');\n      this._extentEl = this.options.extentEl;\n      this.changeOpacity(this.options.opacity);\n      // TODO: need renaming ex. mapml-extentLayer-container\n      L.DomUtil.addClass(this._container, 'mapml-extentlayer-container');\n    },\n    getEvents: function () {\n      return {\n        zoomstart: this._onZoomStart\n      };\n    },\n    _onZoomStart: function () {\n      this.closePopup();\n    },\n    getContainer: function () {\n      return this._container;\n    },\n    onAdd: function (map) {\n      L.LayerGroup.prototype.onAdd.call(this, map);\n      let pane = this.options.extentEl.parentLayer._layer._container;\n      pane.appendChild(this._container);\n    },\n    redraw: function () {\n      this.eachLayer(function (layer) {\n        layer.redraw();\n      });\n    },\n    //addTo: function(map) {\n    //for(let i = 0; i < this._templates.length; i++){\n    //    this._templates[0].layer.addTo(map);\n    //}\n    //},\n    setZIndex: function (zIndex) {\n      this.options.zIndex = zIndex;\n      this._updateZIndex();\n\n      return this;\n    },\n    _updateZIndex: function () {\n      if (\n        this._container &&\n        this.options.zIndex !== undefined &&\n        this.options.zIndex !== null\n      ) {\n        this._container.style.zIndex = this.options.zIndex;\n      }\n    },\n    onRemove: function () {\n      L.LayerGroup.prototype.onRemove.call(this, this._map);\n      L.DomUtil.remove(this._container);\n    },\n\n    _previousFeature: function (e) {\n      if (this._count + -1 >= 0) {\n        this._count--;\n        this._map.fire('featurepagination', {\n          i: this._count,\n          popup: this\n        });\n      }\n    },\n\n    _nextFeature: function (e) {\n      if (this._count + 1 < this._source._totalFeatureCount) {\n        this._count++;\n        this._map.fire('featurepagination', {\n          i: this._count,\n          popup: this\n        });\n      }\n    },\n\n    changeOpacity: function (opacity) {\n      this._container.style.opacity = opacity;\n      this._extentEl._opacity = opacity;\n      if (this._extentEl._opacitySlider)\n        this._extentEl._opacitySlider.value = opacity;\n    },\n    appendStyleLink: function (mapLink) {\n      if (!mapLink.link) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapLink.link\n      );\n    },\n    _getStylePositionAndNode: function () {\n      return this._container.lastChild &&\n        (this._container.lastChild.nodeName.toUpperCase() === 'SVG' ||\n          this._container.lastChild.classList.contains('mapml-vector-container'))\n        ? { position: 'beforebegin', node: this._container.lastChild }\n        : this._container.lastChild\n        ? { position: 'afterend', node: this._container.lastChild }\n        : { position: 'afterbegin', node: this._container };\n    },\n    appendStyleElement: function (mapStyle) {\n      if (!mapStyle.styleElement) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapStyle.styleElement\n      );\n    }\n  });\n  var extentLayer = function (options) {\n    return new ExtentLayer(options);\n  };\n\n  var TemplatedFeaturesLayer = L.Layer.extend({\n    // this and M.ImageLayer could be merged or inherit from a common parent\n    initialize: function (template, options) {\n      this._template = template;\n      this._container = L.DomUtil.create('div', 'leaflet-layer');\n      L.DomUtil.addClass(this._container, 'mapml-features-container');\n      this.zoomBounds = options.zoomBounds;\n      this.extentBounds = options.extentBounds;\n      // get rid of duplicate info, it can be confusing\n      delete options.zoomBounds;\n      delete options.extentBounds;\n      this._linkEl = options.linkEl;\n      L.setOptions(\n        this,\n        L.extend(options, this._setUpFeaturesTemplateVars(template))\n      );\n    },\n\n    isVisible: function () {\n      let map = this._linkEl.getMapEl()._map;\n      let mapZoom = map.getZoom();\n      let mapBounds = M.pixelToPCRSBounds(\n        map.getPixelBounds(),\n        mapZoom,\n        map.options.projection\n      );\n      return (\n        mapZoom <= this.zoomBounds.maxZoom &&\n        mapZoom >= this.zoomBounds.minZoom &&\n        this.extentBounds.overlaps(mapBounds)\n      );\n    },\n\n    getEvents: function () {\n      var events = {\n        moveend: this._onMoveEnd\n      };\n      return events;\n    },\n    onAdd: function (map) {\n      this._map = map;\n      // this causes the layer (this._features) to actually render...\n      this.options.pane.appendChild(this._container);\n      var opacity = this.options.opacity || 1,\n        container = this._container;\n      if (!this._features) {\n        this._features = M.featureLayer(null, {\n          // pass the vector layer a renderer of its own, otherwise leaflet\n          // puts everything into the overlayPane\n          renderer: M.featureRenderer(),\n          // pass the vector layer the container for the parent into which\n          // it will append its own container for rendering into\n          pane: container,\n          // the bounds will be static, fixed, constant for the lifetime of the layer\n          layerBounds: this.extentBounds,\n          zoomBounds: this.zoomBounds,\n          opacity: opacity,\n          projection: map.options.projection,\n          mapEl: this._linkEl.getMapEl(),\n          onEachFeature: function (properties, geometry) {\n            // need to parse as HTML to preserve semantics and styles\n            var c = document.createElement('div');\n            c.classList.add('mapml-popup-content');\n            c.insertAdjacentHTML('afterbegin', properties.innerHTML);\n            geometry.bindPopup(c, { autoClose: false, minWidth: 108 });\n          }\n        });\n        L.extend(this._features.options, { _leafletLayer: this._features });\n        this._features._layerEl = this._linkEl.getLayerEl();\n      } else {\n        this._features.eachLayer((layer) => layer.addTo(map));\n      }\n      this._onMoveEnd();\n    },\n    onRemove: function () {\n      if (this._features) this._features.eachLayer((layer) => layer.remove());\n      L.DomUtil.remove(this._container);\n    },\n    appendStyleLink: function (mapLink) {\n      if (!mapLink.link) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapLink.link\n      );\n    },\n    _getStylePositionAndNode: function () {\n      return this._container.lastChild &&\n        (this._container.lastChild.nodeName.toUpperCase() === 'SVG' ||\n          this._container.lastChild.classList.contains('mapml-vector-container'))\n        ? { position: 'beforebegin', node: this._container.lastChild }\n        : this._container.lastChild\n        ? { position: 'afterend', node: this._container.lastChild }\n        : { position: 'afterbegin', node: this._container };\n    },\n    appendStyleElement: function (mapStyle) {\n      if (!mapStyle.styleElement) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapStyle.styleElement\n      );\n    },\n    redraw: function () {\n      this._onMoveEnd();\n    },\n\n    _removeCSS: function () {\n      let toDelete = this._container.querySelectorAll(\n        'link[rel=stylesheet],style'\n      );\n      for (let i = 0; i < toDelete.length; i++) {\n        let parent = toDelete[i].parentNode;\n        parent.removeChild(toDelete[i]);\n      }\n    },\n\n    _onMoveEnd: function () {\n      let history = this._map.options.mapEl._history;\n      let current = history[history.length - 1];\n      let previous = history[history.length - 2] ?? current;\n      let step = this._template.step;\n      let mapZoom = this._map.getZoom();\n      let steppedZoom = mapZoom;\n      //If zooming out from one step interval into a lower one or panning, set the stepped zoom\n      if (\n        (step !== '1' &&\n          (mapZoom + 1) % step === 0 &&\n          current.zoom === previous.zoom - 1) ||\n        current.zoom === previous.zoom ||\n        Math.floor(mapZoom / step) * step !==\n          Math.floor(previous.zoom / step) * step\n      ) {\n        steppedZoom = Math.floor(mapZoom / step) * step;\n      }\n      //No request needed if in a step interval (unless panning)\n      else if (mapZoom % this._template.step !== 0) return;\n\n      let scaleBounds = this._map.getPixelBounds(\n        this._map.getCenter(),\n        steppedZoom\n      );\n\n      // should set this.isVisible properly BEFORE return, otherwise will cause layer-.validateDisabled not work properly\n      let url = this._getfeaturesUrl(steppedZoom, scaleBounds);\n      // No request needed if the current template url is the same as the url to request\n      if (url === this._url) return;\n\n      // do cleaning up for new request\n      this._features.clearLayers();\n      // shadow may has not yet attached to <map-extent> for the first-time rendering\n      if (this._linkEl.shadowRoot) {\n        this._linkEl.shadowRoot.innerHTML = '';\n      }\n      this._removeCSS();\n      //Leave the layers cleared if the layer is not visible\n      if (!this.isVisible() && steppedZoom === mapZoom) {\n        this._url = '';\n        return;\n      }\n\n      // TODO add preference with a bit less weight than that for text/mapml; 0.8 for application/geo+json; 0.6\n      var mapml,\n        headers = new Headers({\n          Accept: 'text/mapml;q=0.9,application/geo+json;q=0.8'\n        }),\n        parser = new DOMParser(),\n        featureLayer = this._features,\n        linkEl = this._linkEl,\n        map = this._map,\n        context = this,\n        MAX_PAGES = 10,\n        // TODO: Fetching logic should migrate to map-link\n        _pullFeatureFeed = function (url, limit) {\n          return fetch(url, { redirect: 'follow', headers: headers })\n            .then(function (response) {\n              return response.text();\n            })\n            .then(function (text) {\n              //TODO wrap this puppy in a try/catch/finally to parse application/geo+json if necessary\n              mapml = parser.parseFromString(text, 'application/xml');\n              var base = new URL(\n                mapml.querySelector('map-base')\n                  ? mapml.querySelector('map-base').getAttribute('href')\n                  : url\n              ).href;\n              url = mapml.querySelector('map-link[rel=next]')\n                ? mapml.querySelector('map-link[rel=next]').getAttribute('href')\n                : null;\n              url = url ? new URL(url, base).href : null;\n              let frag = document.createDocumentFragment();\n              let elements = mapml.querySelectorAll('map-head > *, map-body > *');\n              for (let i = 0; i < elements.length; i++) {\n                frag.appendChild(elements[i]);\n              }\n              linkEl.shadowRoot.appendChild(frag);\n              let features = linkEl.shadowRoot.querySelectorAll('map-feature');\n              let featuresReady = [];\n              for (let i = 0; i < features.length; i++) {\n                featuresReady.push(features[i].whenReady());\n              }\n              Promise.allSettled(featuresReady).then(() => {\n                for (let i = 0; i < features.length; i++) {\n                  features[i].addFeature(featureLayer);\n                }\n              });\n              if (url && --limit) {\n                return _pullFeatureFeed(url, limit);\n              }\n            });\n        };\n      this._url = url;\n      _pullFeatureFeed(url, MAX_PAGES)\n        .then(function () {\n          map.addLayer(featureLayer);\n          //Fires event for feature index overlay\n          map.fire('templatedfeatureslayeradd');\n          M.TemplatedFeaturesLayer.prototype._updateTabIndex(context);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    setZIndex: function (zIndex) {\n      this.options.zIndex = zIndex;\n      this._updateZIndex();\n      return this;\n    },\n    _updateTabIndex: function (context) {\n      let c = context || this;\n      for (let layerNum in c._features._layers) {\n        let layer = c._features._layers[layerNum];\n        if (layer._path) {\n          if (layer._path.getAttribute('d') !== 'M0 0') {\n            layer._path.setAttribute('tabindex', 0);\n          } else {\n            layer._path.removeAttribute('tabindex');\n          }\n          if (layer._path.childElementCount === 0) {\n            let title = document.createElement('title');\n            title.innerText = 'Feature';\n            layer._path.appendChild(title);\n          }\n        }\n      }\n    },\n    _updateZIndex: function () {\n      if (\n        this._container &&\n        this.options.zIndex !== undefined &&\n        this.options.zIndex !== null\n      ) {\n        this._container.style.zIndex = this.options.zIndex;\n      }\n    },\n    _getfeaturesUrl: function (zoom, bounds) {\n      if (zoom === undefined) zoom = this._map.getZoom();\n      if (bounds === undefined) bounds = this._map.getPixelBounds();\n      var obj = {};\n      if (this.options.feature.zoom) {\n        obj[this.options.feature.zoom] = zoom;\n      }\n      if (this.options.feature.width) {\n        obj[this.options.feature.width] = this._map.getSize().x;\n      }\n      if (this.options.feature.height) {\n        obj[this.options.feature.height] = this._map.getSize().y;\n      }\n      if (this.options.feature.bottom) {\n        obj[this.options.feature.bottom] = this._TCRSToPCRS(bounds.max, zoom).y;\n      }\n      if (this.options.feature.left) {\n        obj[this.options.feature.left] = this._TCRSToPCRS(bounds.min, zoom).x;\n      }\n      if (this.options.feature.top) {\n        obj[this.options.feature.top] = this._TCRSToPCRS(bounds.min, zoom).y;\n      }\n      if (this.options.feature.right) {\n        obj[this.options.feature.right] = this._TCRSToPCRS(bounds.max, zoom).x;\n      }\n      // hidden and other variables that may be associated\n      for (var v in this.options.feature) {\n        if (\n          ['width', 'height', 'left', 'right', 'top', 'bottom', 'zoom'].indexOf(\n            v\n          ) < 0\n        ) {\n          obj[v] = this.options.feature[v];\n        }\n      }\n      return L.Util.template(this._template.template, obj);\n    },\n    _TCRSToPCRS: function (coords, zoom) {\n      // TCRS pixel point to Projected CRS point (in meters, presumably)\n      var map = this._map,\n        crs = map.options.crs,\n        loc = crs.transformation.untransform(coords, crs.scale(zoom));\n      return loc;\n    },\n    _setUpFeaturesTemplateVars: function (template) {\n      // process the inputs and create an object named \"extent\"\n      // with member properties as follows:\n      // {width: {name: 'widthvarname'}, // value supplied by map if necessary\n      //  height: {name: 'heightvarname'}, // value supplied by map if necessary\n      //  left: {name: 'leftvarname', axis: 'leftaxisname'}, // axis name drives (coordinate system of) the value supplied by the map\n      //  right: {name: 'rightvarname', axis: 'rightaxisname'}, // axis name (coordinate system of) drives the value supplied by the map\n      //  top: {name: 'topvarname', axis: 'topaxisname'}, // axis name drives (coordinate system of) the value supplied by the map\n      //  bottom: {name: 'bottomvarname', axis: 'bottomaxisname'} // axis name drives (coordinate system of) the value supplied by the map\n      //  zoom: {name: 'zoomvarname'}\n      //  hidden: [{name: name, value: value}]}\n\n      var featuresVarNames = { feature: {} },\n        inputs = template.values;\n      featuresVarNames.feature.hidden = [];\n      for (var i = 0; i < inputs.length; i++) {\n        // this can be removed when the spec removes the deprecated inputs...\n        var type = inputs[i].getAttribute('type'),\n          units = inputs[i].getAttribute('units'),\n          axis = inputs[i].getAttribute('axis'),\n          name = inputs[i].getAttribute('name'),\n          position = inputs[i].getAttribute('position');\n          inputs[i].getAttribute('value');\n          var select = inputs[i].tagName.toLowerCase() === 'map-select';\n        if (type === 'width') {\n          featuresVarNames.feature.width = name;\n        } else if (type === 'height') {\n          featuresVarNames.feature.height = name;\n        } else if (type === 'zoom') {\n          featuresVarNames.feature.zoom = name;\n        } else if (\n          type === 'location' &&\n          (units === 'pcrs' || units === 'gcrs')\n        ) {\n          //<input name=\"...\" units=\"pcrs\" type=\"location\" position=\"top|bottom-left|right\" axis=\"northing|easting\">\n          switch (axis) {\n            case 'x':\n            case 'longitude':\n            case 'easting':\n              if (position) {\n                if (position.match(/.*?-left/i)) {\n                  featuresVarNames.feature.left = name;\n                } else if (position.match(/.*?-right/i)) {\n                  featuresVarNames.feature.right = name;\n                }\n              }\n              break;\n            case 'y':\n            case 'latitude':\n            case 'northing':\n              if (position) {\n                if (position.match(/top-.*?/i)) {\n                  featuresVarNames.feature.top = name;\n                } else if (position.match(/bottom-.*?/i)) {\n                  featuresVarNames.feature.bottom = name;\n                }\n              }\n              break;\n          }\n        } else if (select) {\n          /*jshint -W104 */\n          const parsedselect = inputs[i].htmlselect;\n          featuresVarNames.feature[name] = function () {\n            return parsedselect.value;\n          };\n          // projection is deprecated, make it hidden\n        } else {\n          /*jshint -W104 */\n          const input = inputs[i];\n          featuresVarNames.feature[name] = function () {\n            return input.getAttribute('value');\n          };\n        }\n      }\n      return featuresVarNames;\n    }\n  });\n  var templatedFeaturesLayer = function (template, options) {\n    return new TemplatedFeaturesLayer(template, options);\n  };\n\n  var TemplatedImageLayer = L.Layer.extend({\n    initialize: function (template, options) {\n      this._template = template;\n      this._container = L.DomUtil.create('div', 'leaflet-layer');\n      L.DomUtil.addClass(this._container, 'mapml-image-container');\n      this._linkEl = options.linkEl;\n      this.zoomBounds = options.zoomBounds;\n      this.extentBounds = options.extentBounds;\n      // get rid of unused duplicate information that can be confusing\n      delete options.zoomBounds;\n      delete options.extentBounds;\n      L.setOptions(\n        this,\n        L.extend(options, this._setUpExtentTemplateVars(template))\n      );\n    },\n    getEvents: function () {\n      var events = {\n        moveend: this._onMoveEnd,\n        zoomstart: this._clearLayer\n      };\n      return events;\n    },\n    onAdd: function (map) {\n      this._map = map;\n      // TODO: set this._map by ourselves\n      this.options.pane.appendChild(this._container);\n      this.setZIndex(this.options.zIndex);\n      this._onAdd();\n    },\n    redraw: function () {\n      this._onMoveEnd();\n    },\n    isVisible: function () {\n      let map = this._linkEl.getMapEl()._map;\n      let mapZoom = map.getZoom();\n      let mapBounds = M.pixelToPCRSBounds(\n        map.getPixelBounds(),\n        mapZoom,\n        map.options.projection\n      );\n      return (\n        mapZoom <= this.zoomBounds.maxZoom &&\n        mapZoom >= this.zoomBounds.minZoom &&\n        this.extentBounds.overlaps(mapBounds)\n      );\n    },\n    _clearLayer: function () {\n      let containerImages = this._container.querySelectorAll('img');\n      for (let i = 0; i < containerImages.length; i++) {\n        this._container.removeChild(containerImages[i]);\n      }\n    },\n\n    _addImage: function (bounds, zoom, loc) {\n      let map = this._map;\n      let overlayToRemove = this._imageOverlay;\n      let src = this.getImageUrl(bounds, zoom);\n      let size = map.getSize();\n      this._imageOverlay = M.imageLayer(src, loc, size, 0, this._container);\n      this._imageOverlay._step = this._template.step;\n      this._imageOverlay.addTo(map);\n      if (overlayToRemove) {\n        this._imageOverlay._overlayToRemove = overlayToRemove._url;\n        this._imageOverlay.on('load error', function () {\n          map.removeLayer(overlayToRemove);\n        });\n      }\n    },\n\n    _scaleImage: function (bounds, zoom) {\n      let obj = this;\n      setTimeout(function () {\n        if (!obj._map) return;\n        let step = obj._template.step;\n        let steppedZoom = Math.floor(zoom / step) * step;\n        let scale = obj._map.getZoomScale(zoom, steppedZoom);\n        let translate = bounds.min\n          .multiplyBy(scale)\n          .subtract(obj._map._getNewPixelOrigin(obj._map.getCenter(), zoom))\n          .round();\n        L.DomUtil.setTransform(obj._imageOverlay._image, translate, scale);\n      });\n    },\n\n    _onAdd: function () {\n      let zoom = this._map.getZoom();\n      let steppedZoom = zoom;\n      let step = this._template.step;\n\n      if (zoom % step !== 0) steppedZoom = Math.floor(zoom / step) * step;\n      let bounds = this._map.getPixelBounds(this._map.getCenter(), steppedZoom);\n      this._pixelOrigins = {};\n      this._pixelOrigins[steppedZoom] = bounds.min;\n      // if the map is panned before the new image layer is added,\n      // the location that the layer should be added to is no longer (0,0) but need to be calculated\n      let loc = this._map\n        .getPixelBounds()\n        .min.subtract(this._map.getPixelOrigin());\n      this._addImage(bounds, steppedZoom, loc);\n      if (zoom !== steppedZoom) {\n        this._scaleImage(bounds, zoom);\n      }\n    },\n\n    _onMoveEnd: function (e) {\n      let mapZoom = this._map.getZoom();\n      let history = this._map.options.mapEl._history;\n      let current = history[history.length - 1];\n      let previous = history[history.length - 2];\n      if (!previous) previous = current;\n      let step = this._template.step;\n      let steppedZoom = Math.floor(mapZoom / step) * step;\n      let bounds = this._map.getPixelBounds(this._map.getCenter(), steppedZoom);\n      //Zooming from one step increment into a lower one\n      if (\n        step !== '1' &&\n        (mapZoom + 1) % step === 0 &&\n        current.zoom === previous.zoom - 1\n      ) {\n        this._addImage(bounds, steppedZoom, L.point(0, 0));\n        this._scaleImage(bounds, mapZoom);\n        //Zooming or panning within a step increment\n      } else if (e && mapZoom % step !== 0) {\n        this._imageOverlay._overlayToRemove = this._imageOverlay._url;\n        if (current.zoom !== previous.zoom) {\n          //Zoomed from within one step increment into another\n          this._addImage(bounds, steppedZoom, L.point(0, 0));\n          this._pixelOrigins[steppedZoom] = bounds.min;\n          this._scaleImage(bounds, mapZoom);\n        } else {\n          // Panning within a step increment\n          let pixelOrigin = this._pixelOrigins[steppedZoom];\n          let loc = bounds.min.subtract(pixelOrigin);\n          if (this.getImageUrl(bounds, steppedZoom) === this._imageOverlay._url)\n            return;\n          this._addImage(bounds, steppedZoom, loc);\n          this._scaleImage(bounds, mapZoom);\n        }\n        // Zooming from one step decrement into a higher one\n        // OR panning when mapZoom % step === 0\n      } else {\n        if (!this.isVisible) {\n          this._clearLayer();\n          return;\n        }\n        var map = this._map,\n          loc = map.getPixelBounds().min.subtract(map.getPixelOrigin());\n        this._addImage(map.getPixelBounds(), mapZoom, loc);\n        this._pixelOrigins[mapZoom] = map.getPixelOrigin();\n      }\n    },\n    setZIndex: function (zIndex) {\n      this.options.zIndex = zIndex;\n      this._updateZIndex();\n\n      return this;\n    },\n    _updateZIndex: function () {\n      if (\n        this._container &&\n        this.options.zIndex !== undefined &&\n        this.options.zIndex !== null\n      ) {\n        this._container.style.zIndex = this.options.zIndex;\n      }\n    },\n    onRemove: function (map) {\n      L.DomUtil.remove(this._container);\n      this._clearLayer();\n    },\n    getImageUrl: function (pixelBounds, zoom) {\n      var obj = {};\n      obj[this.options.extent.width] = this._map.getSize().x;\n      obj[this.options.extent.height] = this._map.getSize().y;\n      obj[this.options.extent.bottom] = this._TCRSToPCRS(pixelBounds.max, zoom).y;\n      obj[this.options.extent.left] = this._TCRSToPCRS(pixelBounds.min, zoom).x;\n      obj[this.options.extent.top] = this._TCRSToPCRS(pixelBounds.min, zoom).y;\n      obj[this.options.extent.right] = this._TCRSToPCRS(pixelBounds.max, zoom).x;\n      // hidden and other variables that may be associated\n      for (var v in this.options.extent) {\n        if (\n          ['width', 'height', 'left', 'right', 'top', 'bottom'].indexOf(v) < 0\n        ) {\n          obj[v] = this.options.extent[v];\n        }\n      }\n      return L.Util.template(this._template.template, obj);\n    },\n    _TCRSToPCRS: function (coords, zoom) {\n      // TCRS pixel point to Projected CRS point (in meters, presumably)\n      var map = this._map,\n        crs = map.options.crs,\n        loc = crs.transformation.untransform(coords, crs.scale(zoom));\n      return loc;\n    },\n    _setUpExtentTemplateVars: function (template) {\n      // process the inputs associated to template and create an object named\n      // extent with member properties as follows:\n      // {width: 'widthvarname',\n      //  height: 'heightvarname',\n      //  left: 'leftvarname',\n      //  right: 'rightvarname',\n      //  top: 'topvarname',\n      //  bottom: 'bottomvarname'}\n\n      var extentVarNames = { extent: {} },\n        inputs = template.values;\n\n      for (var i = 0; i < template.values.length; i++) {\n        var type = inputs[i].getAttribute('type'),\n          units = inputs[i].getAttribute('units'),\n          axis = inputs[i].getAttribute('axis'),\n          name = inputs[i].getAttribute('name'),\n          position = inputs[i].getAttribute('position'),\n          select = inputs[i].tagName.toLowerCase() === 'map-select';\n        if (type === 'width') {\n          extentVarNames.extent.width = name;\n        } else if (type === 'height') {\n          extentVarNames.extent.height = name;\n        } else if (\n          type === 'location' &&\n          (units === 'pcrs' || units === 'gcrs')\n        ) {\n          //<input name=\"...\" units=\"pcrs\" type=\"location\" position=\"top|bottom-left|right\" axis=\"northing|easting|latitude|longitude\">\n          switch (axis) {\n            case 'longitude':\n            case 'easting':\n              if (position) {\n                if (position.match(/.*?-left/i)) {\n                  extentVarNames.extent.left = name;\n                } else if (position.match(/.*?-right/i)) {\n                  extentVarNames.extent.right = name;\n                }\n              }\n              break;\n            case 'latitude':\n            case 'northing':\n              if (position) {\n                if (position.match(/top-.*?/i)) {\n                  extentVarNames.extent.top = name;\n                } else if (position.match(/bottom-.*?/i)) {\n                  extentVarNames.extent.bottom = name;\n                }\n              }\n              break;\n          }\n        } else if (select) {\n          /*jshint -W104 */\n          const parsedselect = inputs[i].htmlselect;\n          extentVarNames.extent[name] = function () {\n            return parsedselect.value;\n          };\n        } else {\n          /*jshint -W104 */\n          const input = inputs[i];\n          extentVarNames.extent[name] = function () {\n            return input.getAttribute('value');\n          };\n        }\n      }\n      return extentVarNames;\n    }\n  });\n  var templatedImageLayer = function (template, options) {\n    return new TemplatedImageLayer(template, options);\n  };\n\n  /**\n   * A standalone point geometry with useful accessor, comparison, and\n   * modification methods.\n   *\n   * @class\n   * @param {number} x the x-coordinate. This could be longitude or screen pixels, or any other sort of unit.\n   * @param {number} y the y-coordinate. This could be latitude or screen pixels, or any other sort of unit.\n   *\n   * @example\n   * const point = new Point(-77, 38);\n   */\n  function Point(x, y) {\n      this.x = x;\n      this.y = y;\n  }\n\n  Point.prototype = {\n      /**\n       * Clone this point, returning a new point that can be modified\n       * without affecting the old one.\n       * @return {Point} the clone\n       */\n      clone() { return new Point(this.x, this.y); },\n\n      /**\n       * Add this point's x & y coordinates to another point,\n       * yielding a new point.\n       * @param {Point} p the other point\n       * @return {Point} output point\n       */\n      add(p) { return this.clone()._add(p); },\n\n      /**\n       * Subtract this point's x & y coordinates to from point,\n       * yielding a new point.\n       * @param {Point} p the other point\n       * @return {Point} output point\n       */\n      sub(p) { return this.clone()._sub(p); },\n\n      /**\n       * Multiply this point's x & y coordinates by point,\n       * yielding a new point.\n       * @param {Point} p the other point\n       * @return {Point} output point\n       */\n      multByPoint(p) { return this.clone()._multByPoint(p); },\n\n      /**\n       * Divide this point's x & y coordinates by point,\n       * yielding a new point.\n       * @param {Point} p the other point\n       * @return {Point} output point\n       */\n      divByPoint(p) { return this.clone()._divByPoint(p); },\n\n      /**\n       * Multiply this point's x & y coordinates by a factor,\n       * yielding a new point.\n       * @param {number} k factor\n       * @return {Point} output point\n       */\n      mult(k) { return this.clone()._mult(k); },\n\n      /**\n       * Divide this point's x & y coordinates by a factor,\n       * yielding a new point.\n       * @param {number} k factor\n       * @return {Point} output point\n       */\n      div(k) { return this.clone()._div(k); },\n\n      /**\n       * Rotate this point around the 0, 0 origin by an angle a,\n       * given in radians\n       * @param {number} a angle to rotate around, in radians\n       * @return {Point} output point\n       */\n      rotate(a) { return this.clone()._rotate(a); },\n\n      /**\n       * Rotate this point around p point by an angle a,\n       * given in radians\n       * @param {number} a angle to rotate around, in radians\n       * @param {Point} p Point to rotate around\n       * @return {Point} output point\n       */\n      rotateAround(a, p) { return this.clone()._rotateAround(a, p); },\n\n      /**\n       * Multiply this point by a 4x1 transformation matrix\n       * @param {[number, number, number, number]} m transformation matrix\n       * @return {Point} output point\n       */\n      matMult(m) { return this.clone()._matMult(m); },\n\n      /**\n       * Calculate this point but as a unit vector from 0, 0, meaning\n       * that the distance from the resulting point to the 0, 0\n       * coordinate will be equal to 1 and the angle from the resulting\n       * point to the 0, 0 coordinate will be the same as before.\n       * @return {Point} unit vector point\n       */\n      unit() { return this.clone()._unit(); },\n\n      /**\n       * Compute a perpendicular point, where the new y coordinate\n       * is the old x coordinate and the new x coordinate is the old y\n       * coordinate multiplied by -1\n       * @return {Point} perpendicular point\n       */\n      perp() { return this.clone()._perp(); },\n\n      /**\n       * Return a version of this point with the x & y coordinates\n       * rounded to integers.\n       * @return {Point} rounded point\n       */\n      round() { return this.clone()._round(); },\n\n      /**\n       * Return the magnitude of this point: this is the Euclidean\n       * distance from the 0, 0 coordinate to this point's x and y\n       * coordinates.\n       * @return {number} magnitude\n       */\n      mag() {\n          return Math.sqrt(this.x * this.x + this.y * this.y);\n      },\n\n      /**\n       * Judge whether this point is equal to another point, returning\n       * true or false.\n       * @param {Point} other the other point\n       * @return {boolean} whether the points are equal\n       */\n      equals(other) {\n          return this.x === other.x &&\n                 this.y === other.y;\n      },\n\n      /**\n       * Calculate the distance from this point to another point\n       * @param {Point} p the other point\n       * @return {number} distance\n       */\n      dist(p) {\n          return Math.sqrt(this.distSqr(p));\n      },\n\n      /**\n       * Calculate the distance from this point to another point,\n       * without the square root step. Useful if you're comparing\n       * relative distances.\n       * @param {Point} p the other point\n       * @return {number} distance\n       */\n      distSqr(p) {\n          const dx = p.x - this.x,\n              dy = p.y - this.y;\n          return dx * dx + dy * dy;\n      },\n\n      /**\n       * Get the angle from the 0, 0 coordinate to this point, in radians\n       * coordinates.\n       * @return {number} angle\n       */\n      angle() {\n          return Math.atan2(this.y, this.x);\n      },\n\n      /**\n       * Get the angle from this point to another point, in radians\n       * @param {Point} b the other point\n       * @return {number} angle\n       */\n      angleTo(b) {\n          return Math.atan2(this.y - b.y, this.x - b.x);\n      },\n\n      /**\n       * Get the angle between this point and another point, in radians\n       * @param {Point} b the other point\n       * @return {number} angle\n       */\n      angleWith(b) {\n          return this.angleWithSep(b.x, b.y);\n      },\n\n      /**\n       * Find the angle of the two vectors, solving the formula for\n       * the cross product a x b = |a||b|sin(θ) for θ.\n       * @param {number} x the x-coordinate\n       * @param {number} y the y-coordinate\n       * @return {number} the angle in radians\n       */\n      angleWithSep(x, y) {\n          return Math.atan2(\n              this.x * y - this.y * x,\n              this.x * x + this.y * y);\n      },\n\n      /** @param {[number, number, number, number]} m */\n      _matMult(m) {\n          const x = m[0] * this.x + m[1] * this.y,\n              y = m[2] * this.x + m[3] * this.y;\n          this.x = x;\n          this.y = y;\n          return this;\n      },\n\n      /** @param {Point} p */\n      _add(p) {\n          this.x += p.x;\n          this.y += p.y;\n          return this;\n      },\n\n      /** @param {Point} p */\n      _sub(p) {\n          this.x -= p.x;\n          this.y -= p.y;\n          return this;\n      },\n\n      /** @param {number} k */\n      _mult(k) {\n          this.x *= k;\n          this.y *= k;\n          return this;\n      },\n\n      /** @param {number} k */\n      _div(k) {\n          this.x /= k;\n          this.y /= k;\n          return this;\n      },\n\n      /** @param {Point} p */\n      _multByPoint(p) {\n          this.x *= p.x;\n          this.y *= p.y;\n          return this;\n      },\n\n      /** @param {Point} p */\n      _divByPoint(p) {\n          this.x /= p.x;\n          this.y /= p.y;\n          return this;\n      },\n\n      _unit() {\n          this._div(this.mag());\n          return this;\n      },\n\n      _perp() {\n          const y = this.y;\n          this.y = this.x;\n          this.x = -y;\n          return this;\n      },\n\n      /** @param {number} angle */\n      _rotate(angle) {\n          const cos = Math.cos(angle),\n              sin = Math.sin(angle),\n              x = cos * this.x - sin * this.y,\n              y = sin * this.x + cos * this.y;\n          this.x = x;\n          this.y = y;\n          return this;\n      },\n\n      /**\n       * @param {number} angle\n       * @param {Point} p\n       */\n      _rotateAround(angle, p) {\n          const cos = Math.cos(angle),\n              sin = Math.sin(angle),\n              x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n              y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n          this.x = x;\n          this.y = y;\n          return this;\n      },\n\n      _round() {\n          this.x = Math.round(this.x);\n          this.y = Math.round(this.y);\n          return this;\n      },\n\n      constructor: Point\n  };\n\n  /**\n   * Construct a point from an array if necessary, otherwise if the input\n   * is already a Point, return it unchanged.\n   * @param {Point | [number, number] | {x: number, y: number}} p input value\n   * @return {Point} constructed point.\n   * @example\n   * // this\n   * var point = Point.convert([0, 1]);\n   * // is equivalent to\n   * var point = new Point(0, 1);\n   */\n  Point.convert = function (p) {\n      if (p instanceof Point) {\n          return /** @type {Point} */ (p);\n      }\n      if (Array.isArray(p)) {\n          return new Point(+p[0], +p[1]);\n      }\n      if (p.x !== undefined && p.y !== undefined) {\n          return new Point(+p.x, +p.y);\n      }\n      throw new Error('Expected [x, y] or {x, y} point format');\n  };\n\n  /**\n   * A simple guard function:\n   *\n   * ```js\n   * Math.min(Math.max(low, value), high)\n   * ```\n   */\n  function guard(low, high, value) {\n    return Math.min(Math.max(low, value), high);\n  }\n\n  class ColorError extends Error {\n    constructor(color) {\n      super(`Failed to parse color: \"${color}\"`);\n    }\n  }\n  var ColorError$1 = ColorError;\n\n  /**\n   * Parses a color into red, gree, blue, alpha parts\n   *\n   * @param color the input color. Can be a RGB, RBGA, HSL, HSLA, or named color\n   */\n  function parseToRgba(color) {\n    if (typeof color !== 'string') throw new ColorError$1(color);\n    if (color.trim().toLowerCase() === 'transparent') return [0, 0, 0, 0];\n    let normalizedColor = color.trim();\n    normalizedColor = namedColorRegex.test(color) ? nameToHex(color) : color;\n    const reducedHexMatch = reducedHexRegex.exec(normalizedColor);\n    if (reducedHexMatch) {\n      const arr = Array.from(reducedHexMatch).slice(1);\n      return [...arr.slice(0, 3).map(x => parseInt(r(x, 2), 16)), parseInt(r(arr[3] || 'f', 2), 16) / 255];\n    }\n    const hexMatch = hexRegex.exec(normalizedColor);\n    if (hexMatch) {\n      const arr = Array.from(hexMatch).slice(1);\n      return [...arr.slice(0, 3).map(x => parseInt(x, 16)), parseInt(arr[3] || 'ff', 16) / 255];\n    }\n    const rgbaMatch = rgbaRegex.exec(normalizedColor);\n    if (rgbaMatch) {\n      const arr = Array.from(rgbaMatch).slice(1);\n      return [...arr.slice(0, 3).map(x => parseInt(x, 10)), parseFloat(arr[3] || '1')];\n    }\n    const hslaMatch = hslaRegex.exec(normalizedColor);\n    if (hslaMatch) {\n      const [h, s, l, a] = Array.from(hslaMatch).slice(1).map(parseFloat);\n      if (guard(0, 100, s) !== s) throw new ColorError$1(color);\n      if (guard(0, 100, l) !== l) throw new ColorError$1(color);\n      return [...hslToRgb(h, s, l), Number.isNaN(a) ? 1 : a];\n    }\n    throw new ColorError$1(color);\n  }\n  function hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i) {\n      hash = hash * 33 ^ str.charCodeAt(--i);\n    }\n\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n     * integers. Since we want the results to be always positive, convert the\n     * signed int to an unsigned by doing an unsigned bitshift. */\n    return (hash >>> 0) % 2341;\n  }\n  const colorToInt = x => parseInt(x.replace(/_/g, ''), 36);\n  const compressedColorMap = '1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm'.split(' ').reduce((acc, next) => {\n    const key = colorToInt(next.substring(0, 3));\n    const hex = colorToInt(next.substring(3)).toString(16);\n\n    // NOTE: padStart could be used here but it breaks Node 6 compat\n    // https://github.com/ricokahler/color2k/issues/351\n    let prefix = '';\n    for (let i = 0; i < 6 - hex.length; i++) {\n      prefix += '0';\n    }\n    acc[key] = `${prefix}${hex}`;\n    return acc;\n  }, {});\n\n  /**\n   * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.\n   */\n  function nameToHex(color) {\n    const normalizedColorName = color.toLowerCase().trim();\n    const result = compressedColorMap[hash(normalizedColorName)];\n    if (!result) throw new ColorError$1(color);\n    return `#${result}`;\n  }\n  const r = (str, amount) => Array.from(Array(amount)).map(() => str).join('');\n  const reducedHexRegex = new RegExp(`^#${r('([a-f0-9])', 3)}([a-f0-9])?$`, 'i');\n  const hexRegex = new RegExp(`^#${r('([a-f0-9]{2})', 3)}([a-f0-9]{2})?$`, 'i');\n  const rgbaRegex = new RegExp(`^rgba?\\\\(\\\\s*(\\\\d+)\\\\s*${r(',\\\\s*(\\\\d+)\\\\s*', 2)}(?:,\\\\s*([\\\\d.]+))?\\\\s*\\\\)$`, 'i');\n  const hslaRegex = /^hsla?\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)%\\s*,\\s*([\\d.]+)%(?:\\s*,\\s*([\\d.]+))?\\s*\\)$/i;\n  const namedColorRegex = /^[a-z]+$/i;\n  const roundColor = color => {\n    return Math.round(color * 255);\n  };\n  const hslToRgb = (hue, saturation, lightness) => {\n    let l = lightness / 100;\n    if (saturation === 0) {\n      // achromatic\n      return [l, l, l].map(roundColor);\n    }\n\n    // formulae from https://en.wikipedia.org/wiki/HSL_and_HSV\n    const huePrime = (hue % 360 + 360) % 360 / 60;\n    const chroma = (1 - Math.abs(2 * l - 1)) * (saturation / 100);\n    const secondComponent = chroma * (1 - Math.abs(huePrime % 2 - 1));\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (huePrime >= 0 && huePrime < 1) {\n      red = chroma;\n      green = secondComponent;\n    } else if (huePrime >= 1 && huePrime < 2) {\n      red = secondComponent;\n      green = chroma;\n    } else if (huePrime >= 2 && huePrime < 3) {\n      green = chroma;\n      blue = secondComponent;\n    } else if (huePrime >= 3 && huePrime < 4) {\n      green = secondComponent;\n      blue = chroma;\n    } else if (huePrime >= 4 && huePrime < 5) {\n      red = secondComponent;\n      blue = chroma;\n    } else if (huePrime >= 5 && huePrime < 6) {\n      red = chroma;\n      blue = secondComponent;\n    }\n    const lightnessModification = l - chroma / 2;\n    const finalRed = red + lightnessModification;\n    const finalGreen = green + lightnessModification;\n    const finalBlue = blue + lightnessModification;\n    return [finalRed, finalGreen, finalBlue].map(roundColor);\n  };\n\n  /**\n   * Takes in rgba parts and returns an rgba string\n   *\n   * @param red The amount of red in the red channel, given in a number between 0 and 255 inclusive\n   * @param green The amount of green in the red channel, given in a number between 0 and 255 inclusive\n   * @param blue The amount of blue in the red channel, given in a number between 0 and 255 inclusive\n   * @param alpha Percentage of opacity, given as a decimal between 0 and 1\n   */\n  function rgba(red, green, blue, alpha) {\n    return `rgba(${guard(0, 255, red).toFixed()}, ${guard(0, 255, green).toFixed()}, ${guard(0, 255, blue).toFixed()}, ${parseFloat(guard(0, 1, alpha).toFixed(3))})`;\n  }\n\n  /**\n   * Mixes two colors together. Taken from sass's implementation.\n   */\n  function mix(color1, color2, weight) {\n    const normalize = (n, index) =>\n    // 3rd index is alpha channel which is already normalized\n    index === 3 ? n : n / 255;\n    const [r1, g1, b1, a1] = parseToRgba(color1).map(normalize);\n    const [r2, g2, b2, a2] = parseToRgba(color2).map(normalize);\n\n    // The formula is copied from the original Sass implementation:\n    // http://sass-lang.com/documentation/Sass/Script/Functions.html#mix-instance_method\n    const alphaDelta = a2 - a1;\n    const normalizedWeight = weight * 2 - 1;\n    const combinedWeight = normalizedWeight * alphaDelta === -1 ? normalizedWeight : normalizedWeight + alphaDelta / (1 + normalizedWeight * alphaDelta);\n    const weight2 = (combinedWeight + 1) / 2;\n    const weight1 = 1 - weight2;\n    const r = (r1 * weight1 + r2 * weight2) * 255;\n    const g = (g1 * weight1 + g2 * weight2) * 255;\n    const b = (b1 * weight1 + b2 * weight2) * 255;\n    const a = a2 * weight + a1 * (1 - weight);\n    return rgba(r, g, b, a);\n  }\n\n  /** @import Pbf from 'pbf' */\n  /** @import {Feature} from 'geojson' */\n\n  class VectorTileFeature {\n      /**\n       * @param {Pbf} pbf\n       * @param {number} end\n       * @param {number} extent\n       * @param {string[]} keys\n       * @param {unknown[]} values\n       */\n      constructor(pbf, end, extent, keys, values) {\n          // Public\n\n          /** @type {Record<string, unknown>} */\n          this.properties = {};\n\n          this.extent = extent;\n          /** @type {0 | 1 | 2 | 3} */\n          this.type = 0;\n\n          /** @type {number | undefined} */\n          this.id = undefined;\n\n          this._pbf = pbf;\n          this._geometry = -1;\n          this._keys = keys;\n          this._values = values;\n\n          pbf.readFields(readFeature, this, end);\n      }\n\n      loadGeometry() {\n          const pbf = this._pbf;\n          pbf.pos = this._geometry;\n\n          const end = pbf.readVarint() + pbf.pos;\n\n          /** @type Point[][] */\n          const lines = [];\n\n          /** @type Point[] | undefined */\n          let line;\n\n          let cmd = 1;\n          let length = 0;\n          let x = 0;\n          let y = 0;\n\n          while (pbf.pos < end) {\n              if (length <= 0) {\n                  const cmdLen = pbf.readVarint();\n                  cmd = cmdLen & 0x7;\n                  length = cmdLen >> 3;\n              }\n\n              length--;\n\n              if (cmd === 1 || cmd === 2) {\n                  x += pbf.readSVarint();\n                  y += pbf.readSVarint();\n\n                  if (cmd === 1) { // moveTo\n                      if (line) lines.push(line);\n                      line = [];\n                  }\n\n                  if (line) line.push(new Point(x, y));\n\n              } else if (cmd === 7) {\n\n                  // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n                  if (line) {\n                      line.push(line[0].clone()); // closePolygon\n                  }\n\n              } else {\n                  throw new Error(`unknown command ${cmd}`);\n              }\n          }\n\n          if (line) lines.push(line);\n\n          return lines;\n      }\n\n      bbox() {\n          const pbf = this._pbf;\n          pbf.pos = this._geometry;\n\n          const end = pbf.readVarint() + pbf.pos;\n          let cmd = 1,\n              length = 0,\n              x = 0,\n              y = 0,\n              x1 = Infinity,\n              x2 = -Infinity,\n              y1 = Infinity,\n              y2 = -Infinity;\n\n          while (pbf.pos < end) {\n              if (length <= 0) {\n                  const cmdLen = pbf.readVarint();\n                  cmd = cmdLen & 0x7;\n                  length = cmdLen >> 3;\n              }\n\n              length--;\n\n              if (cmd === 1 || cmd === 2) {\n                  x += pbf.readSVarint();\n                  y += pbf.readSVarint();\n                  if (x < x1) x1 = x;\n                  if (x > x2) x2 = x;\n                  if (y < y1) y1 = y;\n                  if (y > y2) y2 = y;\n\n              } else if (cmd !== 7) {\n                  throw new Error(`unknown command ${cmd}`);\n              }\n          }\n\n          return [x1, y1, x2, y2];\n      }\n\n      /**\n       * @param {number} x\n       * @param {number} y\n       * @param {number} z\n       * @return {Feature}\n       */\n      toGeoJSON(x, y, z) {\n          const size = this.extent * Math.pow(2, z),\n              x0 = this.extent * x,\n              y0 = this.extent * y,\n              vtCoords = this.loadGeometry();\n\n          /** @param {Point} p */\n          function projectPoint(p) {\n              return [\n                  (p.x + x0) * 360 / size - 180,\n                  360 / Math.PI * Math.atan(Math.exp((1 - (p.y + y0) * 2 / size) * Math.PI)) - 90\n              ];\n          }\n\n          /** @param {Point[]} line */\n          function projectLine(line) {\n              return line.map(projectPoint);\n          }\n\n          /** @type {Feature[\"geometry\"]} */\n          let geometry;\n\n          if (this.type === 1) {\n              const points = [];\n              for (const line of vtCoords) {\n                  points.push(line[0]);\n              }\n              const coordinates = projectLine(points);\n              geometry = points.length === 1 ?\n                  {type: 'Point', coordinates: coordinates[0]} :\n                  {type: 'MultiPoint', coordinates};\n\n          } else if (this.type === 2) {\n\n              const coordinates = vtCoords.map(projectLine);\n              geometry = coordinates.length === 1 ?\n                  {type: 'LineString', coordinates: coordinates[0]} :\n                  {type: 'MultiLineString', coordinates};\n\n          } else if (this.type === 3) {\n              const polygons = classifyRings(vtCoords);\n              const coordinates = [];\n              for (const polygon of polygons) {\n                  coordinates.push(polygon.map(projectLine));\n              }\n              geometry = coordinates.length === 1 ?\n                  {type: 'Polygon', coordinates: coordinates[0]} :\n                  {type: 'MultiPolygon', coordinates};\n          } else {\n\n              throw new Error('unknown feature type');\n          }\n\n          /** @type {Feature} */\n          const result = {\n              type: 'Feature',\n              geometry,\n              properties: this.properties\n          };\n\n          if (this.id != null) {\n              result.id = this.id;\n          }\n\n          return result;\n      }\n  }\n\n  /** @type {['Unknown', 'Point', 'LineString', 'Polygon']} */\n  VectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\n  /**\n   * @param {number} tag\n   * @param {VectorTileFeature} feature\n   * @param {Pbf} pbf\n   */\n  function readFeature(tag, feature, pbf) {\n      if (tag === 1) feature.id = pbf.readVarint();\n      else if (tag === 2) readTag(pbf, feature);\n      else if (tag === 3) feature.type = /** @type {0 | 1 | 2 | 3} */ (pbf.readVarint());\n      else if (tag === 4) feature._geometry = pbf.pos;\n  }\n\n  /**\n   * @param {Pbf} pbf\n   * @param {VectorTileFeature} feature\n   */\n  function readTag(pbf, feature) {\n      const end = pbf.readVarint() + pbf.pos;\n\n      while (pbf.pos < end) {\n          const key = feature._keys[pbf.readVarint()],\n              value = feature._values[pbf.readVarint()];\n          feature.properties[key] = value;\n      }\n  }\n\n  /** classifies an array of rings into polygons with outer rings and holes\n   * @param {Point[][]} rings\n   */\n  function classifyRings(rings) {\n      const len = rings.length;\n\n      if (len <= 1) return [rings];\n\n      const polygons = [];\n      let polygon, ccw;\n\n      for (let i = 0; i < len; i++) {\n          const area = signedArea(rings[i]);\n          if (area === 0) continue;\n\n          if (ccw === undefined) ccw = area < 0;\n\n          if (ccw === area < 0) {\n              if (polygon) polygons.push(polygon);\n              polygon = [rings[i]];\n\n          } else if (polygon) {\n              polygon.push(rings[i]);\n          }\n      }\n      if (polygon) polygons.push(polygon);\n\n      return polygons;\n  }\n\n  /** @param {Point[]} ring */\n  function signedArea(ring) {\n      let sum = 0;\n      for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n          p1 = ring[i];\n          p2 = ring[j];\n          sum += (p2.x - p1.x) * (p1.y + p2.y);\n      }\n      return sum;\n  }\n\n  class VectorTileLayer {\n      /**\n       * @param {Pbf} pbf\n       * @param {number} [end]\n       */\n      constructor(pbf, end) {\n          // Public\n          this.version = 1;\n          this.name = '';\n          this.extent = 4096;\n          this.length = 0;\n\n          // Private\n          this._pbf = pbf;\n\n          /** @type {string[]} */\n          this._keys = [];\n\n          /** @type {unknown[]} */\n          this._values = [];\n\n          /** @type {number[]} */\n          this._features = [];\n\n          pbf.readFields(readLayer, this, end);\n\n          this.length = this._features.length;\n      }\n\n      /** return feature `i` from this layer as a `VectorTileFeature`\n       * @param {number} i\n       */\n      feature(i) {\n          if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n          this._pbf.pos = this._features[i];\n\n          const end = this._pbf.readVarint() + this._pbf.pos;\n          return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n      }\n  }\n\n  /**\n   * @param {number} tag\n   * @param {VectorTileLayer} layer\n   * @param {Pbf} pbf\n   */\n  function readLayer(tag, layer, pbf) {\n      if (tag === 15) layer.version = pbf.readVarint();\n      else if (tag === 1) layer.name = pbf.readString();\n      else if (tag === 5) layer.extent = pbf.readVarint();\n      else if (tag === 2) layer._features.push(pbf.pos);\n      else if (tag === 3) layer._keys.push(pbf.readString());\n      else if (tag === 4) layer._values.push(readValueMessage(pbf));\n  }\n\n  /**\n   * @param {Pbf} pbf\n   */\n  function readValueMessage(pbf) {\n      let value = null;\n      const end = pbf.readVarint() + pbf.pos;\n\n      while (pbf.pos < end) {\n          const tag = pbf.readVarint() >> 3;\n\n          value = tag === 1 ? pbf.readString() :\n              tag === 2 ? pbf.readFloat() :\n              tag === 3 ? pbf.readDouble() :\n              tag === 4 ? pbf.readVarint64() :\n              tag === 5 ? pbf.readVarint() :\n              tag === 6 ? pbf.readSVarint() :\n              tag === 7 ? pbf.readBoolean() : null;\n      }\n\n      return value;\n  }\n\n  class VectorTile {\n      /**\n       * @param {Pbf} pbf\n       * @param {number} [end]\n       */\n      constructor(pbf, end) {\n          /** @type {Record<string, VectorTileLayer>} */\n          this.layers = pbf.readFields(readTile, {}, end);\n      }\n  }\n\n  /**\n   * @param {number} tag\n   * @param {Record<string, VectorTileLayer>} layers\n   * @param {Pbf} pbf\n   */\n  function readTile(tag, layers, pbf) {\n      if (tag === 3) {\n          const layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n          if (layer.length) layers[layer.name] = layer;\n      }\n  }\n\n  const SHIFT_LEFT_32 = (1 << 16) * (1 << 16);\n  const SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n  // Threshold chosen based on both benchmarking and knowledge about browser string\n  // data structures (which currently switch structure types at 12 bytes or more)\n  const TEXT_DECODER_MIN_LENGTH = 12;\n  const utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf-8');\n\n  const PBF_VARINT  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\n  const PBF_FIXED64 = 1; // 64-bit: double, fixed64, sfixed64\n  const PBF_BYTES   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\n  const PBF_FIXED32 = 5; // 32-bit: float, fixed32, sfixed32\n\n  class Pbf {\n      /**\n       * @param {Uint8Array | ArrayBuffer} [buf]\n       */\n      constructor(buf = new Uint8Array(16)) {\n          this.buf = ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf);\n          this.dataView = new DataView(this.buf.buffer);\n          this.pos = 0;\n          this.type = 0;\n          this.length = this.buf.length;\n      }\n\n      // === READING =================================================================\n\n      /**\n       * @template T\n       * @param {(tag: number, result: T, pbf: Pbf) => void} readField\n       * @param {T} result\n       * @param {number} [end]\n       */\n      readFields(readField, result, end = this.length) {\n          while (this.pos < end) {\n              const val = this.readVarint(),\n                  tag = val >> 3,\n                  startPos = this.pos;\n\n              this.type = val & 0x7;\n              readField(tag, result, this);\n\n              if (this.pos === startPos) this.skip(val);\n          }\n          return result;\n      }\n\n      /**\n       * @template T\n       * @param {(tag: number, result: T, pbf: Pbf) => void} readField\n       * @param {T} result\n       */\n      readMessage(readField, result) {\n          return this.readFields(readField, result, this.readVarint() + this.pos);\n      }\n\n      readFixed32() {\n          const val = this.dataView.getUint32(this.pos, true);\n          this.pos += 4;\n          return val;\n      }\n\n      readSFixed32() {\n          const val = this.dataView.getInt32(this.pos, true);\n          this.pos += 4;\n          return val;\n      }\n\n      // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n      readFixed64() {\n          const val = this.dataView.getUint32(this.pos, true) + this.dataView.getUint32(this.pos + 4, true) * SHIFT_LEFT_32;\n          this.pos += 8;\n          return val;\n      }\n\n      readSFixed64() {\n          const val = this.dataView.getUint32(this.pos, true) + this.dataView.getInt32(this.pos + 4, true) * SHIFT_LEFT_32;\n          this.pos += 8;\n          return val;\n      }\n\n      readFloat() {\n          const val = this.dataView.getFloat32(this.pos, true);\n          this.pos += 4;\n          return val;\n      }\n\n      readDouble() {\n          const val = this.dataView.getFloat64(this.pos, true);\n          this.pos += 8;\n          return val;\n      }\n\n      /**\n       * @param {boolean} [isSigned]\n       */\n      readVarint(isSigned) {\n          const buf = this.buf;\n          let val, b;\n\n          b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n          b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n          b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n          b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n          b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n          return readVarintRemainder$1(val, isSigned, this);\n      }\n\n      readVarint64() { // for compatibility with v2.0.1\n          return this.readVarint(true);\n      }\n\n      readSVarint() {\n          const num = this.readVarint();\n          return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n      }\n\n      readBoolean() {\n          return Boolean(this.readVarint());\n      }\n\n      readString() {\n          const end = this.readVarint() + this.pos;\n          const pos = this.pos;\n          this.pos = end;\n\n          if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n              // longer strings are fast with the built-in browser TextDecoder API\n              return utf8TextDecoder.decode(this.buf.subarray(pos, end));\n          }\n          // short strings are fast with our custom implementation\n          return readUtf8(this.buf, pos, end);\n      }\n\n      readBytes() {\n          const end = this.readVarint() + this.pos,\n              buffer = this.buf.subarray(this.pos, end);\n          this.pos = end;\n          return buffer;\n      }\n\n      // verbose for performance reasons; doesn't affect gzipped size\n\n      /**\n       * @param {number[]} [arr]\n       * @param {boolean} [isSigned]\n       */\n      readPackedVarint(arr = [], isSigned) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readVarint(isSigned));\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedSVarint(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readSVarint());\n          return arr;\n      }\n      /** @param {boolean[]} [arr] */\n      readPackedBoolean(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readBoolean());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedFloat(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readFloat());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedDouble(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readDouble());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedFixed32(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readFixed32());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedSFixed32(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readSFixed32());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedFixed64(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readFixed64());\n          return arr;\n      }\n      /** @param {number[]} [arr] */\n      readPackedSFixed64(arr = []) {\n          const end = this.readPackedEnd();\n          while (this.pos < end) arr.push(this.readSFixed64());\n          return arr;\n      }\n      readPackedEnd() {\n          return this.type === PBF_BYTES ? this.readVarint() + this.pos : this.pos + 1;\n      }\n\n      /** @param {number} val */\n      skip(val) {\n          const type = val & 0x7;\n          if (type === PBF_VARINT) while (this.buf[this.pos++] > 0x7f) {}\n          else if (type === PBF_BYTES) this.pos = this.readVarint() + this.pos;\n          else if (type === PBF_FIXED32) this.pos += 4;\n          else if (type === PBF_FIXED64) this.pos += 8;\n          else throw new Error(`Unimplemented type: ${type}`);\n      }\n\n      // === WRITING =================================================================\n\n      /**\n       * @param {number} tag\n       * @param {number} type\n       */\n      writeTag(tag, type) {\n          this.writeVarint((tag << 3) | type);\n      }\n\n      /** @param {number} min */\n      realloc(min) {\n          let length = this.length || 16;\n\n          while (length < this.pos + min) length *= 2;\n\n          if (length !== this.length) {\n              const buf = new Uint8Array(length);\n              buf.set(this.buf);\n              this.buf = buf;\n              this.dataView = new DataView(buf.buffer);\n              this.length = length;\n          }\n      }\n\n      finish() {\n          this.length = this.pos;\n          this.pos = 0;\n          return this.buf.subarray(0, this.length);\n      }\n\n      /** @param {number} val */\n      writeFixed32(val) {\n          this.realloc(4);\n          this.dataView.setInt32(this.pos, val, true);\n          this.pos += 4;\n      }\n\n      /** @param {number} val */\n      writeSFixed32(val) {\n          this.realloc(4);\n          this.dataView.setInt32(this.pos, val, true);\n          this.pos += 4;\n      }\n\n      /** @param {number} val */\n      writeFixed64(val) {\n          this.realloc(8);\n          this.dataView.setInt32(this.pos, val & -1, true);\n          this.dataView.setInt32(this.pos + 4, Math.floor(val * SHIFT_RIGHT_32), true);\n          this.pos += 8;\n      }\n\n      /** @param {number} val */\n      writeSFixed64(val) {\n          this.realloc(8);\n          this.dataView.setInt32(this.pos, val & -1, true);\n          this.dataView.setInt32(this.pos + 4, Math.floor(val * SHIFT_RIGHT_32), true);\n          this.pos += 8;\n      }\n\n      /** @param {number} val */\n      writeVarint(val) {\n          val = +val || 0;\n\n          if (val > 0xfffffff || val < 0) {\n              writeBigVarint(val, this);\n              return;\n          }\n\n          this.realloc(4);\n\n          this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n          this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n          this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n          this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n      }\n\n      /** @param {number} val */\n      writeSVarint(val) {\n          this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n      }\n\n      /** @param {boolean} val */\n      writeBoolean(val) {\n          this.writeVarint(+val);\n      }\n\n      /** @param {string} str */\n      writeString(str) {\n          str = String(str);\n          this.realloc(str.length * 4);\n\n          this.pos++; // reserve 1 byte for short string length\n\n          const startPos = this.pos;\n          // write the string directly to the buffer and see how much was written\n          this.pos = writeUtf8(this.buf, str, this.pos);\n          const len = this.pos - startPos;\n\n          if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n          // finally, write the message length in the reserved place and restore the position\n          this.pos = startPos - 1;\n          this.writeVarint(len);\n          this.pos += len;\n      }\n\n      /** @param {number} val */\n      writeFloat(val) {\n          this.realloc(4);\n          this.dataView.setFloat32(this.pos, val, true);\n          this.pos += 4;\n      }\n\n      /** @param {number} val */\n      writeDouble(val) {\n          this.realloc(8);\n          this.dataView.setFloat64(this.pos, val, true);\n          this.pos += 8;\n      }\n\n      /** @param {Uint8Array} buffer */\n      writeBytes(buffer) {\n          const len = buffer.length;\n          this.writeVarint(len);\n          this.realloc(len);\n          for (let i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n      }\n\n      /**\n       * @template T\n       * @param {(obj: T, pbf: Pbf) => void} fn\n       * @param {T} obj\n       */\n      writeRawMessage(fn, obj) {\n          this.pos++; // reserve 1 byte for short message length\n\n          // write the message directly to the buffer and see how much was written\n          const startPos = this.pos;\n          fn(obj, this);\n          const len = this.pos - startPos;\n\n          if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n          // finally, write the message length in the reserved place and restore the position\n          this.pos = startPos - 1;\n          this.writeVarint(len);\n          this.pos += len;\n      }\n\n      /**\n       * @template T\n       * @param {number} tag\n       * @param {(obj: T, pbf: Pbf) => void} fn\n       * @param {T} obj\n       */\n      writeMessage(tag, fn, obj) {\n          this.writeTag(tag, PBF_BYTES);\n          this.writeRawMessage(fn, obj);\n      }\n\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedVarint(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedVarint, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedSVarint(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {boolean[]} arr\n       */\n      writePackedBoolean(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedFloat(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedFloat, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedDouble(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedDouble, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedFixed32(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedSFixed32(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedFixed64(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);\n      }\n      /**\n       * @param {number} tag\n       * @param {number[]} arr\n       */\n      writePackedSFixed64(tag, arr) {\n          if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr);\n      }\n\n      /**\n       * @param {number} tag\n       * @param {Uint8Array} buffer\n       */\n      writeBytesField(tag, buffer) {\n          this.writeTag(tag, PBF_BYTES);\n          this.writeBytes(buffer);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeFixed32Field(tag, val) {\n          this.writeTag(tag, PBF_FIXED32);\n          this.writeFixed32(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeSFixed32Field(tag, val) {\n          this.writeTag(tag, PBF_FIXED32);\n          this.writeSFixed32(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeFixed64Field(tag, val) {\n          this.writeTag(tag, PBF_FIXED64);\n          this.writeFixed64(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeSFixed64Field(tag, val) {\n          this.writeTag(tag, PBF_FIXED64);\n          this.writeSFixed64(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeVarintField(tag, val) {\n          this.writeTag(tag, PBF_VARINT);\n          this.writeVarint(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeSVarintField(tag, val) {\n          this.writeTag(tag, PBF_VARINT);\n          this.writeSVarint(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {string} str\n       */\n      writeStringField(tag, str) {\n          this.writeTag(tag, PBF_BYTES);\n          this.writeString(str);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeFloatField(tag, val) {\n          this.writeTag(tag, PBF_FIXED32);\n          this.writeFloat(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {number} val\n       */\n      writeDoubleField(tag, val) {\n          this.writeTag(tag, PBF_FIXED64);\n          this.writeDouble(val);\n      }\n      /**\n       * @param {number} tag\n       * @param {boolean} val\n       */\n      writeBooleanField(tag, val) {\n          this.writeVarintField(tag, +val);\n      }\n  }\n  /**\n   * @param {number} l\n   * @param {boolean | undefined} s\n   * @param {Pbf} p\n   */\n  function readVarintRemainder$1(l, s, p) {\n      const buf = p.buf;\n      let h, b;\n\n      b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum$1(l, h, s);\n      b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum$1(l, h, s);\n      b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum$1(l, h, s);\n      b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum$1(l, h, s);\n      b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum$1(l, h, s);\n      b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum$1(l, h, s);\n\n      throw new Error('Expected varint not more than 10 bytes');\n  }\n\n  /**\n   * @param {number} low\n   * @param {number} high\n   * @param {boolean} [isSigned]\n   */\n  function toNum$1(low, high, isSigned) {\n      return isSigned ? high * 0x100000000 + (low >>> 0) : ((high >>> 0) * 0x100000000) + (low >>> 0);\n  }\n\n  /**\n   * @param {number} val\n   * @param {Pbf} pbf\n   */\n  function writeBigVarint(val, pbf) {\n      let low, high;\n\n      if (val >= 0) {\n          low  = (val % 0x100000000) | 0;\n          high = (val / 0x100000000) | 0;\n      } else {\n          low  = ~(-val % 0x100000000);\n          high = ~(-val / 0x100000000);\n\n          if (low ^ 0xffffffff) {\n              low = (low + 1) | 0;\n          } else {\n              low = 0;\n              high = (high + 1) | 0;\n          }\n      }\n\n      if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n          throw new Error('Given varint doesn\\'t fit into 10 bytes');\n      }\n\n      pbf.realloc(10);\n\n      writeBigVarintLow(low, high, pbf);\n      writeBigVarintHigh(high, pbf);\n  }\n\n  /**\n   * @param {number} high\n   * @param {number} low\n   * @param {Pbf} pbf\n   */\n  function writeBigVarintLow(low, high, pbf) {\n      pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n      pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n      pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n      pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n      pbf.buf[pbf.pos]   = low & 0x7f;\n  }\n\n  /**\n   * @param {number} high\n   * @param {Pbf} pbf\n   */\n  function writeBigVarintHigh(high, pbf) {\n      const lsb = (high & 0x07) << 4;\n\n      pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n      pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n      pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n      pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n      pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n      pbf.buf[pbf.pos++]  = high & 0x7f;\n  }\n\n  /**\n   * @param {number} startPos\n   * @param {number} len\n   * @param {Pbf} pbf\n   */\n  function makeRoomForExtraLength(startPos, len, pbf) {\n      const extraLen =\n          len <= 0x3fff ? 1 :\n          len <= 0x1fffff ? 2 :\n          len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n      // if 1 byte isn't enough for encoding message length, shift the data to the right\n      pbf.realloc(extraLen);\n      for (let i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n  }\n\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedVarint(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedSVarint(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedFloat(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedDouble(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);\n  }\n  /**\n   * @param {boolean[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedBoolean(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedFixed32(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedSFixed32(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedFixed64(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);\n  }\n  /**\n   * @param {number[]} arr\n   * @param {Pbf} pbf\n   */\n  function writePackedSFixed64(arr, pbf) {\n      for (let i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]);\n  }\n\n  // Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\n  /**\n   * @param {Uint8Array} buf\n   * @param {number} pos\n   * @param {number} end\n   */\n  function readUtf8(buf, pos, end) {\n      let str = '';\n      let i = pos;\n\n      while (i < end) {\n          const b0 = buf[i];\n          let c = null; // codepoint\n          let bytesPerSequence =\n              b0 > 0xEF ? 4 :\n              b0 > 0xDF ? 3 :\n              b0 > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence > end) break;\n\n          let b1, b2, b3;\n\n          if (bytesPerSequence === 1) {\n              if (b0 < 0x80) {\n                  c = b0;\n              }\n          } else if (bytesPerSequence === 2) {\n              b1 = buf[i + 1];\n              if ((b1 & 0xC0) === 0x80) {\n                  c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                  if (c <= 0x7F) {\n                      c = null;\n                  }\n              }\n          } else if (bytesPerSequence === 3) {\n              b1 = buf[i + 1];\n              b2 = buf[i + 2];\n              if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                  c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                  if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                      c = null;\n                  }\n              }\n          } else if (bytesPerSequence === 4) {\n              b1 = buf[i + 1];\n              b2 = buf[i + 2];\n              b3 = buf[i + 3];\n              if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                  c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                  if (c <= 0xFFFF || c >= 0x110000) {\n                      c = null;\n                  }\n              }\n          }\n\n          if (c === null) {\n              c = 0xFFFD;\n              bytesPerSequence = 1;\n\n          } else if (c > 0xFFFF) {\n              c -= 0x10000;\n              str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n              c = 0xDC00 | c & 0x3FF;\n          }\n\n          str += String.fromCharCode(c);\n          i += bytesPerSequence;\n      }\n\n      return str;\n  }\n\n  /**\n   * @param {Uint8Array} buf\n   * @param {string} str\n   * @param {number} pos\n   */\n  function writeUtf8(buf, str, pos) {\n      for (let i = 0, c, lead; i < str.length; i++) {\n          c = str.charCodeAt(i); // code point\n\n          if (c > 0xD7FF && c < 0xE000) {\n              if (lead) {\n                  if (c < 0xDC00) {\n                      buf[pos++] = 0xEF;\n                      buf[pos++] = 0xBF;\n                      buf[pos++] = 0xBD;\n                      lead = c;\n                      continue;\n                  } else {\n                      c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                      lead = null;\n                  }\n              } else {\n                  if (c > 0xDBFF || (i + 1 === str.length)) {\n                      buf[pos++] = 0xEF;\n                      buf[pos++] = 0xBF;\n                      buf[pos++] = 0xBD;\n                  } else {\n                      lead = c;\n                  }\n                  continue;\n              }\n          } else if (lead) {\n              buf[pos++] = 0xEF;\n              buf[pos++] = 0xBF;\n              buf[pos++] = 0xBD;\n              lead = null;\n          }\n\n          if (c < 0x80) {\n              buf[pos++] = c;\n          } else {\n              if (c < 0x800) {\n                  buf[pos++] = c >> 0x6 | 0xC0;\n              } else {\n                  if (c < 0x10000) {\n                      buf[pos++] = c >> 0xC | 0xE0;\n                  } else {\n                      buf[pos++] = c >> 0x12 | 0xF0;\n                      buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                  }\n                  buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n              }\n              buf[pos++] = c & 0x3F | 0x80;\n          }\n      }\n      return pos;\n  }\n\n  var __pow = Math.pow;\n  var __async = (__this, __arguments, generator) => {\n    return new Promise((resolve, reject) => {\n      var fulfilled = (value) => {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      };\n      var rejected = (value) => {\n        try {\n          step(generator.throw(value));\n        } catch (e) {\n          reject(e);\n        }\n      };\n      var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n      step((generator = generator.apply(__this, __arguments)).next());\n    });\n  };\n\n  // node_modules/fflate/esm/browser.js\n  var u8 = Uint8Array;\n  var u16 = Uint16Array;\n  var i32 = Int32Array;\n  var fleb = new u8([\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    1,\n    1,\n    1,\n    1,\n    2,\n    2,\n    2,\n    2,\n    3,\n    3,\n    3,\n    3,\n    4,\n    4,\n    4,\n    4,\n    5,\n    5,\n    5,\n    5,\n    0,\n    /* unused */\n    0,\n    0,\n    /* impossible */\n    0\n  ]);\n  var fdeb = new u8([\n    0,\n    0,\n    0,\n    0,\n    1,\n    1,\n    2,\n    2,\n    3,\n    3,\n    4,\n    4,\n    5,\n    5,\n    6,\n    6,\n    7,\n    7,\n    8,\n    8,\n    9,\n    9,\n    10,\n    10,\n    11,\n    11,\n    12,\n    12,\n    13,\n    13,\n    /* unused */\n    0,\n    0\n  ]);\n  var clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n  var freb = function(eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n      b[i] = start += 1 << eb[i - 1];\n    }\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n      for (var j = b[i]; j < b[i + 1]; ++j) {\n        r[j] = j - b[i] << 5 | i;\n      }\n    }\n    return { b, r };\n  };\n  var _a = freb(fleb, 2);\n  var fl = _a.b;\n  var revfl = _a.r;\n  fl[28] = 258, revfl[258] = 28;\n  var _b = freb(fdeb, 0);\n  var fd = _b.b;\n  var rev = new u16(32768);\n  for (i = 0; i < 32768; ++i) {\n    x = (i & 43690) >> 1 | (i & 21845) << 1;\n    x = (x & 52428) >> 2 | (x & 13107) << 2;\n    x = (x & 61680) >> 4 | (x & 3855) << 4;\n    rev[i] = ((x & 65280) >> 8 | (x & 255) << 8) >> 1;\n  }\n  var x;\n  var i;\n  var hMap = function(cd, mb, r) {\n    var s = cd.length;\n    var i = 0;\n    var l = new u16(mb);\n    for (; i < s; ++i) {\n      if (cd[i])\n        ++l[cd[i] - 1];\n    }\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n      le[i] = le[i - 1] + l[i - 1] << 1;\n    }\n    var co;\n    if (r) {\n      co = new u16(1 << mb);\n      var rvb = 15 - mb;\n      for (i = 0; i < s; ++i) {\n        if (cd[i]) {\n          var sv = i << 4 | cd[i];\n          var r_1 = mb - cd[i];\n          var v = le[cd[i] - 1]++ << r_1;\n          for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n            co[rev[v] >> rvb] = sv;\n          }\n        }\n      }\n    } else {\n      co = new u16(s);\n      for (i = 0; i < s; ++i) {\n        if (cd[i]) {\n          co[i] = rev[le[cd[i] - 1]++] >> 15 - cd[i];\n        }\n      }\n    }\n    return co;\n  };\n  var flt = new u8(288);\n  for (i = 0; i < 144; ++i)\n    flt[i] = 8;\n  var i;\n  for (i = 144; i < 256; ++i)\n    flt[i] = 9;\n  var i;\n  for (i = 256; i < 280; ++i)\n    flt[i] = 7;\n  var i;\n  for (i = 280; i < 288; ++i)\n    flt[i] = 8;\n  var i;\n  var fdt = new u8(32);\n  for (i = 0; i < 32; ++i)\n    fdt[i] = 5;\n  var i;\n  var flrm = /* @__PURE__ */ hMap(flt, 9, 1);\n  var fdrm = /* @__PURE__ */ hMap(fdt, 5, 1);\n  var max = function(a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n      if (a[i] > m)\n        m = a[i];\n    }\n    return m;\n  };\n  var bits = function(d, p, m) {\n    var o = p / 8 | 0;\n    return (d[o] | d[o + 1] << 8) >> (p & 7) & m;\n  };\n  var bits16 = function(d, p) {\n    var o = p / 8 | 0;\n    return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >> (p & 7);\n  };\n  var shft = function(p) {\n    return (p + 7) / 8 | 0;\n  };\n  var slc = function(v, s, e) {\n    if (s == null || s < 0)\n      s = 0;\n    if (e == null || e > v.length)\n      e = v.length;\n    var n = new u8(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n  };\n  var ec = [\n    \"unexpected EOF\",\n    \"invalid block type\",\n    \"invalid length/literal\",\n    \"invalid distance\",\n    \"stream finished\",\n    \"no stream handler\",\n    ,\n    \"no callback\",\n    \"invalid UTF-8 data\",\n    \"extra field too long\",\n    \"date not in range 1980-2099\",\n    \"filename too long\",\n    \"stream finishing\",\n    \"invalid zip data\"\n    // determined by unknown compression method\n  ];\n  var err = function(ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n      Error.captureStackTrace(e, err);\n    if (!nt)\n      throw e;\n    return e;\n  };\n  var inflt = function(dat, st, buf, dict) {\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n      return buf || new u8(0);\n    var noBuf = !buf || st.i != 2;\n    var noSt = st.i;\n    if (!buf)\n      buf = new u8(sl * 3);\n    var cbuf = function(l2) {\n      var bl = buf.length;\n      if (l2 > bl) {\n        var nbuf = new u8(Math.max(bl * 2, l2));\n        nbuf.set(buf);\n        buf = nbuf;\n      }\n    };\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    var tbts = sl * 8;\n    do {\n      if (!lm) {\n        final = bits(dat, pos, 1);\n        var type = bits(dat, pos + 1, 3);\n        pos += 3;\n        if (!type) {\n          var s = shft(pos) + 4, l = dat[s - 4] | dat[s - 3] << 8, t = s + l;\n          if (t > sl) {\n            if (noSt)\n              err(0);\n            break;\n          }\n          if (noBuf)\n            cbuf(bt + l);\n          buf.set(dat.subarray(s, t), bt);\n          st.b = bt += l, st.p = pos = t * 8, st.f = final;\n          continue;\n        } else if (type == 1)\n          lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n        else if (type == 2) {\n          var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n          var tl = hLit + bits(dat, pos + 5, 31) + 1;\n          pos += 14;\n          var ldt = new u8(tl);\n          var clt = new u8(19);\n          for (var i = 0; i < hcLen; ++i) {\n            clt[clim[i]] = bits(dat, pos + i * 3, 7);\n          }\n          pos += hcLen * 3;\n          var clb = max(clt), clbmsk = (1 << clb) - 1;\n          var clm = hMap(clt, clb, 1);\n          for (var i = 0; i < tl; ) {\n            var r = clm[bits(dat, pos, clbmsk)];\n            pos += r & 15;\n            var s = r >> 4;\n            if (s < 16) {\n              ldt[i++] = s;\n            } else {\n              var c = 0, n = 0;\n              if (s == 16)\n                n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n              else if (s == 17)\n                n = 3 + bits(dat, pos, 7), pos += 3;\n              else if (s == 18)\n                n = 11 + bits(dat, pos, 127), pos += 7;\n              while (n--)\n                ldt[i++] = c;\n            }\n          }\n          var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n          lbt = max(lt);\n          dbt = max(dt);\n          lm = hMap(lt, lbt, 1);\n          dm = hMap(dt, dbt, 1);\n        } else\n          err(1);\n        if (pos > tbts) {\n          if (noSt)\n            err(0);\n          break;\n        }\n      }\n      if (noBuf)\n        cbuf(bt + 131072);\n      var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n      var lpos = pos;\n      for (; ; lpos = pos) {\n        var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n        pos += c & 15;\n        if (pos > tbts) {\n          if (noSt)\n            err(0);\n          break;\n        }\n        if (!c)\n          err(2);\n        if (sym < 256)\n          buf[bt++] = sym;\n        else if (sym == 256) {\n          lpos = pos, lm = null;\n          break;\n        } else {\n          var add = sym - 254;\n          if (sym > 264) {\n            var i = sym - 257, b = fleb[i];\n            add = bits(dat, pos, (1 << b) - 1) + fl[i];\n            pos += b;\n          }\n          var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n          if (!d)\n            err(3);\n          pos += d & 15;\n          var dt = fd[dsym];\n          if (dsym > 3) {\n            var b = fdeb[dsym];\n            dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n          }\n          if (pos > tbts) {\n            if (noSt)\n              err(0);\n            break;\n          }\n          if (noBuf)\n            cbuf(bt + 131072);\n          var end = bt + add;\n          if (bt < dt) {\n            var shift2 = dl - dt, dend = Math.min(dt, end);\n            if (shift2 + bt < 0)\n              err(3);\n            for (; bt < dend; ++bt)\n              buf[bt] = dict[shift2 + bt];\n          }\n          for (; bt < end; bt += 4) {\n            buf[bt] = buf[bt - dt];\n            buf[bt + 1] = buf[bt + 1 - dt];\n            buf[bt + 2] = buf[bt + 2 - dt];\n            buf[bt + 3] = buf[bt + 3 - dt];\n          }\n          bt = end;\n        }\n      }\n      st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n      if (lm)\n        final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n  };\n  var et$1 = /* @__PURE__ */ new u8(0);\n  var gzs = function(d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n      err(6, \"invalid gzip data\");\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n      st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n      ;\n    return st + (flg & 2);\n  };\n  var gzl = function(d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n  };\n  var zls = function(d, dict) {\n    if ((d[0] & 15) != 8 || d[0] >> 4 > 7 || (d[0] << 8 | d[1]) % 31)\n      err(6, \"invalid zlib data\");\n    if ((d[1] >> 5 & 1) == +!dict)\n      err(6, \"invalid zlib data: \" + (d[1] & 32 ? \"need\" : \"unexpected\") + \" dictionary\");\n    return (d[1] >> 3 & 4) + 2;\n  };\n  function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n  }\n  function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n      err(6, \"invalid gzip data\");\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n  }\n  function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n  }\n  function decompressSync(data, opts) {\n    return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzipSync(data, opts) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflateSync(data, opts) : unzlibSync(data, opts);\n  }\n  var td = typeof TextDecoder != \"undefined\" && /* @__PURE__ */ new TextDecoder();\n  var tds = 0;\n  try {\n    td.decode(et$1, { stream: true });\n    tds = 1;\n  } catch (e) {\n  }\n\n  // v2.ts\n  var shift = (n, shift2) => {\n    return n * __pow(2, shift2);\n  };\n  var unshift = (n, shift2) => {\n    return Math.floor(n / __pow(2, shift2));\n  };\n  var getUint24 = (view, pos) => {\n    return shift(view.getUint16(pos + 1, true), 8) + view.getUint8(pos);\n  };\n  var getUint48 = (view, pos) => {\n    return shift(view.getUint32(pos + 2, true), 16) + view.getUint16(pos, true);\n  };\n  var compare = (tz, tx, ty, view, i) => {\n    if (tz !== view.getUint8(i))\n      return tz - view.getUint8(i);\n    const x = getUint24(view, i + 1);\n    if (tx !== x)\n      return tx - x;\n    const y = getUint24(view, i + 4);\n    if (ty !== y)\n      return ty - y;\n    return 0;\n  };\n  var queryLeafdir = (view, z, x, y) => {\n    const offsetLen = queryView(view, z | 128, x, y);\n    if (offsetLen) {\n      return {\n        z,\n        x,\n        y,\n        offset: offsetLen[0],\n        length: offsetLen[1],\n        isDir: true\n      };\n    }\n    return null;\n  };\n  var queryTile = (view, z, x, y) => {\n    const offsetLen = queryView(view, z, x, y);\n    if (offsetLen) {\n      return {\n        z,\n        x,\n        y,\n        offset: offsetLen[0],\n        length: offsetLen[1],\n        isDir: false\n      };\n    }\n    return null;\n  };\n  var queryView = (view, z, x, y) => {\n    let m = 0;\n    let n = view.byteLength / 17 - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = compare(z, x, y, view, k * 17);\n      if (cmp > 0) {\n        m = k + 1;\n      } else if (cmp < 0) {\n        n = k - 1;\n      } else {\n        return [getUint48(view, k * 17 + 7), view.getUint32(k * 17 + 13, true)];\n      }\n    }\n    return null;\n  };\n  var entrySort = (a, b) => {\n    if (a.isDir && !b.isDir) {\n      return 1;\n    }\n    if (!a.isDir && b.isDir) {\n      return -1;\n    }\n    if (a.z !== b.z) {\n      return a.z - b.z;\n    }\n    if (a.x !== b.x) {\n      return a.x - b.x;\n    }\n    return a.y - b.y;\n  };\n  var parseEntry = (dataview, i) => {\n    const zRaw = dataview.getUint8(i * 17);\n    const z = zRaw & 127;\n    return {\n      z,\n      x: getUint24(dataview, i * 17 + 1),\n      y: getUint24(dataview, i * 17 + 4),\n      offset: getUint48(dataview, i * 17 + 7),\n      length: dataview.getUint32(i * 17 + 13, true),\n      isDir: zRaw >> 7 === 1\n    };\n  };\n  var sortDir = (a) => {\n    const entries = [];\n    const view = new DataView(a);\n    for (let i = 0; i < view.byteLength / 17; i++) {\n      entries.push(parseEntry(view, i));\n    }\n    return createDirectory(entries);\n  };\n  var createDirectory = (entries) => {\n    entries.sort(entrySort);\n    const buffer = new ArrayBuffer(17 * entries.length);\n    const arr = new Uint8Array(buffer);\n    for (let i = 0; i < entries.length; i++) {\n      const entry = entries[i];\n      let z = entry.z;\n      if (entry.isDir)\n        z = z | 128;\n      arr[i * 17] = z;\n      arr[i * 17 + 1] = entry.x & 255;\n      arr[i * 17 + 2] = entry.x >> 8 & 255;\n      arr[i * 17 + 3] = entry.x >> 16 & 255;\n      arr[i * 17 + 4] = entry.y & 255;\n      arr[i * 17 + 5] = entry.y >> 8 & 255;\n      arr[i * 17 + 6] = entry.y >> 16 & 255;\n      arr[i * 17 + 7] = entry.offset & 255;\n      arr[i * 17 + 8] = unshift(entry.offset, 8) & 255;\n      arr[i * 17 + 9] = unshift(entry.offset, 16) & 255;\n      arr[i * 17 + 10] = unshift(entry.offset, 24) & 255;\n      arr[i * 17 + 11] = unshift(entry.offset, 32) & 255;\n      arr[i * 17 + 12] = unshift(entry.offset, 48) & 255;\n      arr[i * 17 + 13] = entry.length & 255;\n      arr[i * 17 + 14] = entry.length >> 8 & 255;\n      arr[i * 17 + 15] = entry.length >> 16 & 255;\n      arr[i * 17 + 16] = entry.length >> 24 & 255;\n    }\n    return buffer;\n  };\n  var deriveLeaf = (view, tile) => {\n    if (view.byteLength < 17)\n      return null;\n    const numEntries = view.byteLength / 17;\n    const entry = parseEntry(view, numEntries - 1);\n    if (entry.isDir) {\n      const leafLevel = entry.z;\n      const levelDiff = tile.z - leafLevel;\n      const leafX = Math.trunc(tile.x / (1 << levelDiff));\n      const leafY = Math.trunc(tile.y / (1 << levelDiff));\n      return { z: leafLevel, x: leafX, y: leafY };\n    }\n    return null;\n  };\n  function getHeader(source) {\n    return __async(this, null, function* () {\n      const resp = yield source.getBytes(0, 512e3);\n      const dataview = new DataView(resp.data);\n      const jsonSize = dataview.getUint32(4, true);\n      const rootEntries = dataview.getUint16(8, true);\n      const dec = new TextDecoder(\"utf-8\");\n      const jsonMetadata = JSON.parse(\n        dec.decode(new DataView(resp.data, 10, jsonSize))\n      );\n      let tileCompression = 0 /* Unknown */;\n      if (jsonMetadata.compression === \"gzip\") {\n        tileCompression = 2 /* Gzip */;\n      }\n      let minzoom = 0;\n      if (\"minzoom\" in jsonMetadata) {\n        minzoom = +jsonMetadata.minzoom;\n      }\n      let maxzoom = 0;\n      if (\"maxzoom\" in jsonMetadata) {\n        maxzoom = +jsonMetadata.maxzoom;\n      }\n      let centerLon = 0;\n      let centerLat = 0;\n      let centerZoom = 0;\n      let minLon = -180;\n      let minLat = -85;\n      let maxLon = 180;\n      let maxLat = 85;\n      if (jsonMetadata.bounds) {\n        const split = jsonMetadata.bounds.split(\",\");\n        minLon = +split[0];\n        minLat = +split[1];\n        maxLon = +split[2];\n        maxLat = +split[3];\n      }\n      if (jsonMetadata.center) {\n        const split = jsonMetadata.center.split(\",\");\n        centerLon = +split[0];\n        centerLat = +split[1];\n        centerZoom = +split[2];\n      }\n      const header = {\n        specVersion: dataview.getUint16(2, true),\n        rootDirectoryOffset: 10 + jsonSize,\n        rootDirectoryLength: rootEntries * 17,\n        jsonMetadataOffset: 10,\n        jsonMetadataLength: jsonSize,\n        leafDirectoryOffset: 0,\n        leafDirectoryLength: void 0,\n        tileDataOffset: 0,\n        tileDataLength: void 0,\n        numAddressedTiles: 0,\n        numTileEntries: 0,\n        numTileContents: 0,\n        clustered: false,\n        internalCompression: 1 /* None */,\n        tileCompression,\n        tileType: 1 /* Mvt */,\n        minZoom: minzoom,\n        maxZoom: maxzoom,\n        minLon,\n        minLat,\n        maxLon,\n        maxLat,\n        centerZoom,\n        centerLon,\n        centerLat,\n        etag: resp.etag\n      };\n      return header;\n    });\n  }\n  function getZxy(header, source, cache, z, x, y, signal) {\n    return __async(this, null, function* () {\n      let rootDir = yield cache.getArrayBuffer(\n        source,\n        header.rootDirectoryOffset,\n        header.rootDirectoryLength,\n        header\n      );\n      if (header.specVersion === 1) {\n        rootDir = sortDir(rootDir);\n      }\n      const entry = queryTile(new DataView(rootDir), z, x, y);\n      if (entry) {\n        const resp = yield source.getBytes(entry.offset, entry.length, signal);\n        let tileData = resp.data;\n        const view = new DataView(tileData);\n        if (view.getUint8(0) === 31 && view.getUint8(1) === 139) {\n          tileData = decompressSync(new Uint8Array(tileData));\n        }\n        return {\n          data: tileData\n        };\n      }\n      const leafcoords = deriveLeaf(new DataView(rootDir), { z, x, y });\n      if (leafcoords) {\n        const leafdirEntry = queryLeafdir(\n          new DataView(rootDir),\n          leafcoords.z,\n          leafcoords.x,\n          leafcoords.y\n        );\n        if (leafdirEntry) {\n          let leafDir = yield cache.getArrayBuffer(\n            source,\n            leafdirEntry.offset,\n            leafdirEntry.length,\n            header\n          );\n          if (header.specVersion === 1) {\n            leafDir = sortDir(leafDir);\n          }\n          const tileEntry = queryTile(new DataView(leafDir), z, x, y);\n          if (tileEntry) {\n            const resp = yield source.getBytes(\n              tileEntry.offset,\n              tileEntry.length,\n              signal\n            );\n            let tileData = resp.data;\n            const view = new DataView(tileData);\n            if (view.getUint8(0) === 31 && view.getUint8(1) === 139) {\n              tileData = decompressSync(new Uint8Array(tileData));\n            }\n            return {\n              data: tileData\n            };\n          }\n        }\n      }\n      return void 0;\n    });\n  }\n  var v2_default = {\n    getHeader,\n    getZxy\n  };\n\n  // index.ts\n  function toNum(low, high) {\n    return (high >>> 0) * 4294967296 + (low >>> 0);\n  }\n  function readVarintRemainder(l, p) {\n    const buf = p.buf;\n    let b = buf[p.pos++];\n    let h = (b & 112) >> 4;\n    if (b < 128)\n      return toNum(l, h);\n    b = buf[p.pos++];\n    h |= (b & 127) << 3;\n    if (b < 128)\n      return toNum(l, h);\n    b = buf[p.pos++];\n    h |= (b & 127) << 10;\n    if (b < 128)\n      return toNum(l, h);\n    b = buf[p.pos++];\n    h |= (b & 127) << 17;\n    if (b < 128)\n      return toNum(l, h);\n    b = buf[p.pos++];\n    h |= (b & 127) << 24;\n    if (b < 128)\n      return toNum(l, h);\n    b = buf[p.pos++];\n    h |= (b & 1) << 31;\n    if (b < 128)\n      return toNum(l, h);\n    throw new Error(\"Expected varint not more than 10 bytes\");\n  }\n  function readVarint(p) {\n    const buf = p.buf;\n    let b = buf[p.pos++];\n    let val = b & 127;\n    if (b < 128)\n      return val;\n    b = buf[p.pos++];\n    val |= (b & 127) << 7;\n    if (b < 128)\n      return val;\n    b = buf[p.pos++];\n    val |= (b & 127) << 14;\n    if (b < 128)\n      return val;\n    b = buf[p.pos++];\n    val |= (b & 127) << 21;\n    if (b < 128)\n      return val;\n    b = buf[p.pos];\n    val |= (b & 15) << 28;\n    return readVarintRemainder(val, p);\n  }\n  function rotate(n, xy, rx, ry) {\n    if (ry === 0) {\n      if (rx === 1) {\n        xy[0] = n - 1 - xy[0];\n        xy[1] = n - 1 - xy[1];\n      }\n      const t = xy[0];\n      xy[0] = xy[1];\n      xy[1] = t;\n    }\n  }\n  var tzValues = [\n    0,\n    1,\n    5,\n    21,\n    85,\n    341,\n    1365,\n    5461,\n    21845,\n    87381,\n    349525,\n    1398101,\n    5592405,\n    22369621,\n    89478485,\n    357913941,\n    1431655765,\n    5726623061,\n    22906492245,\n    91625968981,\n    366503875925,\n    1466015503701,\n    5864062014805,\n    23456248059221,\n    93824992236885,\n    375299968947541,\n    1501199875790165\n  ];\n  function zxyToTileId(z, x, y) {\n    if (z > 26) {\n      throw Error(\"Tile zoom level exceeds max safe number limit (26)\");\n    }\n    if (x > __pow(2, z) - 1 || y > __pow(2, z) - 1) {\n      throw Error(\"tile x/y outside zoom level bounds\");\n    }\n    const acc = tzValues[z];\n    const n = __pow(2, z);\n    let rx = 0;\n    let ry = 0;\n    let d = 0;\n    const xy = [x, y];\n    let s = n / 2;\n    while (s > 0) {\n      rx = (xy[0] & s) > 0 ? 1 : 0;\n      ry = (xy[1] & s) > 0 ? 1 : 0;\n      d += s * s * (3 * rx ^ ry);\n      rotate(s, xy, rx, ry);\n      s = s / 2;\n    }\n    return acc + d;\n  }\n  function defaultDecompress(buf, compression) {\n    return __async(this, null, function* () {\n      if (compression === 1 /* None */ || compression === 0 /* Unknown */) {\n        return buf;\n      }\n      if (compression === 2 /* Gzip */) {\n        if (typeof globalThis.DecompressionStream === \"undefined\") {\n          return decompressSync(new Uint8Array(buf));\n        }\n        const stream = new Response(buf).body;\n        if (!stream) {\n          throw Error(\"Failed to read response stream\");\n        }\n        const result = stream.pipeThrough(\n          // biome-ignore lint: needed to detect DecompressionStream in browser+node+cloudflare workers\n          new globalThis.DecompressionStream(\"gzip\")\n        );\n        return new Response(result).arrayBuffer();\n      }\n      throw Error(\"Compression method not supported\");\n    });\n  }\n  var HEADER_SIZE_BYTES = 127;\n  function findTile(entries, tileId) {\n    let m = 0;\n    let n = entries.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = tileId - entries[k].tileId;\n      if (cmp > 0) {\n        m = k + 1;\n      } else if (cmp < 0) {\n        n = k - 1;\n      } else {\n        return entries[k];\n      }\n    }\n    if (n >= 0) {\n      if (entries[n].runLength === 0) {\n        return entries[n];\n      }\n      if (tileId - entries[n].tileId < entries[n].runLength) {\n        return entries[n];\n      }\n    }\n    return null;\n  }\n  var FetchSource = class {\n    constructor(url, customHeaders = new Headers()) {\n      this.url = url;\n      this.customHeaders = customHeaders;\n      this.mustReload = false;\n    }\n    getKey() {\n      return this.url;\n    }\n    setHeaders(customHeaders) {\n      this.customHeaders = customHeaders;\n    }\n    getBytes(offset, length, passedSignal, etag) {\n      return __async(this, null, function* () {\n        let controller;\n        let signal;\n        if (passedSignal) {\n          signal = passedSignal;\n        } else {\n          controller = new AbortController();\n          signal = controller.signal;\n        }\n        const requestHeaders = new Headers(this.customHeaders);\n        requestHeaders.set(\"range\", `bytes=${offset}-${offset + length - 1}`);\n        let cache;\n        if (this.mustReload) {\n          cache = \"reload\";\n        }\n        let resp = yield fetch(this.url, {\n          signal,\n          cache,\n          headers: requestHeaders\n          //biome-ignore lint: \"cache\" is incompatible between cloudflare workers and browser\n        });\n        if (offset === 0 && resp.status === 416) {\n          const contentRange = resp.headers.get(\"Content-Range\");\n          if (!contentRange || !contentRange.startsWith(\"bytes */\")) {\n            throw Error(\"Missing content-length on 416 response\");\n          }\n          const actualLength = +contentRange.substr(8);\n          resp = yield fetch(this.url, {\n            signal,\n            cache: \"reload\",\n            headers: { range: `bytes=0-${actualLength - 1}` }\n            //biome-ignore lint: \"cache\" is incompatible between cloudflare workers and browser\n          });\n        }\n        let newEtag = resp.headers.get(\"Etag\");\n        if (newEtag == null ? void 0 : newEtag.startsWith(\"W/\")) {\n          newEtag = null;\n        }\n        if (resp.status === 416 || etag && newEtag && newEtag !== etag) {\n          this.mustReload = true;\n          throw new EtagMismatch(\n            `Server returned non-matching ETag ${etag} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`\n          );\n        }\n        if (resp.status >= 300) {\n          throw Error(`Bad response code: ${resp.status}`);\n        }\n        const contentLength = resp.headers.get(\"Content-Length\");\n        if (resp.status === 200 && (!contentLength || +contentLength > length)) {\n          if (controller)\n            controller.abort();\n          throw Error(\n            \"Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.\"\n          );\n        }\n        const a = yield resp.arrayBuffer();\n        return {\n          data: a,\n          etag: newEtag || void 0,\n          cacheControl: resp.headers.get(\"Cache-Control\") || void 0,\n          expires: resp.headers.get(\"Expires\") || void 0\n        };\n      });\n    }\n  };\n  function getUint64(v, offset) {\n    const wh = v.getUint32(offset + 4, true);\n    const wl = v.getUint32(offset + 0, true);\n    return wh * __pow(2, 32) + wl;\n  }\n  function bytesToHeader(bytes, etag) {\n    const v = new DataView(bytes);\n    const specVersion = v.getUint8(7);\n    if (specVersion > 3) {\n      throw Error(\n        `Archive is spec version ${specVersion} but this library supports up to spec version 3`\n      );\n    }\n    return {\n      specVersion,\n      rootDirectoryOffset: getUint64(v, 8),\n      rootDirectoryLength: getUint64(v, 16),\n      jsonMetadataOffset: getUint64(v, 24),\n      jsonMetadataLength: getUint64(v, 32),\n      leafDirectoryOffset: getUint64(v, 40),\n      leafDirectoryLength: getUint64(v, 48),\n      tileDataOffset: getUint64(v, 56),\n      tileDataLength: getUint64(v, 64),\n      numAddressedTiles: getUint64(v, 72),\n      numTileEntries: getUint64(v, 80),\n      numTileContents: getUint64(v, 88),\n      clustered: v.getUint8(96) === 1,\n      internalCompression: v.getUint8(97),\n      tileCompression: v.getUint8(98),\n      tileType: v.getUint8(99),\n      minZoom: v.getUint8(100),\n      maxZoom: v.getUint8(101),\n      minLon: v.getInt32(102, true) / 1e7,\n      minLat: v.getInt32(106, true) / 1e7,\n      maxLon: v.getInt32(110, true) / 1e7,\n      maxLat: v.getInt32(114, true) / 1e7,\n      centerZoom: v.getUint8(118),\n      centerLon: v.getInt32(119, true) / 1e7,\n      centerLat: v.getInt32(123, true) / 1e7,\n      etag\n    };\n  }\n  function deserializeIndex(buffer) {\n    const p = { buf: new Uint8Array(buffer), pos: 0 };\n    const numEntries = readVarint(p);\n    const entries = [];\n    let lastId = 0;\n    for (let i = 0; i < numEntries; i++) {\n      const v = readVarint(p);\n      entries.push({ tileId: lastId + v, offset: 0, length: 0, runLength: 1 });\n      lastId += v;\n    }\n    for (let i = 0; i < numEntries; i++) {\n      entries[i].runLength = readVarint(p);\n    }\n    for (let i = 0; i < numEntries; i++) {\n      entries[i].length = readVarint(p);\n    }\n    for (let i = 0; i < numEntries; i++) {\n      const v = readVarint(p);\n      if (v === 0 && i > 0) {\n        entries[i].offset = entries[i - 1].offset + entries[i - 1].length;\n      } else {\n        entries[i].offset = v - 1;\n      }\n    }\n    return entries;\n  }\n  function detectVersion(a) {\n    const v = new DataView(a);\n    if (v.getUint16(2, true) === 2) {\n      console.warn(\n        \"PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade\"\n      );\n      return 2;\n    }\n    if (v.getUint16(2, true) === 1) {\n      console.warn(\n        \"PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade\"\n      );\n      return 1;\n    }\n    return 3;\n  }\n  var EtagMismatch = class extends Error {\n  };\n  function getHeaderAndRoot(source, decompress) {\n    return __async(this, null, function* () {\n      const resp = yield source.getBytes(0, 16384);\n      const v = new DataView(resp.data);\n      if (v.getUint16(0, true) !== 19792) {\n        throw new Error(\"Wrong magic number for PMTiles archive\");\n      }\n      if (detectVersion(resp.data) < 3) {\n        return [yield v2_default.getHeader(source)];\n      }\n      const headerData = resp.data.slice(0, HEADER_SIZE_BYTES);\n      const header = bytesToHeader(headerData, resp.etag);\n      const rootDirData = resp.data.slice(\n        header.rootDirectoryOffset,\n        header.rootDirectoryOffset + header.rootDirectoryLength\n      );\n      const dirKey = `${source.getKey()}|${header.etag || \"\"}|${header.rootDirectoryOffset}|${header.rootDirectoryLength}`;\n      const rootDir = deserializeIndex(\n        yield decompress(rootDirData, header.internalCompression)\n      );\n      return [header, [dirKey, rootDir.length, rootDir]];\n    });\n  }\n  function getDirectory(source, decompress, offset, length, header) {\n    return __async(this, null, function* () {\n      const resp = yield source.getBytes(offset, length, void 0, header.etag);\n      const data = yield decompress(resp.data, header.internalCompression);\n      const directory = deserializeIndex(data);\n      if (directory.length === 0) {\n        throw new Error(\"Empty directory is invalid\");\n      }\n      return directory;\n    });\n  }\n  var SharedPromiseCache = class {\n    constructor(maxCacheEntries = 100, prefetch = true, decompress = defaultDecompress) {\n      this.cache = /* @__PURE__ */ new Map();\n      this.invalidations = /* @__PURE__ */ new Map();\n      this.maxCacheEntries = maxCacheEntries;\n      this.counter = 1;\n      this.decompress = decompress;\n    }\n    getHeader(source) {\n      return __async(this, null, function* () {\n        const cacheKey = source.getKey();\n        const cacheValue = this.cache.get(cacheKey);\n        if (cacheValue) {\n          cacheValue.lastUsed = this.counter++;\n          const data = yield cacheValue.data;\n          return data;\n        }\n        const p = new Promise((resolve, reject) => {\n          getHeaderAndRoot(source, this.decompress).then((res) => {\n            if (res[1]) {\n              this.cache.set(res[1][0], {\n                lastUsed: this.counter++,\n                data: Promise.resolve(res[1][2])\n              });\n            }\n            resolve(res[0]);\n            this.prune();\n          }).catch((e) => {\n            reject(e);\n          });\n        });\n        this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n        return p;\n      });\n    }\n    getDirectory(source, offset, length, header) {\n      return __async(this, null, function* () {\n        const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n        const cacheValue = this.cache.get(cacheKey);\n        if (cacheValue) {\n          cacheValue.lastUsed = this.counter++;\n          const data = yield cacheValue.data;\n          return data;\n        }\n        const p = new Promise((resolve, reject) => {\n          getDirectory(source, this.decompress, offset, length, header).then((directory) => {\n            resolve(directory);\n            this.prune();\n          }).catch((e) => {\n            reject(e);\n          });\n        });\n        this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n        return p;\n      });\n    }\n    // for v2 backwards compatibility\n    getArrayBuffer(source, offset, length, header) {\n      return __async(this, null, function* () {\n        const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n        const cacheValue = this.cache.get(cacheKey);\n        if (cacheValue) {\n          cacheValue.lastUsed = this.counter++;\n          const data = yield cacheValue.data;\n          return data;\n        }\n        const p = new Promise((resolve, reject) => {\n          source.getBytes(offset, length, void 0, header.etag).then((resp) => {\n            resolve(resp.data);\n            if (this.cache.has(cacheKey)) ;\n            this.prune();\n          }).catch((e) => {\n            reject(e);\n          });\n        });\n        this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n        return p;\n      });\n    }\n    prune() {\n      if (this.cache.size >= this.maxCacheEntries) {\n        let minUsed = Infinity;\n        let minKey = void 0;\n        this.cache.forEach((cacheValue, key) => {\n          if (cacheValue.lastUsed < minUsed) {\n            minUsed = cacheValue.lastUsed;\n            minKey = key;\n          }\n        });\n        if (minKey) {\n          this.cache.delete(minKey);\n        }\n      }\n    }\n    invalidate(source) {\n      return __async(this, null, function* () {\n        const key = source.getKey();\n        if (this.invalidations.get(key)) {\n          return yield this.invalidations.get(key);\n        }\n        this.cache.delete(source.getKey());\n        const p = new Promise((resolve, reject) => {\n          this.getHeader(source).then((h) => {\n            resolve();\n            this.invalidations.delete(key);\n          }).catch((e) => {\n            reject(e);\n          });\n        });\n        this.invalidations.set(key, p);\n      });\n    }\n  };\n  var PMTiles = class {\n    constructor(source, cache, decompress) {\n      if (typeof source === \"string\") {\n        this.source = new FetchSource(source);\n      } else {\n        this.source = source;\n      }\n      if (decompress) {\n        this.decompress = decompress;\n      } else {\n        this.decompress = defaultDecompress;\n      }\n      if (cache) {\n        this.cache = cache;\n      } else {\n        this.cache = new SharedPromiseCache();\n      }\n    }\n    /**\n     * Return the header of the archive,\n     * including information such as tile type, min/max zoom, bounds, and summary statistics.\n     */\n    getHeader() {\n      return __async(this, null, function* () {\n        return yield this.cache.getHeader(this.source);\n      });\n    }\n    /** @hidden */\n    getZxyAttempt(z, x, y, signal) {\n      return __async(this, null, function* () {\n        const tileId = zxyToTileId(z, x, y);\n        const header = yield this.cache.getHeader(this.source);\n        if (header.specVersion < 3) {\n          return v2_default.getZxy(header, this.source, this.cache, z, x, y, signal);\n        }\n        if (z < header.minZoom || z > header.maxZoom) {\n          return void 0;\n        }\n        let dO = header.rootDirectoryOffset;\n        let dL = header.rootDirectoryLength;\n        for (let depth = 0; depth <= 3; depth++) {\n          const directory = yield this.cache.getDirectory(\n            this.source,\n            dO,\n            dL,\n            header\n          );\n          const entry = findTile(directory, tileId);\n          if (entry) {\n            if (entry.runLength > 0) {\n              const resp = yield this.source.getBytes(\n                header.tileDataOffset + entry.offset,\n                entry.length,\n                signal,\n                header.etag\n              );\n              return {\n                data: yield this.decompress(resp.data, header.tileCompression),\n                cacheControl: resp.cacheControl,\n                expires: resp.expires\n              };\n            }\n            dO = header.leafDirectoryOffset + entry.offset;\n            dL = entry.length;\n          } else {\n            return void 0;\n          }\n        }\n        throw Error(\"Maximum directory depth exceeded\");\n      });\n    }\n    /**\n     * Primary method to get a single tile bytes from an archive.\n     *\n     * Returns undefined if the tile does not exist in the archive.\n     */\n    getZxy(z, x, y, signal) {\n      return __async(this, null, function* () {\n        try {\n          return yield this.getZxyAttempt(z, x, y, signal);\n        } catch (e) {\n          if (e instanceof EtagMismatch) {\n            this.cache.invalidate(this.source);\n            return yield this.getZxyAttempt(z, x, y, signal);\n          }\n          throw e;\n        }\n      });\n    }\n    /** @hidden */\n    getMetadataAttempt() {\n      return __async(this, null, function* () {\n        const header = yield this.cache.getHeader(this.source);\n        const resp = yield this.source.getBytes(\n          header.jsonMetadataOffset,\n          header.jsonMetadataLength,\n          void 0,\n          header.etag\n        );\n        const decompressed = yield this.decompress(\n          resp.data,\n          header.internalCompression\n        );\n        const dec = new TextDecoder(\"utf-8\");\n        return JSON.parse(dec.decode(decompressed));\n      });\n    }\n    /**\n     * Return the arbitrary JSON metadata of the archive.\n     */\n    getMetadata() {\n      return __async(this, null, function* () {\n        try {\n          return yield this.getMetadataAttempt();\n        } catch (e) {\n          if (e instanceof EtagMismatch) {\n            this.cache.invalidate(this.source);\n            return yield this.getMetadataAttempt();\n          }\n          throw e;\n        }\n      });\n    }\n  };\n\n  function quickselect(arr, k, left, right, compare) {\n      quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n  }\n\n  function quickselectStep(arr, k, left, right, compare) {\n\n      while (right > left) {\n          if (right - left > 600) {\n              var n = right - left + 1;\n              var m = k - left + 1;\n              var z = Math.log(n);\n              var s = 0.5 * Math.exp(2 * z / 3);\n              var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n              var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n              var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n              quickselectStep(arr, k, newLeft, newRight, compare);\n          }\n\n          var t = arr[k];\n          var i = left;\n          var j = right;\n\n          swap(arr, left, k);\n          if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n          while (i < j) {\n              swap(arr, i, j);\n              i++;\n              j--;\n              while (compare(arr[i], t) < 0) i++;\n              while (compare(arr[j], t) > 0) j--;\n          }\n\n          if (compare(arr[left], t) === 0) swap(arr, left, j);\n          else {\n              j++;\n              swap(arr, j, right);\n          }\n\n          if (j <= k) left = j + 1;\n          if (k <= j) right = j - 1;\n      }\n  }\n\n  function swap(arr, i, j) {\n      var tmp = arr[i];\n      arr[i] = arr[j];\n      arr[j] = tmp;\n  }\n\n  function defaultCompare(a, b) {\n      return a < b ? -1 : a > b ? 1 : 0;\n  }\n\n  class RBush {\n      constructor(maxEntries = 9) {\n          // max entries in a node is 9 by default; min node fill is 40% for best performance\n          this._maxEntries = Math.max(4, maxEntries);\n          this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n          this.clear();\n      }\n\n      all() {\n          return this._all(this.data, []);\n      }\n\n      search(bbox) {\n          let node = this.data;\n          const result = [];\n\n          if (!intersects(bbox, node)) return result;\n\n          const toBBox = this.toBBox;\n          const nodesToSearch = [];\n\n          while (node) {\n              for (let i = 0; i < node.children.length; i++) {\n                  const child = node.children[i];\n                  const childBBox = node.leaf ? toBBox(child) : child;\n\n                  if (intersects(bbox, childBBox)) {\n                      if (node.leaf) result.push(child);\n                      else if (contains(bbox, childBBox)) this._all(child, result);\n                      else nodesToSearch.push(child);\n                  }\n              }\n              node = nodesToSearch.pop();\n          }\n\n          return result;\n      }\n\n      collides(bbox) {\n          let node = this.data;\n\n          if (!intersects(bbox, node)) return false;\n\n          const nodesToSearch = [];\n          while (node) {\n              for (let i = 0; i < node.children.length; i++) {\n                  const child = node.children[i];\n                  const childBBox = node.leaf ? this.toBBox(child) : child;\n\n                  if (intersects(bbox, childBBox)) {\n                      if (node.leaf || contains(bbox, childBBox)) return true;\n                      nodesToSearch.push(child);\n                  }\n              }\n              node = nodesToSearch.pop();\n          }\n\n          return false;\n      }\n\n      load(data) {\n          if (!(data && data.length)) return this;\n\n          if (data.length < this._minEntries) {\n              for (let i = 0; i < data.length; i++) {\n                  this.insert(data[i]);\n              }\n              return this;\n          }\n\n          // recursively build the tree with the given data from scratch using OMT algorithm\n          let node = this._build(data.slice(), 0, data.length - 1, 0);\n\n          if (!this.data.children.length) {\n              // save as is if tree is empty\n              this.data = node;\n\n          } else if (this.data.height === node.height) {\n              // split root if trees have the same height\n              this._splitRoot(this.data, node);\n\n          } else {\n              if (this.data.height < node.height) {\n                  // swap trees if inserted one is bigger\n                  const tmpNode = this.data;\n                  this.data = node;\n                  node = tmpNode;\n              }\n\n              // insert the small tree into the large tree at appropriate level\n              this._insert(node, this.data.height - node.height - 1, true);\n          }\n\n          return this;\n      }\n\n      insert(item) {\n          if (item) this._insert(item, this.data.height - 1);\n          return this;\n      }\n\n      clear() {\n          this.data = createNode([]);\n          return this;\n      }\n\n      remove(item, equalsFn) {\n          if (!item) return this;\n\n          let node = this.data;\n          const bbox = this.toBBox(item);\n          const path = [];\n          const indexes = [];\n          let i, parent, goingUp;\n\n          // depth-first iterative tree traversal\n          while (node || path.length) {\n\n              if (!node) { // go up\n                  node = path.pop();\n                  parent = path[path.length - 1];\n                  i = indexes.pop();\n                  goingUp = true;\n              }\n\n              if (node.leaf) { // check current node\n                  const index = findItem(item, node.children, equalsFn);\n\n                  if (index !== -1) {\n                      // item found, remove the item and condense tree upwards\n                      node.children.splice(index, 1);\n                      path.push(node);\n                      this._condense(path);\n                      return this;\n                  }\n              }\n\n              if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                  path.push(node);\n                  indexes.push(i);\n                  i = 0;\n                  parent = node;\n                  node = node.children[0];\n\n              } else if (parent) { // go right\n                  i++;\n                  node = parent.children[i];\n                  goingUp = false;\n\n              } else node = null; // nothing found\n          }\n\n          return this;\n      }\n\n      toBBox(item) { return item; }\n\n      compareMinX(a, b) { return a.minX - b.minX; }\n      compareMinY(a, b) { return a.minY - b.minY; }\n\n      toJSON() { return this.data; }\n\n      fromJSON(data) {\n          this.data = data;\n          return this;\n      }\n\n      _all(node, result) {\n          const nodesToSearch = [];\n          while (node) {\n              if (node.leaf) result.push(...node.children);\n              else nodesToSearch.push(...node.children);\n\n              node = nodesToSearch.pop();\n          }\n          return result;\n      }\n\n      _build(items, left, right, height) {\n\n          const N = right - left + 1;\n          let M = this._maxEntries;\n          let node;\n\n          if (N <= M) {\n              // reached leaf level; return leaf\n              node = createNode(items.slice(left, right + 1));\n              calcBBox(node, this.toBBox);\n              return node;\n          }\n\n          if (!height) {\n              // target height of the bulk-loaded tree\n              height = Math.ceil(Math.log(N) / Math.log(M));\n\n              // target number of root entries to maximize storage utilization\n              M = Math.ceil(N / Math.pow(M, height - 1));\n          }\n\n          node = createNode([]);\n          node.leaf = false;\n          node.height = height;\n\n          // split the items into M mostly square tiles\n\n          const N2 = Math.ceil(N / M);\n          const N1 = N2 * Math.ceil(Math.sqrt(M));\n\n          multiSelect(items, left, right, N1, this.compareMinX);\n\n          for (let i = left; i <= right; i += N1) {\n\n              const right2 = Math.min(i + N1 - 1, right);\n\n              multiSelect(items, i, right2, N2, this.compareMinY);\n\n              for (let j = i; j <= right2; j += N2) {\n\n                  const right3 = Math.min(j + N2 - 1, right2);\n\n                  // pack each entry recursively\n                  node.children.push(this._build(items, j, right3, height - 1));\n              }\n          }\n\n          calcBBox(node, this.toBBox);\n\n          return node;\n      }\n\n      _chooseSubtree(bbox, node, level, path) {\n          while (true) {\n              path.push(node);\n\n              if (node.leaf || path.length - 1 === level) break;\n\n              let minArea = Infinity;\n              let minEnlargement = Infinity;\n              let targetNode;\n\n              for (let i = 0; i < node.children.length; i++) {\n                  const child = node.children[i];\n                  const area = bboxArea(child);\n                  const enlargement = enlargedArea(bbox, child) - area;\n\n                  // choose entry with the least area enlargement\n                  if (enlargement < minEnlargement) {\n                      minEnlargement = enlargement;\n                      minArea = area < minArea ? area : minArea;\n                      targetNode = child;\n\n                  } else if (enlargement === minEnlargement) {\n                      // otherwise choose one with the smallest area\n                      if (area < minArea) {\n                          minArea = area;\n                          targetNode = child;\n                      }\n                  }\n              }\n\n              node = targetNode || node.children[0];\n          }\n\n          return node;\n      }\n\n      _insert(item, level, isNode) {\n          const bbox = isNode ? item : this.toBBox(item);\n          const insertPath = [];\n\n          // find the best node for accommodating the item, saving all nodes along the path too\n          const node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n          // put the item into the node\n          node.children.push(item);\n          extend(node, bbox);\n\n          // split on node overflow; propagate upwards if necessary\n          while (level >= 0) {\n              if (insertPath[level].children.length > this._maxEntries) {\n                  this._split(insertPath, level);\n                  level--;\n              } else break;\n          }\n\n          // adjust bboxes along the insertion path\n          this._adjustParentBBoxes(bbox, insertPath, level);\n      }\n\n      // split overflowed node into two\n      _split(insertPath, level) {\n          const node = insertPath[level];\n          const M = node.children.length;\n          const m = this._minEntries;\n\n          this._chooseSplitAxis(node, m, M);\n\n          const splitIndex = this._chooseSplitIndex(node, m, M);\n\n          const newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n          newNode.height = node.height;\n          newNode.leaf = node.leaf;\n\n          calcBBox(node, this.toBBox);\n          calcBBox(newNode, this.toBBox);\n\n          if (level) insertPath[level - 1].children.push(newNode);\n          else this._splitRoot(node, newNode);\n      }\n\n      _splitRoot(node, newNode) {\n          // split root node\n          this.data = createNode([node, newNode]);\n          this.data.height = node.height + 1;\n          this.data.leaf = false;\n          calcBBox(this.data, this.toBBox);\n      }\n\n      _chooseSplitIndex(node, m, M) {\n          let index;\n          let minOverlap = Infinity;\n          let minArea = Infinity;\n\n          for (let i = m; i <= M - m; i++) {\n              const bbox1 = distBBox(node, 0, i, this.toBBox);\n              const bbox2 = distBBox(node, i, M, this.toBBox);\n\n              const overlap = intersectionArea(bbox1, bbox2);\n              const area = bboxArea(bbox1) + bboxArea(bbox2);\n\n              // choose distribution with minimum overlap\n              if (overlap < minOverlap) {\n                  minOverlap = overlap;\n                  index = i;\n\n                  minArea = area < minArea ? area : minArea;\n\n              } else if (overlap === minOverlap) {\n                  // otherwise choose distribution with minimum area\n                  if (area < minArea) {\n                      minArea = area;\n                      index = i;\n                  }\n              }\n          }\n\n          return index || M - m;\n      }\n\n      // sorts node children by the best axis for split\n      _chooseSplitAxis(node, m, M) {\n          const compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n          const compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n          const xMargin = this._allDistMargin(node, m, M, compareMinX);\n          const yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n          // if total distributions margin value is minimal for x, sort by minX,\n          // otherwise it's already sorted by minY\n          if (xMargin < yMargin) node.children.sort(compareMinX);\n      }\n\n      // total margin of all possible split distributions where each node is at least m full\n      _allDistMargin(node, m, M, compare) {\n          node.children.sort(compare);\n\n          const toBBox = this.toBBox;\n          const leftBBox = distBBox(node, 0, m, toBBox);\n          const rightBBox = distBBox(node, M - m, M, toBBox);\n          let margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n          for (let i = m; i < M - m; i++) {\n              const child = node.children[i];\n              extend(leftBBox, node.leaf ? toBBox(child) : child);\n              margin += bboxMargin(leftBBox);\n          }\n\n          for (let i = M - m - 1; i >= m; i--) {\n              const child = node.children[i];\n              extend(rightBBox, node.leaf ? toBBox(child) : child);\n              margin += bboxMargin(rightBBox);\n          }\n\n          return margin;\n      }\n\n      _adjustParentBBoxes(bbox, path, level) {\n          // adjust bboxes along the given tree path\n          for (let i = level; i >= 0; i--) {\n              extend(path[i], bbox);\n          }\n      }\n\n      _condense(path) {\n          // go through the path, removing empty nodes and updating bboxes\n          for (let i = path.length - 1, siblings; i >= 0; i--) {\n              if (path[i].children.length === 0) {\n                  if (i > 0) {\n                      siblings = path[i - 1].children;\n                      siblings.splice(siblings.indexOf(path[i]), 1);\n\n                  } else this.clear();\n\n              } else calcBBox(path[i], this.toBBox);\n          }\n      }\n  }\n\n  function findItem(item, items, equalsFn) {\n      if (!equalsFn) return items.indexOf(item);\n\n      for (let i = 0; i < items.length; i++) {\n          if (equalsFn(item, items[i])) return i;\n      }\n      return -1;\n  }\n\n  // calculate node's bbox from bboxes of its children\n  function calcBBox(node, toBBox) {\n      distBBox(node, 0, node.children.length, toBBox, node);\n  }\n\n  // min bounding rectangle of node children from k to p-1\n  function distBBox(node, k, p, toBBox, destNode) {\n      if (!destNode) destNode = createNode(null);\n      destNode.minX = Infinity;\n      destNode.minY = Infinity;\n      destNode.maxX = -Infinity;\n      destNode.maxY = -Infinity;\n\n      for (let i = k; i < p; i++) {\n          const child = node.children[i];\n          extend(destNode, node.leaf ? toBBox(child) : child);\n      }\n\n      return destNode;\n  }\n\n  function extend(a, b) {\n      a.minX = Math.min(a.minX, b.minX);\n      a.minY = Math.min(a.minY, b.minY);\n      a.maxX = Math.max(a.maxX, b.maxX);\n      a.maxY = Math.max(a.maxY, b.maxY);\n      return a;\n  }\n\n  function compareNodeMinX(a, b) { return a.minX - b.minX; }\n  function compareNodeMinY(a, b) { return a.minY - b.minY; }\n\n  function bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\n  function bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\n  function enlargedArea(a, b) {\n      return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n             (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n  }\n\n  function intersectionArea(a, b) {\n      const minX = Math.max(a.minX, b.minX);\n      const minY = Math.max(a.minY, b.minY);\n      const maxX = Math.min(a.maxX, b.maxX);\n      const maxY = Math.min(a.maxY, b.maxY);\n\n      return Math.max(0, maxX - minX) *\n             Math.max(0, maxY - minY);\n  }\n\n  function contains(a, b) {\n      return a.minX <= b.minX &&\n             a.minY <= b.minY &&\n             b.maxX <= a.maxX &&\n             b.maxY <= a.maxY;\n  }\n\n  function intersects(a, b) {\n      return b.minX <= a.maxX &&\n             b.minY <= a.maxY &&\n             b.maxX >= a.minX &&\n             b.maxY >= a.minY;\n  }\n\n  function createNode(children) {\n      return {\n          children,\n          height: 1,\n          leaf: true,\n          minX: Infinity,\n          minY: Infinity,\n          maxX: -Infinity,\n          maxY: -Infinity\n      };\n  }\n\n  // sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n  // combines selection algorithm with binary divide & conquer approach\n\n  function multiSelect(arr, left, right, n, compare) {\n      const stack = [left, right];\n\n      while (stack.length) {\n          right = stack.pop();\n          left = stack.pop();\n\n          if (right - left <= n) continue;\n\n          const mid = left + Math.ceil((right - left) / n / 2) * n;\n          quickselect(arr, mid, left, right, compare);\n\n          stack.push(left, mid, mid, right);\n      }\n  }\n\n  function potpack(boxes) {\n\n      // calculate total box area and maximum box width\n      let area = 0;\n      let maxWidth = 0;\n\n      for (const box of boxes) {\n          area += box.w * box.h;\n          maxWidth = Math.max(maxWidth, box.w);\n      }\n\n      // sort the boxes for insertion by height, descending\n      boxes.sort((a, b) => b.h - a.h);\n\n      // aim for a squarish resulting container,\n      // slightly adjusted for sub-100% space utilization\n      const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n\n      // start with a single empty space, unbounded at the bottom\n      const spaces = [{x: 0, y: 0, w: startWidth, h: Infinity}];\n\n      let width = 0;\n      let height = 0;\n\n      for (const box of boxes) {\n          // look through spaces backwards so that we check smaller spaces first\n          for (let i = spaces.length - 1; i >= 0; i--) {\n              const space = spaces[i];\n\n              // look for empty spaces that can accommodate the current box\n              if (box.w > space.w || box.h > space.h) continue;\n\n              // found the space; add the box to its top-left corner\n              // |-------|-------|\n              // |  box  |       |\n              // |_______|       |\n              // |         space |\n              // |_______________|\n              box.x = space.x;\n              box.y = space.y;\n\n              height = Math.max(height, box.y + box.h);\n              width = Math.max(width, box.x + box.w);\n\n              if (box.w === space.w && box.h === space.h) {\n                  // space matches the box exactly; remove it\n                  const last = spaces.pop();\n                  if (i < spaces.length) spaces[i] = last;\n\n              } else if (box.h === space.h) {\n                  // space matches the box height; update it accordingly\n                  // |-------|---------------|\n                  // |  box  | updated space |\n                  // |_______|_______________|\n                  space.x += box.w;\n                  space.w -= box.w;\n\n              } else if (box.w === space.w) {\n                  // space matches the box width; update it accordingly\n                  // |---------------|\n                  // |      box      |\n                  // |_______________|\n                  // | updated space |\n                  // |_______________|\n                  space.y += box.h;\n                  space.h -= box.h;\n\n              } else {\n                  // otherwise the box splits the space into two spaces\n                  // |-------|-----------|\n                  // |  box  | new space |\n                  // |_______|___________|\n                  // | updated space     |\n                  // |___________________|\n                  spaces.push({\n                      x: space.x + box.w,\n                      y: space.y,\n                      w: space.w - box.w,\n                      h: box.h\n                  });\n                  space.y += box.h;\n                  space.h -= box.h;\n              }\n              break;\n          }\n      }\n\n      return {\n          w: width, // container width\n          h: height, // container height\n          fill: (area / (width * height)) || 0 // space utilization\n      };\n  }\n\n  var pt=Object.defineProperty;var A=Math.pow;var c=(a,e)=>pt(a,\"name\",{value:e,configurable:!0});var D=(a,e,t)=>new Promise((r,n)=>{var i=o=>{try{l(t.next(o));}catch(f){n(f);}},s=o=>{try{l(t.throw(o));}catch(f){n(f);}},l=o=>o.done?r(o.value):Promise.resolve(o.value).then(i,s);l((t=t.apply(a,e)).next());});var he=class he{constructor(e,t){this.str=e!=null?e:t,this.perFeature=typeof this.str==\"function\"&&this.str.length===2;}get(e,t){return typeof this.str==\"function\"?this.str(e,t):this.str}};c(he,\"StringAttr\");var M$1=he,be=class be{constructor(e,t=1){this.value=e!=null?e:t,this.perFeature=typeof this.value==\"function\"&&this.value.length===2;}get(e,t){return typeof this.value==\"function\"?this.value(e,t):this.value}};c(be,\"NumberAttr\");var T=be,pe=class pe{constructor(e){var t;this.labelProps=(t=e==null?void 0:e.labelProps)!=null?t:[\"name\"],this.textTransform=e==null?void 0:e.textTransform;}get(e,t){let r,n;typeof this.labelProps==\"function\"?n=this.labelProps(e,t):n=this.labelProps;for(let s of n)if(Object.prototype.hasOwnProperty.call(t.props,s)&&typeof t.props[s]==\"string\"){r=t.props[s];break}let i;return typeof this.textTransform==\"function\"?i=this.textTransform(e,t):i=this.textTransform,r&&i===\"uppercase\"?r=r.toUpperCase():r&&i===\"lowercase\"?r=r.toLowerCase():r&&i===\"capitalize\"&&(r=r.toLowerCase().split(\" \").map(o=>o[0].toUpperCase()+o.slice(1)).join(\" \")),r}};c(pe,\"TextAttr\");var E=pe,ge=class ge{constructor(e){var t,r;e!=null&&e.font?this.font=e.font:(this.family=(t=e==null?void 0:e.fontFamily)!=null?t:\"sans-serif\",this.size=(r=e==null?void 0:e.fontSize)!=null?r:12,this.weight=e==null?void 0:e.fontWeight,this.style=e==null?void 0:e.fontStyle);}get(e,t){if(this.font)return typeof this.font==\"function\"?this.font(e,t):this.font;let r=\"\";this.style&&(typeof this.style==\"function\"?r=`${this.style(e,t)} `:r=`${this.style} `);let n=\"\";this.weight&&(typeof this.weight==\"function\"?n=`${this.weight(e,t)} `:n=`${this.weight} `);let i;typeof this.size==\"function\"?i=this.size(e,t):i=this.size;let s;return typeof this.family==\"function\"?s=this.family(e,t):s=this.family,`${r}${n}${i}px ${s}`}};c(ge,\"FontAttr\");var N=ge,ye=class ye{constructor(e,t=[]){this.value=e!=null?e:t,this.perFeature=typeof this.value==\"function\"&&this.value.length===2;}get(e,t){return typeof this.value==\"function\"?this.value(e,t):this.value}};c(ye,\"ArrayAttr\");var q=ye;var gt=c((a,e,t)=>{let r=[],n,i,s,l=0,o=0,f=0,u=0,m=0,d=0,b=0,g=0,y=0,_=0,k=0,p=0;if(a.length<2)return [];if(a.length===2)return f=Math.sqrt(A(a[1].x-a[0].x,2)+A(a[1].y-a[0].y,2)),[{length:f,beginIndex:0,beginDistance:0,endIndex:2,endDistance:f}];for(u=Math.sqrt(A(a[1].x-a[0].x,2)+A(a[1].y-a[0].y,2)),l=1,o=a.length-1;l<o;l++)n=a[l-1],i=a[l],s=a[l+1],d=i.x-n.x,b=i.y-n.y,g=s.x-i.x,y=s.y-i.y,m=Math.sqrt(g*g+y*y),f+=u,_=Math.acos((d*g+b*y)/(u*m)),(_>e||f-p>t)&&(r.push({length:f-p,beginDistance:p,beginIndex:k,endIndex:l+1,endDistance:f}),k=l,p=f),u=m;return l-k>0&&r.push({length:f-p+m,beginIndex:k,beginDistance:p,endIndex:l+1,endDistance:f+m}),r},\"linelabel\");function Ue(a,e,t,r){let n=[];for(let i of a){let s=gt(i,Math.PI/45,e);for(let l of s)if(l.length>=e+r){let o=new Point(i[l.beginIndex].x,i[l.beginIndex].y),f=i[l.endIndex-1],u=new Point((f.x-o.x)/l.length,(f.y-o.y)/l.length);for(let m=r;m<l.length-e;m+=t)n.push({start:o.add(u.mult(m)),end:o.add(u.mult(m+e))});}}return n}c(Ue,\"simpleLabel\");function Ge(a,e,t,r){let n=e.x-a.x,i=e.y-a.y,s=Math.sqrt(A(e.x-a.x,2)+A(e.y-a.y,2)),l=[];for(let o=0;o<t+r;o+=2*r){let f=o*1/s;l.push({x:a.x+f*n,y:a.y+f*i});}return l}c(Ge,\"lineCells\");function xe(a,e){if(a.length<=e)return [a];let t=e-1,r=a.lastIndexOf(\" \",t),n=a.indexOf(\" \",t);if(r===-1&&n===-1)return [a];let i,s;return n===-1||r>=0&&t-r<n-t?(i=a.substring(0,r),s=a.substring(r+1,a.length)):(i=a.substring(0,n),s=a.substring(n+1,a.length)),[i,...xe(s,e)]}c(xe,\"linebreak\");var rt=(r=>(r[r.Point=1]=\"Point\",r[r.Line=2]=\"Line\",r[r.Polygon=3]=\"Polygon\",r))(rt||{});function Y(a){return `${a.x}:${a.y}:${a.z}`}c(Y,\"toIndex\");var kt=c((a,e,t)=>{a.pos=e;let r=a.readVarint()+a.pos,n=1,i=0,s=0,l=0,o=1/0,f=-1/0,u=1/0,m=-1/0,d=[],b=[];for(;a.pos<r;){if(i<=0){let g=a.readVarint();n=g&7,i=g>>3;}if(i--,n===1||n===2)s+=a.readSVarint()*t,l+=a.readSVarint()*t,s<o&&(o=s),s>f&&(f=s),l<u&&(u=l),l>m&&(m=l),n===1&&(b.length>0&&d.push(b),b=[]),b.push(new Point(s,l));else if(n===7)b&&b.push(b[0].clone());else throw new Error(`unknown command ${n}`)}return b&&d.push(b),{geom:d,bbox:{minX:o,minY:u,maxX:f,maxY:m}}},\"loadGeomAndBbox\");function nt(a,e){let t=new VectorTile(new Pbf(a)),r=new Map;for(let[n,i]of Object.entries(t.layers)){let s=[],l=i;for(let o=0;o<l.length;o++){let f=kt(l.feature(o)._pbf,l.feature(o)._geometry,e/l.extent),u=0;for(let m of f.geom)u+=m.length;s.push({id:l.feature(o).id,geomType:l.feature(o).type,geom:f.geom,numVertices:u,bbox:f.bbox,props:l.feature(o).properties});}r.set(n,s);}return r}c(nt,\"parseTile\");var we=class we{constructor(e,t){typeof e==\"string\"?this.p=new PMTiles(e):this.p=e,this.zoomaborts=[],this.shouldCancelZooms=t;}get(e,t){return D(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(s=>s.z!==e.z?(s.controller.abort(),!1):!0));let r=new AbortController;this.zoomaborts.push({z:e.z,controller:r});let n=r.signal,i=yield this.p.getZxy(e.z,e.x,e.y,n);return i?nt(i.data,t):new Map})}};c(we,\"PmtilesSource\");var H=we,ke=class ke{constructor(e,t){this.url=e,this.zoomaborts=[],this.shouldCancelZooms=t;}get(e,t){return D(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(s=>s.z!==e.z?(s.controller.abort(),!1):!0));let r=this.url.replace(\"{z}\",e.z.toString()).replace(\"{x}\",e.x.toString()).replace(\"{y}\",e.y.toString()),n=new AbortController;this.zoomaborts.push({z:e.z,controller:n});let i=n.signal;return new Promise((s,l)=>{fetch(r,{signal:i}).then(o=>o.arrayBuffer()).then(o=>{let f=nt(o,t);s(f);}).catch(o=>{l(o);});})})}};c(ke,\"ZxySource\");var Q=ke,_e=6378137,Qe=85.0511287798,U=_e*Math.PI,zt=c(a=>{let e=Math.PI/180,t=Math.max(Math.min(Qe,a[0]),-Qe),r=Math.sin(t*e);return new Point(_e*a[1]*e,_e*Math.log((1+r)/(1-r))/2)},\"project\");function et(a){return a*a}c(et,\"sqr\");function G(a,e){return et(a.x-e.x)+et(a.y-e.y)}c(G,\"dist2\");function Tt(a,e,t){let r=G(e,t);if(r===0)return G(a,e);let n=((a.x-e.x)*(t.x-e.x)+(a.y-e.y)*(t.y-e.y))/r;return n=Math.max(0,Math.min(1,n)),G(a,new Point(e.x+n*(t.x-e.x),e.y+n*(t.y-e.y)))}c(Tt,\"distToSegmentSquared\");function tt(a,e){let t=!1;for(let r=0,n=e.length-1;r<e.length;n=r++){let i=e[r].x,s=e[r].y,l=e[n].x,o=e[n].y;s>a.y!=o>a.y&&a.x<(l-i)*(a.y-s)/(o-s)+i&&(t=!t);}return t}c(tt,\"isInRing\");function Pt(a){let e=0;for(let t=0;t<a.length;t++){let r=(t+1)%a.length;e+=a[t].x*a[r].y,e-=a[r].x*a[t].y;}return e<0}c(Pt,\"isCcw\");function Lt(a,e){let t=!1;for(let r of e)if(Pt(r))tt(a,r)&&(t=!1);else {if(t)return !0;tt(a,r)&&(t=!0);}return t}c(Lt,\"pointInPolygon\");function vt(a,e){let t=1/0;for(let r of e){let n=Math.sqrt(G(a,r[0]));n<t&&(t=n);}return t}c(vt,\"pointMinDistToPoints\");function Ct(a,e){let t=1/0;for(let r of e)for(let n=0;n<r.length-1;n++){let i=Math.sqrt(Tt(a,r[n],r[n+1]));i<t&&(t=i);}return t}c(Ct,\"pointMinDistToLines\");var ze=class ze{constructor(e,t){this.source=e,this.cache=new Map,this.inflight=new Map,this.tileSize=t;}get(e){return D(this,null,function*(){let t=Y(e);return new Promise((r,n)=>{let i=this.cache.get(t);if(i)i.used=performance.now(),r(i.data);else {let s=this.inflight.get(t);s?s.push({resolve:r,reject:n}):(this.inflight.set(t,[]),this.source.get(e,this.tileSize).then(l=>{this.cache.set(t,{used:performance.now(),data:l});let o=this.inflight.get(t);if(o)for(let f of o)f.resolve(l);if(this.inflight.delete(t),r(l),this.cache.size>=64){let f=1/0,u;this.cache.forEach((m,d)=>{m.used<f&&(f=m.used,u=d);}),u&&this.cache.delete(u);}}).catch(l=>{let o=this.inflight.get(t);if(o)for(let f of o)f.reject(l);this.inflight.delete(t),n(l);}));}})})}queryFeatures(e,t,r,n){let i=zt([t,e]),s=new Point((i.x+U)/(U*2),1-(i.y+U)/(U*2));s.x>1&&(s.x=s.x-Math.floor(s.x));let l=s.mult(1<<r),o=Math.floor(l.x),f=Math.floor(l.y),u=Y({z:r,x:o,y:f}),m=[],d=this.cache.get(u);if(d){let b=new Point((l.x-o)*this.tileSize,(l.y-f)*this.tileSize);for(let[g,y]of d.data.entries())for(let _ of y)_.geomType===1?vt(b,_.geom)<n&&m.push({feature:_,layerName:g}):_.geomType===2?Ct(b,_.geom)<n&&m.push({feature:_,layerName:g}):Lt(b,_.geom)&&m.push({feature:_,layerName:g});}return m}};c(ze,\"TileCache\");var ee=ze;var St=(r=>(r[r.Left=1]=\"Left\",r[r.Center=2]=\"Center\",r[r.Right=3]=\"Right\",r))(St||{}),At=(o=>(o[o.N=1]=\"N\",o[o.Ne=2]=\"Ne\",o[o.E=3]=\"E\",o[o.Se=4]=\"Se\",o[o.S=5]=\"S\",o[o.Sw=6]=\"Sw\",o[o.W=7]=\"W\",o[o.Nw=8]=\"Nw\",o))(At||{}),zr=c((a,e,t)=>{let r=document.createElement(\"canvas\"),n=r.getContext(\"2d\");return r.width=a,r.height=e,n!==null&&t(r,n),r},\"createPattern\"),ve=class ve{constructor(e){var t;this.pattern=e.pattern,this.fill=new M$1(e.fill,\"black\"),this.opacity=new T(e.opacity,1),this.stroke=new M$1(e.stroke,\"black\"),this.width=new T(e.width,0),this.perFeature=(t=this.fill.perFeature||this.opacity.perFeature||this.stroke.perFeature||this.width.perFeature||e.perFeature)!=null?t:!1,this.doStroke=!1;}before(e,t){if(!this.perFeature){e.globalAlpha=this.opacity.get(t),e.fillStyle=this.fill.get(t),e.strokeStyle=this.stroke.get(t);let r=this.width.get(t);r>0&&(this.doStroke=!0),e.lineWidth=r;}if(this.pattern){let r=e.createPattern(this.pattern,\"repeat\");r&&(e.fillStyle=r);}}draw(e,t,r,n){let i=!1;if(this.perFeature){e.globalAlpha=this.opacity.get(r,n),e.fillStyle=this.fill.get(r,n);let l=this.width.get(r,n);l&&(i=!0,e.strokeStyle=this.stroke.get(r,n),e.lineWidth=l);}let s=c(()=>{e.fill(),(i||this.doStroke)&&e.stroke();},\"drawPath\");e.beginPath();for(let l of t)for(let o=0;o<l.length;o++){let f=l[o];o===0?e.moveTo(f.x,f.y):e.lineTo(f.x,f.y);}s();}};c(ve,\"PolygonSymbolizer\");var P=ve;function Tr(a,e){return t=>{let r=t-a;return r>=0&&r<e.length?e[r]:0}}c(Tr,\"arr\");function Dt(a,e){let t=0;for(;e[t+1][0]<a;)t++;return t}c(Dt,\"getStopIndex\");function Mt(a,e,t){return a*(t-e)+e}c(Mt,\"interpolate\");function Ot(a,e,t,r){let n=r[e+1][0]-r[e][0],i=a-r[e][0];return n===0?0:t===1?i/n:(A(t,i)-1)/(A(t,n)-1)}c(Ot,\"computeInterpolationFactor\");function F(a,e){return t=>{if(e.length<1)return 0;if(t<=e[0][0])return e[0][1];if(t>=e[e.length-1][0])return e[e.length-1][1];let r=Dt(t,e),n=Ot(t,r,a,e);return Mt(n,e[r][1],e[r+1][1])}}c(F,\"exp\");function Pr(a,e){return t=>{if(e.length<1)return 0;let r=a;for(let n=0;n<e.length;n++)t>=e[n][0]&&(r=e[n][1]);return r}}c(Pr,\"step\");function Le(a){return F(1,a)}c(Le,\"linear\");var Ce=class Ce{constructor(e){var t;this.color=new M$1(e.color,\"black\"),this.width=new T(e.width),this.opacity=new T(e.opacity),this.dash=e.dash?new q(e.dash):null,this.dashColor=new M$1(e.dashColor,\"black\"),this.dashWidth=new T(e.dashWidth,1),this.lineCap=new M$1(e.lineCap,\"butt\"),this.lineJoin=new M$1(e.lineJoin,\"miter\"),this.skip=!1,this.perFeature=!!((t=this.dash)!=null&&t.perFeature||this.color.perFeature||this.opacity.perFeature||this.width.perFeature||this.lineCap.perFeature||this.lineJoin.perFeature||e.perFeature);}before(e,t){this.perFeature||(e.strokeStyle=this.color.get(t),e.lineWidth=this.width.get(t),e.globalAlpha=this.opacity.get(t),e.lineCap=this.lineCap.get(t),e.lineJoin=this.lineJoin.get(t));}draw(e,t,r,n){if(this.skip)return;let i=c(()=>{this.perFeature&&(e.globalAlpha=this.opacity.get(r,n),e.lineCap=this.lineCap.get(r,n),e.lineJoin=this.lineJoin.get(r,n)),this.dash?(e.save(),this.perFeature?(e.lineWidth=this.dashWidth.get(r,n),e.strokeStyle=this.dashColor.get(r,n),e.setLineDash(this.dash.get(r,n))):e.setLineDash(this.dash.get(r)),e.stroke(),e.restore()):(e.save(),this.perFeature&&(e.lineWidth=this.width.get(r,n),e.strokeStyle=this.color.get(r,n)),e.stroke(),e.restore());},\"strokePath\");e.beginPath();for(let s of t)for(let l=0;l<s.length;l++){let o=s[l];l===0?e.moveTo(o.x,o.y):e.lineTo(o.x,o.y);}i();}};c(Ce,\"LineSymbolizer\");var O=Ce,Se=class Se{constructor(e){this.name=e.name,this.sheet=e.sheet,this.dpr=window.devicePixelRatio;}place(e,t,r){t[0];let i=new Point(t[0][0].x,t[0][0].y),s=this.sheet.get(this.name),l=s.w/this.dpr,o=s.h/this.dpr,f={minX:i.x-l/2,minY:i.y-o/2,maxX:i.x+l/2,maxY:i.y+o/2};return [{anchor:i,bboxes:[f],draw:c(m=>{m.globalAlpha=1,m.drawImage(this.sheet.canvas,s.x,s.y,s.w,s.h,-s.w/2/this.dpr,-s.h/2/this.dpr,s.w/2,s.h/2);},\"draw\")}]}};c(Se,\"IconSymbolizer\");var it=Se,Ae=class Ae{constructor(e){this.radius=new T(e.radius,3),this.fill=new M$1(e.fill,\"black\"),this.stroke=new M$1(e.stroke,\"white\"),this.width=new T(e.width,0),this.opacity=new T(e.opacity);}draw(e,t,r,n){e.globalAlpha=this.opacity.get(r,n);let i=this.radius.get(r,n),s=this.width.get(r,n);s>0&&(e.strokeStyle=this.stroke.get(r,n),e.lineWidth=s,e.beginPath(),e.arc(t[0][0].x,t[0][0].y,i+s/2,0,2*Math.PI),e.stroke()),e.fillStyle=this.fill.get(r,n),e.beginPath(),e.arc(t[0][0].x,t[0][0].y,i,0,2*Math.PI),e.fill();}place(e,t,r){t[0];let i=new Point(t[0][0].x,t[0][0].y),s=this.radius.get(e.zoom,r),l={minX:i.x-s,minY:i.y-s,maxX:i.x+s,maxY:i.y+s};return [{anchor:i,bboxes:[l],draw:c(f=>{this.draw(f,[[new Point(0,0)]],e.zoom,r);},\"draw\")}]}};c(Ae,\"CircleSymbolizer\");var te=Ae,De=class De{constructor(e){this.font=new N(e),this.text=new E(e),this.fill=new M$1(e.fill,\"black\"),this.background=new M$1(e.background,\"white\"),this.padding=new T(e.padding,0);}place(e,t,r){let n=this.text.get(e.zoom,r);if(!n)return;let i=this.font.get(e.zoom,r);e.scratch.font=i;let s=e.scratch.measureText(n),l=s.width,o=s.actualBoundingBoxAscent,f=s.actualBoundingBoxDescent;t[0];let m=new Point(t[0][0].x,t[0][0].y),d=this.padding.get(e.zoom,r),b={minX:m.x-l/2-d,minY:m.y-o-d,maxX:m.x+l/2+d,maxY:m.y+f+d};return [{anchor:m,bboxes:[b],draw:c(y=>{y.globalAlpha=1,y.fillStyle=this.background.get(e.zoom,r),y.fillRect(-l/2-d,-o-d,l+2*d,o+f+2*d),y.fillStyle=this.fill.get(e.zoom,r),y.font=i,y.fillText(n,-l/2,0);},\"draw\")}]}};c(De,\"ShieldSymbolizer\");var at=De,Me=class Me{constructor(e){this.list=e;}place(e,t,r){let n=this.list[0].place(e,t,r);if(!n)return;let i=n[0],s=i.anchor,l=i.bboxes[0],o=l.maxY-l.minY,f=[{draw:i.draw,translate:{x:0,y:0}}],u=[[new Point(t[0][0].x,t[0][0].y+o)]];for(let d=1;d<this.list.length;d++)n=this.list[d].place(e,u,r),n&&(i=n[0],l=lt(l,i.bboxes[0]),f.push({draw:i.draw,translate:{x:0,y:o}}));return [{anchor:s,bboxes:[l],draw:c(d=>{for(let b of f)d.save(),d.translate(b.translate.x,b.translate.y),b.draw(d),d.restore();},\"draw\")}]}};c(Me,\"FlexSymbolizer\");var st=Me,lt=c((a,e)=>({minX:Math.min(a.minX,e.minX),minY:Math.min(a.minY,e.minY),maxX:Math.max(a.maxX,e.maxX),maxY:Math.max(a.maxY,e.maxY)}),\"mergeBbox\"),Oe=class Oe{constructor(e){this.list=e;}place(e,t,r){let n=this.list[0];if(!n)return;let i=n.place(e,t,r);if(!i)return;let s=i[0],l=s.anchor,o=s.bboxes[0],f=[s.draw];for(let m=1;m<this.list.length;m++){if(i=this.list[m].place(e,t,r),!i)return;s=i[0],o=lt(o,s.bboxes[0]),f.push(s.draw);}return [{anchor:l,bboxes:[o],draw:c(m=>{for(let d of f)d(m);},\"draw\")}]}};c(Oe,\"GroupSymbolizer\");var re=Oe,Re=class Re{constructor(e){this.symbolizer=e;}place(e,t,r){let n=t[0][0],i=this.symbolizer.place(e,[[new Point(0,0)]],r);if(!i||i.length===0)return;let s=i[0],l=s.bboxes[0],o=l.maxX-l.minX,f=l.maxY-l.minY,u={minX:n.x-o/2,maxX:n.x+o/2,minY:n.y-f/2,maxY:n.y+f/2};return [{anchor:n,bboxes:[u],draw:c(d=>{d.translate(-o/2,f/2-l.maxY),s.draw(d,{justify:2});},\"draw\")}]}};c(Re,\"CenteredSymbolizer\");var Te=Re,Fe=class Fe{constructor(e,t){this.padding=new T(e,0),this.symbolizer=t;}place(e,t,r){let n=this.symbolizer.place(e,t,r);if(!n||n.length===0)return;let i=this.padding.get(e.zoom,r);for(let s of n)for(let l of s.bboxes)l.minX-=i,l.minY-=i,l.maxX+=i,l.maxY+=i;return n}};c(Fe,\"Padding\");var ot=Fe,je=class je{constructor(e){this.font=new N(e),this.text=new E(e),this.fill=new M$1(e.fill,\"black\"),this.stroke=new M$1(e.stroke,\"black\"),this.width=new T(e.width,0),this.lineHeight=new T(e.lineHeight,1),this.letterSpacing=new T(e.letterSpacing,0),this.maxLineCodeUnits=new T(e.maxLineChars,15),this.justify=e.justify;}place(e,t,r){let n=this.text.get(e.zoom,r);if(!n)return;let i=this.font.get(e.zoom,r);e.scratch.font=i;let s=this.letterSpacing.get(e.zoom,r),l=xe(n,this.maxLineCodeUnits.get(e.zoom,r)),o=\"\",f=0;for(let p of l)p.length>f&&(f=p.length,o=p);let u=e.scratch.measureText(o),m=u.width+s*(f-1),d=u.actualBoundingBoxAscent,b=u.actualBoundingBoxDescent,g=(d+b)*this.lineHeight.get(e.zoom,r),y=new Point(t[0][0].x,t[0][0].y),_={minX:y.x,minY:y.y-d,maxX:y.x+m,maxY:y.y+b+(l.length-1)*g};return [{anchor:y,bboxes:[_],draw:c((p,x)=>{p.globalAlpha=1,p.font=i,p.fillStyle=this.fill.get(e.zoom,r);let S=this.width.get(e.zoom,r),h=0;for(let v of l){let z=0;if(this.justify===2||x&&x.justify===2?z=(m-p.measureText(v).width)/2:(this.justify===3||x&&x.justify===3)&&(z=m-p.measureText(v).width),S)if(p.lineWidth=S*2,p.strokeStyle=this.stroke.get(e.zoom,r),s>0){let w=z;for(let C of v)p.strokeText(C,w,h),w+=p.measureText(C).width+s;}else p.strokeText(v,z,h);if(s>0){let w=z;for(let C of v)p.fillText(C,w,h),w+=p.measureText(C).width+s;}else p.fillText(v,z,h);h+=g;}},\"draw\")}]}};c(je,\"TextSymbolizer\");var ne=je,Xe=class Xe{constructor(e){this.centered=new Te(new ne(e));}place(e,t,r){return this.centered.place(e,t,r)}};c(Xe,\"CenteredTextSymbolizer\");var I=Xe,Ye=class Ye{constructor(e,t){var r,n,i;this.symbolizer=e,this.offsetX=new T(t.offsetX,0),this.offsetY=new T(t.offsetY,0),this.justify=(r=t.justify)!=null?r:void 0,this.placements=(n=t.placements)!=null?n:[2,6,8,4,1,3,5,7],this.ddValues=(i=t.ddValues)!=null?i:()=>({});}place(e,t,r){if(r.geomType!==1)return;let n=t[0][0],i=this.symbolizer.place(e,[[new Point(0,0)]],r);if(!i||i.length===0)return;let s=i[0],l=s.bboxes[0],o=this.offsetX,f=this.offsetY,u=this.justify,m=this.placements,{offsetX:d,offsetY:b,justify:g,placements:y}=this.ddValues(e.zoom,r)||{};d&&(o=new T(d,0)),b&&(f=new T(b,0)),g&&(u=g),y&&(m=y);let _=o.get(e.zoom,r),k=f.get(e.zoom,r),p=c((z,w)=>({minX:z.x+w.x+l.minX,minY:z.y+w.y+l.minY,maxX:z.x+w.x+l.maxX,maxY:z.y+w.y+l.maxY}),\"getBbox\"),x=new Point(_,k),S,h=c(z=>{z.translate(x.x,x.y),s.draw(z,{justify:S});},\"draw\"),v=c((z,w)=>{let C=p(z,w);if(!e.index.bboxCollides(C,e.order))return [{anchor:n,bboxes:[C],draw:h}]},\"placeLabelInPoint\");for(let z of m){let w=this.computeXaxisOffset(_,l,z),C=this.computeYaxisOffset(k,l,z);return S=this.computeJustify(u,z),x=new Point(w,C),v(n,x)}}computeXaxisOffset(e,t,r){let n=t.maxX,i=n/2;return [1,5].includes(r)?e-i:[8,7,6].includes(r)?e-n:e}computeYaxisOffset(e,t,r){let n=Math.abs(t.minY),i=t.maxY,s=(t.minY+t.maxY)/2;return [3,7].includes(r)?e-s:[8,2,1].includes(r)?e-i:[6,4,5].includes(r)?e+n:e}computeJustify(e,t){return e||([1,5].includes(t)?2:[2,3,4].includes(t)?1:3)}};c(Ye,\"OffsetSymbolizer\");var Pe=Ye,Ie=class Ie{constructor(e){this.symbolizer=new Pe(new ne(e),e);}place(e,t,r){return this.symbolizer.place(e,t,r)}};c(Ie,\"OffsetTextSymbolizer\");var ie=Ie,Rt=(r=>(r[r.Above=1]=\"Above\",r[r.Center=2]=\"Center\",r[r.Below=3]=\"Below\",r))(Rt||{}),Be=class Be{constructor(e){var t;this.font=new N(e),this.text=new E(e),this.fill=new M$1(e.fill,\"black\"),this.stroke=new M$1(e.stroke,\"black\"),this.width=new T(e.width,0),this.offset=new T(e.offset,0),this.position=(t=e.position)!=null?t:1,this.maxLabelCodeUnits=new T(e.maxLabelChars,40),this.repeatDistance=new T(e.repeatDistance,250);}place(e,t,r){let n=this.text.get(e.zoom,r);if(!n||n.length>this.maxLabelCodeUnits.get(e.zoom,r))return;let i=20,s=r.bbox;if(s.maxY-s.minY<i&&s.maxX-s.minX<i)return;let l=this.font.get(e.zoom,r);e.scratch.font=l;let o=e.scratch.measureText(n),f=o.width,u=o.actualBoundingBoxAscent+o.actualBoundingBoxDescent,m=this.repeatDistance.get(e.zoom,r);e.overzoom>4&&(m*=1<<e.overzoom-4);let d=u*2,b=Ue(t,f,m,d);if(b.length===0)return;let g=[];for(let y of b){let _=y.end.x-y.start.x,k=y.end.y-y.start.y,x=Ge(y.start,y.end,f,d/2).map(h=>({minX:h.x-d/2,minY:h.y-d/2,maxX:h.x+d/2,maxY:h.y+d/2})),S=c(h=>{h.globalAlpha=1,h.rotate(Math.atan2(k,_)),_<0&&(h.scale(-1,-1),h.translate(-f,0));let v=0;this.position===3?v+=u:this.position===2&&(v+=u/2),h.translate(0,v-this.offset.get(e.zoom,r)),h.font=l;let z=this.width.get(e.zoom,r);z&&(h.lineWidth=z,h.strokeStyle=this.stroke.get(e.zoom,r),h.strokeText(n,0,0)),h.fillStyle=this.fill.get(e.zoom,r),h.fillText(n,0,0);},\"draw\");g.push({anchor:y.start,bboxes:x,draw:S,deduplicationKey:n,deduplicationDistance:m});}return g}};c(Be,\"LineLabelSymbolizer\");var $=Be;var R=c((a,e)=>{let t=a[e];return typeof t==\"string\"?t:\"\"},\"getString\"),ct=c((a,e)=>{let t=a[e];return typeof t==\"number\"?t:0},\"getNumber\"),ae=c(a=>[{dataLayer:\"earth\",symbolizer:new P({fill:a.earth})},{dataLayer:\"landuse\",symbolizer:new P({fill:c((e,t)=>mix(a.park_a,a.park_b,Math.min(Math.max(e/12,12),0)),\"fill\")}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"allotments\",\"village_green\",\"playground\"].includes(r)},\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.park_b,opacity:.7}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"national_park\",\"park\",\"cemetery\",\"protected_area\",\"nature_reserve\",\"forest\",\"golf_course\"].includes(r)},\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.hospital}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"hospital\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.industrial}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"industrial\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.school}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"school\",\"university\",\"college\"].includes(r)},\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.beach}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"beach\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.zoo}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"zoo\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.zoo}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"military\",\"naval_base\",\"airfield\"].includes(r)},\"filter\")},{dataLayer:\"natural\",symbolizer:new P({fill:c((e,t)=>mix(a.wood_a,a.wood_b,Math.min(Math.max(e/12,12),0)),\"fill\")}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"wood\",\"nature_reserve\",\"forest\"].includes(r)},\"filter\")},{dataLayer:\"natural\",symbolizer:new P({fill:c((e,t)=>mix(a.scrub_a,a.scrub_b,Math.min(Math.max(e/12,12),0)),\"fill\")}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"scrub\",\"grassland\",\"grass\"].includes(r)},\"filter\")},{dataLayer:\"natural\",symbolizer:new P({fill:a.scrub_b}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"scrub\",\"grassland\",\"grass\"].includes(r)},\"filter\")},{dataLayer:\"natural\",symbolizer:new P({fill:a.glacier}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"glacier\",\"filter\")},{dataLayer:\"natural\",symbolizer:new P({fill:a.sand}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"sand\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.aerodrome}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"aerodrome\",\"filter\")},{dataLayer:\"water\",symbolizer:new P({fill:a.water})},{dataLayer:\"transit\",symbolizer:new O({color:a.runway,width:c((e,t)=>F(1.6,[[11,0],[13,4],[19,30]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind_detail\"]===\"runway\",\"filter\")},{dataLayer:\"transit\",symbolizer:new O({color:a.runway,width:c((e,t)=>F(1.6,[[14,0],[14.5,1],[16,6]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind_detail\"]===\"taxiway\",\"filter\")},{dataLayer:\"transit\",symbolizer:new O({color:a.pier,width:c((e,t)=>F(1.6,[[13,0],[13.5,0,5],[21,16]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"pier\",\"filter\")},{dataLayer:\"physical_line\",minzoom:14,symbolizer:new O({color:a.water,width:c((e,t)=>F(1.6,[[9,0],[9.5,1],[18,12]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"river\",\"filter\")},{dataLayer:\"physical_line\",minzoom:14,symbolizer:new O({color:a.water,width:.5}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"stream\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.pedestrian}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"pedestrian\",\"filter\")},{dataLayer:\"landuse\",symbolizer:new P({fill:a.pier}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"pier\",\"filter\")},{dataLayer:\"buildings\",symbolizer:new P({fill:a.buildings,opacity:.5})},{dataLayer:\"roads\",symbolizer:new O({color:a.major,width:c((e,t)=>F(1.6,[[14,0],[20,7]])(e),\"width\")}),filter:c((e,t)=>{let r=R(t.props,\"pmap:kind\");return [\"other\",\"path\"].includes(r)},\"filter\")},{dataLayer:\"roads\",symbolizer:new O({color:a.major,width:c((e,t)=>F(1.6,[[13,0],[18,8]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"minor_road\",\"filter\")},{dataLayer:\"roads\",symbolizer:new O({color:a.major,width:c((e,t)=>F(1.6,[[7,0],[12,1.2],[15,3],[18,13]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"medium_road\",\"filter\")},{dataLayer:\"roads\",symbolizer:new O({color:a.major,width:c((e,t)=>F(1.6,[[6,0],[12,1.6],[15,3],[18,13]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"major_road\",\"filter\")},{dataLayer:\"roads\",symbolizer:new O({color:a.major,width:c((e,t)=>F(1.6,[[3,0],[6,1.1],[12,1.6],[15,5],[18,15]])(e),\"width\")}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"highway\",\"filter\")},{dataLayer:\"boundaries\",symbolizer:new O({dash:[3,2],color:a.boundaries,width:1}),filter:c((e,t)=>{let r=t.props[\"pmap:min_admin_level\"];return typeof r==\"number\"&&r<=2},\"filter\")},{dataLayer:\"transit\",symbolizer:new O({dash:[.3,.75],color:a.railway,dashWidth:c((e,t)=>F(1.6,[[4,0],[7,.15],[19,9]])(e),\"dashWidth\"),opacity:.5}),filter:c((e,t)=>t.props[\"pmap:kind\"]===\"rail\",\"filter\")},{dataLayer:\"boundaries\",symbolizer:new O({dash:[3,2],color:a.boundaries,width:.5}),filter:c((e,t)=>{let r=t.props[\"pmap:min_admin_level\"];return typeof r==\"number\"&&r>2},\"filter\")}],\"paintRules\"),se=c(a=>{let e=[\"name\"];return [{dataLayer:\"roads\",symbolizer:new $({labelProps:e,fill:a.roads_label_minor,font:\"400 12px sans-serif\",width:2,stroke:a.roads_label_minor_halo}),minzoom:16,filter:c((t,r)=>{let n=R(r.props,\"pmap:kind\");return [\"minor_road\",\"other\",\"path\"].includes(n)},\"filter\")},{dataLayer:\"roads\",symbolizer:new $({labelProps:e,fill:a.roads_label_major,font:\"400 12px sans-serif\",width:2,stroke:a.roads_label_major_halo}),minzoom:12,filter:c((t,r)=>{let n=R(r.props,\"pmap:kind\");return [\"highway\",\"major_road\",\"medium_road\"].includes(n)},\"filter\")},{dataLayer:\"roads\",symbolizer:new $({labelProps:e,fill:a.roads_label_major,font:\"400 12px sans-serif\",width:2,stroke:a.roads_label_major_halo}),minzoom:12,filter:c((t,r)=>{let n=R(r.props,\"pmap:kind\");return [\"highway\",\"major_road\",\"medium_road\"].includes(n)},\"filter\")},{dataLayer:\"physical_point\",symbolizer:new I({labelProps:e,fill:a.ocean_label,lineHeight:1.5,letterSpacing:1,font:c((t,r)=>`400 ${Le([[3,10],[10,12]])(t)}px sans-serif`,\"font\"),textTransform:\"uppercase\"}),filter:c((t,r)=>{let n=R(r.props,\"pmap:kind\");return [\"ocean\",\"bay\",\"strait\",\"fjord\"].includes(n)},\"filter\")},{dataLayer:\"physical_point\",symbolizer:new I({labelProps:e,fill:a.ocean_label,lineHeight:1.5,letterSpacing:1,font:c((t,r)=>`400 ${Le([[3,0],[6,12],[10,12]])(t)}px sans-serif`,\"font\")}),filter:c((t,r)=>{let n=R(r.props,\"pmap:kind\");return [\"sea\",\"lake\",\"water\"].includes(n)},\"filter\")},{dataLayer:\"places\",symbolizer:new I({labelProps:c((t,r)=>t<6?[\"name:short\"]:e,\"labelProps\"),fill:a.state_label,stroke:a.state_label_halo,width:1,lineHeight:1.5,font:c((t,r)=>t<6?\"400 16px sans-serif\":\"400 12px sans-serif\",\"font\"),textTransform:\"uppercase\"}),filter:c((t,r)=>r.props[\"pmap:kind\"]===\"region\",\"filter\")},{dataLayer:\"places\",symbolizer:new I({labelProps:e,fill:a.country_label,lineHeight:1.5,font:c((t,r)=>(\"600 12px sans-serif\"),\"font\"),textTransform:\"uppercase\"}),filter:c((t,r)=>r.props[\"pmap:kind\"]===\"country\",\"filter\")},{dataLayer:\"places\",minzoom:9,symbolizer:new I({labelProps:e,fill:a.city_label,lineHeight:1.5,font:c((t,r)=>{if(!r)return \"400 12px sans-serif\";let n=r.props[\"pmap:min_zoom\"],i=400;n&&n<=5&&(i=600);let s=12,l=r.props[\"pmap:population_rank\"];return l&&l>9&&(s=16),`${i} ${s}px sans-serif`},\"font\")}),sort:c((t,r)=>{let n=ct(t,\"pmap:population_rank\"),i=ct(r,\"pmap:population_rank\");return n-i},\"sort\"),filter:c((t,r)=>r.props[\"pmap:kind\"]===\"locality\",\"filter\")},{dataLayer:\"places\",maxzoom:8,symbolizer:new re([new te({radius:2,fill:a.city_circle,stroke:a.city_circle_stroke,width:1.5}),new ie({labelProps:e,fill:a.city_label,stroke:a.city_label_halo,width:1,offsetX:6,offsetY:4.5,font:c((t,r)=>\"400 12px sans-serif\",\"font\")})]),filter:c((t,r)=>r.props[\"pmap:kind\"]===\"locality\",\"filter\")}]},\"labelRules\");var Ft={background:\"#cccccc\",earth:\"#e0e0e0\",park_a:\"#cfddd5\",park_b:\"#9cd3b4\",hospital:\"#e4dad9\",industrial:\"#d1dde1\",school:\"#e4ded7\",wood_a:\"#d0ded0\",wood_b:\"#a0d9a0\",pedestrian:\"#e3e0d4\",scrub_a:\"#cedcd7\",scrub_b:\"#99d2bb\",glacier:\"#e7e7e7\",sand:\"#e2e0d7\",beach:\"#e8e4d0\",aerodrome:\"#dadbdf\",runway:\"#e9e9ed\",water:\"#80deea\",pier:\"#e0e0e0\",zoo:\"#c6dcdc\",military:\"#dcdcdc\",tunnel_other_casing:\"#e0e0e0\",tunnel_minor_casing:\"#e0e0e0\",tunnel_link_casing:\"#e0e0e0\",tunnel_medium_casing:\"#e0e0e0\",tunnel_major_casing:\"#e0e0e0\",tunnel_highway_casing:\"#e0e0e0\",tunnel_other:\"#d5d5d5\",tunnel_minor:\"#d5d5d5\",tunnel_link:\"#d5d5d5\",tunnel_medium:\"#d5d5d5\",tunnel_major:\"#d5d5d5\",tunnel_highway:\"#d5d5d5\",transit_pier:\"#e0e0e0\",buildings:\"#cccccc\",minor_service_casing:\"#e0e0e0\",minor_casing:\"#e0e0e0\",link_casing:\"#e0e0e0\",medium_casing:\"#e0e0e0\",major_casing_late:\"#e0e0e0\",highway_casing_late:\"#e0e0e0\",other:\"#ebebeb\",minor_service:\"#ebebeb\",minor_a:\"#ebebeb\",minor_b:\"#ffffff\",link:\"#ffffff\",medium:\"#f5f5f5\",major_casing_early:\"#e0e0e0\",major:\"#ffffff\",highway_casing_early:\"#e0e0e0\",highway:\"#ffffff\",railway:\"#a7b1b3\",boundaries:\"#adadad\",waterway_label:\"#ffffff\",bridges_other_casing:\"#e0e0e0\",bridges_minor_casing:\"#e0e0e0\",bridges_link_casing:\"#e0e0e0\",bridges_medium_casing:\"#e0e0e0\",bridges_major_casing:\"#e0e0e0\",bridges_highway_casing:\"#e0e0e0\",bridges_other:\"#ebebeb\",bridges_minor:\"#ffffff\",bridges_link:\"#ffffff\",bridges_medium:\"#f0eded\",bridges_major:\"#f5f5f5\",bridges_highway:\"#ffffff\",roads_label_minor:\"#91888b\",roads_label_minor_halo:\"#ffffff\",roads_label_major:\"#938a8d\",roads_label_major_halo:\"#ffffff\",ocean_label:\"#ffffff\",peak_label:\"#7e9aa0\",subplace_label:\"#8f8f8f\",subplace_label_halo:\"#e0e0e0\",city_circle:\"#ffffff\",city_circle_stroke:\"#a3a3a3\",city_label:\"#5c5c5c\",city_label_halo:\"#e0e0e0\",state_label:\"#b3b3b3\",state_label_halo:\"#e0e0e0\",country_label:\"#a3a3a3\"},jt={background:\"#34373d\",earth:\"#1f1f1f\",park_a:\"#232325\",park_b:\"#232325\",hospital:\"#252424\",industrial:\"#222222\",school:\"#262323\",wood_a:\"#202121\",wood_b:\"#202121\",pedestrian:\"#1e1e1e\",scrub_a:\"#222323\",scrub_b:\"#222323\",glacier:\"#1c1c1c\",sand:\"#212123\",beach:\"#28282a\",aerodrome:\"#1e1e1e\",runway:\"#333333\",water:\"#34373d\",pier:\"#222222\",zoo:\"#222323\",military:\"#242323\",tunnel_other_casing:\"#141414\",tunnel_minor_casing:\"#141414\",tunnel_link_casing:\"#141414\",tunnel_medium_casing:\"#141414\",tunnel_major_casing:\"#141414\",tunnel_highway_casing:\"#141414\",tunnel_other:\"#292929\",tunnel_minor:\"#292929\",tunnel_link:\"#292929\",tunnel_medium:\"#292929\",tunnel_major:\"#292929\",tunnel_highway:\"#292929\",transit_pier:\"#333333\",buildings:\"#111111\",minor_service_casing:\"#1f1f1f\",minor_casing:\"#1f1f1f\",link_casing:\"#1f1f1f\",medium_casing:\"#1f1f1f\",major_casing_late:\"#1f1f1f\",highway_casing_late:\"#1f1f1f\",other:\"#333333\",minor_service:\"#333333\",minor_a:\"#3d3d3d\",minor_b:\"#333333\",link:\"#3d3d3d\",medium:\"#3d3d3d\",major_casing_early:\"#1f1f1f\",major:\"#3d3d3d\",highway_casing_early:\"#1f1f1f\",highway:\"#474747\",railway:\"#000000\",boundaries:\"#5b6374\",waterway_label:\"#717784\",bridges_other_casing:\"#2b2b2b\",bridges_minor_casing:\"#1f1f1f\",bridges_link_casing:\"#1f1f1f\",bridges_medium_casing:\"#1f1f1f\",bridges_major_casing:\"#1f1f1f\",bridges_highway_casing:\"#1f1f1f\",bridges_other:\"#333333\",bridges_minor:\"#333333\",bridges_link:\"#3d3d3d\",bridges_medium:\"#3d3d3d\",bridges_major:\"#3d3d3d\",bridges_highway:\"#474747\",roads_label_minor:\"#525252\",roads_label_minor_halo:\"#1f1f1f\",roads_label_major:\"#666666\",roads_label_major_halo:\"#1f1f1f\",ocean_label:\"#717784\",peak_label:\"#898080\",subplace_label:\"#525252\",subplace_label_halo:\"#1f1f1f\",city_circle:\"#000000\",city_circle_stroke:\"#7a7a7a\",city_label:\"#7a7a7a\",city_label_halo:\"#212121\",state_label:\"#3d3d3d\",state_label_halo:\"#1f1f1f\",country_label:\"#5c5c5c\"},Xt={background:\"#ffffff\",earth:\"#ffffff\",park_a:\"#fcfcfc\",park_b:\"#fcfcfc\",hospital:\"#f8f8f8\",industrial:\"#fcfcfc\",school:\"#f8f8f8\",wood_a:\"#fafafa\",wood_b:\"#fafafa\",pedestrian:\"#fdfdfd\",scrub_a:\"#fafafa\",scrub_b:\"#fafafa\",glacier:\"#fcfcfc\",sand:\"#fafafa\",beach:\"#f6f6f6\",aerodrome:\"#fdfdfd\",runway:\"#efefef\",water:\"#dcdcdc\",pier:\"#f5f5f5\",zoo:\"#f7f7f7\",military:\"#fcfcfc\",tunnel_other_casing:\"#d6d6d6\",tunnel_minor_casing:\"#fcfcfc\",tunnel_link_casing:\"#fcfcfc\",tunnel_medium_casing:\"#fcfcfc\",tunnel_major_casing:\"#fcfcfc\",tunnel_highway_casing:\"#fcfcfc\",tunnel_other:\"#d6d6d6\",tunnel_minor:\"#d6d6d6\",tunnel_link:\"#d6d6d6\",tunnel_medium:\"#d6d6d6\",tunnel_major:\"#d6d6d6\",tunnel_highway:\"#d6d6d6\",transit_pier:\"#efefef\",buildings:\"#efefef\",minor_service_casing:\"#ffffff\",minor_casing:\"#ffffff\",link_casing:\"#ffffff\",medium_casing:\"#ffffff\",major_casing_late:\"#ffffff\",highway_casing_late:\"#ffffff\",other:\"#f5f5f5\",minor_service:\"#f5f5f5\",minor_a:\"#ebebeb\",minor_b:\"#f5f5f5\",link:\"#ebebeb\",medium:\"#ebebeb\",major_casing_early:\"#ffffff\",major:\"#ebebeb\",highway_casing_early:\"#ffffff\",highway:\"#ebebeb\",railway:\"#d6d6d6\",boundaries:\"#adadad\",waterway_label:\"#adadad\",bridges_other_casing:\"#ffffff\",bridges_minor_casing:\"#ffffff\",bridges_link_casing:\"#ffffff\",bridges_medium_casing:\"#ffffff\",bridges_major_casing:\"#ffffff\",bridges_highway_casing:\"#ffffff\",bridges_other:\"#f5f5f5\",bridges_minor:\"#f5f5f5\",bridges_link:\"#ebebeb\",bridges_medium:\"#ebebeb\",bridges_major:\"#ebebeb\",bridges_highway:\"#ebebeb\",roads_label_minor:\"#adadad\",roads_label_minor_halo:\"#ffffff\",roads_label_major:\"#999999\",roads_label_major_halo:\"#ffffff\",ocean_label:\"#adadad\",peak_label:\"#adadad\",subplace_label:\"#8f8f8f\",subplace_label_halo:\"#ffffff\",city_circle:\"#ffffff\",city_circle_stroke:\"#adadad\",city_label:\"#5c5c5c\",city_label_halo:\"#ffffff\",state_label:\"#b3b3b3\",state_label_halo:\"#ffffff\",country_label:\"#b8b8b8\"},Yt={background:\"#a3a3a3\",earth:\"#cccccc\",park_a:\"#c2c2c2\",park_b:\"#c2c2c2\",hospital:\"#d0d0d0\",industrial:\"#c6c6c6\",school:\"#d0d0d0\",wood_a:\"#c2c2c2\",wood_b:\"#c2c2c2\",pedestrian:\"#c4c4c4\",scrub_a:\"#c2c2c2\",scrub_b:\"#c2c2c2\",glacier:\"#d2d2d2\",sand:\"#d2d2d2\",beach:\"#d2d2d2\",aerodrome:\"#c9c9c9\",runway:\"#f5f5f5\",water:\"#a3a3a3\",pier:\"#b8b8b8\",zoo:\"#c7c7c7\",military:\"#bfbfbf\",tunnel_other_casing:\"#b8b8b8\",tunnel_minor_casing:\"#b8b8b8\",tunnel_link_casing:\"#b8b8b8\",tunnel_medium_casing:\"#b8b8b8\",tunnel_major_casing:\"#b8b8b8\",tunnel_highway_casing:\"#b8b8b8\",tunnel_other:\"#d6d6d6\",tunnel_minor:\"#d6d6d6\",tunnel_link:\"#d6d6d6\",tunnel_medium:\"#d6d6d6\",tunnel_major:\"#d6d6d6\",tunnel_highway:\"#d6d6d6\",transit_pier:\"#b8b8b8\",buildings:\"#e0e0e0\",minor_service_casing:\"#cccccc\",minor_casing:\"#cccccc\",link_casing:\"#cccccc\",medium_casing:\"#cccccc\",major_casing_late:\"#cccccc\",highway_casing_late:\"#cccccc\",other:\"#e0e0e0\",minor_service:\"#e0e0e0\",minor_a:\"#ebebeb\",minor_b:\"#e0e0e0\",link:\"#ebebeb\",medium:\"#ebebeb\",major_casing_early:\"#cccccc\",major:\"#ebebeb\",highway_casing_early:\"#cccccc\",highway:\"#ebebeb\",railway:\"#f5f5f5\",boundaries:\"#5c5c5c\",waterway_label:\"#7a7a7a\",bridges_other_casing:\"#cccccc\",bridges_minor_casing:\"#cccccc\",bridges_link_casing:\"#cccccc\",bridges_medium_casing:\"#cccccc\",bridges_major_casing:\"#cccccc\",bridges_highway_casing:\"#cccccc\",bridges_other:\"#e0e0e0\",bridges_minor:\"#e0e0e0\",bridges_link:\"#ebebeb\",bridges_medium:\"#ebebeb\",bridges_major:\"#ebebeb\",bridges_highway:\"#ebebeb\",roads_label_minor:\"#999999\",roads_label_minor_halo:\"#e0e0e0\",roads_label_major:\"#8f8f8f\",roads_label_major_halo:\"#ebebeb\",ocean_label:\"#7a7a7a\",peak_label:\"#5c5c5c\",subplace_label:\"#7a7a7a\",subplace_label_halo:\"#cccccc\",city_circle:\"#c2c2c2\",city_circle_stroke:\"#7a7a7a\",city_label:\"#474747\",city_label_halo:\"#cccccc\",state_label:\"#999999\",state_label_halo:\"#cccccc\",country_label:\"#858585\"},It={background:\"#2b2b2b\",earth:\"#141414\",park_a:\"#181818\",park_b:\"#181818\",hospital:\"#1d1d1d\",industrial:\"#101010\",school:\"#111111\",wood_a:\"#1a1a1a\",wood_b:\"#1a1a1a\",pedestrian:\"#191919\",scrub_a:\"#1c1c1c\",scrub_b:\"#1c1c1c\",glacier:\"#191919\",sand:\"#161616\",beach:\"#1f1f1f\",aerodrome:\"#191919\",runway:\"#323232\",water:\"#333333\",pier:\"#0a0a0a\",zoo:\"#191919\",military:\"#121212\",tunnel_other_casing:\"#101010\",tunnel_minor_casing:\"#101010\",tunnel_link_casing:\"#101010\",tunnel_medium_casing:\"#101010\",tunnel_major_casing:\"#101010\",tunnel_highway_casing:\"#101010\",tunnel_other:\"#292929\",tunnel_minor:\"#292929\",tunnel_link:\"#292929\",tunnel_medium:\"#292929\",tunnel_major:\"#292929\",tunnel_highway:\"#292929\",transit_pier:\"#0a0a0a\",buildings:\"#0a0a0a\",minor_service_casing:\"#141414\",minor_casing:\"#141414\",link_casing:\"#141414\",medium_casing:\"#141414\",major_casing_late:\"#141414\",highway_casing_late:\"#141414\",other:\"#1f1f1f\",minor_service:\"#1f1f1f\",minor_a:\"#292929\",minor_b:\"#1f1f1f\",link:\"#1f1f1f\",medium:\"#292929\",major_casing_early:\"#141414\",major:\"#292929\",highway_casing_early:\"#141414\",highway:\"#292929\",railway:\"#292929\",boundaries:\"#707070\",waterway_label:\"#707070\",bridges_other_casing:\"#141414\",bridges_minor_casing:\"#141414\",bridges_link_casing:\"#141414\",bridges_medium_casing:\"#141414\",bridges_major_casing:\"#141414\",bridges_highway_casing:\"#141414\",bridges_other:\"#1f1f1f\",bridges_minor:\"#1f1f1f\",bridges_link:\"#292929\",bridges_medium:\"#292929\",bridges_major:\"#292929\",bridges_highway:\"#292929\",roads_label_minor:\"#525252\",roads_label_minor_halo:\"#141414\",roads_label_major:\"#5c5c5c\",roads_label_major_halo:\"#141414\",ocean_label:\"#707070\",peak_label:\"#707070\",subplace_label:\"#5c5c5c\",subplace_label_halo:\"#141414\",city_circle:\"#000000\",city_circle_stroke:\"#666666\",city_label:\"#999999\",city_label_halo:\"#141414\",state_label:\"#3d3d3d\",state_label_halo:\"#141414\",country_label:\"#707070\"},oe={light:Ft,dark:jt,white:Xt,grayscale:Yt,black:It};var ce=c((a,e,t)=>{let r=[];for(let n of a){let i=[];for(let s of n)i.push(s.clone().mult(e).add(t));r.push(i);}return r},\"transformGeom\"),le=c((a,e)=>{let t=1<<e;return a<0?t+a:a>=t?a%t:a},\"wrap\"),$e=class $e{constructor(e,t,r){this.tileCache=e,this.maxDataLevel=t,this.levelDiff=r;}dataTilesForBounds(e,t){let r=A(2,e)/A(2,Math.ceil(e)),n=[],i=1,s=this.tileCache.tileSize;if(e<this.levelDiff)i=1/(1<<this.levelDiff-e)*r,n.push({dataTile:{z:0,x:0,y:0},origin:new Point(0,0),scale:i,dim:s*i});else if(e<=this.levelDiff+this.maxDataLevel){let l=1<<this.levelDiff,o=256*r,f=Math.ceil(e)-this.levelDiff,u=Math.floor(t.minX/l/o),m=Math.floor(t.minY/l/o),d=Math.floor(t.maxX/l/o),b=Math.floor(t.maxY/l/o);for(let g=u;g<=d;g++)for(let y=m;y<=b;y++){let _=new Point(g*l*o,y*l*o);n.push({dataTile:{z:f,x:le(g,f),y:le(y,f)},origin:_,scale:r,dim:s*r});}}else {let l=1<<this.levelDiff;i=(1<<Math.ceil(e)-this.maxDataLevel-this.levelDiff)*r;let o=Math.floor(t.minX/l/256/i),f=Math.floor(t.minY/l/256/i),u=Math.floor(t.maxX/l/256/i),m=Math.floor(t.maxY/l/256/i);for(let d=o;d<=u;d++)for(let b=f;b<=m;b++){let g=new Point(d*l*256*i,b*l*256*i);n.push({dataTile:{z:this.maxDataLevel,x:le(d,this.maxDataLevel),y:le(b,this.maxDataLevel)},origin:g,scale:i,dim:s*i});}}return n}dataTileForDisplayTile(e){let t,r=1,n=this.tileCache.tileSize,i;if(e.z<this.levelDiff)t={z:0,x:0,y:0},r=1/(1<<this.levelDiff-e.z),i=new Point(0,0),n=n*r;else if(e.z<=this.levelDiff+this.maxDataLevel){let s=1<<this.levelDiff;t={z:e.z-this.levelDiff,x:Math.floor(e.x/s),y:Math.floor(e.y/s)},i=new Point(t.x*s*256,t.y*s*256);}else {r=1<<e.z-this.maxDataLevel-this.levelDiff;let s=1<<this.levelDiff;t={z:this.maxDataLevel,x:Math.floor(e.x/s/r),y:Math.floor(e.y/s/r)},i=new Point(t.x*s*r*256,t.y*s*r*256),n=n*r;}return {dataTile:t,scale:r,origin:i,dim:n}}getBbox(e,t){return D(this,null,function*(){let r=this.dataTilesForBounds(e,t);return (yield Promise.all(r.map(i=>this.tileCache.get(i.dataTile)))).map((i,s)=>{let l=r[s];return {data:i,z:e,dataTile:l.dataTile,scale:l.scale,dim:l.dim,origin:l.origin}})})}getDisplayTile(e){return D(this,null,function*(){let t=this.dataTileForDisplayTile(e);return {data:yield this.tileCache.get(t.dataTile),z:e.z,dataTile:t.dataTile,scale:t.scale,origin:t.origin,dim:t.dim}})}queryFeatures(e,t,r,n){let i=Math.round(r),s=Math.min(i-this.levelDiff,this.maxDataLevel),l=n/(1<<i-s);return this.tileCache.queryFeatures(e,t,s,l)}};c($e,\"View\");var Ne=$e,fe=c(a=>{let e=c(r=>{let n=r.levelDiff===void 0?1:r.levelDiff,i=r.maxDataZoom||15,s;if(typeof r.url==\"string\")new URL(r.url,\"http://example.com\").pathname.endsWith(\".pmtiles\")?s=new H(r.url,!0):s=new Q(r.url,!0);else if(r.url)s=new H(r.url,!0);else throw new Error(`Invalid source ${r.url}`);let l=new ee(s,256*1<<n);return new Ne(l,i,n)},\"sourceToViews\"),t=new Map;if(a.sources)for(let r in a.sources)t.set(r,e(a.sources[r]));else t.set(\"\",e(a));return t},\"sourcesToViews\");var Nt=c((a,e,t)=>{let n=e/256,i=Math.floor(t.minX/256),s=Math.floor(t.minY/256),l=Math.floor(t.maxX/256),o=Math.floor(t.maxY/256),f=Math.log2(n),u=[];for(let m=i;m<=l;m++){let d=m%(1<<a);for(let b=s;b<=o;b++)u.push({display:Y({z:a,x:d,y:b}),key:Y({z:a-f,x:Math.floor(d/n),y:Math.floor(b/n)})});}return u},\"covering\"),We=class We{constructor(e,t){this.tree=new RBush,this.current=new Map,this.dim=e,this.maxLabeledTiles=t;}hasPrefix(e){for(let t of this.current.keys())if(t.startsWith(e))return !0;return !1}has(e){return this.current.has(e)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(e,t){let r=new Set;for(let n of this.tree.search(e))n.indexedLabel.order<=t&&r.add(n.indexedLabel);return r}searchLabel(e,t){let r=new Set;for(let n of e.bboxes)for(let i of this.tree.search(n))i.indexedLabel.order<=t&&r.add(i.indexedLabel);return r}bboxCollides(e,t){for(let r of this.tree.search(e))if(r.indexedLabel.order<=t)return !0;return !1}labelCollides(e,t){for(let r of e.bboxes)for(let n of this.tree.search(r))if(n.indexedLabel.order<=t)return !0;return !1}deduplicationCollides(e){if(!e.deduplicationKey||!e.deduplicationDistance)return !1;let t=e.deduplicationDistance,r={minX:e.anchor.x-t,minY:e.anchor.y-t,maxX:e.anchor.x+t,maxY:e.anchor.y+t};for(let n of this.tree.search(r))if(n.indexedLabel.deduplicationKey===e.deduplicationKey&&n.indexedLabel.anchor.dist(e.anchor)<t)return !0;return !1}makeEntry(e){this.current.get(e)&&console.log(\"consistency error 1\");let t=new Set;this.current.set(e,t);}insert(e,t,r){let n={anchor:e.anchor,bboxes:e.bboxes,draw:e.draw,order:t,tileKey:r,deduplicationKey:e.deduplicationKey,deduplicationDistance:e.deduplicationDistance},i=this.current.get(r);if(!i){let o=new Set;this.current.set(r,o),i=o;}i.add(n);let s=!1,l=!1;for(let o of e.bboxes)this.tree.insert({minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY,indexedLabel:n}),o.minX<0&&(s=!0),o.maxX>this.dim&&(l=!0);if(s||l){let o=s?this.dim:-this.dim,f=[];for(let d of e.bboxes)f.push({minX:d.minX+o,minY:d.minY,maxX:d.maxX+o,maxY:d.maxY});let u={anchor:new Point(e.anchor.x+o,e.anchor.y),bboxes:f,draw:e.draw,order:t,tileKey:r},m=this.current.get(r);m&&m.add(u);for(let d of f)this.tree.insert({minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,indexedLabel:u});}}pruneOrNoop(e){let t=e.split(\":\"),r,n=0,i=0;for(let s of this.current.keys()){let l=s.split(\":\");if(l[3]===t[3]){i++;let o=Math.sqrt(A(+l[0]-+t[0],2)+A(+l[1]-+t[1],2));o>n&&(n=o,r=s);}r&&i>this.maxLabeledTiles&&this.pruneKey(r);}}pruneKey(e){let t=this.current.get(e);if(!t)return;let r=[];for(let n of this.tree.all())t.has(n.indexedLabel)&&r.push(n);for(let n of r)this.tree.remove(n);this.current.delete(e);}removeLabel(e){let t=[];for(let n of this.tree.all())e===n.indexedLabel&&t.push(n);for(let n of t)this.tree.remove(n);let r=this.current.get(e.tileKey);r&&r.delete(e);}};c(We,\"Index\");var Je=We,He=class He{constructor(e,t,r,n,i){this.index=new Je(256*1<<e,n),this.z=e,this.scratch=t,this.labelRules=r,this.callback=i;}layout(e){let t=performance.now(),r=new Set;for(let[i,s]of e)for(let l of s){let o=`${Y(l.dataTile)}:${i}`;this.index.has(o)||(this.index.makeEntry(o),r.add(o));}let n=new Set;for(let[i,s]of this.labelRules.entries()){if(s.visible===!1||s.minzoom&&this.z<s.minzoom||s.maxzoom&&this.z>s.maxzoom)continue;let l=s.dataSource||\"\",o=e.get(l);if(o)for(let f of o){let u=`${Y(f.dataTile)}:${l}`;if(!r.has(u))continue;let m=f.data.get(s.dataLayer);if(m===void 0)continue;let d=m;s.sort&&d.sort((g,y)=>s.sort?s.sort(g.props,y.props):0);let b={index:this.index,zoom:this.z,scratch:this.scratch,order:i,overzoom:this.z-f.dataTile.z};for(let g of d){if(s.filter&&!s.filter(this.z,g))continue;let y=ce(g.geom,f.scale,f.origin),_=s.symbolizer.place(b,y,g);if(_)for(let k of _){let p=!1;if(!(k.deduplicationKey&&this.index.deduplicationCollides(k))){if(this.index.labelCollides(k,1/0)){if(!this.index.labelCollides(k,i)){let x=this.index.searchLabel(k,1/0);for(let S of x){this.index.removeLabel(S);for(let h of S.bboxes)this.findInvalidatedTiles(n,f.dim,h,u);}this.index.insert(k,i,u),p=!0;}}else this.index.insert(k,i,u),p=!0;if(p)for(let x of k.bboxes)(x.maxX>f.origin.x+f.dim||x.minX<f.origin.x||x.minY<f.origin.y||x.maxY>f.origin.y+f.dim)&&this.findInvalidatedTiles(n,f.dim,x,u);}}}}}for(let i of r)this.index.pruneOrNoop(i);return n.size>0&&this.callback&&this.callback(n),performance.now()-t}findInvalidatedTiles(e,t,r,n){let i=Nt(this.z,t,r);for(let s of i)s.key!==n&&this.index.hasPrefix(s.key)&&e.add(s.display);}add(e){let t=!0;for(let[n,i]of e)for(let s of i)this.index.has(`${Y(s.dataTile)}:${n}`)||(t=!1);return t?0:this.layout(e)}};c(He,\"Labeler\");var V=He,Ve=class Ve{constructor(e,t,r,n){this.labelers=new Map,this.scratch=e,this.labelRules=t,this.maxLabeledTiles=r,this.callback=n;}add(e,t){let r=this.labelers.get(e);return r||(r=new V(e,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(e,r)),r.add(t)}getIndex(e){let t=this.labelers.get(e);if(t)return t.index}};c(Ve,\"Labelers\");var Z=Ve;function ue(a,e,t,r,n,i,s,l,o){let f=performance.now();a.save(),a.miterLimit=2;for(let u of n){if(u.minzoom&&e<u.minzoom||u.maxzoom&&e>u.maxzoom)continue;let m=t.get(u.dataSource||\"\");if(m)for(let d of m){let b=d.data.get(u.dataLayer);if(b===void 0)continue;u.symbolizer.before&&u.symbolizer.before(a,d.z);let g=d.origin,y=d.dim,_=d.scale;if(a.save(),l){a.beginPath();let k=Math.max(g.x-s.x,i.minX-s.x),p=Math.max(g.y-s.y,i.minY-s.y),x=Math.min(g.x-s.x+y,i.maxX-s.x),S=Math.min(g.y-s.y+y,i.maxY-s.y);a.rect(k,p,x-k,S-p),a.clip();}a.translate(g.x-s.x,g.y-s.y);for(let k of b){let p=k.geom,x=k.bbox;x.maxX*_+g.x<i.minX||x.minX*_+g.x>i.maxX||x.minY*_+g.y>i.maxY||x.maxY*_+g.y<i.minY||u.filter&&!u.filter(d.z,k)||(_!==1&&(p=ce(p,_,new Point(0,0))),u.symbolizer.draw(a,p,d.z,k));}a.restore();}}if(l&&(a.beginPath(),a.rect(i.minX-s.x,i.minY-s.y,i.maxX-i.minX,i.maxY-i.minY),a.clip()),r){let u=r.searchBbox(i,1/0);for(let m of u)if(a.save(),a.translate(m.anchor.x-s.x,m.anchor.y-s.y),m.draw(a),a.restore(),o){a.lineWidth=.5,a.strokeStyle=o,a.fillStyle=o,a.globalAlpha=1,a.fillRect(m.anchor.x-s.x-2,m.anchor.y-s.y-2,4,4);for(let d of m.bboxes)a.strokeRect(d.minX-s.x,d.minY-s.y,d.maxX-d.minX,d.maxY-d.minY);}}return a.restore(),performance.now()-f}c(ue,\"paint\");var K=6378137,ft=85.0511287798,j=K*Math.PI,mt=c(a=>{let e=Math.PI/180,t=Math.max(Math.min(ft,a.y),-ft),r=Math.sin(t*e);return new Point(K*a.x*e,K*Math.log((1+r)/(1-r))/2)},\"project\"),Jt=c(a=>{let e=180/Math.PI;return {lat:(2*Math.atan(Math.exp(a.y/K))-Math.PI/2)*e,lng:a.x*e/K}},\"unproject\"),Wt=c((a,e)=>t=>{let r=mt(t);return new Point((r.x+j)/(j*2),1-(r.y+j)/(j*2)).mult((1<<e)*256).sub(a)},\"instancedProject\"),Ht=c((a,e)=>t=>{let r=new Point(t.x,t.y).add(a).div((1<<e)*256),n=new Point(r.x*(j*2)-j,(1-r.y)*(j*2)-j);return Jt(n)},\"instancedUnproject\"),ut=c((a,e)=>{let t=e*(360/a);return Math.log2(t/256)},\"getZoom\"),Ze=class Ze{constructor(e){if(e.theme){let t=oe[e.theme];this.paintRules=ae(t),this.labelRules=se(t),this.backgroundColor=t.background;}else this.paintRules=e.paintRules||[],this.labelRules=e.labelRules||[],this.backgroundColor=e.backgroundColor;this.views=fe(e),this.debug=e.debug||\"\";}drawContext(e,t,r,n,i){return D(this,null,function*(){let s=mt(n),o=new Point((s.x+j)/(j*2),1-(s.y+j)/(j*2)).clone().mult(A(2,i)*256).sub(new Point(t/2,r/2)),f={minX:o.x,minY:o.y,maxX:o.x+t,maxY:o.y+r},u=[];for(let[p,x]of this.views){let S=x.getBbox(i,f);u.push({key:p,promise:S});}let m=yield Promise.all(u.map(p=>p.promise.then(x=>({status:\"fulfilled\",value:x,key:p.key}),x=>({status:\"rejected\",value:[],reason:x,key:p.key})))),d=new Map;for(let p of m)p.status===\"fulfilled\"&&d.set(p.key,p.value);let b=performance.now(),g=new V(i,e,this.labelRules,16,void 0);g.add(d);this.backgroundColor&&(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,t,r),e.restore());let _=this.paintRules;ue(e,i,d,g.index,_,f,o,!0,this.debug);if(this.debug){e.save(),e.translate(-o.x,-o.y),e.strokeStyle=this.debug,e.fillStyle=this.debug,e.font=\"12px sans-serif\";let p=0;for(let[x,S]of d){for(let h of S){e.strokeRect(h.origin.x,h.origin.y,h.dim,h.dim);let v=h.dataTile;e.fillText(`${x+(x?\" \":\"\")+v.z} ${v.x} ${v.y}`,h.origin.x+4,h.origin.y+14*(1+p));}p++;}e.restore();}return {elapsed:performance.now()-b,project:Wt(o,i),unproject:Ht(o,i)}})}drawCanvas(i,s,l){return D(this,arguments,function*(e,t,r,n={}){let o=window.devicePixelRatio,f=e.clientWidth,u=e.clientHeight;e.width===f*o&&e.height===u*o||(e.width=f*o,e.height=u*o),n.lang&&(e.lang=n.lang);let m=e.getContext(\"2d\");if(!m){console.error(\"Failed to initialize canvas2d context.\");return}return m.setTransform(o,0,0,o,0,0),this.drawContext(m,f,u,t,r)})}drawContextBounds(e,t,r,n,i){return D(this,null,function*(){let s=r.x-t.x,l=new Point((t.x+r.x)/2,(t.y+r.y)/2);return this.drawContext(e,n,i,l,ut(s,n))})}drawCanvasBounds(s,l,o,f){return D(this,arguments,function*(e,t,r,n,i={}){let u=r.x-t.x,m=new Point((t.x+r.x)/2,(t.y+r.y)/2);return this.drawCanvas(e,m,ut(u,n),i)})}};c(Ze,\"Static\");var dt=Ze;var Zt=c(a=>new Promise(e=>{setTimeout(()=>{e();},a);}),\"timer\"),Kt=c(a=>a.then(e=>({status:\"fulfilled\",value:e}),e=>({status:\"rejected\",reason:e})),\"reflect\"),Pn=c((a={})=>{let t=class t extends L.GridLayer{constructor(n={}){if(n.noWrap&&!n.bounds&&(n.bounds=[[-90,-180],[90,180]]),n.attribution==null&&(n.attribution='<a href=\"https://protomaps.com\">Protomaps</a> \\xA9 <a href=\"https://openstreetmap.org/copyright\">OpenStreetMap</a>'),super(n),n.theme){let s=oe[n.theme];this.paintRules=ae(s),this.labelRules=se(s),this.backgroundColor=s.background;}else this.paintRules=n.paintRules||[],this.labelRules=n.labelRules||[],this.backgroundColor=n.backgroundColor;this.lastRequestedZ=void 0,this.tasks=n.tasks||[],this.views=fe(n),this.debug=n.debug;let i=document.createElement(\"canvas\").getContext(\"2d\");this.scratch=i,this.onTilesInvalidated=s=>{for(let l of s)this.rerenderTile(l);},this.labelers=new Z(this.scratch,this.labelRules,16,this.onTilesInvalidated),this.tileSize=256*window.devicePixelRatio,this.tileDelay=n.tileDelay||3,this.lang=n.lang;}renderTile(n,i,s,l=()=>{}){return D(this,null,function*(){this.lastRequestedZ=n.z;let o=[];for(let[w,C]of this.views){let de=C.getDisplayTile(n);o.push({key:w,promise:de});}let f=yield Promise.all(o.map(w=>w.promise.then(C=>({status:\"fulfilled\",value:C,key:w.key}),C=>({status:\"rejected\",reason:C,key:w.key})))),u=new Map;for(let w of f)w.status===\"fulfilled\"?u.set(w.key,[w.value]):w.reason.name===\"AbortError\"||console.error(w.reason);if(i.key!==s||this.lastRequestedZ!==n.z||(yield Promise.all(this.tasks.map(Kt)),i.key!==s)||this.lastRequestedZ!==n.z)return;let m=this.labelers.add(n.z,u);if(i.key!==s||this.lastRequestedZ!==n.z)return;let d=this.labelers.getIndex(n.z);if(!this._map)return;let b=this._map.getCenter().wrap(),g=this._getTiledPixelBounds(b),_=this._pxBoundsToTileRange(g).getCenter(),k=n.distanceTo(_)*this.tileDelay;if(yield Zt(k),i.key!==s||this.lastRequestedZ!==n.z)return;let p=16,x={minX:256*n.x-p,minY:256*n.y-p,maxX:256*(n.x+1)+p,maxY:256*(n.y+1)+p},S=new Point(256*n.x,256*n.y);i.width=this.tileSize,i.height=this.tileSize;let h=i.getContext(\"2d\");if(!h){console.error(\"Failed to get Canvas context\");return}h.setTransform(this.tileSize/256,0,0,this.tileSize/256,0,0),h.clearRect(0,0,256,256),this.backgroundColor&&(h.save(),h.fillStyle=this.backgroundColor,h.fillRect(0,0,256,256),h.restore());let v=0,z=this.paintRules;if(v=ue(h,n.z,u,this.xray?null:d,z,x,S,!1,this.debug),this.debug){h.save(),h.fillStyle=this.debug,h.font=\"600 12px sans-serif\",h.fillText(`${n.z} ${n.x} ${n.y}`,4,14),h.font=\"12px sans-serif\";let w=28;for(let[C,de]of u){let me=de[0].dataTile;h.fillText(`${C+(C?\" \":\"\")+me.z} ${me.x} ${me.y}`,4,w),w+=14;}h.font=\"600 10px sans-serif\",v>8&&(h.fillText(`${v.toFixed()} ms paint`,4,w),w+=14),m>8&&h.fillText(`${m.toFixed()} ms layout`,4,w),h.strokeStyle=this.debug,h.lineWidth=.5,h.beginPath(),h.moveTo(0,0),h.lineTo(0,256),h.stroke(),h.lineWidth=.5,h.beginPath(),h.moveTo(0,0),h.lineTo(256,0),h.stroke(),h.restore();}l();})}rerenderTile(n){for(let i in this._tiles){let s=this._wrapCoords(this._keyToTileCoords(i));n===this._tileCoordsToKey(s)&&this.renderTile(s,this._tiles[i].el,n);}}queryTileFeaturesDebug(n,i,s=16){let l=new Map;for(let[o,f]of this.views)l.set(o,f.queryFeatures(n,i,this._map.getZoom(),s));return l}clearLayout(){this.labelers=new Z(this.scratch,this.labelRules,16,this.onTilesInvalidated);}rerenderTiles(){for(let n in this._tiles){let i=this._wrapCoords(this._keyToTileCoords(n)),s=this._tileCoordsToKey(i);this.renderTile(i,this._tiles[n].el,s);}}createTile(n,i){let s=L.DomUtil.create(\"canvas\",\"leaflet-tile\");s.lang=this.lang;let l=this._tileCoordsToKey(n);return s.key=l,this.renderTile(n,s,l,()=>{i(void 0,s);}),s}_removeTile(n){let i=this._tiles[n];i&&(i.el.removed=!0,i.el.key=void 0,L.DomUtil.removeClass(i.el,\"leaflet-tile-loaded\"),i.el.width=i.el.height=0,L.DomUtil.remove(i.el),delete this._tiles[n],this.fire(\"tileunload\",{tile:i.el,coords:this._keyToTileCoords(n)}));}};c(t,\"LeafletLayer\");let e=t;return new e(a)},\"leafletLayer\");var Sn=c((a,e,t)=>{let r=new FontFace(a,`url(${e})`,{weight:t});return document.fonts.add(r),r.load()},\"Font\"),ht=c(a=>D(void 0,null,function*(){return new Promise((e,t)=>{let r=new Image;r.onload=()=>e(r),r.onerror=()=>t(\"Invalid SVG\"),r.src=a;})}),\"mkimg\"),Ut=`\n<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 50 50\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect width=\"50\" height=\"50\" fill=\"#cccccc\"/>\n    <g transform=\"translate(5,5)\">\n        <path fill=\"none\" stroke=\"#666666\" stroke-width=\"7\" d=\"m11,12a8.5,8 0 1,1 17,0q0,4-4,6t-4.5,4.5-.4,4v.2m0,3v7\"/>\n    </g>\n</svg>\n`,Ke=class Ke{constructor(e){this.src=e,this.canvas=document.createElement(\"canvas\"),this.mapping=new Map,this.missingBox={x:0,y:0,w:0,h:0};}load(){return D(this,null,function*(){let e=this.src,t=window.devicePixelRatio;e.endsWith(\".html\")&&(e=yield (yield fetch(e)).text());let r=new window.DOMParser().parseFromString(e,\"text/html\"),n=Array.from(r.body.children),i=yield ht(`data:image/svg+xml;base64,${btoa(Ut)}`),s=[{w:i.width*t,h:i.height*t,img:i,id:\"\"}],l=new XMLSerializer;for(let u of n){let d=`data:image/svg+xml;base64,${btoa(l.serializeToString(u))}`,b=yield ht(d);s.push({w:b.width*t,h:b.height*t,img:b,id:u.id});}let o=potpack(s);this.canvas.width=o.w,this.canvas.height=o.h;let f=this.canvas.getContext(\"2d\");if(f)for(let u of s)u.x!==void 0&&u.y!==void 0&&(f.drawImage(u.img,u.x,u.y,u.w,u.h),u.id?this.mapping.set(u.id,{x:u.x,y:u.y,w:u.w,h:u.h}):this.missingBox={x:u.x,y:u.y,w:u.w,h:u.h});return this})}get(e){let t=this.mapping.get(e);return t||(t=this.missingBox),t}};c(Ke,\"Sheet\");var bt=Ke;\n\n  var protomapsL = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    CenteredSymbolizer: Te,\n    CenteredTextSymbolizer: I,\n    CircleSymbolizer: te,\n    FlexSymbolizer: st,\n    Font: Sn,\n    GeomType: rt,\n    GroupSymbolizer: re,\n    IconSymbolizer: it,\n    Index: Je,\n    Justify: St,\n    Labeler: V,\n    Labelers: Z,\n    LineLabelPlacement: Rt,\n    LineLabelSymbolizer: $,\n    LineSymbolizer: O,\n    OffsetSymbolizer: Pe,\n    OffsetTextSymbolizer: ie,\n    Padding: ot,\n    PmtilesSource: H,\n    PolygonSymbolizer: P,\n    Sheet: bt,\n    ShieldSymbolizer: at,\n    Static: dt,\n    TextPlacements: At,\n    TextSymbolizer: ne,\n    TileCache: ee,\n    View: Ne,\n    ZxySource: Q,\n    arr: Tr,\n    covering: Nt,\n    createPattern: zr,\n    exp: F,\n    getZoom: ut,\n    isCcw: Pt,\n    isInRing: tt,\n    labelRules: se,\n    leafletLayer: Pn,\n    linear: Le,\n    paint: ue,\n    paintRules: ae,\n    pointInPolygon: Lt,\n    pointMinDistToLines: Ct,\n    pointMinDistToPoints: vt,\n    sourcesToViews: fe,\n    step: Pr,\n    toIndex: Y,\n    transformGeom: ce,\n    wrap: le\n  });\n\n  /* global L */\n\n  var TemplatedPMTilesLayer = L.Layer.extend({\n    initialize: function (template, options) {\n      /* structure of this._template:\n        {\n          template: decodeURI(new URL(template, this.getBase())),\n          linkEl: (map-link),\n          rel: (map-link@rel),\n          type: (map-link@type),\n          values: [map-input],\n          inputsReady: Promise.allSettled(inputsReady),\n          zoom: (map-input@type=zoom),\n          projection: (map-extent@units),\n          tms: true/false,\n          step: step\n        }\n      */\n      this._template = template;\n      this._container = L.DomUtil.create(\n        'div',\n        'leaflet-layer mapml-pmtiles-container'\n      );\n      this._pmtilesOptions = {\n        pane: this._container,\n        maxDataZoom: template.zoom?.max ?? 15,\n        url: this._mapInputNamesToProtomapsUrl(template),\n        noWrap: true\n      };\n\n      let paintRules = options?.pmtilesRules?.get(this._template.template);\n      if (paintRules?.rules) {\n        L.extend(this._pmtilesOptions, {\n          paintRules: paintRules.rules.PAINT_RULES\n        });\n        L.extend(this._pmtilesOptions, {\n          labelRules: paintRules.rules.LABEL_RULES\n        });\n      } else if (paintRules?.theme?.theme) {\n        L.extend(this._pmtilesOptions, { theme: paintRules.theme.theme });\n      } else {\n        console.warn(\n          'pmtiles symbolizer rules or theme not found for map-link@tref ->  ' +\n            this._template.template\n        );\n      }\n      this.zoomBounds = options.zoomBounds;\n      this.extentBounds = options.extentBounds;\n      // get rid of duplicate info, it can be confusing\n      delete options.zoomBounds;\n      delete options.extentBounds;\n      this._linkEl = options.linkEl;\n      L.setOptions(this, options);\n    },\n    /**\n     *\n     * @param {type} template\n     * @returns {url compatible with protomaps-leaflet {z},{x},{y}}\n     */\n    _mapInputNamesToProtomapsUrl: function (template) {\n      // protomaps requires hard-coded URL template variables {z}, {x} and {y}\n      // MapML allows you to set your own variable names, so we have to map the\n      // names you use for zoom, column and row to the {z}, {x} and {y} variables,\n      // and then replace the variable names used in the template with the\n      // corresponding {z}, {x} and {y} strings for protomaps\n      let url = template.template;\n      let re = new RegExp(\n        template.zoom?.name ? '{' + template.zoom.name + '}' : '{z}',\n        'ig'\n      );\n      url = url.replace(re, '{z}');\n      let rowName = template.values.find(\n        (i) => i.type === 'location' && i.axis === 'row'\n      )?.name;\n      re = new RegExp(rowName ? '{' + rowName + '}' : '{y}', 'ig');\n      url = url.replace(re, '{y}');\n      let colName = template.values.find(\n        (i) => i.type === 'location' && i.axis === 'column'\n      )?.name;\n      re = new RegExp(colName ? '{' + colName + '}' : '{x}', 'ig');\n      url = url.replace(re, '{x}');\n      return url;\n    },\n    onAdd: function (map) {\n      this._map = map;\n      this.options.pane.appendChild(this._container);\n      this.setZIndex(this.options.zIndex);\n      this._pmtilesLayer = M.protomapsL\n        .leafletLayer(this._pmtilesOptions)\n        .addTo(map);\n    },\n    onRemove: function (map) {\n      this._pmtilesLayer.remove();\n      L.DomUtil.remove(this._container);\n    },\n    isVisible: function () {\n      if (this._template.projection !== 'OSMTILE') return false;\n      let map = this._linkEl.getMapEl()._map;\n      let mapZoom = map.getZoom();\n      let mapBounds = M.pixelToPCRSBounds(\n        map.getPixelBounds(),\n        mapZoom,\n        map.options.projection\n      );\n      return (\n        mapZoom <= this.zoomBounds.maxZoom &&\n        mapZoom >= this.zoomBounds.minZoom &&\n        this.extentBounds.overlaps(mapBounds)\n      );\n    },\n    setZIndex: function (zIndex) {\n      this.options.zIndex = zIndex;\n      if (\n        this._container &&\n        this.options.zIndex !== undefined &&\n        this.options.zIndex !== null\n      ) {\n        this._container.style.zIndex = this.options.zIndex;\n      }\n      return this;\n    }\n  });\n  var templatedPMTilesLayer = function (template, options) {\n    return new TemplatedPMTilesLayer(template, options);\n  };\n\n  var ImageLayer = L.ImageOverlay.extend({\n    initialize: function (url, location, size, angle, container, options) {\n      // (String, Point, Point, Number, Element, Object)\n      this._container = container;\n      this._url = url;\n      // instead of calculating where the image goes, put it at 0,0\n      //this._location = L.point(location);\n      // the location for WMS requests will be the upper left hand\n      // corner of the map.  When the map is initialized, that is 0,0,\n      // but as the user pans, of course the\n      this._location = location;\n      this._size = L.point(size);\n      this._angle = angle;\n\n      L.setOptions(this, options);\n    },\n    getEvents: function () {\n      var events = {\n        viewreset: this._reset\n      };\n\n      if (this._zoomAnimated && this._step <= 1) {\n        events.zoomanim = this._animateZoom;\n      }\n\n      return events;\n    },\n    onAdd: function (map) {\n      this.on({\n        load: this._onImageLoad\n      });\n\n      if (!this._image) {\n        this._initImage();\n      }\n\n      if (this.options.interactive) {\n        L.DomUtil.addClass(this._image, 'leaflet-interactive');\n        this.addInteractiveTarget(this._image);\n      }\n\n      this._container.appendChild(this._image);\n      this._reset();\n    },\n    onRemove: function () {\n      L.DomUtil.remove(this._image);\n      if (this.options.interactive) {\n        this.removeInteractiveTarget(this._image);\n      }\n    },\n    _onImageLoad: function () {\n      if (!this._image) {\n        return;\n      }\n      this._image.loaded = +new Date();\n      this._updateOpacity();\n    },\n    _animateZoom: function (e) {\n      var scale = this._map.getZoomScale(e.zoom),\n        translate = this._map\n          .getPixelOrigin()\n          .add(this._location)\n          .multiplyBy(scale)\n          .subtract(this._map._getNewPixelOrigin(e.center, e.zoom))\n          .round();\n\n      if (L.Browser.any3d) {\n        L.DomUtil.setTransform(this._image, translate, scale);\n      } else {\n        L.DomUtil.setPosition(this._image, translate);\n      }\n    },\n    _reset: function (e) {\n      var image = this._image,\n        location = this._location,\n        size = this._size;\n      // TBD use the angle to establish the image rotation in CSS\n\n      if (\n        e &&\n        this._step > 1 &&\n        (this._overlayToRemove === undefined ||\n          this._url === this._overlayToRemove)\n      ) {\n        return;\n      }\n      L.DomUtil.setPosition(image, location);\n\n      image.style.width = size.x + 'px';\n      image.style.height = size.y + 'px';\n    },\n    _updateOpacity: function () {\n      if (!this._map) {\n        return;\n      }\n\n      //L.DomUtil.setOpacity(this._image, this.options.opacity);\n\n      var now = +new Date(),\n        nextFrame = false;\n\n      var image = this._image;\n\n      var fade = Math.min(1, (now - image.loaded) / 200);\n\n      L.DomUtil.setOpacity(image, fade);\n      if (fade < 1) {\n        nextFrame = true;\n      }\n      if (nextFrame) {\n        L.Util.cancelAnimFrame(this._fadeFrame);\n        this._fadeFrame = L.Util.requestAnimFrame(this._updateOpacity, this);\n      }\n      L.DomUtil.addClass(image, 'leaflet-image-loaded');\n    }\n  });\n  var imageLayer = function (\n    url,\n    location,\n    size,\n    angle,\n    container,\n    options\n  ) {\n    return new ImageLayer(url, location, size, angle, container, options);\n  };\n\n  var MapMLLayer = L.LayerGroup.extend({\n    options: {\n      zIndex: 0,\n      opacity: '1.0'\n    },\n    // initialize is executed before the layer is added to a map\n    initialize: function (href, layerEl, options) {\n      // in the custom element, the attribute is actually 'src'\n      // the _href version is the URL received from layer-@src\n      L.LayerGroup.prototype.initialize.call(this, null, options);\n      if (href) {\n        this._href = href;\n      }\n      this._layerEl = layerEl;\n      this._content = layerEl.src ? layerEl.shadowRoot : layerEl;\n      L.setOptions(this, options);\n      this._container = L.DomUtil.create('div', 'leaflet-layer');\n      this.changeOpacity(this.options.opacity);\n      L.DomUtil.addClass(this._container, 'mapml-layer');\n\n      // this layer 'owns' a mapmlTileLayer, which is a subclass of L.GridLayer\n      // it 'passes' what tiles to load via the content of this._mapmlTileContainer\n      this._mapmlTileContainer = L.DomUtil.create(\n        'div',\n        'mapml-tile-container',\n        this._container\n      );\n      // hit the service to determine what its extent might be\n      // OR use the extent of the content provided\n\n      this._initialize(this._content);\n    },\n    setZIndex: function (zIndex) {\n      this.options.zIndex = zIndex;\n      this._updateZIndex();\n\n      return this;\n    },\n    getHref: function () {\n      return this._href ?? '';\n    },\n    _updateZIndex: function () {\n      if (\n        this._container &&\n        this.options.zIndex !== undefined &&\n        this.options.zIndex !== null\n      ) {\n        this._container.style.zIndex = this.options.zIndex;\n      }\n    },\n    changeOpacity: function (opacity) {\n      this._container.style.opacity = opacity;\n      this._layerEl._opacity = opacity;\n      if (this._layerEl._opacitySlider)\n        this._layerEl._opacitySlider.value = opacity;\n    },\n    titleIsReadOnly() {\n      return !!this._titleIsReadOnly;\n    },\n    setName(newName) {\n      // a layer's accessible name is set by the <map-title>, if present\n      // if it's not available the <layer- label=\"accessible-name\"> attribute\n      // can be used\n      if (!this.titleIsReadOnly()) {\n        this._title = newName;\n        this._layerEl._layerControlHTML.querySelector(\n          '.mapml-layer-item-name'\n        ).innerHTML = newName;\n      }\n    },\n    getName() {\n      return this._title;\n    },\n\n    onAdd: function (map) {\n      L.LayerGroup.prototype.onAdd.call(this, map);\n      this.getPane().appendChild(this._container);\n\n      //only add the layer if there are tiles to be rendered\n      if (this._staticTileLayer) {\n        this.addLayer(this._staticTileLayer);\n      }\n      this.setZIndex(this.options.zIndex);\n      map.on('popupopen', this._attachSkipButtons, this);\n    },\n\n    _calculateBounds: function () {\n      delete this.bounds;\n      delete this.zoomBounds;\n      let bounds, zoomBounds;\n      let layerTypes = ['_staticTileLayer', '_mapmlvectors', '_extentLayer'];\n      bounds =\n        this._layerEl.src &&\n        this._layerEl.shadowRoot.querySelector(\n          ':host > map-meta[name=extent][content]'\n        )\n          ? M.getBoundsFromMeta(this._layerEl.shadowRoot)\n          : this._layerEl.querySelector(':scope > map-meta[name=extent][content]')\n          ? M.getBoundsFromMeta(this._layerEl)\n          : undefined;\n      zoomBounds =\n        this._layerEl.src &&\n        this._layerEl.shadowRoot.querySelector(\n          ':host > map-meta[name=zoom][content]'\n        )\n          ? M.getZoomBoundsFromMeta(this._layerEl.shadowRoot)\n          : this._layerEl.querySelector(':scope > map-meta[name=zoom][content]')\n          ? M.getZoomBoundsFromMeta(this._layerEl)\n          : undefined;\n      const mapExtents = this._layerEl.src\n        ? this._layerEl.shadowRoot.querySelectorAll('map-extent')\n        : this._layerEl.querySelectorAll('map-extent');\n      layerTypes.forEach((type) => {\n        let zoomMax, zoomMin, minNativeZoom, maxNativeZoom;\n        if (zoomBounds) {\n          zoomMax = zoomBounds.maxZoom;\n          zoomMin = zoomBounds.minZoom;\n          maxNativeZoom = zoomBounds.maxNativeZoom\n            ? zoomBounds.maxNativeZoom\n            : -Infinity;\n          minNativeZoom = zoomBounds.minNativeZoom\n            ? zoomBounds.minNativeZoom\n            : Infinity;\n        }\n        if (type === '_extentLayer' && mapExtents.length) {\n          for (let i = 0; i < mapExtents.length; i++) {\n            if (mapExtents[i]._extentLayer.bounds) {\n              let mapExtentLayer = mapExtents[i]._extentLayer;\n              if (!bounds) {\n                bounds = L.bounds(\n                  mapExtentLayer.bounds.min,\n                  mapExtentLayer.bounds.max\n                );\n              } else {\n                bounds.extend(mapExtentLayer.bounds);\n              }\n              if (mapExtentLayer.zoomBounds) {\n                if (!zoomBounds) {\n                  zoomBounds = mapExtentLayer.zoomBounds;\n                } else {\n                  // Extend layer zoombounds\n                  zoomMax = Math.max(zoomMax, mapExtentLayer.zoomBounds.maxZoom);\n                  zoomMin = Math.min(zoomMin, mapExtentLayer.zoomBounds.minZoom);\n                  maxNativeZoom = Math.max(\n                    maxNativeZoom,\n                    mapExtentLayer.zoomBounds.maxNativeZoom\n                  );\n                  minNativeZoom = Math.min(\n                    minNativeZoom,\n                    mapExtentLayer.zoomBounds.minNativeZoom\n                  );\n                  zoomBounds.minZoom = zoomMin;\n                  zoomBounds.maxZoom = zoomMax;\n                  zoomBounds.minNativeZoom = minNativeZoom;\n                  zoomBounds.maxNativeZoom = maxNativeZoom;\n                }\n              }\n            }\n          }\n        } else if (\n          type === '_mapmlvectors' ||\n          (type === '_staticTileLayer' && this._staticTileLayer)\n        ) {\n          if (this[type].layerBounds) {\n            if (!bounds) {\n              bounds = this[type].layerBounds;\n            } else {\n              bounds.extend(this[type].layerBounds);\n            }\n          }\n          if (this[type].zoomBounds) {\n            if (!zoomBounds) {\n              zoomBounds = this[type].zoomBounds;\n            } else {\n              // Extend layer zoombounds\n              zoomMax = Math.max(zoomMax, this[type].zoomBounds.maxZoom);\n              zoomMin = Math.min(zoomMin, this[type].zoomBounds.minZoom);\n              maxNativeZoom = Math.max(\n                maxNativeZoom,\n                this[type].zoomBounds.maxNativeZoom\n              );\n              minNativeZoom = Math.min(\n                minNativeZoom,\n                this[type].zoomBounds.minNativeZoom\n              );\n              zoomBounds.minZoom = zoomMin;\n              zoomBounds.maxZoom = zoomMax;\n              zoomBounds.minNativeZoom = minNativeZoom;\n              zoomBounds.maxNativeZoom = maxNativeZoom;\n            }\n          }\n        }\n      });\n      if (bounds) {\n        this.bounds = bounds;\n      } else {\n        let projectionBounds = M[this.options.projection].options.bounds;\n        this.bounds = L.bounds(projectionBounds.min, projectionBounds.max);\n      }\n      // we could get here and zoomBounds might still not be defined (empty layer)\n      if (!zoomBounds) zoomBounds = {};\n      if (!zoomBounds.minZoom) {\n        zoomBounds.minZoom = 0;\n      }\n      if (!zoomBounds.maxZoom) {\n        zoomBounds.maxZoom =\n          M[this.options.projection].options.resolutions.length - 1;\n      }\n      if (zoomBounds.minNativeZoom === Infinity) {\n        zoomBounds.minNativeZoom = zoomBounds.minZoom;\n      }\n      if (zoomBounds.maxNativeZoom === -Infinity) {\n        zoomBounds.maxNativeZoom = zoomBounds.maxZoom;\n      }\n      this.zoomBounds = zoomBounds;\n    },\n\n    onRemove: function (map) {\n      L.LayerGroup.prototype.onRemove.call(this, map);\n      L.DomUtil.remove(this._container);\n      map.off('popupopen', this._attachSkipButtons);\n    },\n    getAttribution: function () {\n      return this.options.attribution;\n    },\n    getBase: function () {\n      return new URL(\n        this._content.querySelector('map-base')\n          ? this._content.querySelector('map-base').getAttribute('href')\n          : this._content.nodeName === 'LAYER-'\n          ? this._content.baseURI\n          : this._href,\n        this._href\n      ).href;\n    },\n    appendStyleLink: function (mapLink) {\n      if (!mapLink.link) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapLink.link\n      );\n    },\n    _getStylePositionAndNode: function () {\n      return this._container.lastChild &&\n        (this._container.lastChild.nodeName.toUpperCase() === 'SVG' ||\n          this._container.lastChild.classList.contains('mapml-vector-container'))\n        ? { position: 'beforebegin', node: this._container.lastChild }\n        : this._container.lastChild\n        ? { position: 'afterend', node: this._container.lastChild }\n        : { position: 'afterbegin', node: this._container };\n    },\n    appendStyleElement: function (mapStyle) {\n      if (!mapStyle.styleElement) return;\n      let positionAndNode = this._getStylePositionAndNode();\n      positionAndNode.node.insertAdjacentElement(\n        positionAndNode.position,\n        mapStyle.styleElement\n      );\n    },\n    _initialize: function () {\n      var layer = this;\n      layer.getBase();\n        var mapml = this._content;\n      parseLicenseAndLegend();\n      setLayerTitle();\n      // crs is only set if the layer has the same projection as the map\n      if (M[layer.options.projection]) processTiles();\n      processFeatures();\n      // update controls if needed based on mapml-viewer controls/controlslist attribute\n      if (layer._layerEl.parentElement) {\n        // if layer does not have a parent Element, do not need to set Controls\n        layer._layerEl.parentElement._toggleControls();\n      }\n      // local functions\n      // determine if, where there's no match of the current layer's projection\n      // and that of the map, if there is a linked alternate text/mapml\n      // resource that matches the map's projection\n      function processFeatures() {\n        let native = M.getNativeVariables(layer._content);\n        layer._mapmlvectors = M.featureLayer(null, {\n          // pass the vector layer a renderer of its own, otherwise leaflet\n          // puts everything into the overlayPane\n          renderer: M.featureRenderer(),\n          // pass the vector layer the container for the parent into which\n          // it will append its own container for rendering into\n          pane: layer._container,\n          opacity: layer.options.opacity,\n          projection: layer.options.projection,\n          // by NOT passing options.extent, we are asking the FeatureLayer\n          // to dynamically update its .layerBounds property as features are\n          // added or removed from it\n          native: native,\n          // each owned child layer gets a reference to the root layer\n          _leafletLayer: layer,\n          mapEl: layer._layerEl.parentElement,\n          onEachFeature: function (properties, geometry) {\n            // need to parse as HTML to preserve semantics and styles\n            if (properties) {\n              var c = document.createElement('div');\n              c.classList.add('mapml-popup-content');\n              c.insertAdjacentHTML('afterbegin', properties.innerHTML);\n              geometry.bindPopup(c, { autoClose: false, minWidth: 165 });\n            }\n          }\n        }).addTo(layer);\n      }\n      function processTiles() {\n        if (mapml.querySelector('map-tile')) {\n          var tiles = document.createElement('map-tiles'),\n            zoom =\n              mapml.querySelector('map-meta[name=zoom][content]') ||\n              mapml.querySelector('map-input[type=zoom][value]');\n          tiles.setAttribute(\n            'zoom',\n            (zoom && zoom.getAttribute('content')) ||\n              (zoom && zoom.getAttribute('value')) ||\n              '0'\n          );\n          var newTiles = mapml.getElementsByTagName('map-tile');\n          for (var nt = 0; nt < newTiles.length; nt++) {\n            tiles.appendChild(document.importNode(newTiles[nt], true));\n          }\n          layer._mapmlTileContainer.appendChild(tiles);\n          layer._staticTileLayer = M.staticTileLayer({\n            pane: layer._container,\n            _leafletLayer: layer,\n            projection: layer.options.projection,\n            className: 'mapml-static-tile-layer',\n            tileContainer: layer._mapmlTileContainer,\n            maxZoomBound:\n              M[layer.options.projection].options.resolutions.length - 1,\n            tileSize: M[layer.options.projection].options.crs.tile.bounds.max.x\n          });\n        }\n      }\n      function setLayerTitle() {\n        if (mapml.querySelector('map-title')) {\n          layer._title = mapml.querySelector('map-title').textContent.trim();\n          layer._titleIsReadOnly = true;\n        } else if (layer._layerEl && layer._layerEl.hasAttribute('label')) {\n          layer._title = layer._layerEl.getAttribute('label').trim();\n        }\n      }\n      function parseLicenseAndLegend() {\n        var licenseLink = mapml.querySelector('map-link[rel=license]'),\n          licenseTitle,\n          licenseUrl,\n          attText;\n        if (licenseLink) {\n          licenseTitle = licenseLink.getAttribute('title');\n          licenseUrl = licenseLink.getAttribute('href');\n          attText =\n            '<a href=\"' +\n            licenseUrl +\n            '\" title=\"' +\n            licenseTitle +\n            '\">' +\n            licenseTitle +\n            '</a>';\n        }\n        L.setOptions(layer, { attribution: attText });\n        var legendLink = mapml.querySelector('map-link[rel=legend]');\n        if (legendLink) {\n          layer._legendUrl = legendLink.getAttribute('href');\n        }\n        if (layer._map) {\n          // if the layer is checked in the layer control, force the addition\n          // of the attribution just received\n          if (layer._map.hasLayer(layer)) {\n            layer._map.attributionControl.addAttribution(layer.getAttribution());\n          }\n        }\n      }\n    },\n    getQueryTemplates: function (location, zoom) {\n      const queryLinks = this._layerEl.querySelectorAll(\n        'map-extent[checked] map-link[rel=query]'\n      ).length\n        ? this._layerEl.querySelectorAll(\n            'map-extent[checked] map-link[rel=query]'\n          )\n        : this._layerEl.shadowRoot.querySelectorAll(\n            'map-extent[checked] map-link[rel=query]'\n          ).length\n        ? this._layerEl.shadowRoot.querySelectorAll(\n            'map-extent[checked] map-link[rel=query]'\n          )\n        : null;\n      if (queryLinks) {\n        var templates = [];\n        for (let i = 0; i < queryLinks.length; i++) {\n          const minZoom = queryLinks[i].extent.zoom.minZoom,\n            maxZoom = queryLinks[i].extent.zoom.maxZoom,\n            withinZoomBounds = (z) => {\n              return minZoom <= z && z <= maxZoom;\n            },\n            bounds = queryLinks[i].getBounds();\n\n          if (bounds.contains(location) && withinZoomBounds(zoom)) {\n            templates.push(queryLinks[i]._templateVars);\n          }\n        }\n        return templates;\n      }\n    },\n    _attachSkipButtons: function (e) {\n      let popup = e.popup,\n        map = e.target,\n        layer,\n        group,\n        content = popup._container.getElementsByClassName(\n          'mapml-popup-content'\n        )[0];\n\n      popup._container.setAttribute('role', 'dialog');\n      content.setAttribute('tabindex', '-1');\n      // https://github.com/Maps4HTML/MapML.js/pull/467#issuecomment-844307818\n      content.setAttribute('role', 'document');\n      popup._count = 0; // used for feature pagination\n\n      if (popup._source._eventParents) {\n        // check if the popup is for a feature or query\n        layer =\n          popup._source._eventParents[\n            Object.keys(popup._source._eventParents)[0]\n          ]; // get first parent of feature, there should only be one\n        group = popup._source.group;\n        // if the popup is for a static / templated feature, the \"zoom to here\" link can be attached once the popup opens\n        attachZoomLink.call(popup);\n      } else {\n        // getting access to the first map-extent to get access to _extentLayer to use it's (possibly) generic _previousFeature + _nextFeature methods.\n        const mapExtent =\n          popup._source._layerEl.querySelector('map-extent') ||\n          popup._source._layerEl.shadowRoot.querySelector('map-extent');\n        layer = mapExtent._extentLayer;\n        // if the popup is for a query, the \"zoom to here\" link should be re-attached every time new pagination features are displayed\n        map.on('attachZoomLink', attachZoomLink, popup);\n      }\n\n      if (popup._container.querySelector('nav[class=\"mapml-focus-buttons\"]')) {\n        L.DomUtil.remove(\n          popup._container.querySelector('nav[class=\"mapml-focus-buttons\"]')\n        );\n        L.DomUtil.remove(popup._container.querySelector('hr'));\n      }\n      //add when popopen event happens instead\n      let div = L.DomUtil.create('nav', 'mapml-focus-buttons');\n\n      // creates |< button, focuses map\n      let mapFocusButton = L.DomUtil.create('button', 'mapml-popup-button', div);\n      mapFocusButton.type = 'button';\n      mapFocusButton.title = 'Focus Map';\n      mapFocusButton.innerHTML = \"<span aria-hidden='true'>|&#10094;</span>\";\n      L.DomEvent.on(\n        mapFocusButton,\n        'click',\n        (e) => {\n          L.DomEvent.stop(e);\n          map.featureIndex._sortIndex();\n          map.closePopup();\n          map._container.focus();\n        },\n        popup\n      );\n\n      // creates < button, focuses previous feature, if none exists focuses the current feature\n      let previousButton = L.DomUtil.create('button', 'mapml-popup-button', div);\n      previousButton.type = 'button';\n      previousButton.title = 'Previous Feature';\n      previousButton.innerHTML = \"<span aria-hidden='true'>&#10094;</span>\";\n      L.DomEvent.on(previousButton, 'click', layer._previousFeature, popup);\n\n      // static feature counter that 1/1\n      let featureCount = L.DomUtil.create('p', 'mapml-feature-count', div),\n        totalFeatures = this._totalFeatureCount ? this._totalFeatureCount : 1;\n      featureCount.innerText = popup._count + 1 + '/' + totalFeatures;\n\n      // creates > button, focuses next feature, if none exists focuses the current feature\n      let nextButton = L.DomUtil.create('button', 'mapml-popup-button', div);\n      nextButton.type = 'button';\n      nextButton.title = 'Next Feature';\n      nextButton.innerHTML = \"<span aria-hidden='true'>&#10095;</span>\";\n      L.DomEvent.on(nextButton, 'click', layer._nextFeature, popup);\n\n      // creates >| button, focuses map controls\n      let controlFocusButton = L.DomUtil.create(\n        'button',\n        'mapml-popup-button',\n        div\n      );\n      controlFocusButton.type = 'button';\n      controlFocusButton.title = 'Focus Controls';\n      controlFocusButton.innerHTML = \"<span aria-hidden='true'>&#10095;|</span>\";\n      L.DomEvent.on(\n        controlFocusButton,\n        'click',\n        (e) => {\n          map.featureIndex._sortIndex();\n          map.featureIndex.currentIndex =\n            map.featureIndex.inBoundFeatures.length - 1;\n          map.featureIndex.inBoundFeatures[0]?.path.setAttribute('tabindex', -1);\n          map.featureIndex.inBoundFeatures[\n            map.featureIndex.currentIndex\n          ]?.path.setAttribute('tabindex', 0);\n          L.DomEvent.stop(e);\n          map.closePopup();\n          map._controlContainer.querySelector('A:not([hidden])').focus();\n        },\n        popup\n      );\n\n      let divider = L.DomUtil.create('hr', 'mapml-popup-divider');\n\n      popup._navigationBar = div;\n      popup._content.appendChild(divider);\n      popup._content.appendChild(div);\n\n      content.focus();\n\n      if (group && !M.options.featureIndexOverlayOption) {\n        // e.target = this._map\n        // Looks for keydown, more specifically tab and shift tab\n        group.setAttribute('aria-expanded', 'true');\n        map.on('keydown', focusFeature);\n      } else {\n        map.on('keydown', focusMap);\n      }\n      // When popup is open, what gets focused with tab needs to be done using JS as the DOM order is not in an accessibility friendly manner\n      function focusFeature(focusEvent) {\n        let path =\n          focusEvent.originalEvent.path ||\n          focusEvent.originalEvent.composedPath();\n        let isTab = focusEvent.originalEvent.keyCode === 9,\n          shiftPressed = focusEvent.originalEvent.shiftKey;\n        if (\n          (path[0].classList.contains('leaflet-popup-close-button') &&\n            isTab &&\n            !shiftPressed) ||\n          focusEvent.originalEvent.keyCode === 27 ||\n          (path[0].classList.contains('leaflet-popup-close-button') &&\n            focusEvent.originalEvent.keyCode === 13)\n        ) {\n          setTimeout(() => {\n            map.closePopup(popup);\n            group.focus();\n            L.DomEvent.stop(focusEvent);\n          }, 0);\n        } else if (\n          path[0].classList.contains('mapml-popup-content') &&\n          isTab &&\n          shiftPressed\n        ) {\n          setTimeout(() => {\n            //timeout needed so focus of the feature is done even after the keypressup event occurs\n            map.closePopup(popup);\n            group.focus();\n            L.DomEvent.stop(focusEvent);\n          }, 0);\n        } else if (\n          path[0] === popup._content.querySelector('a') &&\n          isTab &&\n          shiftPressed\n        ) {\n          setTimeout(() => {\n            map.closePopup(popup);\n            group.focus();\n            L.DomEvent.stop(focusEvent);\n          }, 0);\n        }\n      }\n\n      function focusMap(focusEvent) {\n        let path =\n          focusEvent.originalEvent.path ||\n          focusEvent.originalEvent.composedPath();\n        let isTab = focusEvent.originalEvent.keyCode === 9,\n          shiftPressed = focusEvent.originalEvent.shiftKey;\n\n        if (\n          (focusEvent.originalEvent.keyCode === 13 &&\n            path[0].classList.contains('leaflet-popup-close-button')) ||\n          focusEvent.originalEvent.keyCode === 27\n        ) {\n          L.DomEvent.stopPropagation(focusEvent);\n          map.closePopup(popup);\n          map._container.focus();\n          if (focusEvent.originalEvent.keyCode !== 27) map._popupClosed = true;\n        } else if (\n          isTab &&\n          path[0].classList.contains('leaflet-popup-close-button')\n        ) {\n          map.closePopup(popup);\n        } else if (\n          path[0].classList.contains('mapml-popup-content') &&\n          isTab &&\n          shiftPressed\n        ) {\n          map.closePopup(popup);\n          setTimeout(() => {\n            //timeout needed so focus of the feature is done even after the keypressup event occurs\n            L.DomEvent.stop(focusEvent);\n            map._container.focus();\n          }, 0);\n        } else if (\n          path[0] === popup._content.querySelector('a') &&\n          isTab &&\n          shiftPressed\n        ) {\n          map.closePopup(popup);\n          setTimeout(() => {\n            L.DomEvent.stop(focusEvent);\n            map.getContainer.focus();\n          }, 0);\n        }\n      }\n\n      function attachZoomLink(e) {\n        // this === popup\n        let content = this._content,\n          featureEl = e ? e.currFeature : this._source._groupLayer._featureEl;\n        if (content.querySelector('a.mapml-zoom-link')) {\n          content.querySelector('a.mapml-zoom-link').remove();\n        }\n        if (!featureEl.querySelector('map-geometry')) return;\n        let tL = featureEl.extent.topLeft.gcrs,\n          bR = featureEl.extent.bottomRight.gcrs,\n          center = L.latLngBounds(\n            L.latLng(tL.horizontal, tL.vertical),\n            L.latLng(bR.horizontal, bR.vertical)\n          ).getCenter(true);\n        let zoomLink = document.createElement('a');\n        zoomLink.href = `#${featureEl.getZoomToZoom()},${center.lng},${\n        center.lat\n      }`;\n        zoomLink.innerHTML = `${M.options.locale.popupZoom}`;\n        zoomLink.className = 'mapml-zoom-link';\n        zoomLink.onclick = zoomLink.onkeydown = function (e) {\n          if (!(e instanceof MouseEvent) && e.keyCode !== 13) return;\n          e.preventDefault();\n          featureEl.zoomTo();\n          map.closePopup();\n          map.getContainer().focus();\n        };\n        // we found that the popupopen event is fired as many times as there\n        // are layers on the map (<layer-> elements / MapMLLayers that is).\n        // In each case the target layer is always this layer, so we can't\n        // detect and conditionally add the zoomLink if the target is not this.\n        // so, like Ahmad, we are taking a 'delete everyting each time'\n        // approach (see _attachSkipButtons for this approach taken with\n        // feature navigation buttons); obviously he dealt with this leaflet bug\n        // this way some time ago, and we can't figure out how to get around it\n        // apart from this slightly non-optimal method. Revisit sometime!\n        let link = content.querySelector('.mapml-zoom-link');\n        if (link) link.remove();\n        content.insertBefore(\n          zoomLink,\n          content.querySelector('hr.mapml-popup-divider')\n        );\n      }\n\n      // if popup closes then the focusFeature handler can be removed\n      map.on('popupclose', removeHandlers);\n      function removeHandlers(removeEvent) {\n        if (removeEvent.popup === popup) {\n          map.off('keydown', focusFeature);\n          map.off('keydown', focusMap);\n          map.off('popupopen', attachZoomLink);\n          map.off('popupclose', removeHandlers);\n          if (group) group.setAttribute('aria-expanded', 'false');\n        }\n      }\n    }\n  });\n  var mapMLLayer = function (url, node, options) {\n    if (!url && !node) return null;\n    return new MapMLLayer(url, node, options);\n  };\n\n  var DebugOverlay = L.Layer.extend({\n    onAdd: function (map) {\n      let mapSize = map.getSize();\n\n      //conditionally show container for debug panel/banner only when the map has enough space for it\n      if (mapSize.x > 400 || mapSize.y > 300) {\n        this._container = L.DomUtil.create(\n          'table',\n          'mapml-debug',\n          map._container\n        );\n\n        this._panel = debugPanel({\n          className: 'mapml-debug-panel',\n          pane: this._container\n        });\n        map.addLayer(this._panel);\n      }\n\n      this._grid = debugGrid({\n        className: 'mapml-debug-grid',\n        pane: map._panes.mapPane,\n        zIndex: 400,\n        tileSize: map.options.crs.options.crs.tile.bounds.max.x\n      });\n      map.addLayer(this._grid);\n\n      this._vectors = debugVectors({\n        className: 'mapml-debug-vectors',\n        pane: map._panes.mapPane,\n        toolPane: this._container\n      });\n      map.addLayer(this._vectors);\n    },\n\n    onRemove: function (map) {\n      map.removeLayer(this._grid);\n      map.removeLayer(this._vectors);\n      if (this._panel) {\n        //conditionally remove the panel, as it's not always added\n        map.removeLayer(this._panel);\n        L.DomUtil.remove(this._container);\n      }\n    }\n  });\n\n  var debugOverlay = function () {\n    return new DebugOverlay();\n  };\n\n  var DebugPanel = L.Layer.extend({\n    initialize: function (options) {\n      L.setOptions(this, options);\n    },\n\n    onAdd: function (map) {\n      this._title = L.DomUtil.create(\n        'caption',\n        'mapml-debug-banner',\n        this.options.pane\n      );\n      this._title.innerHTML = 'Debug mode';\n\n      map.debug = {};\n      map.debug._infoContainer = this._debugContainer = L.DomUtil.create(\n        'tbody',\n        'mapml-debug-panel',\n        this.options.pane\n      );\n\n      let infoContainer = map.debug._infoContainer;\n\n      map.debug._tileCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n      map.debug._tileMatrixCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n      map.debug._mapCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n      map.debug._tcrsCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n      map.debug._pcrsCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n      map.debug._gcrsCoord = L.DomUtil.create(\n        'tr',\n        'mapml-debug-coordinates',\n        infoContainer\n      );\n\n      this._map.on('mousemove', this._updateCoords);\n    },\n    onRemove: function () {\n      L.DomUtil.remove(this._title);\n      if (this._debugContainer) {\n        L.DomUtil.remove(this._debugContainer);\n        this._map.off('mousemove', this._updateCoords);\n      }\n    },\n    _updateCoords: function (e) {\n      if (this.contextMenu._visible) return;\n      let mapEl = this.options.mapEl,\n        point = mapEl._map.project(e.latlng),\n        scale = mapEl._map.options.crs.scale(+mapEl.zoom),\n        pcrs = mapEl._map.options.crs.transformation.untransform(point, scale),\n        tileSize = mapEl._map.options.crs.options.crs.tile.bounds.max.x,\n        pointI = point.x % tileSize,\n        pointJ = point.y % tileSize;\n\n      if (pointI < 0) pointI += tileSize;\n      if (pointJ < 0) pointJ += tileSize;\n\n      this.debug._tileCoord.innerHTML = `\n      <th scope=\"row\">tile: </th>\n      <td>i: ${Math.trunc(pointI)}, </td>\n      <td>j: ${Math.trunc(pointJ)}</td>\n      `;\n      this.debug._mapCoord.innerHTML = `\n      <th scope=\"row\">map: </th>\n      <td>i: ${Math.trunc(e.containerPoint.x)}, </td>\n      <td>j: ${Math.trunc(e.containerPoint.y)}</td>\n      `;\n      this.debug._gcrsCoord.innerHTML = `\n      <th scope=\"row\">gcrs: </th>\n      <td>lon: ${e.latlng.lng.toFixed(6)}, </td>\n      <td>lat: ${e.latlng.lat.toFixed(6)}</td>\n      `;\n      this.debug._tcrsCoord.innerHTML = `\n      <th scope=\"row\">tcrs: </th>\n      <td>x: ${Math.trunc(point.x)}, </td>\n      <td>y: ${Math.trunc(point.y)}</td>\n      `;\n      this.debug._tileMatrixCoord.innerHTML = `\n      <th scope=\"row\">tilematrix: </th>\n      <td>column: ${Math.trunc(point.x / tileSize)}, </td>\n      <td>row: ${Math.trunc(point.y / tileSize)}</td>\n      `;\n      this.debug._pcrsCoord.innerHTML = `\n      <th scope=\"row\">pcrs: </th>\n      <td>easting: ${pcrs.x.toFixed(2)}, </td>\n      <td>northing: ${pcrs.y.toFixed(2)}</td>\n      `;\n    }\n  });\n\n  var debugPanel = function (options) {\n    return new DebugPanel(options);\n  };\n\n  var DebugGrid = L.GridLayer.extend({\n    initialize: function (options) {\n      L.setOptions(this, options);\n      L.GridLayer.prototype.initialize.call(this, this._map);\n    },\n\n    createTile: function (coords) {\n      let tile = L.DomUtil.create('div', 'mapml-debug-tile');\n      tile.setAttribute('col', coords.x);\n      tile.setAttribute('row', coords.y);\n      tile.setAttribute('zoom', coords.z);\n      tile.innerHTML = [\n        `col: ${coords.x}`,\n        `row: ${coords.y}`,\n        `zoom: ${coords.z}`\n      ].join(', ');\n\n      tile.style.outline = '1px dashed red';\n      return tile;\n    }\n  });\n\n  var debugGrid = function (options) {\n    return new DebugGrid(options);\n  };\n\n  var DebugVectors = L.LayerGroup.extend({\n    initialize: function (options) {\n      L.setOptions(this, options);\n      L.LayerGroup.prototype.initialize.call(this, this._map, options);\n    },\n    onAdd: function (map) {\n      map.on('overlayremove', this._mapLayerUpdate, this);\n      map.on('overlayadd', this._mapLayerUpdate, this);\n      let center = map.options.crs.transformation.transform(\n        L.point(0, 0),\n        map.options.crs.scale(0)\n      );\n      this._centerVector = L.circle(map.options.crs.pointToLatLng(center, 0), {\n        radius: 250,\n        className: 'mapml-debug-vectors projection-centre'\n      });\n      this._centerVector.bindTooltip('Projection Center');\n\n      this._addBounds(map);\n    },\n    onRemove: function (map) {\n      this.clearLayers();\n    },\n\n    _addBounds: function (map) {\n      // to delay the addBounds to wait for the layer.extentbounds / layer.layerbounds to be ready when the layer- checked attribute is changed\n      setTimeout(() => {\n        let id = Object.keys(map._layers),\n          layers = map._layers,\n          colors = ['#FF5733', '#8DFF33', '#3397FF', '#E433FF', '#F3FF33'],\n          j = 0;\n\n        this.addLayer(this._centerVector);\n\n        for (let i of id) {\n          if (layers[i].layerBounds || layers[i].extentBounds) {\n            let boundsArray;\n            if (layers[i].layerBounds) {\n              boundsArray = [\n                layers[i].layerBounds.min,\n                L.point(layers[i].layerBounds.max.x, layers[i].layerBounds.min.y),\n                layers[i].layerBounds.max,\n                L.point(layers[i].layerBounds.min.x, layers[i].layerBounds.max.y)\n              ];\n            } else {\n              boundsArray = [\n                layers[i].extentBounds.min,\n                L.point(\n                  layers[i].extentBounds.max.x,\n                  layers[i].extentBounds.min.y\n                ),\n                layers[i].extentBounds.max,\n                L.point(\n                  layers[i].extentBounds.min.x,\n                  layers[i].extentBounds.max.y\n                )\n              ];\n            }\n\n            // boundsTestTag adds the value of from the <layer-@data-testid> element\n            // if it exists. this simplifies debugging because the svg path will be\n            // tagged with the layer it came from\n            let boundsTestTag =\n              layers[i].extentBounds &&\n              layers[i].options.linkEl.getLayerEl().hasAttribute('data-testid')\n                ? layers[i].options.linkEl\n                    .getLayerEl()\n                    .getAttribute('data-testid')\n                : layers[i].layerBounds &&\n                  layers[i].options?._leafletLayer?._layerEl?.hasAttribute(\n                    'data-testid'\n                  )\n                ? layers[i].options._leafletLayer._layerEl.getAttribute(\n                    'data-testid'\n                  )\n                : '';\n            let boundsRect = projectedExtent(boundsArray, {\n              className: this.options.className.concat(' ', boundsTestTag),\n              color: colors[j % colors.length],\n              weight: 2,\n              opacity: 1,\n              fillOpacity: 0.01,\n              fill: true\n            });\n            if (layers[i].options._leafletLayer)\n              boundsRect.bindTooltip(layers[i].options._leafletLayer._title, {\n                sticky: true\n              });\n            this.addLayer(boundsRect);\n            j++;\n          }\n        }\n\n        if (map.totalLayerBounds) {\n          let totalBoundsArray = [\n            map.totalLayerBounds.min,\n            L.point(map.totalLayerBounds.max.x, map.totalLayerBounds.min.y),\n            map.totalLayerBounds.max,\n            L.point(map.totalLayerBounds.min.x, map.totalLayerBounds.max.y)\n          ];\n\n          let totalBounds = projectedExtent(totalBoundsArray, {\n            className: 'mapml-debug-vectors mapml-total-bounds',\n            color: '#808080',\n            weight: 5,\n            opacity: 0.5,\n            fill: false\n          });\n          this.addLayer(totalBounds);\n        }\n      }, 0);\n    },\n\n    _mapLayerUpdate: function (e) {\n      this.clearLayers();\n      this._addBounds(e.target);\n    }\n  });\n\n  var debugVectors = function (options) {\n    return new DebugVectors(options);\n  };\n\n  var ProjectedExtent = L.Path.extend({\n    getCenter: function (round) {\n      let crs = this._map.options.crs;\n      return crs.unproject(L.bounds(this._locations).getCenter());\n    },\n\n    options: {\n      className: 'mapml-debug-extent'\n    },\n    initialize: function (locations, options) {\n      //locations passed in as pcrs coordinates\n      this._locations = locations;\n      L.setOptions(this, options);\n    },\n\n    _project: function () {\n      this._rings = [];\n      let scale = this._map.options.crs.scale(this._map.getZoom()),\n        map = this._map;\n      for (let i = 0; i < this._locations.length; i++) {\n        let point = map.options.crs.transformation.transform(\n          this._locations[i],\n          scale\n        );\n        //substract the pixel origin from the pixel coordinates to get the location relative to map viewport\n        this._rings.push(\n          L.point(point.x, point.y)._subtract(map.getPixelOrigin())\n        );\n      }\n      //leaflet SVG renderer looks for and array of arrays to build polygons,\n      //in this case it only deals with a rectangle so one closed array or points\n      this._parts = [this._rings];\n    },\n\n    _update: function () {\n      if (!this._map) return;\n      this._renderer._updatePoly(this, true); //passing true creates a closed path i.e. a rectangle\n    }\n  });\n\n  var projectedExtent = function (locations, options) {\n    return new ProjectedExtent(locations, options);\n  };\n\n  var QueryHandler = L.Handler.extend({\n    addHooks: function () {\n      // get a reference to the actual <map> element, so we can\n      // use its layers property to iterate the layers from top down\n      // evaluating if they are 'on the map' (enabled)\n      L.setOptions(this, { mapEl: this._map.options.mapEl });\n      L.DomEvent.on(this._map, 'click', this._queryTopLayer, this);\n      L.DomEvent.on(this._map, 'keypress', this._queryTopLayerAtMapCenter, this);\n    },\n    removeHooks: function () {\n      L.DomEvent.off(this._map, 'click', this._queryTopLayer, this);\n      L.DomEvent.on(this._map, 'keypress', this._queryTopLayerAtMapCenter, this);\n    },\n    _getTopQueryableLayer: function () {\n      var layers = this.options.mapEl.layers;\n      // work backwards in document order (top down)\n      for (var l = layers.length - 1; l >= 0; l--) {\n        if (layers[l].queryable()) {\n          return layers[l]._layer;\n        }\n      }\n    },\n    _queryTopLayerAtMapCenter: function (event) {\n      setTimeout(() => {\n        if (\n          this._map.isFocused &&\n          !this._map._popupClosed &&\n          (event.originalEvent.key === ' ' || +event.originalEvent.keyCode === 13)\n        ) {\n          this._map.fire('click', {\n            latlng: this._map.getCenter(),\n            layerPoint: this._map.latLngToLayerPoint(this._map.getCenter()),\n            containerPoint: this._map.latLngToContainerPoint(\n              this._map.getCenter()\n            )\n          });\n        } else {\n          delete this._map._popupClosed;\n        }\n      }, 0);\n    },\n    _queryTopLayer: function (event) {\n      var layer = this._getTopQueryableLayer();\n      if (layer) {\n        if (layer._mapmlFeatures) delete layer._mapmlFeatures;\n        this._query(event, layer);\n      }\n    },\n    _query(e, layer) {\n      var zoom = e.target.getZoom(),\n        map = this._map,\n        crs = M[layer.options.projection], // the crs for each extent would be the same\n        tileSize = map.options.crs.options.crs.tile.bounds.max.x,\n        container = layer._container,\n        popupOptions = {\n          autoClose: false,\n          autoPan: true,\n          maxHeight: map.getSize().y * 0.5 - 50\n        },\n        tcrs2pcrs = function (c) {\n          return crs.transformation.untransform(c, crs.scale(zoom));\n        },\n        tcrs2gcrs = function (c) {\n          return crs.unproject(\n            crs.transformation.untransform(c, crs.scale(zoom)),\n            zoom\n          );\n        };\n      var tcrsClickLoc = crs.latLngToPoint(e.latlng, zoom),\n        tileMatrixClickLoc = tcrsClickLoc.divideBy(tileSize).floor(),\n        tileBounds = new L.Bounds(\n          tcrsClickLoc.divideBy(tileSize).floor().multiplyBy(tileSize),\n          tcrsClickLoc.divideBy(tileSize).ceil().multiplyBy(tileSize)\n        );\n\n      let point = this._map.project(e.latlng),\n        scale = this._map.options.crs.scale(this._map.getZoom()),\n        pcrsClick = this._map.options.crs.transformation.untransform(\n          point,\n          scale\n        );\n      let templates = layer.getQueryTemplates(pcrsClick, zoom);\n\n      let fetches = [];\n\n      var fetchFeatures = function (template, obj) {\n        const parser = new DOMParser();\n        return fetch(L.Util.template(template.template, obj), {\n          redirect: 'follow'\n        })\n          .then((response) => {\n            if (response.status >= 200 && response.status < 300) {\n              return response.text().then((text) => {\n                return {\n                  contenttype: response.headers.get('Content-Type'),\n                  text: text\n                };\n              });\n            } else {\n              throw new Error(response.status);\n            }\n          })\n          .then((response) => {\n            let features = [];\n            let queryMetas = [];\n            let geom =\n              \"<map-geometry cs='gcrs'><map-point><map-coordinates>\" +\n              e.latlng.lng +\n              ' ' +\n              e.latlng.lat +\n              '</map-coordinates></map-point></map-geometry>';\n            if (response.contenttype.startsWith('text/mapml')) {\n              // the mapmldoc could have <map-meta> elements that are important, perhaps\n              // also, the mapmldoc can have many features\n              let mapmldoc = parser.parseFromString(\n                response.text,\n                'application/xml'\n              );\n              let geometrylessFeatures = mapmldoc.querySelectorAll(\n                'map-feature:not(:has(map-geometry))'\n              );\n              if (geometrylessFeatures.length) {\n                let g = parser.parseFromString(geom, 'application/xml');\n                for (let i = 0; i < geometrylessFeatures.length; i++) {\n                  let f = geometrylessFeatures[i];\n                  f.appendChild(g.firstElementChild.cloneNode(true));\n                }\n              }\n              features = Array.prototype.slice.call(\n                mapmldoc.querySelectorAll('map-feature')\n              );\n              // <map-meta> elements for this query\n              queryMetas = Array.prototype.slice.call(\n                mapmldoc.querySelectorAll(\n                  'map-meta[name=cs], map-meta[name=zoom], map-meta[name=projection]'\n                )\n              );\n              if (queryMetas.length)\n                features.forEach((f) => (f.meta = queryMetas));\n            } else {\n              try {\n                let featureDocument = parser.parseFromString(\n                  response.text,\n                  'application/xml'\n                );\n                let featureCollection =\n                  featureDocument.querySelectorAll('map-feature');\n                if (\n                  featureDocument.querySelector('parsererror') ||\n                  featureCollection.length === 0\n                ) {\n                  throw new Error('parsererror');\n                }\n                let g = parser.parseFromString(geom, 'application/xml');\n                queryMetas = Array.prototype.slice.call(\n                  featureDocument.querySelectorAll(\n                    'map-meta[name=cs], map-meta[name=zoom], map-meta[name=projection]'\n                  )\n                );\n                for (let feature of featureCollection) {\n                  if (!feature.querySelector('map-geometry')) {\n                    feature.appendChild(g.firstElementChild.cloneNode(true));\n                  }\n                  feature.meta = queryMetas;\n                  features.push(feature);\n                }\n              } catch (err) {\n                // try the html parser; script elements are marked as non-functional\n                // by that api, which hopefully works!\n                let html = parser.parseFromString(response.text, 'text/html');\n\n                // synthesize a single feature from text or html content\n                let featureDoc = parser.parseFromString(\n                  '<map-feature><map-properties>' +\n                    '</map-properties>' +\n                    geom +\n                    '</map-feature>',\n                  'text/html'\n                );\n                if (html.body) {\n                  featureDoc\n                    .querySelector('map-properties')\n                    .appendChild(html.querySelector('html'));\n                } else {\n                  featureDoc\n                    .querySelector('map-properties')\n                    .append(response.text);\n                }\n                features.push(featureDoc.querySelector('map-feature'));\n              }\n            }\n            return { features: features, template: template };\n          })\n          .catch((err) => {\n            console.log('Looks like there was a problem. Status: ' + err.message);\n          });\n      };\n\n      for (let i = 0; i < templates.length; i++) {\n        var obj = {},\n          template = templates[i];\n\n        // all of the following are locations that might be used in a query, I think.\n        obj[template.query.tilei] =\n          tcrsClickLoc.x.toFixed() - tileMatrixClickLoc.x * tileSize;\n        obj[template.query.tilej] =\n          tcrsClickLoc.y.toFixed() - tileMatrixClickLoc.y * tileSize;\n\n        // this forces the click to the centre of the map extent in the layer crs\n        obj[template.query.mapi] = map.getSize().divideBy(2).x.toFixed();\n        obj[template.query.mapj] = map.getSize().divideBy(2).y.toFixed();\n\n        obj[template.query.pixelleft] = crs.pointToLatLng(tcrsClickLoc, zoom).lng;\n        obj[template.query.pixeltop] = crs.pointToLatLng(tcrsClickLoc, zoom).lat;\n        obj[template.query.pixelright] = crs.pointToLatLng(\n          tcrsClickLoc.add([1, 1]),\n          zoom\n        ).lng;\n        obj[template.query.pixelbottom] = crs.pointToLatLng(\n          tcrsClickLoc.add([1, 1]),\n          zoom\n        ).lat;\n\n        obj[template.query.column] = tileMatrixClickLoc.x;\n        obj[template.query.row] = tileMatrixClickLoc.y;\n        obj[template.query.x] = tcrsClickLoc.x.toFixed();\n        obj[template.query.y] = tcrsClickLoc.y.toFixed();\n\n        // whereas the layerPoint is calculated relative to the origin plus / minus any\n        // pan movements so is equal to containerPoint at first before any pans, but\n        // changes as the map pans.\n        obj[template.query.easting] = tcrs2pcrs(tcrsClickLoc).x;\n        obj[template.query.northing] = tcrs2pcrs(tcrsClickLoc).y;\n        obj[template.query.longitude] = tcrs2gcrs(tcrsClickLoc).lng;\n        obj[template.query.latitude] = tcrs2gcrs(tcrsClickLoc).lat;\n        obj[template.query.zoom] = zoom;\n        obj[template.query.width] = map.getSize().x;\n        obj[template.query.height] = map.getSize().y;\n        // assumes the click is at the centre of the map, per template.query.mapi, mapj above\n        obj[template.query.mapbottom] = tcrs2pcrs(\n          tcrsClickLoc.add(map.getSize().divideBy(2))\n        ).y;\n        obj[template.query.mapleft] = tcrs2pcrs(\n          tcrsClickLoc.subtract(map.getSize().divideBy(2))\n        ).x;\n        obj[template.query.maptop] = tcrs2pcrs(\n          tcrsClickLoc.subtract(map.getSize().divideBy(2))\n        ).y;\n        obj[template.query.mapright] = tcrs2pcrs(\n          tcrsClickLoc.add(map.getSize().divideBy(2))\n        ).x;\n\n        obj[template.query.tilebottom] = tcrs2pcrs(tileBounds.max).y;\n        obj[template.query.tileleft] = tcrs2pcrs(tileBounds.min).x;\n        obj[template.query.tiletop] = tcrs2pcrs(tileBounds.min).y;\n        obj[template.query.tileright] = tcrs2pcrs(tileBounds.max).x;\n        // add hidden or other variables that may be present into the values to\n        // be processed by L.Util.template below.\n        for (var v in template.query) {\n          if (\n            [\n              'mapi',\n              'mapj',\n              'tilei',\n              'tilej',\n              'row',\n              'col',\n              'x',\n              'y',\n              'easting',\n              'northing',\n              'longitude',\n              'latitude',\n              'width',\n              'height',\n              'zoom',\n              'mapleft',\n              'mapright',\n              ',maptop',\n              'mapbottom',\n              'tileleft',\n              'tileright',\n              'tiletop',\n              'tilebottom',\n              'pixeltop',\n              'pixelbottom',\n              'pixelleft',\n              'pixelright'\n            ].indexOf(v) < 0\n          ) {\n            obj[v] = template.query[v];\n          }\n        }\n        fetches.push(fetchFeatures(template, obj));\n      }\n      Promise.allSettled(fetches).then((results) => {\n        layer._mapmlFeatures = [];\n        // f is an array of {features[], template}\n\n        for (let f of results) {\n          if (f.status === 'fulfilled') {\n            // create connection between queried <map-feature> and its parent <map-link>\n            for (let feature of f.value.features) {\n              feature._linkEl = f.value.template.linkEl;\n            }\n            layer._mapmlFeatures = layer._mapmlFeatures.concat(f.value.features);\n          }\n        }\n        if (layer._mapmlFeatures.length > 0)\n          displayFeaturesPopup(layer._mapmlFeatures, e.latlng);\n      });\n\n      function displayFeaturesPopup(features, loc) {\n        if (features.length === 0) return;\n        let f = M.featureLayer(features, {\n          // pass the vector layer a renderer of its own, otherwise leaflet\n          // puts everything into the overlayPane\n          renderer: M.featureRenderer(),\n          // pass the vector layer the container for the parent into which\n          // it will append its own container for rendering into\n          pane: container,\n          //color: 'yellow',\n          // instead of unprojecting and then projecting and scaling,\n          // a much smarter approach would be to scale at the current\n          // zoom\n          projection: map.options.projection,\n          _leafletLayer: layer,\n          query: true,\n          mapEl: layer.options.mapEl\n        });\n\n        f.addTo(layer);\n\n        let div = L.DomUtil.create('div', 'mapml-popup-content'),\n          c = L.DomUtil.create('iframe');\n        c.style = 'border: none';\n        c.srcdoc = features[0].querySelector(\n          'map-feature map-properties'\n        ).innerHTML;\n        c.setAttribute('sandbox', 'allow-same-origin allow-forms');\n        div.appendChild(c);\n        // passing a latlng to the popup is necessary for when there is no\n        // geometry / null geometry\n        layer._totalFeatureCount = features.length;\n        layer.bindPopup(div, popupOptions).openPopup(loc);\n        layer.on('popupclose', function () {\n          layer.removeLayer(f);\n        });\n        f.showPaginationFeature({\n          i: 0,\n          popup: layer._popup\n        });\n      }\n    }\n  });\n\n  /*\n  MIT License related to portions of M.ContextMenu \n  Copyright (c) 2017 adam.ratcliffe@gmail.com\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), \n  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n  */\n  /* global M, KeyboardEvent */\n\n  var ContextMenu = L.Handler.extend({\n    _touchstart: L.Browser.msPointer\n      ? 'MSPointerDown'\n      : L.Browser.pointer\n      ? 'pointerdown'\n      : 'touchstart',\n\n    initialize: function (map) {\n      L.Handler.prototype.initialize.call(this, map);\n      this.activeIndex = 0; //current fous index on menu\n      this.excludedIndices = [4, 7]; //menu indexes that are --------\n      this.isRunned = false; //variable for tracking edge case\n      //setting the items in the context menu and their callback functions\n      this._menuItems = {};\n\n      const CTXBACK = 0,\n        CTXFWD = 1,\n        CTXRELOAD = 2,\n        CTXFULLSCR = 3,\n        CTXSPACER1 = 4,\n        CTXCOPY = 5,\n        CTXPASTE = 6,\n        CTXSPACER2 = 7,\n        CTXCNTRLS = 8,\n        CTXDEBUG = 9,\n        CTXVWSRC = 10;\n      this._menuItems.CTXBACK = CTXBACK;\n      this._menuItems.CTXFWD = CTXFWD;\n      this._menuItems.CTXRELOAD = CTXRELOAD;\n      this._menuItems.CTXFULLSCR = CTXFULLSCR;\n      this._menuItems.CTXSPACER1 = CTXSPACER1;\n      this._menuItems.CTXCOPY = CTXCOPY;\n      this._menuItems.CTXPASTE = CTXPASTE;\n      this._menuItems.CTXSPACER2 = CTXSPACER2;\n      this._menuItems.CTXCNTRLS = CTXCNTRLS;\n      this._menuItems.CTXDEBUG = CTXDEBUG;\n      this._menuItems.CTXVWSRC = CTXVWSRC;\n\n      this._items = [\n        {\n          // 0\n          text: M.options.locale.cmBack + ' (<kbd>Alt+Left Arrow</kbd>)',\n          callback: this._goBack\n        },\n        {\n          // 1\n          text: M.options.locale.cmForward + ' (<kbd>Alt+Right Arrow</kbd>)',\n          callback: this._goForward\n        },\n        {\n          // 2\n          text: M.options.locale.cmReload + ' (<kbd>Ctrl+R</kbd>)',\n          callback: this._reload\n        },\n        {\n          // 3\n          text: M.options.locale.btnFullScreen + ' (<kbd>F</kbd>)',\n          callback: this._toggleFullScreen\n        },\n        {\n          // 4\n          spacer: '-'\n        },\n        {\n          // 5\n          text: M.options.locale.cmCopyCoords + ' (<kbd>C</kbd>)<span></span>',\n          callback: this._copyCoords,\n          hideOnSelect: false,\n          popup: true,\n          submenu: [\n            {\n              // 5.0\n              text: M.options.locale.cmCopyMapML,\n              callback: this._copyMapML\n            },\n            {\n              // 5.1\n              text: M.options.locale.cmCopyExtent,\n              callback: this._copyExtent\n            },\n            {\n              // 5.2\n              text: M.options.locale.cmCopyLocation,\n              callback: this._copyLocation\n            }\n          ]\n        },\n        {\n          // 6\n          text: M.options.locale.cmPasteLayer + ' (<kbd>P</kbd>)',\n          callback: this._paste\n        },\n        {\n          // 7\n          spacer: '-'\n        },\n        {\n          // 8\n          text: M.options.locale.cmToggleControls + ' (<kbd>T</kbd>)',\n          callback: this._toggleControls\n        },\n        {\n          // 9\n          text: M.options.locale.cmToggleDebug + ' (<kbd>D</kbd>)',\n          callback: this._toggleDebug\n        },\n        {\n          // 10\n          text: M.options.locale.cmViewSource + ' (<kbd>V</kbd>)',\n          callback: this._viewSource\n        }\n      ];\n\n      // setting the default cs for copying location and extent\n      // should be public as they are used in tests\n      this.defExtCS = M.options.defaultExtCoor;\n      this.defLocCS = M.options.defaultLocCoor;\n\n      // Used for layer and map-extent contextmenu\n      const LYRZOOMTO = 0,\n        LYRCOPY = 1;\n      this._menuItems.LYRZOOMTO = LYRZOOMTO;\n      this._menuItems.LYRCOPY = LYRCOPY;\n\n      this._layerItems = [\n        {\n          // 0\n          text: M.options.locale.lmZoomToLayer + ' (<kbd>Z</kbd>)',\n          callback: this._zoomToLayer\n        },\n        {\n          // 1\n          text: M.options.locale.lmCopyLayer + ' (<kbd>L</kbd>)',\n          callback: this._copyLayer\n        }\n      ];\n\n      this._extentLayerItems = [\n        {\n          // 0\n          text: M.options.locale.lmZoomToExtent + ' (<kbd>Z</kbd>)',\n          callback: this._zoomToMapExtent\n        },\n        {\n          // 1\n          text: M.options.locale.lmCopyExtent + ' (<kbd>L</kbd>)',\n          callback: this._copyMapExtent\n        }\n      ];\n      this._mapMenuVisible = false;\n      this._keyboardEvent = false;\n\n      this._container = L.DomUtil.create(\n        'div',\n        'mapml-contextmenu',\n        map.getContainer()\n      );\n      this._container.setAttribute('hidden', '');\n\n      this._items[CTXBACK].el = this._createItem(\n        this._container,\n        this._items[CTXBACK]\n      );\n      this._items[CTXFWD].el = this._createItem(\n        this._container,\n        this._items[CTXFWD]\n      );\n      this._items[CTXRELOAD].el = this._createItem(\n        this._container,\n        this._items[CTXRELOAD]\n      );\n      this._items[CTXFULLSCR].el = this._createItem(\n        this._container,\n        this._items[CTXFULLSCR]\n      );\n      this._items[CTXSPACER1].el = this._createItem(\n        this._container,\n        this._items[CTXSPACER1]\n      );\n      this._items[CTXCOPY].el = this._createItem(\n        this._container,\n        this._items[CTXCOPY]\n      );\n\n      this._copySubMenu = L.DomUtil.create(\n        'div',\n        'mapml-contextmenu mapml-submenu',\n        this._container\n      );\n      this._copySubMenu.id = 'mapml-copy-submenu';\n      this._copySubMenu.setAttribute('hidden', '');\n\n      this._clickEvent = null;\n\n      const CPYMENUMAP = 0,\n        CPYMENUEXTENT = 1,\n        CPYMENULOC = 2;\n      this._menuItems.CPYMENUMAP = CPYMENUMAP;\n      this._menuItems.CPYMENUEXTENT = CPYMENUEXTENT;\n      this._menuItems.CPYMENULOC = CPYMENULOC;\n      this._createItem(\n        this._copySubMenu,\n        this._items[CTXCOPY].submenu[CPYMENUMAP],\n        CPYMENUMAP\n      );\n      this._createItem(\n        this._copySubMenu,\n        this._items[CTXCOPY].submenu[CPYMENUEXTENT],\n        CPYMENUEXTENT\n      );\n      this._createItem(\n        this._copySubMenu,\n        this._items[CTXCOPY].submenu[CPYMENULOC],\n        CPYMENULOC\n      );\n\n      this._items[CTXPASTE].el = this._createItem(\n        this._container,\n        this._items[CTXPASTE]\n      );\n      this._items[CTXSPACER2].el = this._createItem(\n        this._container,\n        this._items[CTXSPACER2]\n      );\n      this._items[CTXCNTRLS].el = this._createItem(\n        this._container,\n        this._items[CTXCNTRLS]\n      );\n      this._items[CTXDEBUG].el = this._createItem(\n        this._container,\n        this._items[CTXDEBUG]\n      );\n      this._items[CTXVWSRC].el = this._createItem(\n        this._container,\n        this._items[CTXVWSRC]\n      );\n\n      this._layerMenu = L.DomUtil.create(\n        'div',\n        'mapml-contextmenu mapml-layer-menu',\n        map.getContainer()\n      );\n      this._layerMenu.setAttribute('hidden', '');\n      this._createItem(this._layerMenu, this._layerItems[LYRZOOMTO]);\n      this._createItem(this._layerMenu, this._layerItems[LYRCOPY]);\n\n      this._extentLayerMenu = L.DomUtil.create(\n        'div',\n        'mapml-contextmenu mapml-extent-menu',\n        map.getContainer()\n      );\n      this._extentLayerMenu.setAttribute('hidden', '');\n      this._createItem(this._extentLayerMenu, this._extentLayerItems[LYRZOOMTO]);\n      this._createItem(this._extentLayerMenu, this._extentLayerItems[LYRCOPY]);\n\n      L.DomEvent.on(this._container, 'click', L.DomEvent.stop)\n        .on(this._container, 'mousedown', L.DomEvent.stop)\n        .on(this._container, 'dblclick', L.DomEvent.stop)\n        .on(this._container, 'contextmenu', L.DomEvent.stop)\n        .on(this._layerMenu, 'click', L.DomEvent.stop)\n        .on(this._layerMenu, 'mousedown', L.DomEvent.stop)\n        .on(this._layerMenu, 'dblclick', L.DomEvent.stop)\n        .on(this._layerMenu, 'contextmenu', L.DomEvent.stop)\n        .on(this._extentLayerMenu, 'click', L.DomEvent.stop)\n        .on(this._extentLayerMenu, 'mousedown', L.DomEvent.stop)\n        .on(this._extentLayerMenu, 'dblclick', L.DomEvent.stop)\n        .on(this._extentLayerMenu, 'contextmenu', L.DomEvent.stop);\n\n      this.t = document.createElement('template');\n      this.t.innerHTML = `<map-feature zoom=\"\">\n        <map-featurecaption></map-featurecaption>\n        <map-properties>\n            <h2></h2>\n            <div style=\"text-align:center\"></div>\n        </map-properties>\n        <map-geometry cs=\"\">\n          <map-point>\n            <map-coordinates></map-coordinates>\n          </map-point>\n        </map-geometry>\n      </map-feature>`;\n    },\n\n    addHooks: function () {\n      var container = this._map.getContainer();\n\n      L.DomEvent.on(container, 'mouseleave', this._hide, this).on(\n        document,\n        'keydown',\n        this._onKeyDown,\n        this\n      );\n\n      if (L.Browser.touch) {\n        L.DomEvent.on(document, this._touchstart, this._hide, this);\n      }\n\n      this._map.on(\n        {\n          contextmenu: this._show,\n          mousedown: this._hide,\n          zoomstart: this._hide\n        },\n        this\n      );\n    },\n\n    removeHooks: function () {\n      var container = this._map.getContainer();\n\n      L.DomEvent.off(container, 'mouseleave', this._hide, this).off(\n        document,\n        'keydown',\n        this._onKeyDown,\n        this\n      );\n\n      if (L.Browser.touch) {\n        L.DomEvent.off(document, this._touchstart, this._hide, this);\n      }\n\n      this._map.off(\n        {\n          contextmenu: this._show,\n          mousedown: this._hide,\n          zoomstart: this._hide\n        },\n        this\n      );\n    },\n\n    _updateCS: function () {\n      if (\n        this.defExtCS !== M.options.defaultExtCoor ||\n        this.defLocCS !== M.options.defaultLocCoor\n      ) {\n        this.defExtCS = M.options.defaultExtCoor;\n        this.defLocCS = M.options.defaultLocCoor;\n      }\n    },\n\n    _copyExtent: function (e) {\n      let context =\n          e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu,\n        coord = context.defExtCS ? context.defExtCS.toLowerCase() : 'pcrs',\n        tL =\n          e instanceof KeyboardEvent\n            ? this.extent.topLeft[coord]\n            : this.options.mapEl.extent.topLeft[coord],\n        bR =\n          e instanceof KeyboardEvent\n            ? this.extent.bottomRight[coord]\n            : this.options.mapEl.extent.bottomRight[coord],\n        data = '';\n      switch (coord) {\n        case 'MapML':\n        default:\n          if (coord === 'pcrs') {\n            data = `<map-meta name=\"extent\" content=\"top-left-easting=${Math.round(\n            tL.horizontal\n          )}, top-left-northing=${Math.round(\n            tL.vertical\n          )}, bottom-right-easting=${Math.round(\n            bR.horizontal\n          )}, bottom-right-northing=${Math.round(bR.vertical)}\"></map-meta>`;\n          } else if (coord === 'gcrs') {\n            data = `<map-meta name=\"extent\" content=\"top-left-longitude=${tL.horizontal}, top-left-latitude=${tL.vertical}, bottom-right-longitude=${bR.horizontal}, bottom-right-latitude=${bR.vertical}\"></map-meta>`;\n          } else if (coord === 'tcrs') {\n            data = `<map-meta name=\"extent\" content=\"top-left-x=${\n            tL[0].horizontal\n          }, top-left-y=${tL[0].vertical}, bottom-right-x=${\n            bR[bR.length - 1].horizontal\n          }, bottom-right-y=${bR[bR.length - 1].vertical}\"></map-meta>`;\n          } else if (coord === 'tilematrix') {\n            data = `<map-meta name=\"extent\" content=\"top-left-column=${\n            tL[0].horizontal\n          }, top-left-row=${tL[0].vertical}, bottom-right-column=${\n            bR[bR.length - 1].horizontal\n          }, bottom-right-row=${bR[bR.length - 1].vertical}\"></map-meta>`;\n          } else {\n            console.log('not support');\n          }\n          break;\n      }\n      context._copyData(data);\n    },\n\n    _zoomToLayer: function (e) {\n      let context =\n        e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu;\n      context._layerClicked.layer._layerEl.zoomTo();\n    },\n\n    _copyLayer: function (e) {\n      let context =\n          e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu,\n        layerElem = context._layerClicked.layer._layerEl;\n      context._copyData(layerElem.getOuterHTML());\n    },\n\n    _zoomToMapExtent: function (e) {\n      let context =\n        e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu;\n      context._layerClicked.extent.zoomTo();\n    },\n\n    _copyMapExtent: function (e) {\n      let context =\n          e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu,\n        extentElem = context._layerClicked.extent;\n      context._copyData(extentElem.getOuterHTML());\n    },\n\n    _goForward: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl.forward();\n    },\n\n    _goBack: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl.back();\n    },\n\n    _reload: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl.reload();\n    },\n\n    _toggleFullScreen: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl._toggleFullScreen();\n    },\n\n    _toggleControls: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      if (mapEl.controls) {\n        mapEl.controls = false;\n      } else {\n        mapEl.controls = true;\n      }\n    },\n\n    _copyMapML: function (e) {\n      let context =\n          e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu,\n        mapEl =\n          e instanceof KeyboardEvent\n            ? this._map.options.mapEl\n            : this.options.mapEl;\n      context._copyData(\n        mapEl.outerHTML.replace(\n          /<div class=\"mapml-web-map\">.*?<\\/div>|<style>\\[is=\"web-map\"].*?<\\/style>|<style>mapml-viewer.*?<\\/style>/gm,\n          ''\n        )\n      );\n    },\n\n    // Add support for pasting GeoJSON in the future\n    _paste: function (e) {\n      e instanceof KeyboardEvent ? this._map.contextMenu : this.contextMenu;\n        let mapEl =\n          e instanceof KeyboardEvent\n            ? this._map.options.mapEl\n            : this.options.mapEl;\n      navigator.clipboard.readText().then((layer) => {\n        M._pasteLayer(mapEl, layer);\n      });\n    },\n\n    _viewSource: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl.viewSource();\n    },\n\n    _toggleDebug: function (e) {\n      let mapEl =\n        e instanceof KeyboardEvent ? this._map.options.mapEl : this.options.mapEl;\n      mapEl.toggleDebug();\n    },\n\n    _copyCoords: function (e) {\n      let directory = this.contextMenu ? this.contextMenu : this;\n      directory._showCopySubMenu(e);\n    },\n\n    _copyData: function (data) {\n      const el = document.createElement('textarea');\n      el.value = data;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand('copy');\n      document.body.removeChild(el);\n    },\n\n    _copyLocation: function (e) {\n      const menu = this.contextMenu;\n      switch (menu.defLocCS.toLowerCase()) {\n        case 'tile':\n          menu._copyTile.call(this, e);\n          break;\n        case 'tilematrix':\n          menu._copyTileMatrix.call(this, e);\n          break;\n        case 'map':\n          menu._copyMap.call(this, e);\n          break;\n        case 'tcrs':\n          menu._copyTCRS.call(this, e);\n          break;\n        case 'pcrs':\n          menu._copyPCRS.call(this, e);\n          break;\n        case 'gcrs':\n        default:\n          menu._copyGCRS.call(this, e);\n          break;\n      }\n    },\n\n    _copyGCRS: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'gcrs');\n      caption.textContent = `Copied ${projection} gcrs location`;\n      h2.textContent = `Copied ${projection} gcrs location`;\n      div.textContent = `${click.latlng.lng.toFixed(\n      6\n    )} ${click.latlng.lat.toFixed(6)}`;\n      coords.textContent = `${click.latlng.lng.toFixed(\n      6\n    )} ${click.latlng.lat.toFixed(6)}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyTCRS: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        point = mapEl._map.project(click.latlng),\n        pt = { x: point.x.toFixed(), y: point.y.toFixed() },\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'tcrs');\n      caption.textContent = `Copied ${projection} tcrs location`;\n      h2.textContent = `Copied ${projection} tcrs location`;\n      div.textContent = `${pt.x} ${pt.y}`;\n      coords.textContent = `${pt.x} ${pt.y}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyTileMatrix: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        point = mapEl._map.project(click.latlng),\n        tileSize = mapEl._map.options.crs.options.crs.tile.bounds.max.x,\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'gcrs');\n      caption.textContent = `Copied ${projection} tilematrix location (not implemented yet)`;\n      h2.textContent = `Copied ${projection} tilematrix location (not implemented yet)`;\n      div.textContent = `${Math.trunc(point.x / tileSize)} ${Math.trunc(\n      point.y / tileSize\n    )}`;\n      coords.textContent = `${click.latlng.lng.toFixed(\n      6\n    )} ${click.latlng.lat.toFixed(6)}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyPCRS: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        point = mapEl._map.project(click.latlng),\n        scale = mapEl._map.options.crs.scale(+mapEl.zoom),\n        pcrs = mapEl._map.options.crs.transformation\n          .untransform(point, scale)\n          .round(),\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'pcrs');\n      caption.textContent = `Copied ${projection} pcrs location`;\n      h2.textContent = `Copied ${projection} pcrs location`;\n      div.textContent = `${pcrs.x} ${pcrs.y}`;\n      coords.textContent = `${pcrs.x} ${pcrs.y}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyTile: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        // the _map.project method returns pixels, while the _map.crs.project\n        // method returns meters, confusingly:\n        // https://leafletjs.com/reference.html#map-project\n        // https://leafletjs.com/reference.html#crs-project\n        point = mapEl._map.project(click.latlng),\n        tileSize = mapEl._map.options.crs.options.crs.tile.bounds.max.x,\n        pointX = point.x % tileSize,\n        pointY = point.y % tileSize,\n        pt = L.point(pointX, pointY).trunc(),\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      if (pt.x < 0) pt.x += tileSize;\n      if (pt.y < 0) pt.y += tileSize;\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'gcrs');\n      caption.textContent = `Copied ${projection} tile location (not implemented yet)`;\n      h2.textContent = `Copied ${projection} tile location (not implemented yet)`;\n      div.textContent = `${pt.x} ${pt.y}`;\n      coords.textContent = `${click.latlng.lng.toFixed(\n      6\n    )} ${click.latlng.lat.toFixed(6)}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyMap: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        mapPt = click.containerPoint.trunc(),\n        projection = mapEl.projection,\n        feature = this.contextMenu.t.content.firstElementChild.cloneNode(true),\n        caption = feature.querySelector('map-featurecaption'),\n        h2 = feature.querySelector('h2'),\n        div = feature.querySelector('div'),\n        geom = feature.querySelector('map-geometry'),\n        coords = feature.querySelector('map-coordinates');\n\n      feature.setAttribute('zoom', mapEl.zoom);\n      geom.setAttribute('cs', 'gcrs');\n      caption.textContent = `Copied ${projection} map location (not implemented yet)`;\n      h2.textContent = `Copied ${projection} map location (not implemented yet)`;\n      div.textContent = `${mapPt.x} ${mapPt.y}`;\n      coords.textContent = `${click.latlng.lng.toFixed(\n      6\n    )} ${click.latlng.lat.toFixed(6)}`;\n      this.contextMenu._copyData(feature.outerHTML);\n    },\n\n    _copyAllCoords: function (e) {\n      let mapEl = this.options.mapEl,\n        click = this.contextMenu._clickEvent,\n        point = mapEl._map.project(click.latlng),\n        tileSize = mapEl._map.options.crs.options.crs.tile.bounds.max.x,\n        pointX = point.x % tileSize,\n        pointY = point.y % tileSize,\n        scale = mapEl._map.options.crs.scale(+mapEl.zoom),\n        pcrs = mapEl._map.options.crs.transformation.untransform(point, scale);\n      let allData = `z:${mapEl.zoom}\\n`;\n      allData += `tile: i:${Math.trunc(pointX)}, j:${Math.trunc(pointY)}\\n`;\n      allData += `tilematrix: column:${Math.trunc(\n      point.x / tileSize\n    )}, row:${Math.trunc(point.y / tileSize)}\\n`;\n      allData += `map: i:${Math.trunc(click.containerPoint.x)}, j:${Math.trunc(\n      click.containerPoint.y\n    )}\\n`;\n      allData += `tcrs: x:${Math.trunc(point.x)}, y:${Math.trunc(point.y)}\\n`;\n      allData += `pcrs: easting:${pcrs.x.toFixed(2)}, northing:${pcrs.y.toFixed(\n      2\n    )}\\n`;\n      allData += `gcrs: lon :${click.latlng.lng.toFixed(\n      6\n    )}, lat:${click.latlng.lat.toFixed(6)}`;\n      this.contextMenu._copyData(allData);\n    },\n\n    _createItem: function (container, options, index) {\n      if (options.spacer) {\n        return this._createSeparator(container, index);\n      }\n\n      var itemCls = 'mapml-contextmenu-item',\n        el = this._insertElementAt('button', itemCls, container, index),\n        callback = this._createEventHandler(\n          el,\n          options.callback,\n          options.context,\n          options.hideOnSelect\n        ),\n        html = '';\n\n      el.innerHTML = html + options.text;\n      el.setAttribute('type', 'button');\n      el.classList.add('mapml-button');\n      if (options.popup) {\n        el.setAttribute('aria-haspopup', 'true');\n        el.setAttribute('aria-expanded', 'false');\n        el.setAttribute('aria-controls', 'mapml-copy-submenu');\n      }\n\n      L.DomEvent.on(el, 'mouseover', this._onItemMouseOver, this)\n        .on(el, 'mouseout', this._onItemMouseOut, this)\n        .on(el, 'mousedown', L.DomEvent.stopPropagation)\n        .on(el, 'click', callback);\n\n      if (L.Browser.touch) {\n        L.DomEvent.on(el, this._touchstart, L.DomEvent.stopPropagation);\n      }\n\n      // Devices without a mouse fire \"mouseover\" on tap, but never “mouseout\"\n      if (!L.Browser.pointer) {\n        L.DomEvent.on(el, 'click', this._onItemMouseOut, this);\n      }\n\n      return {\n        id: L.Util.stamp(el),\n        el: el,\n        callback: callback\n      };\n    },\n\n    _createSeparator: function (container, index) {\n      let el = this._insertElementAt(\n        'div',\n        'mapml-contextmenu-separator',\n        container,\n        index\n      );\n\n      return {\n        id: L.Util.stamp(el),\n        el: el\n      };\n    },\n\n    _createEventHandler: function (el, func, context, hideOnSelect) {\n      let parent = this;\n\n      hideOnSelect = hideOnSelect !== undefined ? hideOnSelect : true;\n\n      return function (e) {\n        let map = parent._map,\n          containerPoint = parent._showLocation.containerPoint,\n          layerPoint = map.containerPointToLayerPoint(containerPoint),\n          latlng = map.layerPointToLatLng(layerPoint),\n          relatedTarget = parent._showLocation.relatedTarget,\n          data = {\n            containerPoint: containerPoint,\n            layerPoint: layerPoint,\n            latlng: latlng,\n            relatedTarget: relatedTarget\n          };\n\n        if (hideOnSelect) {\n          parent._hide();\n        }\n\n        if (func) {\n          func.call(context || map, data);\n        }\n\n        parent._map.fire('contextmenu.select', {\n          contextmenu: parent,\n          el: el\n        });\n      };\n    },\n\n    _insertElementAt: function (tagName, className, container, index) {\n      let refEl,\n        el = document.createElement(tagName);\n\n      el.className = className;\n\n      if (index !== undefined) {\n        refEl = container.children[index];\n      }\n\n      if (refEl) {\n        container.insertBefore(el, refEl);\n      } else {\n        container.appendChild(el);\n      }\n\n      return el;\n    },\n\n    _show: function (e) {\n      // don't show a context menu for features\n      if (e.originalEvent.target.closest('.mapml-vector-container')) return;\n      if (this._mapMenuVisible) this._hide();\n      this._clickEvent = e;\n      let elem = e.originalEvent.target;\n      // Opening contextmenu for layercontrol\n      if (elem.closest('fieldset')) {\n        elem = elem.closest('fieldset');\n        // layer layercontrol\n        if (elem.className === 'mapml-layer-item') {\n          elem = elem.querySelector('span');\n          this._layerMenu.removeAttribute('hidden');\n          this._showAtPoint(e.containerPoint, e, this._layerMenu);\n          // map-extent layercontrol\n        } else if (elem.className === 'mapml-layer-extent') {\n          elem = elem.querySelector('span');\n          this._extentLayerMenu.removeAttribute('hidden');\n          this._showAtPoint(e.containerPoint, e, this._extentLayerMenu);\n        }\n        this._layerClicked = elem;\n      } else if (\n        // map contextmenu\n        elem.classList.contains('leaflet-container') ||\n        elem.classList.contains('mapml-debug-extent') ||\n        elem.tagName === 'path'\n      ) {\n        let layerList = this._map.options.mapEl.layers;\n        this._layerClicked = Array.from(layerList).find((el) => el.checked);\n        // the 'hidden' attribute must be removed before any attempt to get the size of container\n        let pt = e.containerPoint;\n        // this is for firefox, which reports the e.containerPoint as x=0 when you\n        // use a keyboard Shift+F10 to display the context menu; this appears\n        // to be because blink returns a PointerEvent of type==='contextmenu',\n        // while gecko returns an object (for e.originalEvent).\n        if (L.Browser.gecko) {\n          const getCenter = function (el) {\n            let w = el.getBoundingClientRect().width;\n            let h = el.getBoundingClientRect().height;\n            return { x: Number.parseInt(w / 2), y: Number.parseInt(h / 2) };\n          };\n          pt = getCenter(this._map.getContainer());\n        }\n        this._container.removeAttribute('hidden');\n        this._showAtPoint(pt, e, this._container);\n        this._updateCS();\n      }\n      // Once contextmenu is opened, focus the first item\n      if (e.originalEvent.button === 0 || e.originalEvent.button === -1) {\n        this._keyboardEvent = true;\n        if (this._layerClicked.className.includes('mapml-layer-item')) {\n          let activeEl = document.activeElement;\n          this._elementInFocus = activeEl.shadowRoot.activeElement;\n          this._layerMenuTabs = 1;\n          this._layerMenu.firstChild.focus();\n          //\n        } else if (this._layerClicked.className.includes('mapml-extent-item')) {\n          let activeEl = document.activeElement;\n          this._elementInFocus = activeEl.shadowRoot.activeElement;\n          this._extentLayerMenuTabs = 1;\n          this._extentLayerMenu.firstChild.focus();\n        } else {\n          this._container.querySelectorAll('button:not([disabled])')[0].focus();\n        }\n      }\n    },\n\n    _showAtPoint: function (pt, data, container) {\n      if (this._items.length) {\n        let event = L.extend(data || {}, { contextmenu: this });\n\n        this._showLocation = {\n          containerPoint: pt\n        };\n\n        if (data && data.relatedTarget) {\n          this._showLocation.relatedTarget = data.relatedTarget;\n        }\n\n        this._setPosition(pt, container);\n\n        if (!this._mapMenuVisible) {\n          container.removeAttribute('hidden');\n          this._mapMenuVisible = true;\n        }\n\n        this._map.fire('contextmenu.show', event);\n      }\n    },\n\n    _hide: function () {\n      if (this._mapMenuVisible) {\n        this._mapMenuVisible = false;\n        this._container.setAttribute('hidden', '');\n        this._copySubMenu.setAttribute('hidden', '');\n        this._layerMenu.setAttribute('hidden', '');\n        this._extentLayerMenu.setAttribute('hidden', '');\n        this._map.fire('contextmenu.hide', { contextmenu: this });\n        setTimeout(() => this._map._container.focus(), 0);\n        this.activeIndex = 0;\n        this.isRunned = false;\n      }\n    },\n\n    _setPosition: function (pt, container) {\n      let mapSize = this._map.getSize(),\n        containerSize = this._getElementSize(container),\n        anchor;\n\n      if (this._map.options.contextmenuAnchor) {\n        anchor = L.point(this._map.options.contextmenuAnchor);\n        pt = pt.add(anchor);\n      }\n\n      container._leaflet_pos = pt;\n\n      if (pt.x + containerSize.x > mapSize.x) {\n        container.style.left = 'auto';\n        container.style.right =\n          Math.min(\n            Math.max(mapSize.x - pt.x, 0),\n            mapSize.x - containerSize.x - 1\n          ) + 'px';\n      } else {\n        container.style.left = Math.max(pt.x, 0) + 'px';\n        container.style.right = 'auto';\n      }\n\n      if (pt.y + containerSize.y > mapSize.y) {\n        container.style.top = 'auto';\n        container.style.bottom =\n          Math.min(\n            Math.max(mapSize.y - pt.y, 0),\n            mapSize.y - containerSize.y - 1\n          ) + 'px';\n      } else {\n        container.style.top = Math.max(pt.y, 0) + 'px';\n        container.style.bottom = 'auto';\n      }\n    },\n\n    _getElementSize: function (el) {\n      let size = this._size;\n\n      if (!size || this._sizeChanged) {\n        size = {};\n\n        el.style.left = '-999999px';\n        el.style.right = 'auto';\n\n        size.x = el.offsetWidth;\n        size.y = el.offsetHeight;\n\n        el.style.left = 'auto';\n\n        this._sizeChanged = false;\n      }\n\n      return size;\n    },\n\n    // once Esc is clicked on the layer/extent contextMenu, change the focus back to the layer control\n    _focusOnLayerControl: function () {\n      this._mapMenuVisible = false;\n      delete this._layerMenuTabs;\n      delete this._extentLayerMenuTabs;\n      this._layerMenu.setAttribute('hidden', '');\n      this._extentLayerMenu.setAttribute('hidden', '');\n      if (this._elementInFocus) {\n        this._elementInFocus.focus();\n      } else {\n        this._layerClicked.parentElement.firstChild.focus();\n      }\n      delete this._elementInFocus;\n    },\n\n    _setActiveItem: function (index) {\n      if (\n        document.activeElement.shadowRoot === null &&\n        this.noActiveEl === true\n      ) {\n        //bug fix when theres no active element\n        this.noActiveEl = false;\n        //setting this._items[9] is just for preventing some diabled index, it will be override by later code.\n        this._items[9].el.el.focus();\n      }\n      if (\n        document.activeElement.shadowRoot.activeElement.innerHTML ===\n        this._items[index].el.el.innerHTML\n      ) {\n        //edge case where pressing shift f10 focuses the first element on contextmenu (if already focused, have to press arrow twice to go down)\n        let next = index + 1;\n        while (this._items[next].el.el.disabled) {\n          next++;\n          if (next >= this._items.length) {\n            next = 0;\n          }\n        }\n        this._setActiveItem(next);\n      } else {\n        if (this.excludedIndices.includes(index)) {\n          // find the next or previous non-excluded item\n          let nextIndex = index + 1;\n          let prevIndex = index - 1;\n          while (\n            this.excludedIndices.includes(nextIndex) ||\n            this._items[nextIndex].el.el.disabled\n          ) {\n            nextIndex++;\n            if (nextIndex >= this._items.length) {\n              nextIndex = 0;\n            }\n          }\n          while (\n            this.excludedIndices.includes(prevIndex) ||\n            this._items[prevIndex].el.el.disabled\n          ) {\n            prevIndex--;\n            if (prevIndex < 0) {\n              prevIndex = this._items.length - 1;\n            }\n          }\n          // set the active item to the next or previous non-excluded item\n          if (this.activeIndex < index) {\n            this._setActiveItem(nextIndex);\n          } else {\n            this._setActiveItem(prevIndex);\n          }\n        } else {\n          // set the focus item\n          this._items[index].el.el.focus();\n          this.activeIndex = index;\n        }\n      }\n    },\n\n    _onKeyDown: function (e) {\n      if (!this._mapMenuVisible || e.key === 'Shift') return;\n\n      if (e.code === 'Enter' || e.code === 'Tab' || e.code.startsWith('Arrow'))\n        e.preventDefault();\n\n      if (e.code === 'ArrowUp' || (e.shiftKey && e.code === 'Tab')) {\n        if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          (document.activeElement.shadowRoot === null || //null happens when the focus is on submenu and when mouse hovers on main menu, submenu disappears\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n              this._copySubMenu.children[this._menuItems.CPYMENUMAP].innerHTML)\n        ) {\n          //\"map\" on submenu\n          this._copySubMenu.children[this._menuItems.CPYMENULOC].focus();\n        } else if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._copySubMenu.children[this._menuItems.CPYMENUEXTENT].innerHTML\n        ) {\n          //\"extent\" on submenu\n          this._copySubMenu.children[this._menuItems.CPYMENUMAP].focus();\n        } else if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._copySubMenu.children[this._menuItems.CPYMENULOC].innerHTML\n        ) {\n          //\"Location\" on submenu\n          this._copySubMenu.children[this._menuItems.CPYMENUEXTENT].focus();\n        } else if (\n          !this._layerMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._layerMenu.children[this._menuItems.LYRZOOMTO].innerHTML\n        ) {\n          //\"zoom to layer\" on layermenu\n          this._layerMenu.children[this._menuItems.LYRCOPY].focus();\n        } else if (!this._layerMenu.hasAttribute('hidden')) {\n          this._layerMenu.children[this._menuItems.LYRZOOMTO].focus();\n        } else if (\n          !this._extentLayerMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._extentLayerMenu.children[this._menuItems.LYRZOOMTO].innerHTML\n        ) {\n          //\"zoom to extent\" on layermenu\n          this._extentLayerMenu.children[this._menuItems.LYRCOPY].focus();\n        } else if (!this._extentLayerMenu.hasAttribute('hidden')) {\n          this._extentLayerMenu.children[this._menuItems.LYRZOOMTO].focus();\n        } else {\n          if (this.activeIndex > 0) {\n            let prevIndex = this.activeIndex - 1;\n            while (this._items[prevIndex].el.el.disabled) {\n              prevIndex--;\n              if (prevIndex < 0) {\n                prevIndex = this._items.length - 1;\n              }\n            }\n            this._setActiveItem(prevIndex);\n          } else {\n            this._setActiveItem(this._items.length - 1);\n          }\n        }\n      } else if (e.code === 'ArrowDown' || e.code === 'Tab') {\n        if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          (document.activeElement.shadowRoot === null ||\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n              this._copySubMenu.children[this._menuItems.CPYMENULOC].innerHTML)\n        ) {\n          this._copySubMenu.children[this._menuItems.CPYMENUMAP].focus();\n        } else if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._copySubMenu.children[this._menuItems.CPYMENUEXTENT].innerHTML\n        ) {\n          this._copySubMenu.children[this._menuItems.CPYMENULOC].focus();\n        } else if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._copySubMenu.children[this._menuItems.CPYMENUMAP].innerHTML\n        ) {\n          this._copySubMenu.children[this._menuItems.CPYMENUEXTENT].focus();\n        } else if (\n          !this._layerMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._layerMenu.children[this._menuItems.LYRZOOMTO].innerHTML\n        ) {\n          this._layerMenu.children[this._menuItems.LYRCOPY].focus();\n        } else if (!this._layerMenu.hasAttribute('hidden')) {\n          this._layerMenu.children[this._menuItems.LYRZOOMTO].focus();\n        } else if (\n          !this._extentLayerMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._extentLayerMenu.children[this._menuItems.LYRZOOMTO].innerHTML\n        ) {\n          this._extentLayerMenu.children[this._menuItems.LYRCOPY].focus();\n        } else if (!this._extentLayerMenu.hasAttribute('hidden')) {\n          this._extentLayerMenu.children[this._menuItems.LYRZOOMTO].focus();\n        } else {\n          if (this.activeIndex < this._items.length - 1) {\n            //edge case at index 0\n            if (\n              !this.isRunned &&\n              this.activeIndex === 0 &&\n              !this._items[this.activeIndex].el.el.disabled\n            ) {\n              this._setActiveItem(0);\n              this.isRunned = true;\n            } else {\n              //edge case over\n              let nextIndex = this.activeIndex + 1;\n              while (this._items[nextIndex].el.el.disabled) {\n                nextIndex++;\n                if (nextIndex >= this._items.length) {\n                  nextIndex = 0;\n                }\n              }\n              this._setActiveItem(nextIndex);\n            }\n          } else {\n            let nextIndex = 0;\n            while (this._items[nextIndex].el.el.disabled) {\n              nextIndex++;\n              if (nextIndex >= this._items.length) {\n                nextIndex = 0;\n              }\n            }\n            this._setActiveItem(nextIndex);\n          }\n        }\n      } else if (e.code === 'ArrowRight') {\n        if (\n          document.activeElement.shadowRoot !== null &&\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._items[this._menuItems.CTXCOPY].el.el.innerHTML && //'copy'\n          this._copySubMenu.hasAttribute('hidden')\n        ) {\n          this._showCopySubMenu();\n          this._copySubMenu.children[0].focus();\n        } else if (\n          document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._items[this._menuItems.CTXCOPY].el.el.innerHTML &&\n          !this._copySubMenu.hasAttribute('hidden')\n        ) {\n          this._copySubMenu.children[0].focus();\n        }\n      } else if (e.code === 'ArrowLeft') {\n        if (\n          !this._copySubMenu.hasAttribute('hidden') &&\n          document.activeElement.shadowRoot !== null\n        ) {\n          if (\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n              this._copySubMenu.children[this._menuItems.CPYMENUMAP].innerHTML ||\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n              this._copySubMenu.children[this._menuItems.CPYMENUEXTENT]\n                .innerHTML ||\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n              this._copySubMenu.children[this._menuItems.CPYMENULOC].innerHTML\n          ) {\n            this._copySubMenu.setAttribute('hidden', '');\n            this._setActiveItem(this._menuItems.CTXCOPY);\n          }\n        }\n      } else if (e.code === 'Escape') {\n        if (this._layerMenuTabs || this._extentLayerMenuTabs) {\n          L.DomEvent.stop(e);\n          this._focusOnLayerControl();\n          return;\n        }\n        if (document.activeElement.shadowRoot === null) {\n          this._hide();\n        } else {\n          if (!this._copySubMenu.hasAttribute('hidden')) {\n            if (\n              document.activeElement.shadowRoot.activeElement.innerHTML ===\n                this._copySubMenu.children[this._menuItems.CPYMENUMAP]\n                  .innerHTML ||\n              document.activeElement.shadowRoot.activeElement.innerHTML ===\n                this._copySubMenu.children[this._menuItems.CPYMENUEXTENT]\n                  .innerHTML ||\n              document.activeElement.shadowRoot.activeElement.innerHTML ===\n                this._copySubMenu.children[this._menuItems.CPYMENULOC].innerHTML\n            ) {\n              this._copySubMenu.setAttribute('hidden', '');\n              this._setActiveItem(this._menuItems.CTXCOPY);\n            }\n          } else {\n            this._hide();\n          }\n        }\n      } else if (\n        e.code !== 'KeyC' &&\n        document.activeElement.shadowRoot.activeElement.innerHTML !==\n          this._items[this._menuItems.CTXCOPY].el.el.innerHTML\n      ) {\n        this._hide();\n      }\n      // using KeyboardEvent.code for its mnemonics and case-independence\n      switch (e.code) {\n        case 'Enter':\n          if (\n            document.activeElement.shadowRoot.activeElement.innerHTML ===\n            this._items[this._menuItems.CTXCOPY].el.el.innerHTML\n          ) {\n            this._copyCoords({\n              latlng: this._map.getCenter()\n            });\n            this._copySubMenu.firstChild.focus();\n          } else {\n            if (\n              this._map._container.parentNode.activeElement.parentNode.classList.contains(\n                'mapml-contextmenu'\n              )\n            )\n              this._map._container.parentNode.activeElement.click();\n          }\n          break;\n        case 'Space':\n          if (\n            this._map._container.parentNode.activeElement.parentNode.classList.contains(\n              'mapml-contextmenu'\n            )\n          )\n            this._map._container.parentNode.activeElement.click();\n          break;\n        case 'KeyC':\n          this._copyCoords({\n            latlng: this._map.getCenter()\n          });\n          this._copySubMenu.firstChild.focus();\n          break;\n        case 'KeyD':\n          this._toggleDebug(e);\n          break;\n        case 'KeyM':\n          this._copyMapML(e);\n          break;\n        case 'KeyL':\n          if (this._layerClicked.className.includes('mapml-layer-item')) {\n            this._copyLayer(e);\n          } else if (this._layerClicked.className.includes('mapml-extent-item')) {\n            this._copyMapExtent(e);\n          }\n          break;\n        case 'KeyF':\n          this._toggleFullScreen(e);\n          break;\n        case 'KeyP':\n          this._paste(e);\n          break;\n        case 'KeyT':\n          this._toggleControls(e);\n          break;\n        case 'KeyV':\n          this._viewSource(e);\n          break;\n        case 'KeyZ':\n          if (this._layerClicked.className.includes('mapml-layer-item')) {\n            this._zoomToLayer(e);\n          } else if (this._layerClicked.className.includes('mapml-extent-item')) {\n            this._zoomToMapExtent(e);\n          }\n          break;\n      }\n    },\n\n    _showCopySubMenu: function (e) {\n      let mapSize = this._map.getSize(),\n        click = this._clickEvent,\n        menu = this._copySubMenu,\n        copyEl = this._items[5].el.el;\n\n      copyEl.setAttribute('aria-expanded', 'true');\n      menu.removeAttribute('hidden');\n\n      const menuWidth = this._container.offsetWidth;\n        this._container.offsetHeight;\n        const submenuWidth = menu.offsetWidth;\n      if (click.containerPoint.x + menuWidth + submenuWidth > mapSize.x) {\n        menu.style.left = 'auto';\n        menu.style.right = menuWidth + 'px';\n      } else {\n        menu.style.left = menuWidth + 'px';\n        menu.style.right = 'auto';\n      }\n\n      menu.style.top = 100 - 22 + 'px';\n      menu.style.bottom = 'auto';\n    },\n\n    _hideCopySubMenu: function (e) {\n      if (\n        !e.relatedTarget ||\n        !e.relatedTarget.parentElement ||\n        e.relatedTarget.parentElement.classList.contains('mapml-submenu') ||\n        e.relatedTarget.classList.contains('mapml-submenu')\n      )\n        return;\n      let menu = this._copySubMenu,\n        copyEl = this._items[4].el.el;\n      copyEl.setAttribute('aria-expanded', 'false');\n      menu.setAttribute('hidden', '');\n      this.noActiveEl = true; //variable to keep track of no focus element on contextmenu, bug fix for arrow key navigation\n    },\n\n    _onItemMouseOver: function (e) {\n      L.DomUtil.addClass(e.target || e.srcElement, 'over');\n      if (e.srcElement.innerText === M.options.locale.cmCopyCoords + ' (C)')\n        this._showCopySubMenu(e);\n    },\n\n    _onItemMouseOut: function (e) {\n      L.DomUtil.removeClass(e.target || e.srcElement, 'over');\n      this._hideCopySubMenu(e);\n    },\n\n    toggleContextMenuItem: function (options, state) {\n      options = options.toUpperCase();\n      if (state === 'disabled') {\n        if (options === 'CONTROLS') {\n          this._items[8].el.el.disabled = true;\n        } else if (options === 'BACK') {\n          this._items[0].el.el.disabled = true;\n        } else if (options === 'FORWARD') {\n          this._items[1].el.el.disabled = true;\n        } else if (options === 'RELOAD') {\n          this._items[2].el.el.disabled = true;\n        }\n      } else if (state === 'enabled') {\n        if (options === 'CONTROLS') {\n          this._items[8].el.el.disabled = false;\n        } else if (options === 'BACK') {\n          this._items[0].el.el.disabled = false;\n        } else if (options === 'FORWARD') {\n          this._items[1].el.el.disabled = false;\n        } else if (options === 'RELOAD') {\n          this._items[2].el.el.disabled = false;\n        }\n      }\n    },\n\n    setViewFullScreenInnerHTML: function (options) {\n      if (options === 'view') {\n        this._map.contextMenu._items[3].el.el.innerHTML =\n          M.options.locale.btnFullScreen + ' (<kbd>F</kbd>)';\n      } else if (options === 'exit') {\n        this._map.contextMenu._items[3].el.el.innerHTML =\n          M.options.locale.btnExitFullScreen + ' (<kbd>F</kbd>)';\n      }\n    }\n  });\n\n  var Util = {\n    // _convertAndFormatPCRS returns the converted CRS and formatted pcrsBounds in gcrs, pcrs, tcrs, and tilematrix. Used for setting extent for the map and layer (map.extent, layer.extent).\n    // _convertAndFormatPCRS: L.Bounds, _map, projection -> {...}\n    _convertAndFormatPCRS: function (pcrsBounds, crs, projection) {\n      if (!pcrsBounds || !crs) return {};\n\n      let tcrsTopLeft = [],\n        tcrsBottomRight = [],\n        tileMatrixTopLeft = [],\n        tileMatrixBottomRight = [],\n        tileSize = crs.options.crs.tile.bounds.max.y;\n\n      for (let i = 0; i < crs.options.resolutions.length; i++) {\n        let scale = crs.scale(i),\n          minConverted = crs.transformation.transform(pcrsBounds.min, scale),\n          maxConverted = crs.transformation.transform(pcrsBounds.max, scale);\n\n        tcrsTopLeft.push({\n          horizontal: minConverted.x,\n          vertical: maxConverted.y\n        });\n        tcrsBottomRight.push({\n          horizontal: maxConverted.x,\n          vertical: minConverted.y\n        });\n\n        //converts the tcrs values from earlier to tilematrix\n        tileMatrixTopLeft.push({\n          horizontal: tcrsTopLeft[i].horizontal / tileSize,\n          vertical: tcrsTopLeft[i].vertical / tileSize\n        });\n        tileMatrixBottomRight.push({\n          horizontal: tcrsBottomRight[i].horizontal / tileSize,\n          vertical: tcrsBottomRight[i].vertical / tileSize\n        });\n      }\n\n      //converts the gcrs, I believe it can take any number values from -inf to +inf\n      let unprojectedMin = crs.unproject(pcrsBounds.min),\n        unprojectedMax = crs.unproject(pcrsBounds.max);\n\n      let gcrs = {\n        topLeft: {\n          horizontal: unprojectedMin.lng,\n          vertical: unprojectedMax.lat\n        },\n        bottomRight: {\n          horizontal: unprojectedMax.lng,\n          vertical: unprojectedMin.lat\n        }\n      };\n\n      //formats known pcrs bounds to correct format\n      let pcrs = {\n        topLeft: {\n          horizontal: pcrsBounds.min.x,\n          vertical: pcrsBounds.max.y\n        },\n        bottomRight: {\n          horizontal: pcrsBounds.max.x,\n          vertical: pcrsBounds.min.y\n        }\n      };\n\n      //formats all extent data\n      let extent = {\n        topLeft: {\n          tcrs: tcrsTopLeft,\n          tilematrix: tileMatrixTopLeft,\n          gcrs: gcrs.topLeft,\n          pcrs: pcrs.topLeft\n        },\n        bottomRight: {\n          tcrs: tcrsBottomRight,\n          tilematrix: tileMatrixBottomRight,\n          gcrs: gcrs.bottomRight,\n          pcrs: pcrs.bottomRight\n        }\n      };\n      if (projection) {\n        extent.projection = projection;\n      }\n      return extent;\n    },\n    // extentToBounds: returns bounds in gcrs, pcrs. Used for setting bounds for the map (map.totalLayerBounds).\n    // extentToBounds: {...}, crs -> L.Bounds / L.LatlngBounds\n    extentToBounds(extent, crs) {\n      switch (crs.toUpperCase()) {\n        case 'PCRS':\n          return L.bounds(\n            L.point(extent.topLeft.pcrs.horizontal, extent.topLeft.pcrs.vertical),\n            L.point(\n              extent.bottomRight.pcrs.horizontal,\n              extent.bottomRight.pcrs.vertical\n            )\n          );\n        case 'GCRS':\n          return L.latLngBounds(\n            L.latLng(\n              extent.topLeft.gcrs.vertical,\n              extent.topLeft.gcrs.horizontal\n            ),\n            L.latLng(\n              extent.bottomRight.gcrs.vertical,\n              extent.bottomRight.gcrs.horizontal\n            )\n          );\n      }\n    },\n\n    // axisToCS returns the CRS when given the axis:\n    // https://maps4html.org/web-map-doc/docs/elements/input/#axis\n    // axisToCS: (Axis String) -> (CRS String)\n    axisToCS: function (axis) {\n      try {\n        switch (axis.toLowerCase()) {\n          case 'row':\n          case 'column':\n            return 'TILEMATRIX';\n          case 'i':\n          case 'j':\n            return ['MAP', 'TILE'];\n          case 'x':\n          case 'y':\n            return 'TCRS';\n          case 'latitude':\n          case 'longitude':\n            return 'GCRS';\n          case 'northing':\n          case 'easting':\n            return 'PCRS';\n          default:\n            return M.FALLBACK_CS;\n        }\n      } catch (e) {\n        return undefined;\n      }\n    },\n\n    // csToAxes takes a given cs and retuns the axes, first horizontal then vertical\n    // https://maps4html.org/web-map-doc/docs/elements/input/#axis\n    // csToAxes: (CRS String) -> [(horizontal axis String), (Vertical axis String)]\n    csToAxes: function (cs) {\n      try {\n        switch (cs.toLowerCase()) {\n          case 'tilematrix':\n            return ['column', 'row'];\n          case 'map':\n          case 'tile':\n            return ['i', 'j'];\n          case 'tcrs':\n            return ['x', 'y'];\n          case 'gcrs':\n            return ['longitude', 'latitude'];\n          case 'pcrs':\n            return ['easting', 'northing'];\n        }\n      } catch (e) {\n        return undefined;\n      }\n    },\n\n    // axisToXY takes horizontal axis and returns 'x', or takes vertical axis and returns 'y'\n    // https://maps4html.org/web-map-doc/docs/elements/input/#axis\n    // axisToXY: (Axis String) -> 'x' or 'y'\n    axisToXY: function (axis) {\n      try {\n        switch (axis.toLowerCase()) {\n          case 'i':\n          case 'column':\n          case 'longitude':\n          case 'x':\n          case 'easting':\n            return 'x';\n          case 'row':\n          case 'j':\n          case 'latitude':\n          case 'y':\n          case 'northing':\n            return 'y';\n\n          default:\n            return undefined;\n        }\n      } catch (e) {\n        return undefined;\n      }\n    },\n\n    // convertPCRSBounds converts pcrsBounds to the given cs Bounds.\n    // convertPCRSBounds: L.Bounds, Int, L.CRS, Str('PCRS'|'TCRS'|'TILEMATRIX'|'GCRS') -> L.Bounds\n    convertPCRSBounds: function (pcrsBounds, zoom, projection, cs) {\n      if (\n        !pcrsBounds ||\n        (!zoom && zoom !== 0) ||\n        !Number.isFinite(+zoom) ||\n        !projection ||\n        !cs\n      )\n        return undefined;\n      projection = typeof projection === 'string' ? M[projection] : projection;\n      switch (cs.toUpperCase()) {\n        case 'PCRS':\n          return pcrsBounds;\n        case 'TCRS':\n        case 'TILEMATRIX':\n          let minPixel = projection.transformation.transform(\n              pcrsBounds.min,\n              projection.scale(+zoom)\n            ),\n            maxPixel = projection.transformation.transform(\n              pcrsBounds.max,\n              projection.scale(+zoom)\n            );\n          if (cs.toUpperCase() === 'TCRS') return L.bounds(minPixel, maxPixel);\n          let tileSize = projection.options.crs.tile.bounds.max.x;\n          return L.bounds(\n            L.point(minPixel.x / tileSize, minPixel.y / tileSize),\n            L.point(maxPixel.x / tileSize, maxPixel.y / tileSize)\n          );\n        case 'GCRS':\n          let minGCRS = projection.unproject(pcrsBounds.min),\n            maxGCRS = projection.unproject(pcrsBounds.max);\n          return L.bounds(\n            L.point(minGCRS.lng, minGCRS.lat),\n            L.point(maxGCRS.lng, maxGCRS.lat)\n          );\n        default:\n          return undefined;\n      }\n    },\n\n    // pointToPCRSPoint takes a point, with a projection and cs and converts it to a pcrs L.point/L.latLng\n    //pointToPCRSPoint: L.Point, Int, L.CRS, Str('PCRS'|'TCRS'|'TILEMATRIX'|'GCRS') -> L.point|L.latLng\n    pointToPCRSPoint: function (point, zoom, projection, cs) {\n      if (\n        !point ||\n        (zoom !== undefined && !Number.isFinite(+zoom)) ||\n        (zoom === undefined &&\n          (cs === 'TILEMATRIX' || cs === 'TCRS' || cs === 'TILE')) ||\n        !cs ||\n        !projection\n      )\n        return undefined;\n      projection = typeof projection === 'string' ? M[projection] : projection;\n      let tileSize = projection.options.crs.tile.bounds.max.x;\n      switch (cs.toUpperCase()) {\n        case 'TILEMATRIX':\n          return M.pixelToPCRSPoint(\n            L.point(point.x * tileSize, point.y * tileSize),\n            zoom,\n            projection\n          );\n        case 'PCRS':\n          return point;\n        case 'TCRS' :\n          return M.pixelToPCRSPoint(point, zoom, projection);\n        case 'GCRS':\n          return projection.project(L.latLng(point.y, point.x));\n        default:\n          return undefined;\n      }\n    },\n\n    // pixelToPCRSPoint takes a pixel L.point, the zoom and projection and returns a L.point in pcrs\n    // pixelToPCRSPoint: L.Point, Int, L.CRS|Str -> L.point\n    pixelToPCRSPoint: function (point, zoom, projection) {\n      if (\n        !point ||\n        (!zoom && zoom !== 0) ||\n        !Number.isFinite(+zoom) ||\n        !projection\n      )\n        return undefined;\n      projection = typeof projection === 'string' ? M[projection] : projection;\n      return projection.transformation.untransform(point, projection.scale(zoom));\n    },\n\n    // boundsToPCRSBounds converts bounds with projection and cs to PCRS bounds\n    // boundsToPCRSBounds: L.bounds, Int, L.CRS|Str, Str('PCRS'|'TCRS'|'TILEMATRIX'|'GCRS') -> L.bounds\n    boundsToPCRSBounds: function (bounds, zoom, projection, cs) {\n      if (\n        !bounds ||\n        !bounds.max ||\n        !bounds.min ||\n        (zoom !== undefined && !Number.isFinite(+zoom)) ||\n        (zoom === undefined &&\n          (cs === 'TILEMATRIX' || cs === 'TCRS' || cs === 'TILE')) ||\n        !projection ||\n        !cs\n      )\n        return undefined;\n      projection = typeof projection === 'string' ? M[projection] : projection;\n      return L.bounds(\n        M.pointToPCRSPoint(bounds.min, zoom, projection, cs),\n        M.pointToPCRSPoint(bounds.max, zoom, projection, cs)\n      );\n    },\n\n    //L.bounds have fixed point positions, where min is always topleft, max is always bottom right, and the values are always sorted by leaflet\n    //important to consider when working with pcrs where the origin is not topleft but rather bottomleft, could lead to confusion\n    pixelToPCRSBounds: function (bounds, zoom, projection) {\n      if (\n        !bounds ||\n        !bounds.max ||\n        !bounds.min ||\n        (!zoom && zoom !== 0) ||\n        !Number.isFinite(+zoom) ||\n        !projection\n      )\n        return undefined;\n      projection = typeof projection === 'string' ? M[projection] : projection;\n      return L.bounds(\n        M.pixelToPCRSPoint(bounds.min, zoom, projection),\n        M.pixelToPCRSPoint(bounds.max, zoom, projection)\n      );\n    },\n\n    //meta content is the content attribute of meta\n    // input \"max=5,min=4\" => [[max,5][min,5]]\n    _metaContentToObject: function (input) {\n      if (!input || input instanceof Object) return {};\n      let content = input.split(/\\s+/).join('');\n      let contentArray = {};\n      let stringSplit = content.split(',');\n\n      for (let i = 0; i < stringSplit.length; i++) {\n        let prop = stringSplit[i].split('=');\n        if (prop.length === 2) contentArray[prop[0]] = prop[1];\n      }\n      if (contentArray !== '' && stringSplit[0].split('=').length === 1)\n        contentArray.content = stringSplit[0];\n      return contentArray;\n    },\n\n    // _coordsToArray returns an array of arrays of coordinate pairs\n    // _coordsToArray: (\"1,2,3,4\") -> [[1,2],[3,4]]\n    _coordsToArray: function (containerPoints) {\n      for (\n        var i = 1, pairs = [], coords = containerPoints.split(',');\n        i < coords.length;\n        i += 2\n      ) {\n        pairs.push([parseInt(coords[i - 1]), parseInt(coords[i])]);\n      }\n      return pairs;\n    },\n\n    // _splitCoordinate splits string coordinates to an array as floating point numbers\n    _splitCoordinate: function (element, index, array) {\n      var a = [];\n      element.split(/\\s+/gim).forEach(M._parseNumber, a);\n      this.push(a);\n    },\n\n    // _parseNumber parses a string as a floating point number, helper function for _splitCoordinate\n    _parseNumber: function (element, index, array) {\n      this.push(parseFloat(element));\n    },\n\n    // _handleLink handles map-a links, when clicked on a map-a link\n    _handleLink: function (link, leafletLayer) {\n      let zoomTo,\n        justPan = false,\n        layer,\n        map = leafletLayer._map,\n        opacity;\n      if (link.type === 'text/html' && link.target !== '_blank') {\n        // all other target values other than blank behave as _top\n        link.target = '_top';\n      } else if (link.type !== 'text/html' && link.url.includes('#')) {\n        let hash = link.url.split('#'),\n          loc = hash[1].split(',');\n        zoomTo = { z: loc[0] || 0, lng: loc[1] || 0, lat: loc[2] || 0 };\n        justPan = !hash[0]; // if the first half of the array is an empty string then the link is just for panning\n        if (['/', '.', '#'].includes(link.url[0])) link.target = '_self';\n      }\n      if (!justPan) {\n        layer = document.createElement('layer-');\n        layer.setAttribute('src', link.url);\n        layer.setAttribute('checked', '');\n        switch (link.target) {\n          case '_blank':\n            if (link.type === 'text/html') {\n              window.open(link.url);\n            } else {\n              postTraversalSetup();\n              map.options.mapEl.appendChild(layer);\n            }\n            break;\n          case '_parent':\n            postTraversalSetup();\n            for (let l of map.options.mapEl.querySelectorAll('layer-'))\n              if (l._layer !== leafletLayer) map.options.mapEl.removeChild(l);\n            map.options.mapEl.appendChild(layer);\n            map.options.mapEl.removeChild(leafletLayer._layerEl);\n            break;\n          case '_top':\n            window.location.href = link.url;\n            break;\n          default:\n            postTraversalSetup();\n            opacity = leafletLayer._layerEl.opacity;\n            leafletLayer._layerEl.insertAdjacentElement('beforebegin', layer);\n            map.options.mapEl.removeChild(leafletLayer._layerEl);\n        }\n      } else if (zoomTo && !link.inPlace && justPan) {\n        leafletLayer._map.options.mapEl.zoomTo(\n          +zoomTo.lat,\n          +zoomTo.lng,\n          +zoomTo.z\n        );\n        if (opacity) layer.opacity = opacity;\n        map.getContainer().focus();\n      }\n\n      function postTraversalSetup() {\n        // when the projection is changed as part of the link traversal process,\n        // it's necessary to set the map viewer's lat, lon and zoom NOW, so that\n        // the promises that are created when the viewer's projection is changed\n        // can use the viewer's lat, lon and zoom properties that were in effect\n        // before the projection change i.e. in the closure for that code\n        // see mapml-viewer / map is=web-map projection attributeChangedCallback\n        // specifically required for use cases like changing projection after\n        // link traversal, e.g. BC link here https://maps4html.org/experiments/linking/features/\n        if (!link.inPlace && zoomTo) updateMapZoomTo(zoomTo);\n        // the layer is newly created, so have to wait until it's fully init'd\n        // before setting properties.\n        layer.whenReady().then(() => {\n          // if the map projection isnt' changed by link traversal, it's necessary\n          // to perform pan/zoom operations after the layer is ready\n          if (!link.inPlace && zoomTo)\n            layer.parentElement.zoomTo(+zoomTo.lat, +zoomTo.lng, +zoomTo.z);\n          else if (!link.inPlace) layer.zoomTo();\n          // not sure if this is necessary\n          if (opacity) layer.opacity = opacity;\n          // this is necessary to display the FeatureIndexOverlay, I believe\n          map.getContainer().focus();\n        });\n      }\n\n      function updateMapZoomTo(zoomTo) {\n        // can't use mapEl.zoomTo(...) here, it's too slow!\n        map.options.mapEl.lat = +zoomTo.lat;\n        map.options.mapEl.lon = +zoomTo.lng;\n        map.options.mapEl.zoom = +zoomTo.z;\n      }\n    },\n    getBoundsFromMeta: function (mapml) {\n      if (!mapml) return null;\n      let cs,\n        pseudo = mapml instanceof ShadowRoot ? ':host' : ':scope',\n        projection =\n          (mapml.querySelector(pseudo + ' > map-meta[name=projection]') &&\n            M._metaContentToObject(\n              mapml\n                .querySelector(pseudo + ' > map-meta[name=projection]')\n                .getAttribute('content')\n            ).content.toUpperCase()) ||\n          M.FALLBACK_PROJECTION;\n      try {\n        let meta =\n          mapml.querySelector(pseudo + ' > map-meta[name=extent]') &&\n          M._metaContentToObject(\n            mapml\n              .querySelector(pseudo + ' > map-meta[name=extent]')\n              .getAttribute('content')\n          );\n\n        let zoom = meta.zoom;\n\n        let metaKeys = Object.keys(meta);\n        for (let i = 0; i < metaKeys.length; i++) {\n          if (!metaKeys[i].includes('zoom')) {\n            cs = M.axisToCS(metaKeys[i].split('-')[2]);\n            break;\n          }\n        }\n        // this could happen if the content didn't match the grammar for map-meta[name=extent]\n        if (cs === undefined) throw new Error('cs undefined when getting bounds');\n\n        // when cs is tilematrix, tcrs or tile, zoom is required.\n        // should throw / return null instead of trying to construct a bounds\n\n        if (\n          zoom === undefined &&\n          (cs === 'TILEMATRIX' || cs === 'TCRS' || cs === 'TILE')\n        )\n          throw new Error(\n            'map-meta[name=extent] zoom= parameter not provided for tcrs,tile or tilematrix bounds'\n          );\n        let axes = M.csToAxes(cs);\n        return M.boundsToPCRSBounds(\n          L.bounds(\n            L.point(+meta[`top-left-${axes[0]}`], +meta[`top-left-${axes[1]}`]),\n            L.point(\n              +meta[`bottom-right-${axes[0]}`],\n              +meta[`bottom-right-${axes[1]}`]\n            )\n          ),\n          zoom,\n          projection,\n          cs\n        );\n      } catch (error) {\n        //if error then by default set the layer to osm and bounds to the entire map view\n        return M.boundsToPCRSBounds(\n          M[projection].options.crs.tilematrix.bounds(0),\n          0,\n          projection,\n          cs\n        );\n      }\n    },\n    /**\n     * TODO Review and improve design logic with Aliyan\n     *\n     * Parses object from <map-meta name=\"zoom\" content=\"...\">\n     * @param {type} mapml\n     * @returns {minZoom, maxZoom, minNativeZoom, maxNativeZoom}\n     */\n    getZoomBoundsFromMeta: function (mapml) {\n      if (!mapml) return null;\n      let pseudo = mapml instanceof ShadowRoot ? ':host' : ':scope';\n\n      let meta = M._metaContentToObject(\n        mapml\n          .querySelector(pseudo + '> map-meta[name=zoom]')\n          .getAttribute('content')\n      );\n      if (meta.min && meta.max && meta.value)\n        return {\n          minZoom: +meta.min,\n          maxZoom: +meta.max,\n          minNativeZoom: +meta.value,\n          maxNativeZoom: +meta.value\n        };\n      else if (meta.min && meta.max)\n        return {\n          minZoom: +meta.min,\n          maxZoom: +meta.max\n        };\n      else if (meta.min)\n        return {\n          minZoom: +meta.min\n        };\n      else if (meta.max)\n        return {\n          maxZoom: +meta.max\n        };\n    },\n    getZoomBounds: function (mapml, nativeZoom) {\n      if (!mapml) return null;\n      let nMin = 100,\n        nMax = 0,\n        features = mapml.querySelectorAll('map-feature'),\n        meta,\n        projection;\n      for (let i = 0; i < features.length; i++) {\n        let lZoom = +features[i].getAttribute('zoom');\n        if (!features[i].getAttribute('zoom')) lZoom = nativeZoom;\n        nMax = Math.max(nMax, lZoom);\n        nMin = Math.min(nMin, lZoom);\n      }\n      try {\n        projection = M._metaContentToObject(\n          mapml.querySelector('map-meta[name=projection]').getAttribute('content')\n        ).content;\n        meta = M._metaContentToObject(\n          mapml.querySelector('map-meta[name=zoom]').getAttribute('content')\n        );\n      } catch (error) {\n        return {\n          minZoom: 0,\n          maxZoom:\n            M[projection || M.FALLBACK_PROJECTION].options.resolutions.length - 1,\n          minNativeZoom: nMin,\n          maxNativeZoom: nMax\n        };\n      }\n      return {\n        minZoom: +meta.min,\n        maxZoom: +meta.max,\n        minNativeZoom: nMin,\n        maxNativeZoom: nMax\n      };\n    },\n    // getNativeVariables: returns an object with the native zoom and CS,\n    //                     based on the map-metas that are available within\n    //                     the layer or the fallback default values.\n    // getNativeVariables: mapml-||layer-||null||[map-feature,...] -> {zoom: _, val: _}\n    // mapml can be a mapml- element, layer- element, null, or an array of map-features\n    getNativeVariables: function (mapml) {\n      let nativeZoom, nativeCS;\n      // when mapml is an array of features provided by the query\n      if (\n        mapml.length &&\n        mapml[0].parentElement.parentElement &&\n        mapml[0].parentElement.parentElement.tagName === 'mapml-'\n      ) {\n        let mapmlEl = mapml[0].parentElement.parentElement;\n        nativeZoom =\n          (mapmlEl.querySelector &&\n            mapmlEl.querySelector('map-meta[name=zoom]') &&\n            +M._metaContentToObject(\n              mapmlEl.querySelector('map-meta[name=zoom]').getAttribute('content')\n            ).value) ||\n          0;\n        nativeCS =\n          (mapmlEl.querySelector &&\n            mapmlEl.querySelector('map-meta[name=cs]') &&\n            M._metaContentToObject(\n              mapmlEl.querySelector('map-meta[name=cs]').getAttribute('content')\n            ).content) ||\n          'GCRS';\n      } else {\n        // when mapml is null or a layer-/mapml- element\n        nativeZoom =\n          (mapml.querySelector &&\n            mapml.querySelector('map-meta[name=zoom]') &&\n            +M._metaContentToObject(\n              mapml.querySelector('map-meta[name=zoom]').getAttribute('content')\n            ).value) ||\n          0;\n        nativeCS =\n          (mapml.querySelector &&\n            mapml.querySelector('map-meta[name=cs]') &&\n            M._metaContentToObject(\n              mapml.querySelector('map-meta[name=cs]').getAttribute('content')\n            ).content) ||\n          'GCRS';\n      }\n      return { zoom: nativeZoom, cs: nativeCS };\n    },\n\n    // _gcrsToTileMatrix returns the [column, row] of the tiles at map center. Used for Announce movement for screen readers\n    // _gcrsToTileMatrix: map/mapml-viewer -> [column, row]\n    _gcrsToTileMatrix: function (mapEl) {\n      let point = mapEl._map.project(mapEl._map.getCenter());\n      let tileSize = mapEl._map.options.crs.options.crs.tile.bounds.max.y;\n      let column = Math.trunc(point.x / tileSize);\n      let row = Math.trunc(point.y / tileSize);\n      return [column, row];\n    },\n\n    // Pastes text to a mapml-viewer/map element(mapEl), text can be a mapml link, geojson, or a layer-\n    //    used for pasting layers through ctrl+v, drag/drop, and pasting through the contextmenu\n    // _pasteLayer: HTMLElement Str -> None\n    // Effects: append a layer- element to mapEl, if it is valid\n    _pasteLayer: function (mapEl, text) {\n      try {\n        new URL(text);\n        // create a new <layer-> child of the <mapml-viewer> element\n        let l =\n          '<layer- src=\"' +\n          text +\n          '\" label=\"' +\n          M.options.locale.dfLayer +\n          '\" checked=\"\"></layer->';\n        mapEl.insertAdjacentHTML('beforeend', l);\n        mapEl.lastElementChild.whenReady().catch(() => {\n          if (mapEl) {\n            // should invoke lifecyle callbacks automatically by removing it from DOM\n            mapEl.removeChild(mapEl.lastChild);\n          }\n          // garbage collect it\n          l = null;\n        });\n      } catch (err) {\n        text = text\n          .replace(/(<!--.*?-->)|(<!--[\\S\\s]+?-->)|(<!--[\\S\\s]*?$)/g, '')\n          .trim();\n        if (text.slice(0, 7) === '<layer-' && text.slice(-9) === '</layer->') {\n          mapEl.insertAdjacentHTML('beforeend', text);\n        } else if (\n          text.slice(0, 12) === '<map-feature' &&\n          text.slice(-14) === '</map-feature>'\n        ) {\n          let layer =\n            `<layer- label=\"${M.options.locale.dfPastedLayer}\" checked>\n                       <map-meta name='projection' content='${mapEl.projection}'></map-meta>` +\n            text +\n            '</layer->';\n          mapEl.insertAdjacentHTML('beforeend', layer);\n        } else {\n          try {\n            mapEl.geojson2mapml(JSON.parse(text));\n          } catch {\n            console.log('Invalid Input!');\n          }\n        }\n      }\n    },\n\n    // Takes GeoJSON Properties to return an HTML table, helper function\n    //    for geojson2mapml\n    // _properties2Table: geojsonPropertiesOBJ -> HTML Table\n    _properties2Table: function (json) {\n      let table = document.createElement('table');\n\n      // Creating a Table Header\n      let thead = table.createTHead();\n      let row = thead.insertRow();\n      let th1 = document.createElement('th');\n      let th2 = document.createElement('th');\n      th1.appendChild(document.createTextNode('Property name'));\n      th2.appendChild(document.createTextNode('Property value'));\n      th1.setAttribute('role', 'columnheader');\n      th2.setAttribute('role', 'columnheader');\n      th1.setAttribute('scope', 'col');\n      th2.setAttribute('scope', 'col');\n      row.appendChild(th1);\n      row.appendChild(th2);\n\n      // Creating table body and populating it from the JSON\n      let tbody = table.createTBody();\n      for (let key in json) {\n        if (json.hasOwnProperty(key)) {\n          let row = tbody.insertRow();\n          let th = document.createElement('th');\n          let td = document.createElement('td');\n          th.appendChild(document.createTextNode(key));\n          td.appendChild(document.createTextNode(json[key]));\n          th.setAttribute('scope', 'row');\n          td.setAttribute('itemprop', key);\n          row.appendChild(th);\n          row.appendChild(td);\n        }\n      }\n      return table;\n    },\n\n    // Takes bbox array and a x,y coordinate to possibly update the extent, returns extent\n    //    for geojson2mapml\n    // _updateExtent: [min x, min y, max x, max y], x, y -> [min x, min y, max x, max y]\n    _updateExtent: function (bboxExtent, x, y) {\n      if (bboxExtent === {}) {\n        return bboxExtent;\n      }\n      bboxExtent[0] = Math.min(x, bboxExtent[0]);\n      bboxExtent[1] = Math.min(y, bboxExtent[1]);\n      bboxExtent[2] = Math.max(x, bboxExtent[2]);\n      bboxExtent[3] = Math.max(y, bboxExtent[3]);\n      return bboxExtent;\n    },\n\n    // Takes a GeoJSON geojson and an options Object which returns a <layer-> Element\n    // The options object can contain the following:\n    //      label            - String, contains the layer name, if included overrides the default label mapping\n    //      projection       - String, contains the projection of the layer (OSMTILE, WGS84, CBMTILE, APSTILE), defaults to   OSMTILE\n    //      caption          - Function | String, function accepts one argument being the feature object which produces the   featurecaption string OR a string that is the name of the property that will be mapped to featurecaption\n    //      properties       - Function | String | HTMLElement, a function which maps the geojson feature to an HTMLElement   or a string that will be parsed as an HTMLElement or an HTMLElement\n    //      geometryFunction - Function, A function you supply that can add classes, hyperlinks and spans to the created  <map-geometry> element, default would be the plain map-geometry element\n    // geojson2mapml: geojson Object <layer-> [min x, min y, max x, max y] -> <layer->\n    geojson2mapml: function (json, options = {}, layer = null, bboxExtent = {}) {\n      let defaults = {\n        label: null,\n        projection: 'OSMTILE',\n        caption: null,\n        properties: null,\n        geometryFunction: null\n      };\n      // assign default values for undefined options\n      options = Object.assign({}, defaults, options);\n\n      // If string json is received\n      if (typeof json === 'string') {\n        json = JSON.parse(json);\n      }\n      let geometryType = [\n        'POINT',\n        'LINESTRING',\n        'POLYGON',\n        'MULTIPOINT',\n        'MULTILINESTRING',\n        'MULTIPOLYGON',\n        'GEOMETRYCOLLECTION'\n      ];\n      let jsonType = json.type.toUpperCase();\n      let out = '';\n      let setExtent = false;\n\n      // HTML parser\n      let parser = new DOMParser();\n\n      // initializing layer\n      if (layer === null) {\n        if (!json.bbox) {\n          setExtent = true;\n        }\n        // creating an empty mapml layer\n        let xmlStringLayer =\n          \"<layer- label='' checked><map-meta name='projection' content='\" +\n          options.projection +\n          \"'></map-meta><map-meta name='cs' content='gcrs'></map-meta></layer->\";\n        layer = parser.parseFromString(xmlStringLayer, 'text/html');\n        //console.log(layer)\n        if (options.label !== null) {\n          layer.querySelector('layer-').setAttribute('label', options.label);\n        } else if (json.name) {\n          layer.querySelector('layer-').setAttribute('label', json.name);\n        } else if (json.title) {\n          layer.querySelector('layer-').setAttribute('label', json.title);\n        } else {\n          layer\n            .querySelector('layer-')\n            .setAttribute('label', M.options.locale.dfLayer);\n        }\n      }\n      let point = '<map-point></map-point>';\n      point = parser.parseFromString(point, 'text/html');\n\n      let multiPoint =\n        '<map-multipoint><map-coordinates></map-coordinates></map-multipoint>';\n      multiPoint = parser.parseFromString(multiPoint, 'text/html');\n\n      let linestring =\n        '<map-linestring><map-coordinates></map-coordinates></map-linestring>';\n      linestring = parser.parseFromString(linestring, 'text/html');\n\n      let multilinestring = '<map-multilinestring></map-multilinestring>';\n      multilinestring = parser.parseFromString(multilinestring, 'text/html');\n\n      let polygon = '<map-polygon></map-polygon>';\n      polygon = parser.parseFromString(polygon, 'text/html');\n\n      let multiPolygon = '<map-multipolygon></map-multipolygon>';\n      multiPolygon = parser.parseFromString(multiPolygon, 'text/html');\n\n      let geometrycollection =\n        '<map-geometrycollection></map-geometrycollection>';\n      geometrycollection = parser.parseFromString(\n        geometrycollection,\n        'text/html'\n      );\n\n      let feature =\n        '<map-feature><map-featurecaption></map-featurecaption><map-geometry></map-geometry><map-properties></map-properties></map-feature>';\n      feature = parser.parseFromString(feature, 'text/html');\n\n      // Template to add coordinates to Geometries\n      let coords = '<map-coordinates></map-coordinates>';\n      coords = parser.parseFromString(coords, 'text/html');\n\n      //console.log(layer);\n      if (jsonType === 'FEATURECOLLECTION') {\n        // Setting bbox if it exists\n        if (json.bbox) {\n          layer\n            .querySelector('layer-')\n            .insertAdjacentHTML(\n              'afterbegin',\n              \"<map-meta name='extent' content='top-left-longitude=\" +\n                json.bbox[0] +\n                ', top-left-latitude=' +\n                json.bbox[1] +\n                ', bottom-right-longitude=' +\n                json.bbox[2] +\n                ',bottom-right-latitude=' +\n                json.bbox[3] +\n                \"'></map-meta>\"\n            );\n        } else {\n          bboxExtent = [\n            Infinity,\n            Infinity,\n            Number.NEGATIVE_INFINITY,\n            Number.NEGATIVE_INFINITY\n          ];\n        }\n\n        let features = json.features;\n        //console.log(\"Features length - \" + features.length);\n        for (let l = 0; l < features.length; l++) {\n          M.geojson2mapml(features[l], options, layer, bboxExtent);\n        }\n      } else if (jsonType === 'FEATURE') {\n        let clone_feature = feature.cloneNode(true);\n        let curr_feature = clone_feature.querySelector('map-feature');\n\n        // Setting bbox if it exists\n        if (json.bbox) {\n          layer\n            .querySelector('layer-')\n            .insertAdjacentHTML(\n              'afterbegin',\n              \"<map-meta name='extent' content='top-left-longitude=\" +\n                json.bbox[0] +\n                ', top-left-latitude=' +\n                json.bbox[1] +\n                ', bottom-right-longitude=' +\n                json.bbox[2] +\n                ',bottom-right-latitude=' +\n                json.bbox[3] +\n                \"'></map-meta>\"\n            );\n        } else if (\n          typeof bboxExtent === 'object' &&\n          bboxExtent.length === undefined\n        ) {\n          bboxExtent = [\n            Infinity,\n            Infinity,\n            Number.NEGATIVE_INFINITY,\n            Number.NEGATIVE_INFINITY\n          ];\n        }\n\n        // Setting featurecaption\n        let featureCaption = layer.querySelector('layer-').getAttribute('label');\n        if (typeof options.caption === 'function') {\n          featureCaption = options.caption(json);\n        } else if (typeof options.caption === 'string') {\n          featureCaption = json.properties[options.caption];\n          // if property does not exist\n          if (featureCaption === undefined) {\n            featureCaption = options.caption;\n          }\n        } else if (json.id) {\n          // when no caption option available try setting id as featurecaption\n          featureCaption = json.id;\n        }\n        curr_feature.querySelector('map-featurecaption').innerHTML =\n          featureCaption;\n\n        // Setting Properties\n        let p;\n        // if properties function is passed\n        if (typeof options.properties === 'function') {\n          p = options.properties(json);\n          // if function output is not an element, ignore the properties.\n          if (!(p instanceof Element)) {\n            p = false;\n            console.error(\n              'options.properties function returns a string instead of an HTMLElement.'\n            );\n          }\n        } else if (typeof options.properties === 'string') {\n          // if properties string is passed\n          curr_feature\n            .querySelector('map-properties')\n            .insertAdjacentHTML('beforeend', options.properties);\n          p = false;\n        } else if (options.properties instanceof HTMLElement) {\n          // if an HTMLElement is passed - NOT TESTED\n          p = options.properties;\n        } else {\n          // If no properties function, string or HTMLElement is passed\n          p = M._properties2Table(json.properties);\n        }\n\n        if (p) {\n          curr_feature.querySelector('map-properties').appendChild(p);\n        }\n\n        // Setting map-geometry\n        let g = M.geojson2mapml(json.geometry, options, layer, bboxExtent);\n        if (typeof options.geometryFunction === 'function') {\n          curr_feature\n            .querySelector('map-geometry')\n            .appendChild(options.geometryFunction(g, json));\n        } else {\n          curr_feature.querySelector('map-geometry').appendChild(g);\n        }\n\n        // Appending feature to layer\n        layer.querySelector('layer-').appendChild(curr_feature);\n      } else if (geometryType.includes(jsonType)) {\n        //console.log(\"Geometry Type - \" + jsonType);\n        switch (jsonType) {\n          case 'POINT':\n            bboxExtent = M._updateExtent(\n              bboxExtent,\n              json.coordinates[0],\n              json.coordinates[1]\n            );\n            out = json.coordinates[0] + ' ' + json.coordinates[1];\n\n            // Create Point element\n            let clone_point = point.cloneNode(true);\n            clone_point = clone_point.querySelector('map-point');\n\n            // Create map-coords to add to the polygon\n            let clone_coords = coords.cloneNode(true);\n            clone_coords = clone_coords.querySelector('map-coordinates');\n\n            clone_coords.innerHTML = out;\n\n            clone_point.appendChild(clone_coords);\n            //console.log(clone_point);\n            return clone_point;\n\n          case 'LINESTRING':\n            let clone_linestring = linestring.cloneNode(true);\n            let linestring_coordindates =\n              clone_linestring.querySelector('map-coordinates');\n\n            out = '';\n\n            for (let x = 0; x < json.coordinates.length; x++) {\n              bboxExtent = M._updateExtent(\n                bboxExtent,\n                json.coordinates[x][0],\n                json.coordinates[x][1]\n              );\n              out =\n                out + json.coordinates[x][0] + ' ' + json.coordinates[x][1] + ' ';\n            }\n\n            linestring_coordindates.innerHTML = out;\n            //console.log(clone_linestring.querySelector('map-linestring'));\n            return clone_linestring.querySelector('map-linestring');\n\n          case 'POLYGON':\n            let clone_polygon = polygon.cloneNode(true);\n            clone_polygon = clone_polygon.querySelector('map-polygon');\n\n            // Going over each coordinates\n            for (let y = 0; y < json.coordinates.length; y++) {\n              let out = '';\n              let clone_coords = coords.cloneNode(true);\n              clone_coords = clone_coords.querySelector('map-coordinates');\n\n              // Going over coordinates for the polygon\n              for (let x = 0; x < json.coordinates[y].length; x++) {\n                bboxExtent = M._updateExtent(\n                  bboxExtent,\n                  json.coordinates[y][x][0],\n                  json.coordinates[y][x][1]\n                );\n                out =\n                  out +\n                  json.coordinates[y][x][0] +\n                  ' ' +\n                  json.coordinates[y][x][1] +\n                  ' ';\n              }\n\n              // Create map-coordinates element and append it to clone_polygon\n              clone_coords.innerHTML = out;\n\n              clone_polygon.appendChild(clone_coords);\n            }\n            //console.log(clone_polygon);\n            return clone_polygon;\n\n          case 'MULTIPOINT':\n            out = '';\n            // Create multipoint element\n            let clone_multipoint = multiPoint.cloneNode(true);\n            clone_multipoint = clone_multipoint.querySelector('map-multipoint');\n\n            for (let i = 0; i < json.coordinates.length; i++) {\n              bboxExtent = M._updateExtent(\n                bboxExtent,\n                json.coordinates[i][0],\n                json.coordinates[i][1]\n              );\n              out =\n                out + json.coordinates[i][0] + ' ' + json.coordinates[i][1] + ' ';\n            }\n            clone_multipoint.querySelector('map-coordinates').innerHTML = out;\n            return clone_multipoint;\n\n          case 'MULTILINESTRING':\n            let clone_multilinestring = multilinestring.cloneNode(true);\n            clone_multilinestring = clone_multilinestring.querySelector(\n              'map-multilinestring'\n            );\n\n            for (let i = 0; i < json.coordinates.length; i++) {\n              let out = '';\n              let clone_coords = coords.cloneNode(true);\n              clone_coords = clone_coords.querySelector('map-coordinates');\n              for (let y = 0; y < json.coordinates[i].length; y++) {\n                bboxExtent = M._updateExtent(\n                  bboxExtent,\n                  json.coordinates[i][y][0],\n                  json.coordinates[i][y][1]\n                );\n                out =\n                  out +\n                  json.coordinates[i][y][0] +\n                  ' ' +\n                  json.coordinates[i][y][1] +\n                  ' ';\n              }\n              clone_coords.innerHTML = out;\n              clone_multilinestring.appendChild(clone_coords);\n            }\n            return clone_multilinestring;\n\n          case 'MULTIPOLYGON':\n            let m = multiPolygon.cloneNode(true);\n            m = m.querySelector('map-multiPolygon');\n\n            // Going over each Polygon\n            for (let i = 0; i < json.coordinates.length; i++) {\n              let clone_polygon = polygon.cloneNode(true);\n              clone_polygon = clone_polygon.querySelector('map-polygon');\n\n              // Going over each coordinates\n              for (let y = 0; y < json.coordinates[i].length; y++) {\n                let out = '';\n                let clone_coords = coords.cloneNode(true);\n                clone_coords = clone_coords.querySelector('map-coordinates');\n\n                // Going over coordinates for the polygon\n                for (let x = 0; x < json.coordinates[i][y].length; x++) {\n                  bboxExtent = M._updateExtent(\n                    bboxExtent,\n                    json.coordinates[i][y][x][0],\n                    json.coordinates[i][y][x][1]\n                  );\n                  out =\n                    out +\n                    json.coordinates[i][y][x][0] +\n                    ' ' +\n                    json.coordinates[i][y][x][1] +\n                    ' ';\n                }\n\n                // Create map-coordinates element and append it to clone_polygon\n                clone_coords.innerHTML = out;\n\n                clone_polygon.appendChild(clone_coords);\n              }\n              m.appendChild(clone_polygon);\n            }\n            return m;\n          case 'GEOMETRYCOLLECTION': // ---------------------------------------------------------------------------\n            let g = geometrycollection.cloneNode(true);\n            g = g.querySelector('map-geometrycollection');\n            //console.log(json.geometries);\n            for (let i = 0; i < json.geometries.length; i++) {\n              let fg = M.geojson2mapml(\n                json.geometries[i],\n                options,\n                layer,\n                bboxExtent\n              );\n              g.appendChild(fg);\n            }\n            return g;\n        }\n      }\n      //Add default bbox\n      if (setExtent) {\n        layer\n          .querySelector('layer-')\n          .insertAdjacentHTML(\n            'afterbegin',\n            \"<map-meta name='extent' content='top-left-longitude=\" +\n              bboxExtent[0] +\n              ', top-left-latitude=' +\n              bboxExtent[1] +\n              ', bottom-right-longitude=' +\n              bboxExtent[2] +\n              ',bottom-right-latitude=' +\n              bboxExtent[3] +\n              \"'></map-meta>\"\n          );\n      }\n      return layer.querySelector('layer-');\n    },\n\n    // Takes an array of length n to return an array of arrays with length 2, helper function\n    //    for mapml2geojson\n    // _breakArray: arr(float) -> arr(arr(float, float))\n    _breakArray: function (arr) {\n      let size = 2;\n      let arrayOfArrays = [];\n      // removing anything other than numbers, ., - (used to remove <map-span> tags)\n      arr = arr.filter((x) => !/[^\\d.-]/g.test(x)).filter((x) => x);\n      for (let i = 0; i < arr.length; i += size) {\n        arrayOfArrays.push(arr.slice(i, i + size).map(Number));\n      }\n      return arrayOfArrays;\n    },\n\n    // Takes an HTML Table to return geojson properties, helper function\n    //    for mapml2geojson\n    // _table2properties: HTML Table -> geojson\n    _table2properties: function (table) {\n      // removing thead, if it exists\n      let head = table.querySelector('thead');\n      if (head !== null) {\n        table.querySelector('thead').remove();\n      }\n      let json = {};\n      table.querySelectorAll('tr').forEach((tr) => {\n        let tableData = tr.querySelectorAll('th, td');\n        json[tableData[0].innerHTML] = tableData[1].innerHTML;\n      });\n      return json;\n    },\n\n    // Converts a geometry element (el) to geojson, helper function\n    //    for mapml2geojson, NOTE - el can not be a map-geometrycollection\n    // _geometry2geojson: (child of <map-geometry>), Proj4, Proj4, Bool -> geojson\n    _geometry2geojson: function (el, source, dest, transform) {\n      // remove map-a, map-span elements if the geometry is wrapped in them\n      while (\n        el.nodeName.toUpperCase() === 'MAP-SPAN' ||\n        el.nodeName.toUpperCase() === 'MAP-A'\n      ) {\n        el = el.firstElementChild;\n      }\n      let elem = el.nodeName;\n      let j = {};\n      let coord;\n\n      switch (elem.toUpperCase()) {\n        case 'MAP-POINT':\n          j.type = 'Point';\n          if (transform) {\n            let pointConv = proj4.transform(\n              source,\n              dest,\n              el\n                .querySelector('map-coordinates')\n                .innerHTML.split(/[<>\\ ]/g)\n                .map(Number)\n            );\n            j.coordinates = [pointConv.x, pointConv.y];\n          } else {\n            j.coordinates = el\n              .querySelector('map-coordinates')\n              .innerHTML.split(/[<>\\ ]/g)\n              .map(Number);\n          }\n          break;\n        case 'MAP-LINESTRING':\n          j.type = 'LineString';\n          coord = el.querySelector('map-coordinates').innerHTML.split(/[<>\\ ]/g);\n          coord = M._breakArray(coord);\n          if (transform) {\n            coord = M._pcrsToGcrs(coord, source, dest);\n          }\n          j.coordinates = coord;\n          break;\n        case 'MAP-POLYGON':\n          j.type = 'Polygon';\n          j.coordinates = [];\n          let x = 0;\n          el.querySelectorAll('map-coordinates').forEach((coord) => {\n            coord = coord.innerHTML.split(/[<>\\ ]/g);\n            coord = M._breakArray(coord);\n            if (transform) {\n              coord = M._pcrsToGcrs(coord, source, dest);\n            }\n            j.coordinates[x] = coord;\n            x++;\n          });\n          break;\n        case 'MAP-MULTIPOINT':\n          j.type = 'MultiPoint';\n          coord = M._breakArray(\n            el.querySelector('map-coordinates').innerHTML.split(/[<>\\ ]/g)\n          );\n          if (transform) {\n            coord = M._pcrsToGcrs(coord, source, dest);\n          }\n          j.coordinates = coord;\n          break;\n        case 'MAP-MULTILINESTRING':\n          j.type = 'MultiLineString';\n          j.coordinates = [];\n          let i = 0;\n          el.querySelectorAll('map-coordinates').forEach((coord) => {\n            coord = coord.innerHTML.split(/[<>\\ ]/g);\n            coord = M._breakArray(coord);\n            if (transform) {\n              coord = M._pcrsToGcrs(coord, source, dest);\n            }\n            j.coordinates[i] = coord;\n            i++;\n          });\n          break;\n        case 'MAP-MULTIPOLYGON':\n          j.type = 'MultiPolygon';\n          j.coordinates = [];\n          let p = 0;\n          el.querySelectorAll('map-polygon').forEach((poly) => {\n            let y = 0;\n            j.coordinates.push([]);\n            poly.querySelectorAll('map-coordinates').forEach((coord) => {\n              coord = coord.innerHTML.split(/[<>\\ ]/g);\n              coord = M._breakArray(coord);\n              if (transform) {\n                coord = M._pcrsToGcrs(coord, source, dest);\n              }\n              j.coordinates[p].push([]);\n              j.coordinates[p][y] = coord;\n              y++;\n            });\n            p++;\n          });\n          break;\n      }\n      return j;\n    },\n\n    // _pcrsToGcrs: arrof([x,y]) Proj4, Proj4 -> arrof[x,y]\n    _pcrsToGcrs: function (arr, source, dest) {\n      let newArr = [];\n      for (let i = 0; i < arr.length; i++) {\n        let conv = proj4.transform(source, dest, arr[i]);\n        conv = [conv.x, conv.y];\n        newArr.push(conv);\n      }\n      return newArr;\n    },\n\n    // Takes an <layer-> element and returns a geojson feature collection object\n    // The options object can contain the following:\n    //      propertyFunction   - function(<map-properties>), A function that maps the features' <map-properties> element to   a GeoJSON \"properties\" member.\n    //      transform          - Bool, Transform coordinates to gcrs values, defaults to True\n    // mapml2geojson: <layer-> Object -> GeoJSON\n    mapml2geojson: function (element, options = {}) {\n      let defaults = {\n        propertyFunction: null,\n        transform: true\n      };\n      // assign default values for undefined options\n      options = Object.assign({}, defaults, options);\n\n      let json = {};\n      json.type = 'FeatureCollection';\n      json.title = element.getAttribute('label');\n      json.features = [];\n\n      // Transforming Coordinates to gcrs if transformation = true and coordinate is not (EPSG:3857 or EPSG:4326)\n      let source = null;\n      let dest = null;\n      if (options.transform) {\n        source = new proj4.Proj(element.parentElement._map.options.crs.code);\n        dest = new proj4.Proj('EPSG:4326');\n        if (\n          element.parentElement._map.options.crs.code === 'EPSG:3857' ||\n          element.parentElement._map.options.crs.code === 'EPSG:4326'\n        ) {\n          options.transform = false;\n        }\n      }\n\n      // Setting all meta settings, if any\n      let metas = element.querySelectorAll('map-meta');\n      metas.forEach((meta) => {\n        let name = meta.getAttribute('name');\n        if (name === 'extent') {\n          let content = meta.getAttribute('content');\n          let arr = content.split(',');\n          let ex = {};\n          for (let i = 0; i < arr.length; i++) {\n            let s = arr[i].split('=');\n            s[0] = s[0].trim(); // removing whitespace\n            s[1] = parseFloat(s[1]);\n            ex[s[0]] = s[1];\n          }\n          json.bbox = [\n            ex['top-left-longitude'],\n            ex['top-left-latitude'],\n            ex['bottom-right-longitude'],\n            ex['bottom-right-latitude']\n          ];\n        }\n      });\n\n      // Iterating over each feature\n      let features = element.querySelectorAll('map-feature');\n      let num = 0;\n\n      // Going over each feature in the layer\n      features.forEach((feature) => {\n        //console.log(feature);\n\n        json.features[num] = { type: 'Feature' };\n        json.features[num].geometry = {};\n        json.features[num].properties = {};\n\n        // setting properties when function presented\n        if (!feature.querySelector('map-properties')) {\n          json.features[num].properties = null;\n        } else if (typeof options.propertyFunction === 'function') {\n          let properties = options.propertyFunction(\n            feature.querySelector('map-properties')\n          );\n          json.features[num].properties = properties;\n        } else if (\n          feature.querySelector('map-properties').querySelector('table') !== null\n        ) {\n          // setting properties when table presented\n          let table = feature\n              .querySelector('map-properties')\n              .querySelector('table')\n              .cloneNode(true),\n            properties = M._table2properties(table);\n          json.features[num].properties = properties;\n        } else {\n          // when no table present, strip any possible html tags to only get text\n          json.features[num].properties = {\n            prop0: feature\n              .querySelector('map-properties')\n              .innerHTML.replace(/(<([^>]+)>)/gi, '')\n          };\n        }\n\n        let geom = feature.querySelector('map-geometry').firstElementChild;\n\n        // remove map-a, map-span elements if the geometry is wrapped in them\n        while (\n          geom.nodeName.toUpperCase() === 'MAP-SPAN' ||\n          geom.nodeName.toUpperCase() === 'MAP-A'\n        ) {\n          geom = geom.firstElementChild;\n        }\n\n        // Adding Geometry\n        if (geom.nodeName.toUpperCase() !== 'MAP-GEOMETRYCOLLECTION') {\n          json.features[num].geometry = M._geometry2geojson(\n            geom,\n            source,\n            dest,\n            options.transform\n          );\n        } else {\n          json.features[num].geometry.type = 'GeometryCollection';\n          json.features[num].geometry.geometries = [];\n\n          let geoms = geom.children;\n          Array.from(geoms).forEach((g) => {\n            // omit all map-span, map-a that may be present in geometry-collection\n            let n = g.nodeName.toUpperCase();\n            if (n === 'MAP-SPAN' || n === 'MAP-A') {\n              g = g.cloneNode(true);\n              [...g.querySelectorAll('map-a, map-span')].forEach((e) =>\n                e.replaceWith(...e.children)\n              );\n              Array.from(g.children).forEach((i) => {\n                i = M._geometry2geojson(i, source, dest, options.transform);\n                json.features[num].geometry.geometries.push(i);\n              });\n            } else {\n              g = M._geometry2geojson(g, source, dest, options.transform);\n              json.features[num].geometry.geometries.push(g);\n            }\n          });\n        }\n        //going to next feature\n        num++;\n      });\n\n      return json;\n    },\n\n    // Takes leaflet bound, leaflet map and min and max zoom limit,\n    // return the maximum zoom level that can show the bound completely\n    // getMaxZoom: L.Bound, L.Map, Number, Number -> Number\n    getMaxZoom: function (bound, map, minZoom, maxZoom) {\n      if (!bound) return;\n\n      let newZoom = map.getZoom(),\n        scale = map.options.crs.scale(newZoom),\n        mapCenterTCRS = map.options.crs.transformation.transform(\n          bound.getCenter(true),\n          scale\n        );\n\n      let mapHalf = map.getSize().divideBy(2),\n        mapTlNew = mapCenterTCRS.subtract(mapHalf).round(),\n        mapBrNew = mapCenterTCRS.add(mapHalf).round();\n\n      let mapTlPCRSNew = M.pixelToPCRSPoint(\n          mapTlNew,\n          newZoom,\n          map.options.projection\n        ),\n        mapBrPCRSNew = M.pixelToPCRSPoint(\n          mapBrNew,\n          newZoom,\n          map.options.projection\n        );\n\n      let mapPCRS = L.bounds(mapTlPCRSNew, mapBrPCRSNew),\n        zOffset = mapPCRS.contains(bound) ? 1 : -1;\n\n      while (\n        (zOffset === -1 && !mapPCRS.contains(bound) && newZoom - 1 >= minZoom) ||\n        (zOffset === 1 && mapPCRS.contains(bound) && newZoom + 1 <= maxZoom)\n      ) {\n        newZoom += zOffset;\n        scale = map.options.crs.scale(newZoom);\n        mapCenterTCRS = map.options.crs.transformation.transform(\n          bound.getCenter(true),\n          scale\n        );\n\n        mapTlNew = mapCenterTCRS.subtract(mapHalf).round();\n        mapBrNew = mapCenterTCRS.add(mapHalf).round();\n        mapTlPCRSNew = M.pixelToPCRSPoint(\n          mapTlNew,\n          newZoom,\n          map.options.projection\n        );\n        mapBrPCRSNew = M.pixelToPCRSPoint(\n          mapBrNew,\n          newZoom,\n          map.options.projection\n        );\n\n        mapPCRS = L.bounds(mapTlPCRSNew, mapBrPCRSNew);\n      }\n\n      if (\n        zOffset === 1 &&\n        newZoom - 1 >= 0 &&\n        !(newZoom === maxZoom && mapPCRS.contains(bound))\n      )\n        newZoom--;\n      return newZoom;\n    },\n    getClosest(node, selector) {\n      if (!node) {\n        return null;\n      }\n      if (node instanceof ShadowRoot) {\n        return M.getClosest(node.host, selector);\n      }\n\n      if (node instanceof HTMLElement) {\n        if (node.matches(selector)) {\n          return node;\n        } else {\n          return M.getClosest(node.parentNode, selector);\n        }\n      }\n\n      return M.getClosest(node.parentNode, selector);\n    }\n  };\n\n  var AttributionButton = L.Control.Attribution.extend({\n    options: {\n      prefix:\n        '<img src=\"https://www.w3.org/community/src/templates/wordpress/StoryTeller/favicon.ico\" style=\"position: relative; top: 5px\" alt=\"W3C Community and Business Groups logo\"> <a href=\"https://www.w3.org/community/maps4html/\">Maps for HTML Community Group</a> | <img src=\"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTIiIGhlaWdodD0iOCI+PHBhdGggZmlsbD0iIzRDN0JFMSIgZD0iTTAgMGgxMnY0SDB6Ii8+PHBhdGggZmlsbD0iI0ZGRDUwMCIgZD0iTTAgNGgxMnYzSDB6Ii8+PHBhdGggZmlsbD0iI0UwQkMwMCIgZD0iTTAgN2gxMnYxSDB6Ii8+PC9zdmc+\" style=\"padding-right: 0.3em;\" alt=\"Slava Ukraini\"> <a href=\"https://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a> '\n    },\n\n    onAdd: function (map) {\n      map.attributionControl = this;\n      this._container = L.DomUtil.create(\n        'details',\n        'leaflet-control-attribution'\n      );\n      L.DomEvent.disableClickPropagation(this._container);\n\n      for (var i in map._layers) {\n        if (map._layers[i].getAttribution) {\n          this.addAttribution(map._layers[i].getAttribution());\n        }\n      }\n\n      this._update();\n\n      map.on('layeradd', this._addAttribution, this);\n\n      let dialog = document.createElement('dialog');\n      dialog.setAttribute('class', 'shortcuts-dialog');\n      dialog.setAttribute('autofocus', '');\n      dialog.onclick = function (e) {\n        e.stopPropagation();\n      };\n      dialog.innerHTML =\n        `<b>${M.options.locale.kbdShortcuts} </b><button aria-label=\"Close\" onclick='this.parentElement.close()'>X</button>` +\n        `<ul><b>${M.options.locale.kbdMovement}</b><li><kbd>&#8593</kbd> ${M.options.locale.kbdPanUp}</li><li><kbd>&#8595</kbd> ${M.options.locale.kbdPanDown}</li><li><kbd>&#8592</kbd> ${M.options.locale.kbdPanLeft}</li><li><kbd>&#8594</kbd> ${M.options.locale.kbdPanRight}</li><li><kbd>+</kbd> ${M.options.locale.btnZoomIn}</li><li><kbd>-</kbd> ${M.options.locale.btnZoomOut}</li><li><kbd>shift</kbd> + <kbd>&#8592/&#8593/&#8594/&#8595</kbd> 3x ${M.options.locale.kbdPanIncrement}</li><li><kbd>ctrl</kbd> + <kbd>&#8592/&#8593/&#8594/&#8595</kbd> 0.2x ${M.options.locale.kbdPanIncrement}</li><li><kbd>shift</kbd> + <kbd>+/-</kbd> ${M.options.locale.kbdZoom}</li></ul>` +\n        `<ul><b>${M.options.locale.kbdFeature}</b><li><kbd>&#8592/&#8593</kbd> ${M.options.locale.kbdPrevFeature}</li><li><kbd>&#8594/&#8595</kbd> ${M.options.locale.kbdNextFeature}</li></ul>`;\n      map._container.appendChild(dialog);\n\n      return this._container;\n    },\n\n    _update: function () {\n      if (!this._map) {\n        return;\n      }\n\n      var attribs = [];\n\n      for (var i in this._attributions) {\n        if (this._attributions[i]) {\n          attribs.push(i);\n        }\n      }\n\n      var prefixAndAttribs = [];\n\n      if (this.options.prefix) {\n        prefixAndAttribs.push(this.options.prefix);\n      }\n      if (attribs.length) {\n        prefixAndAttribs.push(attribs.join(', '));\n      }\n      this._container.innerHTML =\n        `<summary><svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" height=\"30px\" viewBox=\"0 0 24 24\" width=\"30px\" fill=\"currentColor\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"></path><path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"></path></svg></summary>` +\n        '<div class=\"mapml-attribution-container\">' +\n        `<button onclick=\"this.closest(\\'.leaflet-container\\').querySelector(\\'.shortcuts-dialog\\').showModal()\" class=\"shortcuts-button mapml-button\">${M.options.locale.kbdShortcuts}</button> | ` +\n        prefixAndAttribs.join(' <span aria-hidden=\"true\">|</span> ') +\n        '</div>';\n      this._container.setAttribute('role', 'group');\n      this._container.setAttribute(\n        'aria-label',\n        `${M.options.locale.btnAttribution}`\n      );\n    }\n  });\n\n  L.Map.mergeOptions({\n    attributionControl: false,\n    toggleableAttributionControl: true\n  });\n\n  L.Map.addInitHook(function () {\n    if (this.options.toggleableAttributionControl) {\n      new AttributionButton().addTo(this);\n    }\n  });\n\n  var attributionButton = function (options) {\n    return new AttributionButton(options);\n  };\n\n  var ReloadButton = L.Control.extend({\n    options: {\n      position: 'topleft'\n    },\n\n    onAdd: function (map) {\n      let container = L.DomUtil.create('div', 'mapml-reload-button leaflet-bar');\n\n      let link = L.DomUtil.create('button', 'mapml-reload-button', container);\n      link.innerHTML = \"<span aria-hidden='true'>&#x021BA</span>\";\n      link.title = M.options.locale.cmReload;\n      link.setAttribute('type', 'button');\n      link.classList.add('mapml-button');\n      link.setAttribute('aria-label', 'Reload');\n\n      L.DomEvent.disableClickPropagation(link);\n      L.DomEvent.on(link, 'click', L.DomEvent.stop);\n      L.DomEvent.on(link, 'click', this._goReload, this);\n\n      this._reloadButton = link;\n\n      this._updateDisabled();\n      map.on('moveend', this._updateDisabled, this);\n\n      return container;\n    },\n\n    onRemove: function (map) {\n      map.off('moveend', this._updateDisabled, this);\n    },\n\n    disable: function () {\n      this._disabled = true;\n      this._updateDisabled();\n      return this;\n    },\n\n    enable: function () {\n      this._disabled = false;\n      this._updateDisabled();\n      return this;\n    },\n\n    _goReload: function (e) {\n      if (!this._disabled && this._map.options.mapEl._history.length > 1) {\n        this._map.options.mapEl.reload();\n      }\n    },\n\n    _updateDisabled: function () {\n      setTimeout(() => {\n        L.DomUtil.removeClass(this._reloadButton, 'leaflet-disabled');\n        this._reloadButton.setAttribute('aria-disabled', 'false');\n\n        if (\n          this._map &&\n          (this._disabled || this._map.options.mapEl._history.length <= 1)\n        ) {\n          L.DomUtil.addClass(this._reloadButton, 'leaflet-disabled');\n          this._reloadButton.setAttribute('aria-disabled', 'true');\n        }\n      }, 0);\n    }\n  });\n\n  var reloadButton = function (options) {\n    return new ReloadButton(options);\n  };\n\n  var ScaleBar = L.Control.Scale.extend({\n    options: {\n      maxWidth: 100,\n      updateWhenIdle: true,\n      position: 'bottomleft'\n    },\n\n    onAdd: function (map) {\n      // create output tag for screenreader to read from\n      let outputScale =\n        \"<output role='status' aria-live='polite' aria-atomic='true' class='mapml-screen-reader-output-scale'></output>\";\n      map._container.insertAdjacentHTML('beforeend', outputScale);\n\n      // initialize _container\n      this._container = L.DomUtil.create('div', 'mapml-control-scale');\n      let scaleControl = L.Control.Scale.prototype.onAdd.call(this, map);\n      this._container.appendChild(scaleControl);\n      this._container.setAttribute('tabindex', 0);\n      this._scaleControl = this;\n\n      // run on load\n      setTimeout(() => {\n        this._updateOutput();\n        this._focusOutput();\n      }, 0);\n\n      // update whenever map is zoomed or dragged\n      map.on('zoomend moveend', this._updateOutput, this);\n\n      // have screenreader read out everytime the map is focused\n      this._map._container.addEventListener('focus', () => this._focusOutput());\n\n      return this._container;\n    },\n\n    onRemove: function (map) {\n      map.off('zoomend moveend', this._updateOutput, this);\n    },\n\n    getContainer: function () {\n      return this._container;\n    },\n\n    _pixelsToDistance: function (px, units) {\n      let dpi = window.devicePixelRatio * 96; // default dpi\n      if (units === 'metric') {\n        return (px / dpi) * 2.54; // inches to cm\n      }\n      return px / dpi;\n    },\n\n    _scaleLength: function (scale) {\n      let scaleLength = scale.getAttribute('style');\n      let finalLength = parseInt(scaleLength.match(/width:\\s*(\\d+)px/)[1]);\n\n      return finalLength;\n    },\n\n    _focusOutput: function () {\n      setTimeout(() => {\n        let outputFocus = this._map._container.querySelector(\n          '.mapml-screen-reader-output-scale'\n        );\n        outputFocus.textContent = '';\n        setTimeout(() => {\n          outputFocus.textContent = this._container.getAttribute('aria-label');\n        }, 100);\n      }, 0);\n    },\n\n    _updateOutput: function () {\n      let output = '';\n      let scaleLine = this._scaleControl\n        .getContainer()\n        .getElementsByClassName('leaflet-control-scale-line')[0];\n\n      if (this.options.metric) {\n        let distance = parseFloat(\n          this._pixelsToDistance(this._scaleLength(scaleLine), 'metric').toFixed(\n            1\n          )\n        );\n        output = `${distance} centimeters to ${scaleLine.textContent.trim()}`;\n        output = output.replace(/(\\d+)\\s*m\\b/g, '$1 meters');\n        output = output.replace(/ km/g, ' kilometers');\n      } else {\n        let distance = parseFloat(\n          this._pixelsToDistance(\n            this._scaleLength(scaleLine),\n            'imperial'\n          ).toFixed(1)\n        );\n        output = `${distance} inches to ${scaleLine.textContent.trim()}`;\n        output = output.replace(/ft/g, 'feet');\n        output = output.replace(/mi/g, 'miles');\n      }\n\n      this._container.setAttribute('aria-label', output);\n      this._map._container.querySelector(\n        '.mapml-screen-reader-output-scale'\n      ).textContent = output;\n    }\n  });\n  var scaleBar = function (options) {\n    return new ScaleBar(options);\n  };\n\n  var FullscreenButton = L.Control.extend({\n    options: {\n      position: 'topleft',\n      title: {\n        false: 'View Fullscreen',\n        true: 'Exit Fullscreen'\n      }\n    },\n\n    onAdd: function (map) {\n      var container = L.DomUtil.create(\n        'div',\n        'leaflet-control-fullscreen leaflet-bar leaflet-control'\n      );\n\n      this.link = L.DomUtil.create(\n        'a',\n        'leaflet-control-fullscreen-button leaflet-bar-part',\n        container\n      );\n      this.link.href = '#';\n      this.link.setAttribute('role', 'button');\n\n      this._map = map;\n      this._map.on('fullscreenchange', this._toggleTitle, this);\n      this._toggleTitle();\n\n      L.DomEvent.on(this.link, 'click', this._click, this);\n\n      return container;\n    },\n\n    onRemove: function (map) {\n      map.off('fullscreenchange', this._toggleTitle, this);\n    },\n\n    _click: function (e) {\n      L.DomEvent.stopPropagation(e);\n      L.DomEvent.preventDefault(e);\n      this._map.toggleFullscreen(this.options);\n    },\n\n    _toggleTitle: function () {\n      this.link.title = this.options.title[this._map.isFullscreen()];\n    }\n  });\n\n  L.Map.include({\n    isFullscreen: function () {\n      return this._isFullscreen || false;\n    },\n\n    toggleFullscreen: function (options) {\n      // the <map> element can't contain a shadow root, so we used a child <div>\n      // <mapml-viewer> can contain a shadow root, so return it directly\n      var mapEl = M.getClosest(this.getContainer(), 'mapml-viewer,[is=web-map]');\n      if (this.isFullscreen()) {\n        if (options && options.pseudoFullscreen) {\n          this._disablePseudoFullscreen(mapEl);\n        } else if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitCancelFullScreen) {\n          document.webkitCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else {\n          this._disablePseudoFullscreen(mapEl);\n        }\n      } else {\n        if (options && options.pseudoFullscreen) {\n          this._enablePseudoFullscreen(mapEl);\n        } else if (mapEl.requestFullscreen) {\n          mapEl.requestFullscreen();\n        } else if (mapEl.mozRequestFullScreen) {\n          mapEl.mozRequestFullScreen();\n        } else if (mapEl.webkitRequestFullscreen) {\n          mapEl.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (mapEl.msRequestFullscreen) {\n          mapEl.msRequestFullscreen();\n        } else {\n          this._enablePseudoFullscreen(mapEl);\n        }\n      }\n      this.getContainer().focus();\n    },\n\n    _enablePseudoFullscreen: function (container) {\n      L.DomUtil.addClass(container, 'leaflet-pseudo-fullscreen');\n      this._setFullscreen(true);\n      this.fire('fullscreenchange');\n    },\n\n    _disablePseudoFullscreen: function (container) {\n      L.DomUtil.removeClass(container, 'leaflet-pseudo-fullscreen');\n      this._setFullscreen(false);\n      this.fire('fullscreenchange');\n    },\n\n    _setFullscreen: function (fullscreen) {\n      this._isFullscreen = fullscreen;\n      var container = M.getClosest(\n        this.getContainer(),\n        'mapml-viewer,[is=web-map]'\n      );\n      if (fullscreen) {\n        L.DomUtil.addClass(container, 'mapml-fullscreen-on');\n      } else {\n        L.DomUtil.removeClass(container, 'mapml-fullscreen-on');\n      }\n      this.invalidateSize();\n    },\n\n    _onFullscreenChange: function (e) {\n      var fullscreenElement = M.getClosest(this.getContainer(), ':fullscreen'),\n        mapEl = M.getClosest(this.getContainer(), 'mapml-viewer,[is=web-map]');\n      if (fullscreenElement === mapEl && !this._isFullscreen) {\n        this._setFullscreen(true);\n        this.fire('fullscreenchange');\n      } else if (fullscreenElement !== mapEl && this._isFullscreen) {\n        this._setFullscreen(false);\n        this.fire('fullscreenchange');\n      }\n    }\n  });\n\n  L.Map.mergeOptions({\n    fullscreenControl: false\n  });\n\n  L.Map.addInitHook(function () {\n    if (this.options.fullscreenControl) {\n      this.fullscreenControl = new FullscreenButton(\n        this.options.fullscreenControl\n      );\n      this.addControl(this.fullscreenControl);\n    }\n\n    var fullscreenchange;\n\n    if ('onfullscreenchange' in document) {\n      fullscreenchange = 'fullscreenchange';\n    } else if ('onmozfullscreenchange' in document) {\n      fullscreenchange = 'mozfullscreenchange';\n    } else if ('onwebkitfullscreenchange' in document) {\n      fullscreenchange = 'webkitfullscreenchange';\n    } else if ('onmsfullscreenchange' in document) {\n      fullscreenchange = 'MSFullscreenChange';\n    }\n\n    if (fullscreenchange) {\n      var onFullscreenChange = L.bind(this._onFullscreenChange, this);\n\n      this.whenReady(function () {\n        L.DomEvent.on(document, fullscreenchange, onFullscreenChange);\n      });\n\n      this.on('unload', function () {\n        L.DomEvent.off(document, fullscreenchange, onFullscreenChange);\n      });\n    }\n  });\n\n  var fullscreenButton = function (options) {\n    return new FullscreenButton(options);\n  };\n\n  var GeolocationButton = L.Control.extend({\n    options: {\n      position: 'bottomright'\n    },\n\n    onAdd: function (map) {\n      // customize locate control to focus map after start/stop, so that\n      // featureIndexOverlay is correctly displayed\n      L.Control.CustomLocate = L.Control.Locate.extend({\n        start: function () {\n          L.Control.Locate.prototype.start.call(this);\n          map.getContainer().focus();\n        },\n        stop: function () {\n          L.Control.Locate.prototype.stop.call(this);\n          map.getContainer().focus();\n        }\n      });\n      this.locateControl = new L.Control.CustomLocate({\n        showPopup: false,\n        strings: {\n          title: M.options.locale.btnLocTrackOff\n        },\n        position: this.options.position,\n        locateOptions: {\n          maxZoom: 16\n        }\n      }).addTo(map);\n\n      var container = this.locateControl._container;\n      var button = this.locateControl;\n      var observer = new MutationObserver(function (mutations) {\n        if (\n          container.classList.contains('active') &&\n          container.classList.contains('following')\n        ) {\n          container.firstChild.title = M.options.locale.btnLocTrackOn;\n          button._marker.bindTooltip(M.options.locale.btnMyLocTrackOn, {\n            permanent: true\n          });\n        } else if (container.classList.contains('active')) {\n          container.firstChild.title = M.options.locale.btnLocTrackLastKnown;\n          button._marker.bindTooltip(M.options.locale.btnMyLastKnownLocTrackOn);\n        } else {\n          container.firstChild.title = M.options.locale.btnLocTrackOff;\n        }\n      });\n      var observerConfig = { attributes: true, attributeFilter: ['class'] };\n      observer.observe(container, observerConfig);\n\n      return container;\n    },\n\n    stop: function () {\n      return this.locateControl.stop();\n    }\n  });\n\n  var geolocationButton = function (options) {\n    return new GeolocationButton(options);\n  };\n\n  var Crosshair = L.Layer.extend({\n    onAdd: function (map) {\n      // SVG crosshair design from https://github.com/xguaita/Leaflet.MapCenterCoord/blob/master/src/icons/MapCenterCoordIcon1.svg?short_path=81a5c76\n      // Optimized with SVGOMG: https://jakearchibald.github.io/svgomg/\n      let svgInnerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" viewBox=\"0 0 100 100\"><g stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"50.028\" cy=\"50.219\" r=\"3.923\" stroke-width=\"2\" color=\"currentColor\" overflow=\"visible\"/><path stroke-width=\"3\" d=\"M4.973 54.424h31.768a4.204 4.204 0 1 0 0-8.409H4.973A4.203 4.203 0 0 0 .77 50.22a4.203 4.203 0 0 0 4.204 4.205z\" color=\"currentColor\" overflow=\"visible\"/><path stroke-width=\"3\" d=\"M54.232 5.165a4.204 4.204 0 1 0-8.408 0v31.767a4.204 4.204 0 1 0 8.408 0V5.165z\"/><path stroke-width=\"3\" d=\"M99.288 50.22a4.204 4.204 0 0 0-4.204-4.205H63.317a4.204 4.204 0 1 0 0 8.409h31.767a4.205 4.205 0 0 0 4.204-4.205zM45.823 95.274a4.204 4.204 0 1 0 8.409 0V63.506a4.204 4.204 0 1 0-8.409 0v31.768z\" color=\"currentColor\" overflow=\"visible\"/></g></svg>`;\n\n      this._container = L.DomUtil.create(\n        'div',\n        'mapml-crosshair',\n        map._container\n      );\n      this._container.innerHTML = svgInnerHTML;\n      map.isFocused = false;\n      this._isQueryable = false;\n\n      map.on(\n        'layerchange layeradd layerremove overlayremove',\n        this._toggleEvents,\n        this\n      );\n      map.on('popupopen', this._isMapFocused, this);\n      L.DomEvent.on(\n        map._container,\n        'keydown keyup mousedown',\n        this._isMapFocused,\n        this\n      );\n\n      this._addOrRemoveCrosshair();\n    },\n\n    onRemove: function (map) {\n      map.off(\n        'layerchange layeradd layerremove overlayremove',\n        this._toggleEvents\n      );\n      map.off('popupopen', this._isMapFocused);\n      L.DomEvent.off(\n        map._container,\n        'keydown keyup mousedown',\n        this._isMapFocused\n      );\n    },\n\n    _toggleEvents: function () {\n      if (this._hasQueryableLayer()) {\n        this._map.on('viewreset move moveend', this._addOrRemoveCrosshair, this);\n      } else {\n        this._map.off('viewreset move moveend', this._addOrRemoveCrosshair, this);\n      }\n      this._addOrRemoveCrosshair();\n    },\n\n    _addOrRemoveCrosshair: function (e) {\n      if (this._hasQueryableLayer()) {\n        this._container.removeAttribute('hidden');\n      } else {\n        this._container.setAttribute('hidden', '');\n      }\n    },\n\n    _addOrRemoveMapOutline: function (e) {\n      let mapContainer = this._map._container;\n      if (this._map.isFocused && !this._outline) {\n        this._outline = L.DomUtil.create('div', 'mapml-outline', mapContainer);\n      } else if (!this._map.isFocused && this._outline) {\n        L.DomUtil.remove(this._outline);\n        delete this._outline;\n      }\n    },\n\n    _hasQueryableLayer: function () {\n      let layers = this._map.options.mapEl.layers;\n      if (this._map.isFocused) {\n        for (let layer of layers) {\n          if (layer.queryable()) {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n\n    // TODO: should be merged with the 'mapfocused' event emitted by mapml-viewer and map, not trivial\n    _isMapFocused: function (e) {\n      //set this._map.isFocused = true if arrow buttons are used\n      if (!this._map._container.parentNode.activeElement) {\n        this._map.isFocused = false;\n        return;\n      }\n      let isLeafletContainer =\n        this._map._container.parentNode.activeElement.classList.contains(\n          'leaflet-container'\n        );\n      if (\n        isLeafletContainer &&\n        ['keydown'].includes(e.type) &&\n        e.shiftKey &&\n        e.keyCode === 9\n      ) {\n        this._map.isFocused = false;\n      } else\n        this._map.isFocused =\n          isLeafletContainer && ['keyup', 'keydown'].includes(e.type);\n\n      if (this._map.isFocused) this._map.fire('mapkeyboardfocused');\n      this._addOrRemoveMapOutline();\n      this._addOrRemoveCrosshair();\n    }\n  });\n\n  var crosshair = function (options) {\n    return new Crosshair(options);\n  };\n\n  /**\n   * M.Path is a extension of L.Path that understands mapml feature markup\n   * It converts the markup to the following structure (abstract enough to encompass all feature types) for example:\n   *  this._outlinePath = HTMLElement;\n   *  this._parts = [\n   *    {\n   *      path: HTMLElement,\n   *      rings:[\n   *        {points:[{x:1,y:1}, ...]},\n   *        ...\n   *      ],\n   *      subrings:[\n   *        {points:[{x:2, y:2}, ...], cls:\"Span Class Name\", path: HTMLElement,},\n   *        ...\n   *      ],\n   *      cls:\"className\",\n   *    },\n   *    ...\n   *  ];\n   */\n  var Path = L.Path.extend({\n    /**\n     * Initializes the M.Path\n     * @param {HTMLElement} markup - The markup representation of the feature\n     * @param {Object} options - The options of the feature\n     */\n    initialize: function (markup, options) {\n      this.type = markup.tagName.toUpperCase();\n\n      if (this.type === 'MAP-POINT' || this.type === 'MAP-MULTIPOINT')\n        options.fillOpacity = 1;\n\n      if (options.wrappers.length > 0)\n        options = Object.assign(this._convertWrappers(options.wrappers), options);\n      L.setOptions(this, options);\n\n      this.group = this.options.group;\n      this.options.interactive =\n        this.options.link ||\n        (this.options.properties && this.options.onEachFeature);\n\n      this._parts = [];\n      this._markup = markup;\n      this.options.zoom = markup.zoom ?? this.options.nativeZoom;\n\n      this._convertMarkup();\n\n      if (markup.querySelector('map-span') || markup.querySelector('map-a')) {\n        this._generateOutlinePoints();\n      }\n\n      this.isClosed = this._isClosed();\n    },\n\n    /**\n     * Attaches link handler to the sub parts' paths\n     * @param {SVGElement} elem - The element to add listeners to, either path or g elements\n     * @param {Object} link - The link object that contains the url, type and target data\n     * @param leafletLayer\n     */\n    attachLinkHandler: function (elem, link, leafletLayer) {\n      let dragStart,\n        container = document.createElement('div'),\n        p = document.createElement('p');\n      container.classList.add('mapml-link-preview');\n      container.appendChild(p);\n      elem.classList.add('map-a');\n      if (link.visited) elem.classList.add('map-a-visited');\n      elem.mousedown = (e) => (dragStart = { x: e.clientX, y: e.clientY });\n      L.DomEvent.on(elem, 'mousedown', elem.mousedown, this);\n      elem.mouseup = (e) => {\n        if (e.button !== 0) return; // don't trigger when button isn't left click\n        let onTop = true,\n          nextLayer = this.options._leafletLayer._layerEl.nextElementSibling;\n        while (nextLayer && onTop) {\n          if (nextLayer.tagName && nextLayer.tagName.toUpperCase() === 'LAYER-')\n            onTop = !nextLayer.queryable();\n          nextLayer = nextLayer.nextElementSibling;\n        }\n        if (onTop && dragStart) {\n          //M._handleLink gets called twice, once in the target phase on the path\n          //element, then in the bubble phase on the g element\n          //Using stopPropagation leaves the mouse in the mousedown state\n          if (e.eventPhase === Event.BUBBLING_PHASE) return;\n          let dist = Math.sqrt(\n            Math.pow(dragStart.x - e.clientX, 2) +\n              Math.pow(dragStart.y - e.clientY, 2)\n          );\n          if (dist <= 5) {\n            link.visited = true;\n            elem.setAttribute('stroke', '#6c00a2');\n            elem.classList.add('map-a-visited');\n            M._handleLink(link, leafletLayer);\n          }\n        }\n      };\n      L.DomEvent.on(elem, 'mouseup', elem.mouseup, this);\n      L.DomEvent.on(\n        elem,\n        'keypress',\n        (e) => {\n          L.DomEvent.stop(e);\n          if (e.keyCode === 13 || e.keyCode === 32) {\n            link.visited = true;\n            elem.setAttribute('stroke', '#6c00a2');\n            elem.classList.add('map-a-visited');\n            M._handleLink(link, leafletLayer);\n          }\n        },\n        this\n      );\n      L.DomEvent.on(\n        elem,\n        'mouseenter keyup',\n        (e) => {\n          if (e.target !== e.currentTarget) return;\n          let resolver = document.createElement('a');\n          resolver.href = link.url;\n          p.innerHTML = resolver.href;\n\n          this._map.getContainer().appendChild(container);\n\n          //        setTimeout(() => {\n          //          if (hovered) p.innerHTML = resolver.href;\n          //        }, 1000);\n        },\n        this\n      );\n      L.DomEvent.on(\n        elem,\n        'mouseout keydown mousedown',\n        (e) => {\n          if (e.target !== e.currentTarget || !container.parentElement) return;\n          this._map.getContainer().removeChild(container);\n        },\n        this\n      );\n      leafletLayer.on('add', addMouseHandler, leafletLayer);\n      function handleMouse(e) {\n        //adds a lot of event handlers\n        if (!container.parentElement) return;\n        this._map.getContainer().removeChild(container);\n      }\n      function addMouseHandler() {\n        L.DomEvent.on(\n          this._map.getContainer(),\n          'mouseout mouseenter click',\n          handleMouse,\n          this\n        );\n      }\n      leafletLayer.on('remove', removeMouseHandler, leafletLayer);\n      function removeMouseHandler() {\n        L.DomEvent.off(this._map.getContainer(), {\n          mouseout: handleMouse,\n          mouseenter: handleMouse,\n          click: handleMouse\n        });\n      }\n    },\n\n    /**\n     * Updates internal structure of the feature to the new map state, the structure can be found in this._parts\n     * @param {L.Map} addedMap - The map that the feature is part of, can be left blank in the case of static features\n     * @param {L.Point} tileOrigin - The tile origin for the feature, if blank then it takes the maps pixel origin in the function\n     * @param {int} zoomingTo - The zoom the map is animating to, if left blank then it takes the map zoom, its provided because in templated tiles zoom is delayed\n     * @private\n     */\n    _project: function (addedMap, tileOrigin = undefined, zoomingTo = undefined) {\n      let map = addedMap || this._map,\n        origin = tileOrigin || map.getPixelOrigin(),\n        zoom = zoomingTo === undefined ? map.getZoom() : zoomingTo;\n      for (let p of this._parts) {\n        p.pixelRings = this._convertRing(p.rings, map, origin, zoom);\n        for (let subP of p.subrings) {\n          subP.pixelSubrings = this._convertRing([subP], map, origin, zoom);\n        }\n      }\n      if (!this._outline) return;\n      this.pixelOutline = [];\n      for (let o of this._outline) {\n        this.pixelOutline = this.pixelOutline.concat(\n          this._convertRing(o, map, origin, zoom)\n        );\n      }\n    },\n\n    /**\n     * Converts the PCRS points to pixel points that can be used to create the SVG\n     * @param {L.Point[][]} r - Is the rings of a feature, either the mainParts, subParts or outline\n     * @param {L.Map} map - The map that the feature is part of\n     * @param {L.Point} origin - The origin used to calculate the pixel points\n     * @param {int} zoom - The current zoom level of the map\n     * @returns {L.Point[][]}\n     * @private\n     */\n    _convertRing: function (r, map, origin, zoom) {\n      // TODO: Implement Ramer-Douglas-Peucer Algo for simplifying points\n      let scale = map.options.crs.scale(zoom),\n        parts = [];\n      for (let sub of r) {\n        let interm = [];\n        for (let p of sub.points) {\n          let conv = map.options.crs.transformation.transform(p, scale);\n          interm.push(L.point(conv.x, conv.y)._subtract(origin).round());\n        }\n        parts.push(interm);\n      }\n      return parts;\n    },\n\n    /**\n     * Updates the features\n     * @private\n     */\n    _update: function () {\n      if (!this._map) return;\n      this._renderer._updateFeature(this);\n    },\n\n    /**\n     * Converts the map-spans, a and divs around a geometry subtype into options for the feature\n     * @param {HTMLElement[]} elems - The current zoom level of the map\n     * @private\n     */\n    _convertWrappers: function (elems) {\n      if (!elems || elems.length === 0) return;\n      let classList = '',\n        output = {};\n      for (let elem of elems) {\n        if (elem.tagName.toUpperCase() !== 'MAP-A' && elem.className) {\n          classList += `${elem.className} `;\n        } else if (!output.link && elem.getAttribute('href')) {\n          let link = {};\n          link.url = elem.getAttribute('href');\n          if (elem.hasAttribute('target'))\n            link.target = elem.getAttribute('target');\n          if (elem.hasAttribute('type')) link.type = elem.getAttribute('type');\n          if (elem.hasAttribute('inplace')) link.inPlace = true;\n          output.link = link;\n        }\n      }\n      output.className = `${classList} ${this.options.className}`.trim();\n      return output;\n    },\n\n    /**\n     * Converts this._markup to the internal structure of features\n     * @private\n     */\n    _convertMarkup: function () {\n      if (!this._markup) return;\n\n      let attr = this._markup.attributes;\n      this.featureAttributes = {};\n      if (\n        this.options.link &&\n        this._markup.parentElement.tagName.toUpperCase() === 'MAP-A' &&\n        this._markup.parentElement.parentElement.tagName.toUpperCase() !==\n          'MAP-GEOMETRY'\n      )\n        this.featureAttributes.tabindex = '0';\n      for (let i = 0; i < attr.length; i++) {\n        this.featureAttributes[attr[i].name] = attr[i].value;\n      }\n\n      let first = true;\n      for (let c of this._markup.querySelectorAll('map-coordinates')) {\n        //loops through the coordinates of the child\n        let ring = [],\n          subRings = [];\n        this._coordinateToArrays(c, ring, subRings, this.options.className); //creates an array of pcrs points for the main ring and the subparts\n        if (!first && this.type === 'MAP-POLYGON') {\n          this._parts[0].rings.push(ring[0]);\n          if (subRings.length > 0)\n            this._parts[0].subrings = this._parts[0].subrings.concat(subRings);\n        } else if (this.type === 'MAP-MULTIPOINT') {\n          for (let point of ring[0].points.concat(subRings)) {\n            this._parts.push({\n              rings: [{ points: [point] }],\n              subrings: [],\n              cls: `${point.cls || ''} ${this.options.className || ''}`.trim()\n            });\n          }\n        } else {\n          this._parts.push({\n            rings: ring,\n            subrings: subRings,\n            cls: `${this.featureAttributes.class || ''} ${\n            this.options.className || ''\n          }`.trim()\n          });\n        }\n        first = false;\n      }\n    },\n\n    /**\n     * Generates the feature outline, subtracting the map-spans to generate those separately\n     * @private\n     */\n    _generateOutlinePoints: function () {\n      if (\n        this.type === 'MAP-MULTIPOINT' ||\n        this.type === 'MAP-POINT' ||\n        this.type === 'MAP-LINESTRING' ||\n        this.type === 'MAP-MULTILINESTRING'\n      )\n        return;\n\n      this._outline = [];\n      for (let coords of this._markup.querySelectorAll('map-coordinates')) {\n        let nodes = coords.childNodes,\n          cur = 0,\n          tempDiv = document.createElement('div');\n          nodes.length;\n        for (let i = 0; i < nodes.length; i++) {\n          if (nodes[i].textContent.trim().length === 0) {\n            nodes[i].remove();\n          }\n        }\n        for (let n of nodes) {\n          let line = [];\n          if (!n.tagName) {\n            //no tagName means it's text content\n            let c = '',\n              ind = (((cur - 1) % nodes.length) + nodes.length) % nodes.length; // this equation turns Javascript's % to how it behaves in C for example\n            if (nodes[ind].tagName) {\n              let prev = nodes[ind].textContent.trim().split(/\\s+/);\n              c += `${prev[prev.length - 2]} ${prev[prev.length - 1]} `;\n            }\n            c += n.textContent;\n            ind = (((cur + 1) % nodes.length) + nodes.length) % nodes.length; // this is equivalent to C/C++'s (cur + 1) % nodes.length\n            if (nodes[ind].tagName) {\n              let next = nodes[ind].textContent.trim().split(/\\s+/);\n              c += ` ${next[0]} ${next[1]} `;\n            }\n            tempDiv.innerHTML = c;\n            this._coordinateToArrays(\n              tempDiv,\n              line,\n              [],\n              true,\n              this.featureAttributes.class || this.options.className\n            );\n            this._outline.push(line);\n          }\n          cur++;\n        }\n      }\n    },\n\n    /**\n     * Converts map-coordinates element to an object representing the parts and subParts\n     * @param {HTMLElement} coords - A single map-coordinates element\n     * @param {Object[]} main - An empty array representing the main parts\n     * @param {Object[]} subParts - An empty array representing the sub parts\n     * @param {boolean} isFirst - A true | false representing if the current HTML element is the parent map-coordinates element or not\n     * @param {string} cls - The class of the coordinate/span\n     * @param parents\n     * @private\n     */\n    _coordinateToArrays: function (\n      coords,\n      main,\n      subParts,\n      isFirst = true,\n      cls = undefined,\n      parents = []\n    ) {\n      for (let span of coords.children) {\n        this._coordinateToArrays(\n          span,\n          main,\n          subParts,\n          false,\n          span.getAttribute('class'),\n          parents.concat([span])\n        );\n      }\n      let noSpan = coords.textContent.replace(/(<([^>]+)>)/gi, ''),\n        pairs = noSpan.trim().match(/(\\S+\\s+\\S+)/gim),\n        local = [],\n        bounds;\n      for (let p of pairs) {\n        let numPair = [];\n        p.split(/\\s+/gim).forEach(M._parseNumber, numPair);\n        let point = M.pointToPCRSPoint(\n          L.point(numPair),\n          this.options.zoom,\n          this.options.projection,\n          this.options.nativeCS\n        );\n        local.push(point);\n        bounds = bounds ? bounds.extend(point) : L.bounds(point, point);\n      }\n      if (this._bounds) {\n        this._bounds.extend(bounds.min);\n        this._bounds.extend(bounds.max);\n      } else {\n        this._bounds = bounds;\n      }\n      if (isFirst) {\n        main.push({ points: local });\n      } else {\n        let attrMap = {},\n          attr = coords.attributes,\n          wrapperAttr = this._convertWrappers(parents);\n        if (wrapperAttr.link) attrMap.tabindex = '0';\n        for (let i = 0; i < attr.length; i++) {\n          if (attr[i].name === 'class') continue;\n          attrMap[attr[i].name] = attr[i].value;\n        }\n        subParts.unshift({\n          points: local,\n          center: bounds.getCenter(),\n          cls: `${cls || ''} ${wrapperAttr.className || ''}`.trim(),\n          attr: attrMap,\n          link: wrapperAttr.link,\n          linkTarget: wrapperAttr.linkTarget,\n          linkType: wrapperAttr.linkType\n        });\n      }\n    },\n\n    /**\n     * Returns if the feature is closed or open, useful when styling\n     * @returns {boolean}\n     * @private\n     */\n    _isClosed: function () {\n      switch (this.type) {\n        case 'MAP-POLYGON':\n        case 'MAP-MULTIPOLYGON':\n        case 'MAP-POINT':\n        case 'MAP-MULTIPOINT':\n          return true;\n        case 'MAP-LINESTRING':\n        case 'MAP-MULTILINESTRING':\n          return false;\n        default:\n          return false;\n      }\n    },\n\n    /**\n     * Returns the center of the entire feature\n     * @returns {L.Point}\n     */\n    getCenter: function () {\n      if (!this._bounds) return null;\n      return this._map.options.crs.unproject(this._bounds.getCenter());\n    },\n\n    getPCRSCenter: function () {\n      return this._bounds.getCenter();\n    }\n  });\n\n  /**\n   *\n   * @param {HTMLElement} markup - The markup of the feature\n   * @param {Object} options - Options of the feature\n   * @returns {M.Path}\n   */\n  var path = function (markup, options) {\n    return new Path(markup, options);\n  };\n\n  /**\n   * Returns a new Feature Renderer\n   * @param {Object} options - Options for the renderer\n   * @returns {*}\n   */\n  var FeatureRenderer = L.SVG.extend({\n    /**\n     * Override method of same name from L.SVG, use the this._container property\n     * to set up the role=\"none presentation\" on featureGroupu container,\n     * per this recommendation:\n     * https://github.com/Maps4HTML/MapML.js/pull/471#issuecomment-845192246\n     * @private overrides ancestor method so that we have a _container to work with\n     */\n    _initContainer: function () {\n      // call the method we're overriding, per https://leafletjs.com/examples/extending/extending-1-classes.html#methods-of-the-parent-class\n      // note you have to pass 'this' as the first arg\n      L.SVG.prototype._initContainer.call(this);\n      // knowing that the previous method call creates the this._container, we\n      // access it and set the role=\"none presetation\" which suppresses the\n      // announcement of \"Graphic\" on each feature focus.\n      this._container.setAttribute('role', 'none presentation');\n    },\n\n    /**\n     * Creates all the appropriate path elements for a M.Path\n     * @param {M.Path} layer - The M.Path that needs paths generated\n     * @param {boolean} stampLayer - Whether or not a layer should be stamped and stored in the renderer layers\n     * @private\n     */\n    _initPath: function (layer, stampLayer = true) {\n      if (layer._outline) {\n        let outlinePath = L.SVG.create('path');\n        if (layer.options.className)\n          L.DomUtil.addClass(\n            outlinePath,\n            layer.featureAttributes.class || layer.options.className\n          );\n        L.DomUtil.addClass(outlinePath, 'mapml-feature-outline');\n        outlinePath.style.fill = 'none';\n        layer.outlinePath = outlinePath;\n      }\n\n      //creates the main parts and sub parts paths\n      for (let p of layer._parts) {\n        if (p.rings) {\n          this._createPath(\n            p,\n            layer.options.className,\n            layer.featureAttributes['aria-label'],\n            layer.options.interactive,\n            layer.featureAttributes\n          );\n          if (layer.outlinePath) p.path.style.stroke = 'none';\n        }\n        if (p.subrings) {\n          for (let r of p.subrings) {\n            this._createPath(\n              r,\n              layer.options.className,\n              r.attr['aria-label'],\n              r.link !== undefined,\n              r.attr\n            );\n          }\n        }\n        this._updateStyle(layer);\n      }\n      if (stampLayer) {\n        let stamp = L.stamp(layer);\n        this._layers[stamp] = layer;\n      }\n    },\n\n    /**\n     * Creates paths for either mainParts, subParts or outline of a feature\n     * @param {Object} ring - The ring the current path is being generated for\n     * @param {string} title - The accessible aria-label of a path\n     * @param {string} cls - The class of the path\n     * @param {boolean} interactive - The boolean representing whether a feature is interactive or not\n     * @param {Object} attr - Attributes map\n     * @private\n     */\n    _createPath: function (\n      ring,\n      cls,\n      title,\n      interactive = false,\n      attr = undefined\n    ) {\n      let p = L.SVG.create('path');\n      ring.path = p;\n      if (!attr) {\n        if (title) p.setAttribute('aria-label', title);\n      } else {\n        for (let [name, value] of Object.entries(attr)) {\n          if (name === 'id' || name === 'tabindex') continue;\n          p.setAttribute(name, value);\n        }\n      }\n      if (ring.cls || cls) {\n        L.DomUtil.addClass(p, ring.cls || cls);\n      }\n      if (interactive) {\n        L.DomUtil.addClass(p, 'leaflet-interactive');\n      }\n    },\n\n    /**\n     * Adds all the paths needed for a feature\n     * @param {M.Path} layer - The feature that needs it's paths added\n     * @param {HTMLElement} container - The location the paths need to be added to\n     * @param {boolean} interactive - Whether a feature is interactive or not\n     * @private\n     */\n    _addPath: function (layer, container = undefined, interactive = true) {\n      if (!this._rootGroup && !container) {\n        this._initContainer();\n      }\n      let c = container || this._rootGroup,\n        outlineAdded = false;\n      if (interactive) {\n        layer.addInteractiveTarget(layer.group);\n      }\n      for (let p of layer._parts) {\n        if (p.path) layer.group.appendChild(p.path);\n        if (interactive) {\n          if (layer.options.link)\n            layer.attachLinkHandler(\n              p.path,\n              layer.options.link,\n              layer.options._leafletLayer\n            );\n          layer.addInteractiveTarget(p.path);\n        }\n\n        if (!outlineAdded && layer.pixelOutline) {\n          layer.group.appendChild(layer.outlinePath);\n          outlineAdded = true;\n        }\n\n        for (let subP of p.subrings) {\n          if (subP.path) {\n            if (subP.link) {\n              layer.attachLinkHandler(\n                subP.path,\n                subP.link,\n                layer.options._leafletLayer\n              );\n              layer.addInteractiveTarget(subP.path);\n            }\n            layer.group.appendChild(subP.path);\n          }\n        }\n      }\n      c.appendChild(layer.group);\n    },\n\n    /**\n     * Removes all the paths related to a feature\n     * @param {M.Path} layer - The feature who's paths need to be removed\n     * @private\n     */\n    _removePath: function (layer) {\n      for (let p of layer._parts) {\n        if (p.path) {\n          layer.removeInteractiveTarget(p.path);\n          L.DomUtil.remove(p.path);\n        }\n        for (let subP of p.subrings) {\n          if (subP.path) L.DomUtil.remove(subP.path);\n        }\n      }\n      if (layer.outlinePath) L.DomUtil.remove(layer.outlinePath);\n      layer.removeInteractiveTarget(layer.group);\n      L.DomUtil.remove(layer.group);\n      delete this._layers[L.stamp(layer)];\n    },\n\n    /**\n     * Updates the d attribute of all paths of a feature\n     * @param {M.Path} layer - The Feature that needs updating\n     * @private\n     */\n    _updateFeature: function (layer) {\n      if (layer.pixelOutline)\n        this._setPath(\n          layer.outlinePath,\n          this.geometryToPath(layer.pixelOutline, false)\n        );\n      for (let p of layer._parts) {\n        this._setPath(p.path, this.geometryToPath(p.pixelRings, layer.isClosed));\n        for (let subP of p.subrings) {\n          this._setPath(\n            subP.path,\n            this.geometryToPath(subP.pixelSubrings, false)\n          );\n        }\n      }\n    },\n\n    /**\n     * Generates the marker d attribute for a given point\n     * @param {L.Point} p - The point of the marker\n     * @returns {string}\n     * @private\n     */\n    _pointToMarker: function (p) {\n      return `M${p.x} ${p.y} L${p.x - 12.5} ${p.y - 30} C${p.x - 12.5} ${\n      p.y - 50\n    }, ${p.x + 12.5} ${p.y - 50}, ${p.x + 12.5} ${p.y - 30} L${p.x} ${p.y}z`;\n    },\n\n    /**\n     * Updates the styles of all paths of a feature\n     * @param {M.Path} layer - The feature that needs styles updated\n     * @private\n     */\n    _updateStyle: function (layer) {\n      this._updatePathStyle(layer.outlinePath, layer, false, true);\n      for (let p of layer._parts) {\n        if (p.path) {\n          this._updatePathStyle(p.path, layer, true);\n        }\n        for (let subP of p.subrings) {\n          if (subP.path) this._updatePathStyle(subP.path, layer);\n        }\n      }\n    },\n\n    /**\n     * Updates the style of a single path\n     * @param {HTMLElement} path - The path that needs updating\n     * @param {M.Path} layer - The feature layer\n     * @param {boolean} isMain - Whether it's the main parts or not\n     * @param {boolean} isOutline - Whether a path is an outline or not\n     * @private\n     */\n    _updatePathStyle: function (path, layer, isMain = false, isOutline = false) {\n      if (!path || !layer) {\n        return;\n      }\n      let options = layer.options,\n        isClosed = layer.isClosed;\n      if (\n        (options.stroke && (!isClosed || isOutline)) ||\n        (isMain && !layer.outlinePath)\n      ) {\n        path.setAttribute('stroke', options.color);\n        path.setAttribute('stroke-opacity', options.opacity);\n        path.setAttribute('stroke-width', options.weight);\n        path.setAttribute('stroke-linecap', options.lineCap);\n        path.setAttribute('stroke-linejoin', options.lineJoin);\n\n        if (options.dashArray) {\n          path.setAttribute('stroke-dasharray', options.dashArray);\n        } else {\n          path.removeAttribute('stroke-dasharray');\n        }\n\n        if (options.dashOffset) {\n          path.setAttribute('stroke-dashoffset', options.dashOffset);\n        } else {\n          path.removeAttribute('stroke-dashoffset');\n        }\n\n        if (options.link) {\n          path.setAttribute(\n            'stroke',\n            options.link.visited ? '#6c00a2' : '#0000EE'\n          );\n          path.setAttribute('stroke-opacity', '1');\n          path.setAttribute('stroke-width', '1px');\n          path.setAttribute('stroke-dasharray', 'none');\n        }\n      } else {\n        path.setAttribute('stroke', 'none');\n      }\n\n      if (isClosed && !isOutline) {\n        if (!options.fill) {\n          path.setAttribute('fill', options.fillColor || options.color);\n          path.setAttribute('fill-opacity', options.fillOpacity);\n          path.setAttribute('fill-rule', options.fillRule || 'evenodd');\n        } else {\n          path.setAttribute('fill', options.color);\n        }\n      } else {\n        path.setAttribute('fill', 'none');\n      }\n    },\n\n    /**\n     * Sets the d attribute of a path\n     * @param {HTMLElement} path - The path that is being updated\n     * @param {string} def - The new d attribute of the path\n     * @private\n     */\n    _setPath: function (path, def) {\n      path.setAttribute('d', def);\n    },\n\n    /**\n     * Generates the d string of a feature part\n     * @param {L.Point[]} rings - The points making up a given part of a feature\n     * @param {boolean} closed - Whether a feature is closed or not\n     * @returns {string}\n     */\n    geometryToPath: function (rings, closed) {\n      let str = '',\n        i,\n        j,\n        len,\n        len2,\n        points,\n        p;\n\n      for (i = 0, len = rings.length; i < len; i++) {\n        points = rings[i];\n        if (points.length === 1) {\n          return this._pointToMarker(points[0]);\n        }\n        for (j = 0, len2 = points.length; j < len2; j++) {\n          p = points[j];\n          str += (j ? 'L' : 'M') + p.x + ' ' + p.y;\n        }\n        str += closed ? 'z' : '';\n      }\n      return str || 'M0 0';\n    }\n  });\n\n  /**\n   * Returns new M.FeatureRenderer\n   * @param {Object} options - Options for the renderer\n   * @returns {M.FeatureRenderer}\n   */\n  var featureRenderer = function (options) {\n    return new FeatureRenderer(options);\n  };\n\n  var Geometry = L.FeatureGroup.extend({\n    /**\n     * Initialize the feature group\n     * @param {M.Path[]} layers\n     * @param {Object} options\n     */\n    initialize: function (layers, options) {\n      if (options.wrappers && options.wrappers.length > 0)\n        options = Object.assign(\n          M.Path.prototype._convertWrappers(options.wrappers),\n          options\n        );\n\n      L.LayerGroup.prototype.initialize.call(this, layers, options);\n      this._featureEl = this.options.mapmlFeature;\n\n      this.layerBounds = options.layerBounds;\n      this.zoomBounds = options.zoomBounds;\n\n      let firstLayer = layers[Object.keys(layers)[0]];\n      if (layers.length === 1 && firstLayer.options.link)\n        this.options.link = firstLayer.options.link;\n      if (\n        (this.options.onEachFeature && this.options.properties) ||\n        this.options.link\n      ) {\n        L.DomUtil.addClass(this.options.group, 'leaflet-interactive');\n        if (this.options.link) {\n          M.Path.prototype.attachLinkHandler.call(\n            this,\n            this.options.group,\n            this.options.link,\n            this.options._leafletLayer\n          );\n          this.options.group.setAttribute('role', 'link');\n        } else {\n          this.options.group.setAttribute('aria-expanded', 'false');\n          this.options.group.setAttribute('role', 'button');\n          this.options.onEachFeature(this.options.properties, this);\n          this.off('click', this._openPopup);\n        }\n      }\n\n      L.DomEvent.on(this.options.group, 'keyup keydown', this._handleFocus, this);\n      this.options.group.setAttribute('aria-label', this.options.accessibleTitle);\n      if (this.options.featureID)\n        this.options.group.setAttribute('data-fid', this.options.featureID);\n      for (let feature of layers) {\n        feature._groupLayer = this;\n      }\n    },\n\n    onAdd: function (map) {\n      L.LayerGroup.prototype.onAdd.call(this, map);\n      this.updateInteraction();\n    },\n\n    updateInteraction: function () {\n      let map = this._map || this.options._leafletLayer._map;\n      if (this.options.onEachFeature || this.options.link)\n        map.featureIndex.addToIndex(\n          this,\n          this.getPCRSCenter(),\n          this.options.group\n        );\n\n      for (let layerID in this._layers) {\n        let layer = this._layers[layerID];\n        for (let part of layer._parts) {\n          if (layer.featureAttributes && layer.featureAttributes.tabindex)\n            map.featureIndex.addToIndex(layer, layer.getPCRSCenter(), part.path);\n          for (let subPart of part.subrings) {\n            if (subPart.attr && subPart.attr.tabindex)\n              map.featureIndex.addToIndex(layer, subPart.center, subPart.path);\n          }\n        }\n      }\n    },\n\n    /**\n     * Check whether the feature group should be rendered at current map zoom level\n     * @param {Number} zoom - current map zoom\n     * @param {Object} vectorMinZoom - the minimum zoom bound of vector layer\n     * @param {Object} vectorMaxZoom - the maximum zoom bound of vector layer\n     * @returns {Boolean}\n     * @private\n     */\n    _checkRender: function (zoom, vectorMinZoom, vectorMaxZoom) {\n      let minZoom = this._featureEl.min,\n        maxZoom = this._featureEl.max;\n      // if the current map zoom falls below/above the zoom bounds of the vector layer\n      if (zoom > vectorMaxZoom || zoom < vectorMinZoom) return false;\n      // if the current map zoom falls below/above the [min, max] range\n      if (\n        (minZoom !== null && zoom < +minZoom) ||\n        (maxZoom !== null && zoom > +maxZoom)\n      ) {\n        return false;\n      }\n      return true;\n    },\n\n    /**\n     * Handler for focus events\n     * @param {L.DOMEvent} e - Event that occurred\n     * @private\n     */\n    _handleFocus: function (e) {\n      // tab, shift, cr, esc, up, left, down, right,\n      if (\n        [9, 16, 27, 37, 38, 39, 40].includes(e.keyCode) &&\n        e.type === 'keydown'\n      ) {\n        let index = this._map.featureIndex.currentIndex;\n        // Down/right arrow keys replicate tabbing through the feature index\n        // Up/left arrow keys replicate shift-tabbing through the feature index\n        if (e.keyCode === 37 || e.keyCode === 38) {\n          L.DomEvent.stop(e);\n          this._map.featureIndex.inBoundFeatures[index].path.setAttribute(\n            'tabindex',\n            -1\n          );\n          if (index === 0) {\n            this._map.featureIndex.inBoundFeatures[\n              this._map.featureIndex.inBoundFeatures.length - 1\n            ].path.focus();\n            this._map.featureIndex.currentIndex =\n              this._map.featureIndex.inBoundFeatures.length - 1;\n          } else {\n            this._map.featureIndex.inBoundFeatures[index - 1].path.focus();\n            this._map.featureIndex.currentIndex--;\n          }\n        } else if (e.keyCode === 39 || e.keyCode === 40) {\n          L.DomEvent.stop(e);\n          this._map.featureIndex.inBoundFeatures[index].path.setAttribute(\n            'tabindex',\n            -1\n          );\n          if (index === this._map.featureIndex.inBoundFeatures.length - 1) {\n            this._map.featureIndex.inBoundFeatures[0].path.focus();\n            this._map.featureIndex.currentIndex = 0;\n          } else {\n            this._map.featureIndex.inBoundFeatures[index + 1].path.focus();\n            this._map.featureIndex.currentIndex++;\n          }\n        } else if (e.keyCode === 27) {\n          let shadowRoot = this._map.options.mapEl.shadowRoot\n            ? this._map.options.mapEl.shadowRoot\n            : this._map.options.mapEl.querySelector('.mapml-web-map').shadowRoot;\n          if (shadowRoot.activeElement.nodeName !== 'g') return;\n          this._map._container.focus();\n        } else if (e.keyCode === 9) {\n          let obj = this;\n          setTimeout(function () {\n            obj._map.featureIndex.inBoundFeatures[0].path.setAttribute(\n              'tabindex',\n              0\n            );\n          }, 0);\n        }\n        // tab, shift, cr, esc, right, left, up, down,\n        // 1, 2, 3, 4, 5, 6, 7 (featureIndexOverlay available index items\n        // [8, 9] being allocated to next, previous menu items).\n      } else if (\n        ![9, 16, 13, 27, 37, 38, 39, 40, 49, 50, 51, 52, 53, 54, 55].includes(\n          e.keyCode\n        )\n      ) {\n        this._map.featureIndex.currentIndex = 0;\n        this._map.featureIndex.inBoundFeatures[0].path.focus();\n      }\n\n      // 27 added so that the tooltip opens when dismissing popup with 'esc' key\n      if (e.target.tagName.toUpperCase() !== 'G') return;\n      if (\n        [9, 13, 16, 37, 38, 39, 40, 49, 50, 51, 52, 53, 54, 55, 27].includes(\n          e.keyCode\n        ) &&\n        e.type === 'keyup'\n      ) {\n        this.openTooltip();\n      } else if (e.keyCode === 13 || e.keyCode === 32) {\n        this.closeTooltip();\n        if (!this.options.link && this.options.onEachFeature) {\n          L.DomEvent.stop(e);\n          this.openPopup();\n        }\n      } else {\n        this.closeTooltip();\n      }\n    },\n\n    /**\n     * Add a M.Path to the M.Geometry\n     * @param layer\n     */\n    addLayer: function (layer) {\n      if (!layer.options.link && layer.options.interactive) {\n        this.options.onEachFeature(this.options.properties, layer);\n      }\n      L.FeatureGroup.prototype.addLayer.call(this, layer);\n    },\n\n    /**\n     * Focuses the previous function in the sequence on previous button press\n     * @param e\n     * @private\n     */\n    _previousFeature: function (e) {\n      L.DomEvent.stop(e);\n      this._map.featureIndex.currentIndex = Math.max(\n        this._map.featureIndex.currentIndex - 1,\n        0\n      );\n      let prevFocus =\n        this._map.featureIndex.inBoundFeatures[\n          this._map.featureIndex.currentIndex\n        ];\n      prevFocus.path.focus();\n      this._map.closePopup();\n    },\n\n    /**\n     * Focuses next feature in sequence\n     * @param e\n     * @private\n     */\n    _nextFeature: function (e) {\n      L.DomEvent.stop(e);\n      this._map.featureIndex.currentIndex = Math.min(\n        this._map.featureIndex.currentIndex + 1,\n        this._map.featureIndex.inBoundFeatures.length - 1\n      );\n      let nextFocus =\n        this._map.featureIndex.inBoundFeatures[\n          this._map.featureIndex.currentIndex\n        ];\n      nextFocus.path.focus();\n      this._map.closePopup();\n    },\n\n    getPCRSCenter: function () {\n      let bounds;\n      for (let l in this._layers) {\n        let layer = this._layers[l];\n        if (!bounds) {\n          bounds = L.bounds(layer.getPCRSCenter(), layer.getPCRSCenter());\n        } else {\n          bounds.extend(layer.getPCRSCenter());\n        }\n      }\n      return bounds.getCenter();\n    }\n  });\n\n  /**\n   * Returns new M.Geometry\n   * @param {M.Path[]} layers - Layers belonging to feature group\n   * @param {Object} options - Options for the feature group\n   * @returns {M.Geometry}\n   */\n  var geometry = function (layers, options) {\n    return new Geometry(layers, options);\n  };\n\n  var AnnounceMovement = L.Handler.extend({\n    addHooks: function () {\n      this._map.on({\n        layeradd: this.totalBounds,\n        layerremove: this.totalBounds\n      });\n\n      this._map.options.mapEl.addEventListener(\n        'map-moveend',\n        this.announceBounds\n      );\n      this._map.dragging._draggable.addEventListener('dragstart', this.dragged);\n      this._map.options.mapEl.addEventListener(\n        'mapfocused',\n        this.focusAnnouncement\n      );\n    },\n    removeHooks: function () {\n      this._map.off({\n        layeradd: this.totalBounds,\n        layerremove: this.totalBounds\n      });\n\n      this._map.options.mapEl.removeEventListener(\n        'map-moveend',\n        this.announceBounds\n      );\n      this._map.dragging._draggable.removeEventListener(\n        'dragstart',\n        this.dragged\n      );\n      this._map.options.mapEl.removeEventListener(\n        'mapfocused',\n        this.focusAnnouncement\n      );\n    },\n\n    focusAnnouncement: function () {\n      let mapEl = this;\n      setTimeout(function () {\n        let el = mapEl.querySelector('.mapml-web-map')\n          ? mapEl\n              .querySelector('.mapml-web-map')\n              .shadowRoot.querySelector('.leaflet-container')\n          : mapEl.shadowRoot.querySelector('.leaflet-container');\n\n        let mapZoom = mapEl._map.getZoom();\n        let standard = M.options.locale.amZoom + ' ' + mapZoom;\n\n        if (mapZoom === mapEl._map.getMaxZoom()) {\n          standard = M.options.locale.amMaxZoom + ' ' + standard;\n        } else if (mapZoom === mapEl._map._layersMinZoom) {\n          standard = M.options.locale.amMinZoom + ' ' + standard;\n        }\n\n        el.setAttribute('aria-roledescription', 'region ' + standard);\n        setTimeout(function () {\n          el.removeAttribute('aria-roledescription');\n        }, 2000);\n      }, 0);\n    },\n\n    announceBounds: function () {\n      if (this._traversalCall > 0) {\n        return;\n      }\n      let mapZoom = this._map.getZoom();\n      let mapBounds = M.pixelToPCRSBounds(\n        this._map.getPixelBounds(),\n        mapZoom,\n        this._map.options.projection\n      );\n\n      let visible = true;\n      if (this._map.totalLayerBounds) {\n        visible =\n          mapZoom <= this._map.getMaxZoom() &&\n          mapZoom >= this._map.getMinZoom() &&\n          this._map.totalLayerBounds.overlaps(mapBounds);\n      }\n\n      let output = this.querySelector('.mapml-web-map')\n        ? this.querySelector('.mapml-web-map').shadowRoot.querySelector(\n            '.mapml-screen-reader-output'\n          )\n        : this.shadowRoot.querySelector('.mapml-screen-reader-output');\n\n      let standard = M.options.locale.amZoom + ' ' + mapZoom;\n\n      if (!visible) {\n        let outOfBoundsPos = this._history[this._historyIndex];\n        let inBoundsPos = this._history[this._historyIndex - 1];\n        this.back();\n        this._history.pop();\n\n        if (outOfBoundsPos.zoom !== inBoundsPos.zoom) {\n          output.innerText = M.options.locale.amZoomedOut;\n        } else if (this._map.dragging._draggable.wasDragged) {\n          output.innerText = M.options.locale.amDraggedOut;\n        } else if (outOfBoundsPos.x > inBoundsPos.x) {\n          output.innerText = M.options.locale.amEastBound;\n        } else if (outOfBoundsPos.x < inBoundsPos.x) {\n          output.innerText = M.options.locale.amWestBound;\n        } else if (outOfBoundsPos.y < inBoundsPos.y) {\n          output.innerText = M.options.locale.amNorthBound;\n        } else if (outOfBoundsPos.y > inBoundsPos.y) {\n          output.innerText = M.options.locale.amSouthBound;\n        }\n      } else {\n        let prevZoom = this._history[this._historyIndex - 1]\n          ? this._history[this._historyIndex - 1].zoom\n          : this._history[this._historyIndex].zoom;\n        if (mapZoom === this._map.getMaxZoom() && mapZoom !== prevZoom) {\n          output.innerText = M.options.locale.amMaxZoom + ' ' + standard;\n        } else if (mapZoom === this._map._layersMinZoom && mapZoom !== prevZoom) {\n          output.innerText = M.options.locale.amMinZoom + ' ' + standard;\n        } else {\n          output.innerText = standard;\n        }\n      }\n      this._map.dragging._draggable.wasDragged = false;\n    },\n\n    totalBounds: function (e) {\n      // don't bother with non-MapMLLayer layers...\n      if (!e.layer._layerEl) return;\n      let map = this.options.mapEl;\n      map.whenLayersReady().then(() => {\n        let layers = map.querySelectorAll('layer-');\n        let bounds;\n        for (let i = 0; i < layers.length; i++) {\n          // the _layer may no longer exist if this is invoked by layerremove\n          if (layers[i]._layer) {\n            let extent = layers[i].extent;\n            if (bounds && extent) {\n              bounds.extend(M.extentToBounds(extent, 'pcrs'));\n            } else if (extent) {\n              bounds = M.extentToBounds(extent, 'pcrs');\n            }\n          }\n        }\n\n        this.totalLayerBounds = bounds;\n      });\n    },\n\n    dragged: function () {\n      this.wasDragged = true;\n    }\n  });\n\n  var FeatureIndex = L.Handler.extend({\n    initialize: function (map) {\n      L.Handler.prototype.initialize.call(this, map);\n      this.inBoundFeatures = [];\n      this.outBoundFeatures = [];\n      this.currentIndex = 0;\n      this._mapPCRSBounds = M.pixelToPCRSBounds(\n        map.getPixelBounds(),\n        map.getZoom(),\n        map.options.projection\n      );\n    },\n\n    addHooks: function () {\n      this._map.on('mapkeyboardfocused', this._updateMapBounds, this);\n      this._map.on('mapkeyboardfocused', this._sortIndex, this);\n    },\n\n    removeHooks: function () {\n      this._map.off('mapkeyboardfocused', this._updateMapBounds);\n      this._map.off('mapkeyboardfocused', this._sortIndex);\n    },\n\n    /**\n     * Adds a svg element to the index of tabbable features, it also keeps track of the layer it's associated + center\n     * @param layer - the layer object the feature is associated with\n     * @param lc - the layer center\n     * @param path - the svg element that needs to be focused, can be a path or g\n     */\n    addToIndex: function (layer, lc, path) {\n      let mc = this._mapPCRSBounds.getCenter();\n      let dist = Math.sqrt(Math.pow(lc.x - mc.x, 2) + Math.pow(lc.y - mc.y, 2));\n      let index = this._mapPCRSBounds.contains(lc)\n        ? this.inBoundFeatures\n        : this.outBoundFeatures;\n\n      let elem = { path: path, layer: layer, center: lc, dist: dist };\n      path.setAttribute('tabindex', -1);\n\n      index.push(elem);\n\n      // TODO: this insertion loop has potential to be improved slightly\n      for (\n        let i = index.length - 1;\n        i > 0 && index[i].dist < index[i - 1].dist;\n        i--\n      ) {\n        let tmp = index[i];\n        index[i] = index[i - 1];\n        index[i - 1] = tmp;\n      }\n\n      if (this._mapPCRSBounds.contains(lc)) this.inBoundFeatures = index;\n      else this.outBoundFeatures = index;\n    },\n\n    /**\n     * Removes features that are no longer on the map, also moves features to the respective array depending\n     * on whether the feature is in the maps viewport or not\n     */\n    cleanIndex: function () {\n      this.currentIndex = 0;\n      this.inBoundFeatures = this.inBoundFeatures.filter((elem) => {\n        let inbound = this._mapPCRSBounds.contains(elem.center);\n        elem.path.setAttribute('tabindex', -1);\n        if (elem.layer._map && !inbound) {\n          this.outBoundFeatures.push(elem);\n        }\n        return elem.layer._map && inbound;\n      });\n      this.outBoundFeatures = this.outBoundFeatures.filter((elem) => {\n        let inbound = this._mapPCRSBounds.contains(elem.center);\n        elem.path.setAttribute('tabindex', -1);\n        if (elem.layer._map && inbound) {\n          this.inBoundFeatures.push(elem);\n        }\n        return elem.layer._map && !inbound;\n      });\n    },\n\n    /**\n     * Sorts the index of features in the map's viewport based on distance from center\n     * @private\n     */\n    _sortIndex: function () {\n      this.cleanIndex();\n      if (this.inBoundFeatures.length === 0) return;\n\n      let mc = this._mapPCRSBounds.getCenter();\n\n      this.inBoundFeatures.sort(function (a, b) {\n        let ac = a.center;\n        let bc = b.center;\n        a.dist = Math.sqrt(Math.pow(ac.x - mc.x, 2) + Math.pow(ac.y - mc.y, 2));\n        b.dist = Math.sqrt(Math.pow(bc.x - mc.x, 2) + Math.pow(bc.y - mc.y, 2));\n        return a.dist - b.dist;\n      });\n      this.inBoundFeatures[0].path.setAttribute('tabindex', 0);\n    },\n\n    /**\n     * Event handler for 'mapfocused' event to update the map's bounds in terms of PCRS\n     * @param e - the event object\n     * @private\n     */\n    _updateMapBounds: function (e) {\n      // TODO: map's PCRS bounds is used in other parts of the viewer, can be moved out to the map object directly\n      this._mapPCRSBounds = M.pixelToPCRSBounds(\n        this._map.getPixelBounds(),\n        this._map.getZoom(),\n        this._map.options.projection\n      );\n    }\n  });\n\n  var Options = {\n    featureIndexOverlayOption: false,\n    announceMovement: false,\n    announceScale: { metric: true, imperial: false },\n    defaultExtCoor: 'pcrs',\n    defaultLocCoor: 'gcrs',\n    locale: {\n      cmBack: 'Back',\n      cmForward: 'Forward',\n      cmReload: 'Reload',\n      cmToggleControls: 'Toggle Controls',\n      cmCopyCoords: 'Copy',\n      cmCopyMapML: 'Map',\n      cmCopyExtent: 'Extent',\n      cmCopyLocation: 'Location',\n      cmToggleDebug: 'Toggle Debug Mode',\n      cmPasteLayer: 'Paste',\n      cmViewSource: 'View Map Source',\n      lmZoomToLayer: 'Zoom To Layer',\n      lmCopyLayer: 'Copy Layer',\n      lmZoomToExtent: 'Zoom To Sub-layer',\n      lmCopyExtent: 'Copy Sub-layer',\n      lcOpacity: 'Opacity',\n      btnAttribution: 'Map data attribution',\n      btnZoomIn: 'Zoom in',\n      btnZoomOut: 'Zoom out',\n      btnFullScreen: 'View Fullscreen',\n      btnExitFullScreen: 'Exit Fullscreen',\n      btnLocTrackOn: 'Show my location - location tracking on',\n      btnMyLocTrackOn: 'My current location, shown on map',\n      btnLocTrackOff: 'Show my location - location tracking off',\n      btnLocTrackLastKnown: 'Show my location - last known location shown',\n      btnMyLastKnownLocTrackOn: 'My last known location, shown on map',\n      amZoom: 'zoom level',\n      amColumn: 'column',\n      amRow: 'row',\n      amMaxZoom: 'At maximum zoom level, zoom in disabled',\n      amMinZoom: 'At minimum zoom level, zoom out disabled',\n      amZoomedOut: 'Zoomed out of bounds, returning to',\n      amDraggedOut: 'Dragged out of bounds, returning to',\n      amEastBound: 'Reached east bound, panning east disabled',\n      amWestBound: 'Reached west bound, panning west disabled',\n      amNorthBound: 'Reached north bound, panning north disabled',\n      amSouthBound: 'Reached south bound, panning south disabled',\n      kbdShortcuts: 'Keyboard shortcuts',\n      kbdMovement: 'Movement keys',\n      kbdFeature: 'Feature navigation keys',\n      kbdPanUp: 'Pan up',\n      kbdPanDown: 'Pan down',\n      kbdPanLeft: 'Pan left',\n      kbdPanRight: 'Pan right',\n      kbdPanIncrement: 'pan increment',\n      kbdZoom: 'Zoom in/out 3 levels',\n      kbdPrevFeature: 'Previous feature',\n      kbdNextFeature: 'Next feature',\n      dfLayer: 'Layer',\n      dfExtent: 'Sub-layer',\n      popupZoom: 'Zoom to here',\n      dfPastedLayer: 'Pasted layer',\n      fIndexNoFeatures: 'No features found'\n    }\n  };\n\n  L.Map.Keyboard.include({\n    _onKeyDown: function (e) {\n      if (e.altKey || e.metaKey) {\n        return;\n      }\n\n      let zoomIn = {\n        187: 187,\n        107: 107,\n        61: 61,\n        171: 171\n      };\n\n      let zoomOut = {\n        189: 189,\n        109: 109,\n        54: 54,\n        173: 173\n      };\n\n      var key = e.keyCode,\n        map = this._map,\n        offset;\n\n      if (key in this._panKeys) {\n        if (!map._panAnim || !map._panAnim._inProgress) {\n          offset = this._panKeys[key];\n          if (e.shiftKey) {\n            offset = L.point(offset).multiplyBy(3);\n          }\n          if (e.ctrlKey) {\n            offset = L.point(offset).divideBy(5);\n          }\n\n          map.panBy(offset);\n\n          if (map.options.maxBounds) {\n            map.panInsideBounds(map.options.maxBounds);\n          }\n        }\n      } else if (key in this._zoomKeys) {\n        if (\n          (key in zoomIn && map.getMaxZoom() !== map.getZoom()) ||\n          (key in zoomOut && map._layersMinZoom !== map.getZoom())\n        )\n          map.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);\n      } else if (\n        key === 27 &&\n        map._popup &&\n        map._popup.options.closeOnEscapeKey\n      ) {\n        map.closePopup();\n      } else {\n        return;\n      }\n\n      L.DomEvent.stop(e);\n    }\n  });\n\n  var FeatureIndexOverlay = L.Layer.extend({\n    onAdd: function (map) {\n      let svgInnerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" viewBox=\"0 0 100 100\"><path fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" d=\"M0 0h100v100H0z\" color=\"#000\" overflow=\"visible\"/></svg>`;\n\n      this._container = L.DomUtil.create(\n        'div',\n        'mapml-feature-index-box',\n        map._container\n      );\n      this._container.innerHTML = svgInnerHTML;\n\n      this._output = L.DomUtil.create(\n        'output',\n        'mapml-feature-index',\n        map._container\n      );\n      this._output.setAttribute('role', 'status');\n      this._output.setAttribute('aria-live', 'polite');\n      this._output.setAttribute('aria-atomic', 'true');\n      this._body = L.DomUtil.create(\n        'span',\n        'mapml-feature-index-content',\n        this._output\n      );\n      this._body.index = 0;\n      this._output.initialFocus = false;\n      map.on('focus blur popupclose', this._addOrRemoveFeatureIndex, this);\n      map.on('moveend focus templatedfeatureslayeradd', this._checkOverlap, this);\n      map.on('keydown', this._onKeyDown, this);\n      this._addOrRemoveFeatureIndex();\n    },\n\n    _calculateReticleBounds: function () {\n      let bounds = this._map.getPixelBounds();\n      let center = bounds.getCenter();\n      let wRatio =\n        Math.abs(bounds.min.x - bounds.max.x) / this._map.options.mapEl.width;\n      let hRatio =\n        Math.abs(bounds.min.y - bounds.max.y) / this._map.options.mapEl.height;\n\n      let reticleDimension = getComputedStyle(this._container).width.replace(\n        /[^\\d.]/g,\n        ''\n      );\n      if (getComputedStyle(this._container).width.slice(-1) === '%') {\n        reticleDimension =\n          (reticleDimension * this._map.options.mapEl.width) / 100;\n      }\n      let w = (wRatio * reticleDimension) / 2;\n      let h = (hRatio * reticleDimension) / 2;\n      let minPoint = L.point(center.x - w, center.y + h);\n      let maxPoint = L.point(center.x + w, center.y - h);\n      let b = L.bounds(minPoint, maxPoint);\n      return M.pixelToPCRSBounds(\n        b,\n        this._map.getZoom(),\n        this._map.options.projection\n      );\n    },\n\n    _checkOverlap: function (e) {\n      if (e.type === 'focus') this._output.initialFocus = true;\n      if (!this._output.initialFocus) return;\n      if (this._output.popupClosed) {\n        this._output.popupClosed = false;\n        return;\n      }\n\n      this._map.fire('mapkeyboardfocused');\n\n      let featureIndexBounds = this._calculateReticleBounds();\n      let features = this._map.featureIndex.inBoundFeatures;\n      let index = 1;\n      let keys = Object.keys(features);\n      let body = this._body;\n      let noFeaturesMessage = document.createElement('span');\n      noFeaturesMessage.innerHTML = M.options.locale.fIndexNoFeatures;\n\n      body.innerHTML = '';\n      body.index = 0;\n\n      body.allFeatures = [];\n      keys.forEach((i) => {\n        let layer = features[i].layer;\n        let layers = features[i].layer._layers;\n        let bounds = L.bounds();\n\n        if (layers) {\n          let keys = Object.keys(layers);\n          keys.forEach((j) => {\n            if (!bounds)\n              bounds = L.bounds(\n                layer._layers[j]._bounds.min,\n                layer._layers[j]._bounds.max\n              );\n            bounds.extend(layer._layers[j]._bounds.min);\n            bounds.extend(layer._layers[j]._bounds.max);\n          });\n        } else if (layer._bounds) {\n          bounds = L.bounds(layer._bounds.min, layer._bounds.max);\n        }\n\n        if (featureIndexBounds.overlaps(bounds)) {\n          let label = features[i].path.getAttribute('aria-label');\n\n          if (index < 8) {\n            body.appendChild(this._updateOutput(label, index, index));\n          }\n          if (index % 7 === 0 || index === 1) {\n            body.allFeatures.push([]);\n          }\n          body.allFeatures[Math.floor((index - 1) / 7)].push({\n            label,\n            index,\n            layer\n          });\n          if (body.allFeatures[1] && body.allFeatures[1].length === 1) {\n            body.appendChild(this._updateOutput('More results', 0, 9));\n          }\n          index += 1;\n        }\n      });\n      this._addToggleKeys();\n      if (index === 1) {\n        body.appendChild(noFeaturesMessage);\n      }\n    },\n\n    _updateOutput: function (label, index, key) {\n      let span = document.createElement('span');\n      span.setAttribute('data-index', index);\n      //\", \" adds a brief auditory pause when a screen reader is reading through the feature index\n      //also prevents names with numbers + key from being combined when read\n      span.innerHTML = `<kbd>${key}</kbd>` + ' ' + label + '<span>, </span>';\n      return span;\n    },\n\n    _addToggleKeys: function () {\n      let allFeatures = this._body.allFeatures;\n      for (let i = 0; i < allFeatures.length; i++) {\n        if (allFeatures[i].length === 0) return;\n        if (allFeatures[i - 1]) {\n          let label = 'Previous results';\n          allFeatures[i].push({ label });\n        }\n\n        if (allFeatures[i + 1] && allFeatures[i + 1].length > 0) {\n          let label = 'More results';\n          allFeatures[i].push({ label });\n        }\n      }\n    },\n\n    _onKeyDown: function (e) {\n      let body = this._body;\n      let key = e.originalEvent.keyCode;\n      if (key >= 49 && key <= 55) {\n        if (!body.allFeatures[body.index]) return;\n        let feature = body.allFeatures[body.index][key - 49];\n        if (!feature) return;\n        let layer = feature.layer;\n        if (layer) {\n          this._map.featureIndex.currentIndex = feature.index - 1;\n          if (layer._popup) {\n            this._map.closePopup();\n            layer.openPopup();\n          } else layer.options.group.focus();\n        }\n      } else if (key === 56) {\n        this._newContent(body, -1);\n      } else if (key === 57) {\n        this._newContent(body, 1);\n      }\n    },\n\n    _newContent: function (body, direction) {\n      let index = body.firstChild.getAttribute('data-index');\n      let newContent = body.allFeatures[Math.floor((index - 1) / 7 + direction)];\n      if (newContent && newContent.length > 0) {\n        body.innerHTML = '';\n        body.index += direction;\n        for (let i = 0; i < newContent.length; i++) {\n          let feature = newContent[i];\n          let index = feature.index ? feature.index : 0;\n          let key = i + 1;\n          if (feature.label === 'More results') key = 9;\n          if (feature.label === 'Previous results') key = 8;\n          body.appendChild(this._updateOutput(feature.label, index, key));\n        }\n      }\n    },\n\n    _addOrRemoveFeatureIndex: function (e) {\n      //Toggle aria-hidden attribute so screen reader rereads the feature index on focus\n      if (!this._output.initialFocus) {\n        this._output.setAttribute('aria-hidden', 'true');\n      } else if (this._output.hasAttribute('aria-hidden')) {\n        let obj = this;\n        setTimeout(function () {\n          obj._output.removeAttribute('aria-hidden');\n        }, 100);\n      }\n\n      if (e && e.type === 'popupclose') {\n        this._output.setAttribute('aria-hidden', 'true');\n        this._output.popupClosed = true;\n      } else if (e && e.type === 'focus') {\n        this._container.removeAttribute('hidden');\n        this._output.classList.remove('mapml-screen-reader-output');\n        // this is a very subtle branch.  The event that gets handled below is a blur\n        // event, which happens to have the e.target._popup property\n        // when there will be a popup.  Because blur gets handled here, it doesn't\n        // get handled in the next else if block, which would hide both the reticle\n        // and the index menu, and then recursively call this method with no event\n        // argument, which manipulates the aria-hidden attribute on the output\n        // in order to have the screenreader read its contents when the focus returns\n        // to (what exactly???).\n      } else if (e && e.target._popup) {\n        this._container.setAttribute('hidden', '');\n      } else if (e && e.type === 'blur') {\n        this._container.setAttribute('hidden', '');\n        this._output.classList.add('mapml-screen-reader-output');\n        this._output.initialFocus = false;\n        this._addOrRemoveFeatureIndex();\n      } else {\n        // this is the default block, called when no event is passed (recursive call)\n        this._container.setAttribute('hidden', '');\n        this._output.classList.add('mapml-screen-reader-output');\n      }\n    }\n  });\n\n  var featureIndexOverlay = function (options) {\n    return new FeatureIndexOverlay(options);\n  };\n\n  var createLayerControlExtentHTML = function () {\n    var extent = L.DomUtil.create('fieldset', 'mapml-layer-extent'),\n      extentProperties = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-properties',\n        extent\n      ),\n      extentSettings = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-settings',\n        extent\n      ),\n      extentLabel = L.DomUtil.create(\n        'label',\n        'mapml-layer-item-toggle',\n        extentProperties\n      ),\n      input = L.DomUtil.create('input'),\n      svgExtentControlIcon = L.SVG.create('svg'),\n      extentControlPath1 = L.SVG.create('path'),\n      extentControlPath2 = L.SVG.create('path'),\n      extentNameIcon = L.DomUtil.create('span'),\n      extentItemControls = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-controls',\n        extentProperties\n      ),\n      opacityControl = L.DomUtil.create(\n        'details',\n        'mapml-layer-item-details mapml-control-layers',\n        extentSettings\n      ),\n      extentOpacitySummary = L.DomUtil.create('summary', '', opacityControl),\n      mapEl = this.getMapEl(),\n      layerEl = this.getLayerEl(),\n      opacity = L.DomUtil.create('input', '', opacityControl);\n    extentSettings.hidden = true;\n    extent.setAttribute('aria-grabbed', 'false');\n\n    // append the svg paths\n    svgExtentControlIcon.setAttribute('viewBox', '0 0 24 24');\n    svgExtentControlIcon.setAttribute('height', '22');\n    svgExtentControlIcon.setAttribute('width', '22');\n    extentControlPath1.setAttribute('d', 'M0 0h24v24H0z');\n    extentControlPath1.setAttribute('fill', 'none');\n    extentControlPath2.setAttribute(\n      'd',\n      'M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n    );\n    svgExtentControlIcon.appendChild(extentControlPath1);\n    svgExtentControlIcon.appendChild(extentControlPath2);\n\n    let mapSelects = this.querySelectorAll('map-select');\n    if (mapSelects.length) {\n      var frag = document.createDocumentFragment();\n      for (var i = 0; i < mapSelects.length; i++) {\n        frag.appendChild(mapSelects[i].selectdetails);\n      }\n      extentSettings.appendChild(frag);\n    }\n\n    let removeExtentButton = L.DomUtil.create(\n      'button',\n      'mapml-layer-item-remove-control',\n      extentItemControls\n    );\n    removeExtentButton.type = 'button';\n    removeExtentButton.title = 'Remove Sub Layer';\n    removeExtentButton.innerHTML = \"<span aria-hidden='true'>&#10005;</span>\";\n    removeExtentButton.classList.add('mapml-button');\n    removeExtentButton.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.remove();\n    });\n\n    let extentsettingsButton = L.DomUtil.create(\n      'button',\n      'mapml-layer-item-settings-control',\n      extentItemControls\n    );\n    extentsettingsButton.type = 'button';\n    extentsettingsButton.title = 'Extent Settings';\n    extentsettingsButton.setAttribute('aria-expanded', false);\n    extentsettingsButton.classList.add('mapml-button');\n    L.DomEvent.on(\n      extentsettingsButton,\n      'click',\n      (e) => {\n        if (extentSettings.hidden === true) {\n          extentsettingsButton.setAttribute('aria-expanded', true);\n          extentSettings.hidden = false;\n        } else {\n          extentsettingsButton.setAttribute('aria-expanded', false);\n          extentSettings.hidden = true;\n        }\n      },\n      this\n    );\n\n    extentNameIcon.setAttribute('aria-hidden', true);\n    extentLabel.appendChild(input);\n    extentsettingsButton.appendChild(extentNameIcon);\n    extentNameIcon.appendChild(svgExtentControlIcon);\n    extentOpacitySummary.innerText = 'Opacity';\n    extentOpacitySummary.id =\n      'mapml-extent-item-opacity-' + L.stamp(extentOpacitySummary);\n    opacity.setAttribute('type', 'range');\n    opacity.setAttribute('min', '0');\n    opacity.setAttribute('max', '1.0');\n    opacity.setAttribute('step', '0.1');\n    opacity.setAttribute(\n      'aria-labelledby',\n      'mapml-extent-item-opacity-' + L.stamp(extentOpacitySummary)\n    );\n    const changeOpacity = function (e) {\n      if (e && e.target && e.target.value >= 0 && e.target.value <= 1.0) {\n        this._extentLayer.changeOpacity(e.target.value);\n      }\n    };\n    opacity.setAttribute('value', this.opacity);\n    opacity.value = this._extentLayer._container.style.opacity || '1.0';\n    opacity.addEventListener('change', changeOpacity.bind(this));\n\n    var extentItemNameSpan = L.DomUtil.create(\n      'span',\n      'mapml-extent-item-name',\n      extentLabel\n    );\n    input.type = 'checkbox';\n    input.defaultChecked = this.checked;\n    extentItemNameSpan.innerHTML = this.label;\n    const changeCheck = function () {\n      this.checked = !this.checked;\n    };\n    // save for later access by API\n    this._layerControlCheckbox = input;\n    input.addEventListener('change', changeCheck.bind(this));\n    extentItemNameSpan.id =\n      'mapml-extent-item-name-{' + L.stamp(extentItemNameSpan) + '}';\n    extent.setAttribute('aria-labelledby', extentItemNameSpan.id);\n    extentItemNameSpan.extent = this;\n\n    extent.ontouchstart = extent.onmousedown = (downEvent) => {\n      if (\n        (downEvent.target.parentElement.tagName.toLowerCase() === 'label' &&\n          downEvent.target.tagName.toLowerCase() !== 'input') ||\n        downEvent.target.tagName.toLowerCase() === 'label'\n      ) {\n        downEvent.stopPropagation();\n        downEvent =\n          downEvent instanceof TouchEvent ? downEvent.touches[0] : downEvent;\n\n        let control = extent,\n          controls = extent.parentNode,\n          moving = false,\n          yPos = downEvent.clientY,\n          originalPosition = Array.from(\n            extent.parentElement.querySelectorAll('fieldset')\n          ).indexOf(extent);\n\n        document.body.ontouchmove = document.body.onmousemove = (moveEvent) => {\n          moveEvent.preventDefault();\n          moveEvent =\n            moveEvent instanceof TouchEvent ? moveEvent.touches[0] : moveEvent;\n\n          // Fixes flickering by only moving element when there is enough space\n          let offset = moveEvent.clientY - yPos;\n          moving = Math.abs(offset) > 15 || moving;\n          if (\n            (controls && !moving) ||\n            (controls && controls.childElementCount <= 1) ||\n            controls.getBoundingClientRect().top >\n              control.getBoundingClientRect().bottom ||\n            controls.getBoundingClientRect().bottom <\n              control.getBoundingClientRect().top\n          ) {\n            return;\n          }\n\n          controls.classList.add('mapml-draggable');\n          control.style.transform = 'translateY(' + offset + 'px)';\n          control.style.pointerEvents = 'none';\n\n          let x = moveEvent.clientX,\n            y = moveEvent.clientY,\n            root =\n              mapEl.tagName === 'MAPML-VIEWER'\n                ? mapEl.shadowRoot\n                : mapEl.querySelector('.mapml-web-map').shadowRoot,\n            elementAt = root.elementFromPoint(x, y),\n            swapControl =\n              !elementAt || !elementAt.closest('fieldset')\n                ? control\n                : elementAt.closest('fieldset');\n\n          swapControl =\n            Math.abs(offset) <= swapControl.offsetHeight ? control : swapControl;\n\n          control.setAttribute('aria-grabbed', 'true');\n          control.setAttribute('aria-dropeffect', 'move');\n          if (swapControl && controls === swapControl.parentNode) {\n            swapControl =\n              swapControl !== control.nextSibling\n                ? swapControl\n                : swapControl.nextSibling;\n            if (control !== swapControl) {\n              yPos = moveEvent.clientY;\n              control.style.transform = null;\n            }\n            controls.insertBefore(control, swapControl);\n          }\n        };\n\n        document.body.ontouchend = document.body.onmouseup = () => {\n          let newPosition = Array.from(\n            extent.parentElement.querySelectorAll('fieldset')\n          ).indexOf(extent);\n          control.setAttribute('aria-grabbed', 'false');\n          control.removeAttribute('aria-dropeffect');\n          control.style.pointerEvents = null;\n          control.style.transform = null;\n          if (originalPosition !== newPosition) {\n            let controlsElems = controls.children,\n              zIndex = 0;\n            for (let c of controlsElems) {\n              let extentEl = c.querySelector('span').extent;\n\n              extentEl.setAttribute('data-moving', '');\n              const node = layerEl.src ? layerEl.shadowRoot : layerEl;\n              node.append(extentEl);\n              extentEl.removeAttribute('data-moving');\n\n              extentEl.extentZIndex = zIndex;\n              extentEl._extentLayer.setZIndex(zIndex);\n              zIndex++;\n            }\n          }\n          controls.classList.remove('mapml-draggable');\n          document.body.ontouchmove =\n            document.body.onmousemove =\n            document.body.ontouchend =\n            document.body.onmouseup =\n              null;\n        };\n      }\n    };\n    this._extentRootFieldset = extent;\n    this._opacitySlider = opacity;\n    this._opacityControl = opacityControl;\n    this._layerControlLabel = extentLabel;\n    return extent;\n  };\n\n  var createLayerControlHTML = async function () {\n    var fieldset = L.DomUtil.create('fieldset', 'mapml-layer-item'),\n      input = L.DomUtil.create('input'),\n      layerItemName = L.DomUtil.create('span', 'mapml-layer-item-name'),\n      settingsButtonNameIcon = L.DomUtil.create('span'),\n      layerItemProperty = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-properties',\n        fieldset\n      ),\n      layerItemSettings = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-settings',\n        fieldset\n      ),\n      itemToggleLabel = L.DomUtil.create(\n        'label',\n        'mapml-layer-item-toggle',\n        layerItemProperty\n      ),\n      layerItemControls = L.DomUtil.create(\n        'div',\n        'mapml-layer-item-controls',\n        layerItemProperty\n      ),\n      opacityControl = L.DomUtil.create(\n        'details',\n        'mapml-layer-item-opacity mapml-control-layers',\n        layerItemSettings\n      ),\n      opacity = L.DomUtil.create('input'),\n      opacityControlSummary = L.DomUtil.create('summary'),\n      svgSettingsControlIcon = L.SVG.create('svg'),\n      settingsControlPath1 = L.SVG.create('path'),\n      settingsControlPath2 = L.SVG.create('path'),\n      extentsFieldset = L.DomUtil.create(\n        'fieldset',\n        'mapml-layer-grouped-extents'\n      ),\n      mapEl = this.parentNode;\n\n    // append the paths in svg for the remove layer and toggle icons\n    svgSettingsControlIcon.setAttribute('viewBox', '0 0 24 24');\n    svgSettingsControlIcon.setAttribute('height', '22');\n    svgSettingsControlIcon.setAttribute('width', '22');\n    svgSettingsControlIcon.setAttribute('fill', 'currentColor');\n    settingsControlPath1.setAttribute('d', 'M0 0h24v24H0z');\n    settingsControlPath1.setAttribute('fill', 'none');\n    settingsControlPath2.setAttribute(\n      'd',\n      'M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n    );\n    svgSettingsControlIcon.appendChild(settingsControlPath1);\n    svgSettingsControlIcon.appendChild(settingsControlPath2);\n\n    layerItemSettings.hidden = true;\n    settingsButtonNameIcon.setAttribute('aria-hidden', true);\n\n    let removeControlButton = L.DomUtil.create(\n      'button',\n      'mapml-layer-item-remove-control',\n      layerItemControls\n    );\n    removeControlButton.type = 'button';\n    removeControlButton.title = 'Remove Layer';\n    removeControlButton.innerHTML = \"<span aria-hidden='true'>&#10005;</span>\";\n    removeControlButton.classList.add('mapml-button');\n    L.DomEvent.on(removeControlButton, 'click', L.DomEvent.stop);\n    L.DomEvent.on(\n      removeControlButton,\n      'click',\n      (e) => {\n        let fieldset = 0,\n          elem,\n          root;\n        root =\n          mapEl.tagName === 'MAPML-VIEWER'\n            ? mapEl.shadowRoot\n            : mapEl.querySelector('.mapml-web-map').shadowRoot;\n        if (\n          e.target.closest('fieldset').nextElementSibling &&\n          !e.target.closest('fieldset').nextElementSibling.disbaled\n        ) {\n          elem = e.target.closest('fieldset').previousElementSibling;\n          while (elem) {\n            fieldset += 2; // find the next layer menu item\n            elem = elem.previousElementSibling;\n          }\n        } else {\n          // focus on the link\n          elem = 'link';\n        }\n        mapEl.removeChild(\n          e.target.closest('fieldset').querySelector('span').layer._layerEl\n        );\n        elem = elem\n          ? root.querySelector('.leaflet-control-attribution').firstElementChild\n          : (elem = root.querySelectorAll('input')[fieldset]);\n        elem.focus();\n      },\n      this._layer\n    );\n\n    let itemSettingControlButton = L.DomUtil.create(\n      'button',\n      'mapml-layer-item-settings-control',\n      layerItemControls\n    );\n    itemSettingControlButton.type = 'button';\n    itemSettingControlButton.title = 'Layer Settings';\n    itemSettingControlButton.setAttribute('aria-expanded', false);\n    itemSettingControlButton.classList.add('mapml-button');\n    L.DomEvent.on(\n      itemSettingControlButton,\n      'click',\n      (e) => {\n        let layerControl = this._layer._layerEl._layerControl._container;\n        if (!layerControl._isExpanded && e.pointerType === 'touch') {\n          layerControl._isExpanded = true;\n          return;\n        }\n        if (layerItemSettings.hidden === true) {\n          itemSettingControlButton.setAttribute('aria-expanded', true);\n          layerItemSettings.hidden = false;\n        } else {\n          itemSettingControlButton.setAttribute('aria-expanded', false);\n          layerItemSettings.hidden = true;\n        }\n      },\n      this._layer\n    );\n\n    input.defaultChecked = this.checked;\n    input.type = 'checkbox';\n    input.setAttribute('class', 'leaflet-control-layers-selector');\n    layerItemName.layer = this._layer;\n    const changeCheck = function () {\n      this.checked = !this.checked;\n    };\n    input.addEventListener('change', changeCheck.bind(this));\n    if (this._layer._legendUrl) {\n      var legendLink = document.createElement('a');\n      legendLink.text = ' ' + this._layer._title;\n      legendLink.href = this._layer._legendUrl;\n      legendLink.target = '_blank';\n      legendLink.draggable = false;\n      layerItemName.appendChild(legendLink);\n    } else {\n      layerItemName.innerHTML = this._layer._title;\n    }\n    layerItemName.id = 'mapml-layer-item-name-{' + L.stamp(layerItemName) + '}';\n    opacityControlSummary.innerText = 'Opacity';\n    opacityControlSummary.id =\n      'mapml-layer-item-opacity-' + L.stamp(opacityControlSummary);\n    opacityControl.appendChild(opacityControlSummary);\n    opacityControl.appendChild(opacity);\n    opacity.setAttribute('type', 'range');\n    opacity.setAttribute('min', '0');\n    opacity.setAttribute('max', '1.0');\n    opacity.setAttribute('value', this._layer._container.style.opacity || '1.0');\n    opacity.setAttribute('step', '0.1');\n    opacity.setAttribute(\n      'aria-labelledby',\n      'mapml-layer-item-opacity-' + L.stamp(opacityControlSummary)\n    );\n\n    const changeOpacity = function (e) {\n      if (e && e.target && e.target.value >= 0 && e.target.value <= 1.0) {\n        this._layer.changeOpacity(e.target.value);\n      }\n    };\n    opacity.value = this._layer._container.style.opacity || '1.0';\n    opacity.addEventListener('change', changeOpacity.bind(this));\n\n    fieldset.setAttribute('aria-grabbed', 'false');\n    fieldset.setAttribute('aria-labelledby', layerItemName.id);\n\n    fieldset.ontouchstart = fieldset.onmousedown = (downEvent) => {\n      if (\n        (downEvent.target.parentElement.tagName.toLowerCase() === 'label' &&\n          downEvent.target.tagName.toLowerCase() !== 'input') ||\n        downEvent.target.tagName.toLowerCase() === 'label'\n      ) {\n        downEvent =\n          downEvent instanceof TouchEvent ? downEvent.touches[0] : downEvent;\n        let control = fieldset,\n          controls = fieldset.parentNode,\n          moving = false,\n          yPos = downEvent.clientY,\n          originalPosition = Array.from(\n            controls.querySelectorAll('fieldset')\n          ).indexOf(fieldset);\n\n        document.body.ontouchmove = document.body.onmousemove = (moveEvent) => {\n          moveEvent.preventDefault();\n          moveEvent =\n            moveEvent instanceof TouchEvent ? moveEvent.touches[0] : moveEvent;\n\n          // Fixes flickering by only moving element when there is enough space\n          let offset = moveEvent.clientY - yPos;\n          moving = Math.abs(offset) > 15 || moving;\n          if (\n            (controls && !moving) ||\n            (controls && controls.childElementCount <= 1) ||\n            controls.getBoundingClientRect().top >\n              control.getBoundingClientRect().bottom ||\n            controls.getBoundingClientRect().bottom <\n              control.getBoundingClientRect().top\n          ) {\n            return;\n          }\n\n          controls.classList.add('mapml-draggable');\n          control.style.transform = 'translateY(' + offset + 'px)';\n          control.style.pointerEvents = 'none';\n\n          let x = moveEvent.clientX,\n            y = moveEvent.clientY,\n            root =\n              mapEl.tagName === 'MAPML-VIEWER'\n                ? mapEl.shadowRoot\n                : mapEl.querySelector('.mapml-web-map').shadowRoot,\n            elementAt = root.elementFromPoint(x, y),\n            swapControl =\n              !elementAt || !elementAt.closest('fieldset')\n                ? control\n                : elementAt.closest('fieldset');\n\n          swapControl =\n            Math.abs(offset) <= swapControl.offsetHeight ? control : swapControl;\n\n          control.setAttribute('aria-grabbed', 'true');\n          control.setAttribute('aria-dropeffect', 'move');\n          if (swapControl && controls === swapControl.parentNode) {\n            swapControl =\n              swapControl !== control.nextSibling\n                ? swapControl\n                : swapControl.nextSibling;\n            if (control !== swapControl) {\n              yPos = moveEvent.clientY;\n              control.style.transform = null;\n            }\n            controls.insertBefore(control, swapControl);\n          }\n        };\n\n        document.body.ontouchend = document.body.onmouseup = () => {\n          let newPosition = Array.from(\n            controls.querySelectorAll('fieldset')\n          ).indexOf(fieldset);\n          control.setAttribute('aria-grabbed', 'false');\n          control.removeAttribute('aria-dropeffect');\n          control.style.pointerEvents = null;\n          control.style.transform = null;\n          if (originalPosition !== newPosition) {\n            let controlsElems = controls.children,\n              zIndex = 1;\n            // re-order layer elements DOM order\n            for (let c of controlsElems) {\n              let layerEl = c.querySelector('span').layer._layerEl;\n              layerEl.setAttribute('data-moving', '');\n              mapEl.insertAdjacentElement('beforeend', layerEl);\n              layerEl.removeAttribute('data-moving');\n            }\n            // update zIndex of all layer- elements\n            let layers = mapEl.querySelectorAll('layer-');\n            for (let i = 0; i < layers.length; i++) {\n              let layer = layers[i]._layer;\n              if (layer.options.zIndex !== zIndex) {\n                layer.setZIndex(zIndex);\n              }\n              zIndex++;\n            }\n          }\n          controls.classList.remove('mapml-draggable');\n          document.body.ontouchmove =\n            document.body.onmousemove =\n            document.body.onmouseup =\n              null;\n        };\n      }\n    };\n\n    itemToggleLabel.appendChild(input);\n    itemToggleLabel.appendChild(layerItemName);\n    itemSettingControlButton.appendChild(settingsButtonNameIcon);\n    settingsButtonNameIcon.appendChild(svgSettingsControlIcon);\n\n    let mapml = this.src ? this.shadowRoot : this;\n    var styleLinks = mapml.querySelectorAll(\n      'map-link[rel=style],map-link[rel=\"self style\"],map-link[rel=\"style self\"]'\n    );\n    let styles;\n    if (styleLinks) {\n      styles = this.getAlternateStyles(styleLinks);\n      if (styles) {\n        layerItemSettings.appendChild(styles);\n      }\n    }\n\n    this._layerControlCheckbox = input;\n    this._layerControlLabel = itemToggleLabel;\n    this._opacityControl = opacityControl;\n    this._opacitySlider = opacity;\n    this._layerControlHTML = fieldset;\n    this._layerItemSettingsHTML = layerItemSettings;\n    this._propertiesGroupAnatomy = extentsFieldset;\n    this._styles = styles;\n    extentsFieldset.setAttribute('aria-label', 'Sublayers');\n    extentsFieldset.setAttribute('hidden', '');\n    let mapExtents = mapml.querySelectorAll('map-extent:not([hidden])');\n    let mapExtentLayerControls = [];\n    for (let i = 0; i < mapExtents.length; i++) {\n      mapExtentLayerControls.push(mapExtents[i].whenReady());\n      // if any map-extent is not hidden, the parent fieldset should not be hidden\n      extentsFieldset.removeAttribute('hidden');\n    }\n    await Promise.all(mapExtentLayerControls);\n    for (let i = 0; i < mapExtents.length; i++) {\n      extentsFieldset.appendChild(mapExtents[i].getLayerControlHTML());\n    }\n    layerItemSettings.appendChild(extentsFieldset);\n    return this._layerControlHTML;\n  };\n\n  class ZoomInput {\n    constructor(name, min, max, value, step, layer) {\n      this.name = name;\n      this.min = min;\n      this.max = max;\n      this.value = value;\n      this.step = step;\n      this.layer = layer;\n    }\n\n    validateInput() {\n      // name is required\n      if (!this.name) {\n        return false;\n      }\n      // min and max can not be present\n      // fallback would be layer's meta, -> projection min, max\n      // don't need value, map-meta max value, -> fallback is max zoom of projection\n      // don't need step, defaults to 1\n      return true;\n    }\n\n    getValue() {\n      return this.layer._map.options.mapEl.zoom;\n    }\n  }\n\n  class HiddenInput {\n    constructor(name, value) {\n      this.name = name;\n      this.value = value;\n    }\n\n    validateInput() {\n      // name is required\n      // value is required\n      if (!this.name || !this.value) {\n        return false;\n      }\n      return true;\n    }\n\n    getValue() {\n      return this.value;\n    }\n  }\n\n  class WidthInput {\n    constructor(name, layer) {\n      this.name = name;\n      this.layer = layer;\n    }\n\n    validateInput() {\n      // name is required\n      if (!this.name) {\n        return false;\n      }\n      return true;\n    }\n\n    getValue() {\n      return this.layer._map.getSize().x;\n    }\n  }\n\n  class HeightInput {\n    constructor(name, layer) {\n      this.name = name;\n      this.layer = layer;\n    }\n\n    validateInput() {\n      // name is required\n      if (!this.name) {\n        return false;\n      }\n      return true;\n    }\n\n    getValue() {\n      return this.layer._map.getSize().y;\n    }\n  }\n\n  class LocationInput {\n    constructor(name, position, axis, units, min, max, rel, layer) {\n      this.name = name;\n      this.position = position;\n      this.axis = axis;\n      // if unit/cs not present, find it\n      if (!units && axis && !['i', 'j'].includes(axis)) {\n        this.units = M.axisToCS(axis).toLowerCase();\n      } else {\n        this.units = units; // cs\n      }\n      this.min = min;\n      this.max = max;\n      this.rel = rel;\n      this.layer = layer;\n    }\n\n    validateInput() {\n      // name is required\n      // axis is required\n      if (!this.name || !this.axis) {\n        return false;\n      }\n      // cs/units is only required when the axis is i/j. To differentiate between the units/cs\n      if (\n        (this.axis === 'i' || this.axis === 'j') &&\n        !['map', 'tile'].includes(this.units)\n      ) {\n        return false;\n      }\n      // check if axis match the units/cs\n      if (this.units) {\n        let axisCS = M.axisToCS(this.axis);\n        if (\n          typeof axisCS === 'string' &&\n          axisCS.toUpperCase() !== this.units.toUpperCase()\n        ) {\n          return false;\n        }\n      }\n      // position is not required, will default to top-left\n      // min max fallbacks, map-meta -> projection\n      // rel not required, default is image/extent\n      return true;\n    }\n\n    _TCRSToPCRS(coords, zoom) {\n      // TCRS pixel point to Projected CRS point (in meters, presumably)\n      var map = this.layer._map,\n        crs = map.options.crs,\n        loc = crs.transformation.untransform(coords, crs.scale(zoom));\n      return loc;\n    }\n\n    getValue(zoom = undefined, bounds = undefined) {\n      // units = cs\n      //<input name=\"...\" units=\"pcrs\" type=\"location\" position=\"top|bottom-left|right\" axis=\"northing|easting|latitude|longitude\">\n      if (zoom === undefined) zoom = this.layer._map.getZoom();\n      if (bounds === undefined) bounds = this.layer._map.getPixelBounds();\n\n      if (this.units === 'pcrs' || this.units === 'gcrs') {\n        switch (this.axis) {\n          case 'longitude':\n          case 'easting':\n            if (this.position) {\n              if (this.position.match(/.*?-left/i)) {\n                return this._TCRSToPCRS(bounds.min, zoom).x;\n              } else if (this.position.match(/.*?-right/i)) {\n                return this._TCRSToPCRS(bounds.max, zoom).x;\n              }\n            } else {\n              // position is not required, will default to top-left\n              return this._TCRSToPCRS(bounds.min, zoom).x;\n            }\n            break;\n          case 'latitude':\n          case 'northing':\n            if (this.position) {\n              if (this.position.match(/top-.*?/i)) {\n                return this._TCRSToPCRS(bounds.min, zoom).y;\n              } else if (this.position.match(/bottom-.*?/i)) {\n                return this._TCRSToPCRS(bounds.max, zoom).y;\n              }\n            } else {\n              // position is not required, will default to top-left\n              return this._TCRSToPCRS(bounds.min, zoom).y;\n            }\n            break;\n        }\n      } else if (this.units === 'tilematrix') {\n        // Value is retrieved from the createTile method of TemplatedTileLayer, on move end.\n        // Different values for each tile when filling in the map tiles on the map.\n        // Currently storing all x,y,z within one object,\n        // TODO: change return value as needed based on usage by map-input\n        // https://github.com/Leaflet/Leaflet/blob/6994baf25f267db1c8b720c28a61e0700d0aa0e8/src/layer/tile/GridLayer.js#L652\n        const center = this.layer._map.getCenter();\n        const templatedTileLayer = this.layer._extentLayer._templates[0].layer;\n        const pixelBounds = templatedTileLayer._getTiledPixelBounds(center);\n        const tileRange = templatedTileLayer._pxBoundsToTileRange(pixelBounds);\n        let obj = [];\n        for (let j = tileRange.min.y; j <= tileRange.max.y; j++) {\n          for (let i = tileRange.min.x; i <= tileRange.max.x; i++) {\n            const coords = new L.Point(i, j);\n            coords.z = templatedTileLayer._tileZoom;\n            obj.push(coords);\n          }\n        }\n        return obj;\n      } else if (this.units === 'tile' || this.units === 'map') ;\n      return;\n    }\n  }\n\n  class DOMTokenList {\n    /* jshint ignore:start */\n    #element; // create element as a private property\n    #valueSet; // needed to prevent infinite recursive calls to CE setAttribute\n    #attribute; // the name of the attribute that will be a DOMTokenList\n    #domain; // the domain of token values supported by this attribute\n    /* jshint ignore:end */\n    constructor(initialValue, element, attribute, domain) {\n      // create donor/host div to extract DomTokenList from\n      const hostingElement = document.createElement('div');\n      this.domtokenlist = hostingElement.classList;\n\n      // to check if value is being set, protects from infinite recursion\n      // from attributeChangedCallback of mapml-viewer and web-map\n      this.#valueSet = false; // jshint ignore:line\n      this.domtokenlist.value = initialValue ?? '';\n      this.#element = element; // jshint ignore:line\n      this.#attribute = attribute; // jshint ignore:line\n      this.#domain = domain; // jshint ignore:line\n    }\n\n    get valueSet() {\n      return this.#valueSet; // jshint ignore:line\n    }\n\n    get length() {\n      return this.domtokenlist.length;\n    }\n\n    get value() {\n      return this.domtokenlist.value;\n    }\n    set value(val) {\n      if (val === null) {\n        // when attribute is being removed\n        this.domtokenlist.value = '';\n      } else {\n        this.domtokenlist.value = val.toLowerCase();\n        /* jshint ignore:start */\n        this.#valueSet = true;\n        this.#element.setAttribute(this.#attribute, this.domtokenlist.value);\n        this.#valueSet = false;\n        /* jshint ignore:end */\n      }\n    }\n\n    item(index) {\n      return this.domtokenlist.item(index);\n    }\n\n    contains(token) {\n      return this.domtokenlist.contains(token);\n    }\n\n    // Modified default behavior\n    add(token) {\n      this.domtokenlist.add(token);\n      this.#element.setAttribute(this.#attribute, this.domtokenlist.value); // jshint ignore:line\n    }\n\n    // Modified default behavior\n    remove(token) {\n      this.domtokenlist.remove(token);\n      this.#element.setAttribute(this.#attribute, this.domtokenlist.value); // jshint ignore:line\n    }\n\n    // Modified default behavior\n    replace(oldToken, newToken) {\n      this.domtokenlist.replace(oldToken, newToken);\n      this.#element.setAttribute(this.#attribute, this.domtokenlist.value); // jshint ignore:line\n    }\n\n    // Modified default behavior\n    supports(token) {\n      /* jshint ignore:start */\n      if (this.#domain.includes(token)) {\n        return true;\n      } else {\n        return false;\n      }\n      /* jshint ignore:end */\n    }\n\n    // Modified default behavior\n    //https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle\n    toggle(token, force) {\n      this.domtokenlist.toggle(token, force);\n      this.#element.setAttribute(this.#attribute, this.domtokenlist.value); // jshint ignore:line\n    }\n\n    entries() {\n      return this.domtokenlist.entries();\n    }\n\n    //https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/forEach\n    forEach(callback, thisArg) {\n      this.domtokenlist.forEach(callback, thisArg);\n    }\n\n    //https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/keys\n    keys() {\n      return this.domtokenlist.keys();\n    }\n\n    //https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/values\n    values() {\n      return this.domtokenlist.values();\n    }\n  }\n\n  /*\n   * Copyright 2015-2016 Canada Centre for Mapping and Earth Observation,\n   * Earth Sciences Sector, Natural Resources Canada.\n   *\n   * License\n   *\n   * By obtaining and/or copying this work, you (the licensee) agree that you have\n   * read, understood, and will comply with the following terms and conditions.\n   *\n   * Permission to copy, modify, and distribute this work, with or without\n   * modification, for any purpose and without fee or royalty is hereby granted,\n   * provided that you include the following on ALL copies of the work or portions\n   * thereof, including modifications:\n   *\n   * The full text of this NOTICE in a location viewable to users of the\n   * redistributed or derivative work.\n   *\n   * Any pre-existing intellectual property disclaimers, notices, or terms and\n   * conditions. If none exist, the W3C Software and Document Short Notice should\n   * be included.\n   *\n   * Notice of any changes or modifications, through a copyright statement on the\n   * new code or document such as \"This software or document includes material\n   * copied from or derived from [title and URI of the W3C document].\n   * Copyright © [YEAR] W3C® (MIT, ERCIM, Keio, Beihang).\"\n   *\n   * Disclaimers\n   *\n   * THIS WORK IS PROVIDED \"AS IS,\" AND COPYRIGHT HOLDERS MAKE NO REPRESENTATIONS\n   * OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO, WARRANTIES OF\n   * MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE\n   * SOFTWARE OR DOCUMENT WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS,\n   * TRADEMARKS OR OTHER RIGHTS.\n   * COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR\n   * CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE SOFTWARE OR DOCUMENT.\n   *\n   * The name and trademarks of copyright holders may NOT be used in advertising or\n   * publicity pertaining to the work without specific, written prior permission.\n   * Title to copyright in this work will at all times remain with copyright holders.\n   */\n\n  /* global L, Node */\n  (function (window, document, undefined$1) {\n    var M = {};\n    window.M = M;\n\n    (function () {\n      M.detectImagePath = function (container) {\n        // this relies on the CSS style leaflet-default-icon-path containing a\n        // relative url() that leads to a valid icon file.  Since that depends on\n        // how all of this stuff is deployed (i.e. custom element or as leaflet-plugin)\n        // also, because we're using 'shady DOM' api, the container must be\n        // a shady dom container, because the custom element tags it with added\n        // style-scope ... and related classes.\n        var el = L.DomUtil.create('div', 'leaflet-default-icon-path', container);\n        var path =\n          L.DomUtil.getStyle(el, 'background-image') ||\n          L.DomUtil.getStyle(el, 'backgroundImage'); // IE8\n\n        container.removeChild(el);\n\n        if (path === null || path.indexOf('url') !== 0) {\n          path = '';\n        } else {\n          path = path\n            .replace(/^url\\([\"']?/, '')\n            .replace(/marker-icon\\.png[\"']?\\)$/, '');\n        }\n\n        return path;\n      };\n      M.mime = 'text/mapml';\n\n      let mapOptions = window.document.head.querySelector('map-options');\n      M.options = Options;\n      if (mapOptions)\n        M.options = Object.assign(M.options, JSON.parse(mapOptions.innerHTML));\n\n      // see https://leafletjs.com/reference-1.5.0.html#crs-l-crs-base\n      // \"new classes can't inherit from (L.CRS), and methods can't be added\n      // to (L.CRS.anything) with the include function\n      // so we'll use the options property as a way to integrate needed\n      // properties and methods...\n      M.WGS84 = new L.Proj.CRS(\n        'EPSG:4326',\n        '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ',\n        {\n          origin: [-180, +90],\n          bounds: L.bounds([\n            [-180, -90],\n            [180, 90]\n          ]),\n          resolutions: [\n            0.703125, 0.3515625, 0.17578125, 0.087890625, 0.0439453125,\n            0.02197265625, 0.010986328125, 0.0054931640625, 0.00274658203125,\n            0.001373291015625, 0.0006866455078125, 0.0003433227539062,\n            0.0001716613769531, 0.0000858306884766, 0.0000429153442383,\n            0.0000214576721191, 0.0000107288360596, 0.0000053644180298,\n            0.0000026822090149, 0.0000013411045074, 0.0000006705522537,\n            0.0000003352761269\n          ],\n          crs: {\n            tcrs: {\n              horizontal: {\n                name: 'x',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.WGS84.options.bounds.getSize().x /\n                      M.WGS84.options.resolutions[zoom]\n                  )\n              },\n              vertical: {\n                name: 'y',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.WGS84.options.bounds.getSize().y /\n                      M.WGS84.options.resolutions[zoom]\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [\n                    M.WGS84.options.crs.tcrs.horizontal.min,\n                    M.WGS84.options.crs.tcrs.vertical.min\n                  ],\n                  [\n                    M.WGS84.options.crs.tcrs.horizontal.max(zoom),\n                    M.WGS84.options.crs.tcrs.vertical.max(zoom)\n                  ]\n                )\n            },\n            pcrs: {\n              horizontal: {\n                name: 'longitude',\n                get min() {\n                  return M.WGS84.options.crs.gcrs.horizontal.min;\n                },\n                get max() {\n                  return M.WGS84.options.crs.gcrs.horizontal.max;\n                }\n              },\n              vertical: {\n                name: 'latitude',\n                get min() {\n                  return M.WGS84.options.crs.gcrs.vertical.min;\n                },\n                get max() {\n                  return M.WGS84.options.crs.gcrs.vertical.max;\n                }\n              },\n              get bounds() {\n                return M.WGS84.options.bounds;\n              }\n            },\n            gcrs: {\n              horizontal: {\n                name: 'longitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: -180.0,\n                max: 180.0\n              },\n              vertical: {\n                name: 'latitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: -90.0,\n                max: 90.0\n              },\n              get bounds() {\n                return L.latLngBounds(\n                  [\n                    M.WGS84.options.crs.gcrs.vertical.min,\n                    M.WGS84.options.crs.gcrs.horizontal.min\n                  ],\n                  [\n                    M.WGS84.options.crs.gcrs.vertical.max,\n                    M.WGS84.options.crs.gcrs.horizontal.max\n                  ]\n                );\n              }\n            },\n            map: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: (map) => map.getSize().x\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: (map) => map.getSize().y\n              },\n              bounds: (map) => L.bounds(L.point([0, 0]), map.getSize())\n            },\n            tile: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: 256\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: 256\n              },\n              get bounds() {\n                return L.bounds(\n                  [\n                    M.WGS84.options.crs.tile.horizontal.min,\n                    M.WGS84.options.crs.tile.vertical.min\n                  ],\n                  [\n                    M.WGS84.options.crs.tile.horizontal.max,\n                    M.WGS84.options.crs.tile.vertical.max\n                  ]\n                );\n              }\n            },\n            tilematrix: {\n              horizontal: {\n                name: 'column',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.WGS84.options.crs.tcrs.horizontal.max(zoom) /\n                      M.WGS84.options.crs.tile.bounds.getSize().x\n                  )\n              },\n              vertical: {\n                name: 'row',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.WGS84.options.crs.tcrs.vertical.max(zoom) /\n                      M.WGS84.options.crs.tile.bounds.getSize().y\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [\n                    M.WGS84.options.crs.tilematrix.horizontal.min,\n                    M.WGS84.options.crs.tilematrix.vertical.min\n                  ],\n                  [\n                    M.WGS84.options.crs.tilematrix.horizontal.max(zoom),\n                    M.WGS84.options.crs.tilematrix.vertical.max(zoom)\n                  ]\n                )\n            }\n          }\n        }\n      );\n      M.CBMTILE = new L.Proj.CRS(\n        'EPSG:3978',\n        '+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs',\n        {\n          origin: [-34655800, 39310000],\n          bounds: L.bounds([\n            [-34655800, -39000000],\n            [10000000, 39310000]\n          ]),\n          resolutions: [\n            38364.660062653464, 22489.62831258996, 13229.193125052918,\n            7937.5158750317505, 4630.2175937685215, 2645.8386250105837,\n            1587.5031750063501, 926.0435187537042, 529.1677250021168,\n            317.50063500127004, 185.20870375074085, 111.12522225044451,\n            66.1459656252646, 38.36466006265346, 22.48962831258996,\n            13.229193125052918, 7.9375158750317505, 4.6302175937685215,\n            2.6458386250105836, 1.5875031750063502, 0.92604351875370428,\n            0.52916772500211673, 0.31750063500127002, 0.18520870375074083,\n            0.11112522225044451, 0.066145965625264591\n          ],\n          crs: {\n            tcrs: {\n              horizontal: {\n                name: 'x',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.CBMTILE.options.bounds.getSize().x /\n                      M.CBMTILE.options.resolutions[zoom]\n                  )\n              },\n              vertical: {\n                name: 'y',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.CBMTILE.options.bounds.getSize().y /\n                      M.CBMTILE.options.resolutions[zoom]\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [\n                    M.CBMTILE.options.crs.tcrs.horizontal.min,\n                    M.CBMTILE.options.crs.tcrs.vertical.min\n                  ],\n                  [\n                    M.CBMTILE.options.crs.tcrs.horizontal.max(zoom),\n                    M.CBMTILE.options.crs.tcrs.vertical.max(zoom)\n                  ]\n                )\n            },\n            pcrs: {\n              horizontal: {\n                name: 'easting',\n                get min() {\n                  return M.CBMTILE.options.bounds.min.x;\n                },\n                get max() {\n                  return M.CBMTILE.options.bounds.max.x;\n                }\n              },\n              vertical: {\n                name: 'northing',\n                get min() {\n                  return M.CBMTILE.options.bounds.min.y;\n                },\n                get max() {\n                  return M.CBMTILE.options.bounds.max.y;\n                }\n              },\n              get bounds() {\n                return M.CBMTILE.options.bounds;\n              }\n            },\n            gcrs: {\n              horizontal: {\n                name: 'longitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: -141.01,\n                max: -47.74\n              },\n              vertical: {\n                name: 'latitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: 40.04,\n                max: 86.46\n              },\n              get bounds() {\n                return L.latLngBounds(\n                  [\n                    M.CBMTILE.options.crs.gcrs.vertical.min,\n                    M.CBMTILE.options.crs.gcrs.horizontal.min\n                  ],\n                  [\n                    M.CBMTILE.options.crs.gcrs.vertical.max,\n                    M.CBMTILE.options.crs.gcrs.horizontal.max\n                  ]\n                );\n              }\n            },\n            map: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: (map) => map.getSize().x\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: (map) => map.getSize().y\n              },\n              bounds: (map) => L.bounds(L.point([0, 0]), map.getSize())\n            },\n            tile: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: 256\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: 256\n              },\n              get bounds() {\n                return L.bounds(\n                  [\n                    M.CBMTILE.options.crs.tile.horizontal.min,\n                    M.CBMTILE.options.crs.tile.vertical.min\n                  ],\n                  [\n                    M.CBMTILE.options.crs.tile.horizontal.max,\n                    M.CBMTILE.options.crs.tile.vertical.max\n                  ]\n                );\n              }\n            },\n            tilematrix: {\n              horizontal: {\n                name: 'column',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.CBMTILE.options.crs.tcrs.horizontal.max(zoom) /\n                      M.CBMTILE.options.crs.tile.bounds.getSize().x\n                  )\n              },\n              vertical: {\n                name: 'row',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.CBMTILE.options.crs.tcrs.vertical.max(zoom) /\n                      M.CBMTILE.options.crs.tile.bounds.getSize().y\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [0, 0],\n                  [\n                    M.CBMTILE.options.crs.tilematrix.horizontal.max(zoom),\n                    M.CBMTILE.options.crs.tilematrix.vertical.max(zoom)\n                  ]\n                )\n            }\n          }\n        }\n      );\n      M.APSTILE = new L.Proj.CRS(\n        'EPSG:5936',\n        '+proj=stere +lat_0=90 +lat_ts=50 +lon_0=-150 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m +no_defs',\n        {\n          origin: [-2.8567784109255e7, 3.2567784109255e7],\n          bounds: L.bounds([\n            [-28567784.109254867, -28567784.109254755],\n            [32567784.109255023, 32567784.10925506]\n          ]),\n          resolutions: [\n            238810.813354, 119405.406677, 59702.7033384999, 29851.3516692501,\n            14925.675834625, 7462.83791731252, 3731.41895865639, 1865.70947932806,\n            932.854739664032, 466.427369832148, 233.213684916074,\n            116.606842458037, 58.3034212288862, 29.1517106145754,\n            14.5758553072877, 7.28792765351156, 3.64396382688807,\n            1.82198191331174, 0.910990956788164, 0.45549547826179\n          ],\n          crs: {\n            tcrs: {\n              horizontal: {\n                name: 'x',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.APSTILE.options.bounds.getSize().x /\n                      M.APSTILE.options.resolutions[zoom]\n                  )\n              },\n              vertical: {\n                name: 'y',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.APSTILE.options.bounds.getSize().y /\n                      M.APSTILE.options.resolutions[zoom]\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [\n                    M.APSTILE.options.crs.tcrs.horizontal.min,\n                    M.APSTILE.options.crs.tcrs.vertical.min\n                  ],\n                  [\n                    M.APSTILE.options.crs.tcrs.horizontal.max(zoom),\n                    M.APSTILE.options.crs.tcrs.vertical.max(zoom)\n                  ]\n                )\n            },\n            pcrs: {\n              horizontal: {\n                name: 'easting',\n                get min() {\n                  return M.APSTILE.options.bounds.min.x;\n                },\n                get max() {\n                  return M.APSTILE.options.bounds.max.x;\n                }\n              },\n              vertical: {\n                name: 'northing',\n                get min() {\n                  return M.APSTILE.options.bounds.min.y;\n                },\n                get max() {\n                  return M.APSTILE.options.bounds.max.y;\n                }\n              },\n              get bounds() {\n                return M.APSTILE.options.bounds;\n              }\n            },\n            gcrs: {\n              horizontal: {\n                name: 'longitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: -180.0,\n                max: 180.0\n              },\n              vertical: {\n                name: 'latitude',\n                // set min/max axis values from EPSG registry area of use, retrieved 2019-07-25\n                min: 60.0,\n                max: 90.0\n              },\n              get bounds() {\n                return L.latLngBounds(\n                  [\n                    M.APSTILE.options.crs.gcrs.vertical.min,\n                    M.APSTILE.options.crs.gcrs.horizontal.min\n                  ],\n                  [\n                    M.APSTILE.options.crs.gcrs.vertical.max,\n                    M.APSTILE.options.crs.gcrs.horizontal.max\n                  ]\n                );\n              }\n            },\n            map: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: (map) => map.getSize().x\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: (map) => map.getSize().y\n              },\n              bounds: (map) => L.bounds(L.point([0, 0]), map.getSize())\n            },\n            tile: {\n              horizontal: {\n                name: 'i',\n                min: 0,\n                max: 256\n              },\n              vertical: {\n                name: 'j',\n                min: 0,\n                max: 256\n              },\n              get bounds() {\n                return L.bounds(\n                  [\n                    M.APSTILE.options.crs.tile.horizontal.min,\n                    M.APSTILE.options.crs.tile.vertical.min\n                  ],\n                  [\n                    M.APSTILE.options.crs.tile.horizontal.max,\n                    M.APSTILE.options.crs.tile.vertical.max\n                  ]\n                );\n              }\n            },\n            tilematrix: {\n              horizontal: {\n                name: 'column',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.APSTILE.options.crs.tcrs.horizontal.max(zoom) /\n                      M.APSTILE.options.crs.tile.bounds.getSize().x\n                  )\n              },\n              vertical: {\n                name: 'row',\n                min: 0,\n                max: (zoom) =>\n                  Math.round(\n                    M.APSTILE.options.crs.tcrs.vertical.max(zoom) /\n                      M.APSTILE.options.crs.tile.bounds.getSize().y\n                  )\n              },\n              bounds: (zoom) =>\n                L.bounds(\n                  [0, 0],\n                  [\n                    M.APSTILE.options.crs.tilematrix.horizontal.max(zoom),\n                    M.APSTILE.options.crs.tilematrix.vertical.max(zoom)\n                  ]\n                )\n            }\n          }\n        }\n      );\n      M.OSMTILE = L.CRS.EPSG3857;\n      L.setOptions(M.OSMTILE, {\n        origin: [-20037508.342787, 20037508.342787],\n        bounds: L.bounds([\n          [-20037508.342787, -20037508.342787],\n          [20037508.342787, 20037508.342787]\n        ]),\n        resolutions: [\n          156543.0339, 78271.51695, 39135.758475, 19567.8792375, 9783.93961875,\n          4891.969809375, 2445.9849046875, 1222.9924523438, 611.49622617188,\n          305.74811308594, 152.87405654297, 76.437028271484, 38.218514135742,\n          19.109257067871, 9.5546285339355, 4.7773142669678, 2.3886571334839,\n          1.1943285667419, 0.59716428337097, 0.29858214168549, 0.14929107084274,\n          0.074645535421371, 0.03732276771068573, 0.018661383855342865,\n          0.009330691927671432495\n        ],\n        crs: {\n          tcrs: {\n            horizontal: {\n              name: 'x',\n              min: 0,\n              max: (zoom) =>\n                Math.round(\n                  M.OSMTILE.options.bounds.getSize().x /\n                    M.OSMTILE.options.resolutions[zoom]\n                )\n            },\n            vertical: {\n              name: 'y',\n              min: 0,\n              max: (zoom) =>\n                Math.round(\n                  M.OSMTILE.options.bounds.getSize().y /\n                    M.OSMTILE.options.resolutions[zoom]\n                )\n            },\n            bounds: (zoom) =>\n              L.bounds(\n                [\n                  M.OSMTILE.options.crs.tcrs.horizontal.min,\n                  M.OSMTILE.options.crs.tcrs.vertical.min\n                ],\n                [\n                  M.OSMTILE.options.crs.tcrs.horizontal.max(zoom),\n                  M.OSMTILE.options.crs.tcrs.vertical.max(zoom)\n                ]\n              )\n          },\n          pcrs: {\n            horizontal: {\n              name: 'easting',\n              get min() {\n                return M.OSMTILE.options.bounds.min.x;\n              },\n              get max() {\n                return M.OSMTILE.options.bounds.max.x;\n              }\n            },\n            vertical: {\n              name: 'northing',\n              get min() {\n                return M.OSMTILE.options.bounds.min.y;\n              },\n              get max() {\n                return M.OSMTILE.options.bounds.max.y;\n              }\n            },\n            get bounds() {\n              return M.OSMTILE.options.bounds;\n            }\n          },\n          gcrs: {\n            horizontal: {\n              name: 'longitude',\n              get min() {\n                return M.OSMTILE.unproject(M.OSMTILE.options.bounds.min).lng;\n              },\n              get max() {\n                return M.OSMTILE.unproject(M.OSMTILE.options.bounds.max).lng;\n              }\n            },\n            vertical: {\n              name: 'latitude',\n              get min() {\n                return M.OSMTILE.unproject(M.OSMTILE.options.bounds.min).lat;\n              },\n              get max() {\n                return M.OSMTILE.unproject(M.OSMTILE.options.bounds.max).lat;\n              }\n            },\n            get bounds() {\n              return L.latLngBounds(\n                [\n                  M.OSMTILE.options.crs.gcrs.vertical.min,\n                  M.OSMTILE.options.crs.gcrs.horizontal.min\n                ],\n                [\n                  M.OSMTILE.options.crs.gcrs.vertical.max,\n                  M.OSMTILE.options.crs.gcrs.horizontal.max\n                ]\n              );\n            }\n          },\n          map: {\n            horizontal: {\n              name: 'i',\n              min: 0,\n              max: (map) => map.getSize().x\n            },\n            vertical: {\n              name: 'j',\n              min: 0,\n              max: (map) => map.getSize().y\n            },\n            bounds: (map) => L.bounds(L.point([0, 0]), map.getSize())\n          },\n          tile: {\n            horizontal: {\n              name: 'i',\n              min: 0,\n              max: 256\n            },\n            vertical: {\n              name: 'j',\n              min: 0,\n              max: 256\n            },\n            get bounds() {\n              return L.bounds(\n                [\n                  M.OSMTILE.options.crs.tile.horizontal.min,\n                  M.OSMTILE.options.crs.tile.vertical.min\n                ],\n                [\n                  M.OSMTILE.options.crs.tile.horizontal.max,\n                  M.OSMTILE.options.crs.tile.vertical.max\n                ]\n              );\n            }\n          },\n          tilematrix: {\n            horizontal: {\n              name: 'column',\n              min: 0,\n              max: (zoom) =>\n                Math.round(\n                  M.OSMTILE.options.crs.tcrs.horizontal.max(zoom) /\n                    M.OSMTILE.options.crs.tile.bounds.getSize().x\n                )\n            },\n            vertical: {\n              name: 'row',\n              min: 0,\n              max: (zoom) =>\n                Math.round(\n                  M.OSMTILE.options.crs.tcrs.vertical.max(zoom) /\n                    M.OSMTILE.options.crs.tile.bounds.getSize().y\n                )\n            },\n            bounds: (zoom) =>\n              L.bounds(\n                [0, 0],\n                [\n                  M.OSMTILE.options.crs.tilematrix.horizontal.max(zoom),\n                  M.OSMTILE.options.crs.tilematrix.vertical.max(zoom)\n                ]\n              )\n          }\n        }\n      });\n    })();\n\n    M._handleLink = Util._handleLink;\n    M.convertPCRSBounds = Util.convertPCRSBounds;\n    M.axisToXY = Util.axisToXY;\n    M.csToAxes = Util.csToAxes;\n    M._convertAndFormatPCRS = Util._convertAndFormatPCRS;\n    M.extentToBounds = Util.extentToBounds;\n    M.axisToCS = Util.axisToCS;\n    M._parseNumber = Util._parseNumber;\n    M._splitCoordinate = Util._splitCoordinate;\n    M.boundsToPCRSBounds = Util.boundsToPCRSBounds;\n    M.pixelToPCRSBounds = Util.pixelToPCRSBounds;\n    M._metaContentToObject = Util._metaContentToObject;\n    M._coordsToArray = Util._coordsToArray;\n    M.pointToPCRSPoint = Util.pointToPCRSPoint;\n    M.pixelToPCRSPoint = Util.pixelToPCRSPoint;\n    M._gcrsToTileMatrix = Util._gcrsToTileMatrix;\n    M._pasteLayer = Util._pasteLayer;\n    M._properties2Table = Util._properties2Table;\n    M._updateExtent = Util._updateExtent;\n    M.geojson2mapml = Util.geojson2mapml;\n    M._breakArray = Util._breakArray;\n    M._table2properties = Util._table2properties;\n    M._geometry2geojson = Util._geometry2geojson;\n    M._pcrsToGcrs = Util._pcrsToGcrs;\n    M.mapml2geojson = Util.mapml2geojson;\n    M.getMaxZoom = Util.getMaxZoom;\n    M.getBoundsFromMeta = Util.getBoundsFromMeta;\n    M.getZoomBoundsFromMeta = Util.getZoomBoundsFromMeta;\n    M.getZoomBounds = Util.getZoomBounds;\n    M.getNativeVariables = Util.getNativeVariables;\n    M.getClosest = Util.getClosest;\n\n    M.QueryHandler = QueryHandler;\n    M.ContextMenu = ContextMenu;\n    M.AnnounceMovement = AnnounceMovement;\n    M.FeatureIndex = FeatureIndex;\n\n    // see https://leafletjs.com/examples/extending/extending-3-controls.html#handlers\n    L.Map.addInitHook('addHandler', 'query', M.QueryHandler);\n    L.Map.addInitHook('addHandler', 'contextMenu', M.ContextMenu);\n    L.Map.addInitHook('addHandler', 'announceMovement', M.AnnounceMovement);\n    L.Map.addInitHook('addHandler', 'featureIndex', M.FeatureIndex);\n\n    M.MapMLLayer = MapMLLayer;\n    M.mapMLLayer = mapMLLayer;\n\n    M.ImageLayer = ImageLayer;\n    M.imageLayer = imageLayer;\n\n    M.TemplatedImageLayer = TemplatedImageLayer;\n    M.templatedImageLayer = templatedImageLayer;\n\n    M.TemplatedFeaturesLayer = TemplatedFeaturesLayer;\n    M.templatedFeaturesLayer = templatedFeaturesLayer;\n\n    M.ExtentLayer = ExtentLayer;\n    M.extentLayer = extentLayer;\n\n    M.TemplatedTileLayer = TemplatedTileLayer;\n    M.templatedTileLayer = templatedTileLayer;\n\n    M.FeatureLayer = FeatureLayer;\n    M.featureLayer = featureLayer;\n\n    M.LayerControl = LayerControl;\n    M.layerControl = layerControl;\n\n    M.AttributionButton = AttributionButton;\n    M.attributionButton = attributionButton;\n\n    M.ReloadButton = ReloadButton;\n    M.reloadButton = reloadButton;\n\n    M.ScaleBar = ScaleBar;\n    M.scaleBar = scaleBar;\n\n    M.FullscreenButton = FullscreenButton;\n    M.fullscreenButton = fullscreenButton;\n\n    M.geolocationButton = geolocationButton;\n\n    M.StaticTileLayer = StaticTileLayer;\n    M.staticTileLayer = staticTileLayer;\n\n    M.DebugOverlay = DebugOverlay;\n    M.debugOverlay = debugOverlay;\n\n    M.Crosshair = Crosshair;\n    M.crosshair = crosshair;\n\n    M.FeatureIndexOverlay = FeatureIndexOverlay;\n    M.featureIndexOverlay = featureIndexOverlay;\n\n    M.Path = Path;\n    M.path = path;\n\n    M.FeatureRenderer = FeatureRenderer;\n    M.featureRenderer = featureRenderer;\n\n    M.Geometry = Geometry;\n    M.geometry = geometry;\n\n    // element support\n    M._createLayerControlExtentHTML = createLayerControlExtentHTML;\n    M._createLayerControlHTML = createLayerControlHTML;\n    M.ZoomInput = ZoomInput;\n    M.HiddenInput = HiddenInput;\n    M.WidthInput = WidthInput;\n    M.HeightInput = HeightInput;\n    M.LocationInput = LocationInput;\n\n    // constants\n    M.TILE_SIZE = 256;\n    M.FALLBACK_PROJECTION = 'OSMTILE';\n    M.FALLBACK_CS = 'TILEMATRIX';\n    M.BLANK_TT_TREF = 'mapmltemplatedtileplaceholder';\n\n    M.DOMTokenList = DOMTokenList;\n    M.protomapsL = protomapsL;\n    M.templatedPMTilesLayer = templatedPMTilesLayer;\n    M.TemplatedPMTilesLayer = TemplatedPMTilesLayer;\n  })(window);\n\n})();\n"],"names":["staticTileLayer","options","StaticTileLayer","layerControl","layers","LayerControl","featureLayer","mapml","FeatureLayer","templatedTileLayer","template","TemplatedTileLayer","extentLayer","ExtentLayer","templatedFeaturesLayer","TemplatedFeaturesLayer","templatedImageLayer","TemplatedImageLayer","L","GridLayer","extend","initialize","setOptions","this","zoomBounds","_getZoomBounds","tileContainer","maxZoomBound","_groups","_groupTiles","getElementsByTagName","_bounds","_getLayerBounds","projection","layerBounds","Object","keys","let","key","min","max","onAdd","map","_map","prototype","call","_handleMoveEnd","getEvents","events","_parentOnMoveEnd","moveend","move","isVisible","mapZoom","getZoom","zoomLevel","maxNativeZoom","minNativeZoom","maxZoom","minZoom","overlaps","M","pixelToPCRSBounds","getPixelBounds","e","_isValidTile","coords","_tileCoordsToKey","createTile","tileGroup","tileElem","document","createElement","tileSize","getTileSize","setAttribute","x","y","z","i","length","tile","width","height","alt","src","appendChild","tileGroups","crs","bounds","sCoords","split","pixelCoords","point","pixelBounds","zoom","container","meta","_metaContentToObject","_leafletLayer","_layerEl","querySelector","getAttribute","tiles","nativeZoom","value","lZoom","Math","tileMap","row","col","tileCode","push","Control","Layers","autoZIndex","sortLayers","sortFunction","layerA","layerB","zIndex","overlays","_layerControlInputs","_layers","_lastZIndex","_handlingClick","_addLayer","_initLayout","DomEvent","on","_container","_focusFirstLayer","_preventDefaultContextMenu","_update","_showControls","onRemove","off","addOrUpdateOverlay","layer","name","alreadyThere","addOverlay","removeAttribute","removeLayer","_checkDisabledLayers","elem","className","children","setTimeout","focus","DomUtil","empty","_baseLayersList","_overlaysList","baseLayersPresent","overlaysPresent","obj","baseLayersCount","sort","a","b","_addItem","overlay","hideSingleBase","style","display","_separator","layercontrols","_layerControlHTML","input","layerId","stamp","collapse","includes","contextMenu","_extentLayerMenu","hidden","_layerMenu","target","tagName","relatedTarget","parentElement","removeClass","originalEvent","pointerType","_isExpanded","latlng","mouseEventToLatLng","containerPoint","mouseEventToContainerPoint","preventDefault","fire","FeatureGroup","query","create","pane","addClass","renderer","_queryFeatures","features","_features","_staticFeature","mapEl","withinZoom","_validateRendering","showPaginationFeature","addLayer","layerToAdd","featureZoom","mapmlFeature","addRendering","featureToAdd","remove","featureIndex","cleanIndex","featureToRemove","_leaflet_id","_removeFromFeaturesList","id","removeRendering","feature","splice","zoomend","_handleZoomEnd","_linkEl","shadowRoot","replaceChildren","clearLayers","addFeature","popup","_navigationBar","innerText","_totalFeatureCount","_content","srcdoc","innerHTML","currFeature","once","_removeCSS","hasLayer","k","geometry","renderable","_checkRender","placeholder","defaultOptions","group","parentNode","replaceWith","insertAdjacentElement","_setZoomTransform","center","clampZoom","scale","getZoomScale","translate","multiplyBy","subtract","_getNewPixelOrigin","round","any3d","setTransform","setPosition","createGeometry","fallbackCS","tileZoom","assign","filter","classList","title","properties","add","insertAdjacentHTML","cs","extentToBounds","extent","_geometryToLayer","color","hasAttribute","resetStyle","onEachFeature","bindTooltip","interactive","sticky","toUpperCase","_groupEl","Util","_setLayerStyle","setStyle","eachLayer","toDelete","querySelectorAll","removeChild","vectorOptions","svgGroup","SVG","copyOptions","_featureEl","geo","path","nativeCS","featureID","wrappers","_getGeometryParents","groupOptions","accessibleTitle","collections","subType","elems","concat","TileLayer","tms","_setUpTileTemplateVars","linkEl","extentBounds","_template","_initContainer","child","getMapEl","mapBounds","_updateZIndex","dispatchEvent","CustomEvent","detail","appendTile","type","startsWith","_url","BLANK_TT_TREF","_fetchTile","_mapmlTileReady","getPane","url","getTileUrl","fetch","redirect","then","response","status","Promise","resolve","console","log","reject","text","DOMParser","parseFromString","_createFeatures","catch","_parseStylesheetAsHTML","base","Element","URL","href","styleElm","ss","stylesheets","nodeName","linkElm","copyAttributes","textContent","s","source","Array","from","attributes","forEach","attribute","nodeValue","markup","svg","g","xOffset","yOffset","tileFeatures","fallback","getNativeVariables","FeatureRenderer","_initPath","_project","_addPath","_updateFeature","toString","tilematrix","contains","v","zoomInput","_getZoomForUrl","pcrs","easting","left","_tileMatrixToPCRSPosition","right","northing","top","bottom","indexOf","infinite","invertedY","_globalTileRange","r","detectRetina","Browser","retina","pos","nwPoint","scaleBy","sePoint","centrePoint","floor","nw","transformation","untransform","se","cen","result","Point","east","north","inputs","values","units","axis","position","select","toLowerCase","horizontal","resolutions","isNaN","Number","parseFloat","vertical","match","parsedselect","htmlselect","pcrs2tilematrix","c","transform","divideBy","bind","initialValue","boundsToPCRSBounds","axisToCS","pcrsBounds","zmin","zmax","_clampZoom","clamp","step","LayerGroup","_extentEl","extentEl","changeOpacity","opacity","zoomstart","_onZoomStart","closePopup","getContainer","parentLayer","_layer","redraw","setZIndex","undefined","_previousFeature","_count","_nextFeature","_source","_opacity","_opacitySlider","appendStyleLink","mapLink","link","positionAndNode","_getStylePositionAndNode","node","lastChild","appendStyleElement","mapStyle","styleElement","Layer","_setUpFeaturesTemplateVars","_onMoveEnd","addTo","featureRenderer","bindPopup","autoClose","minWidth","getLayerEl","parent","history","_history","current","previous","steppedZoom","headers","parser","context","_pullFeatureFeed","scaleBounds","getCenter","_getfeaturesUrl","Headers","Accept","limit","frag","createDocumentFragment","elements","featuresReady","whenReady","allSettled","_updateTabIndex","error","layerNum","_path","childElementCount","getSize","_TCRSToPCRS","featuresVarNames","_setUpExtentTemplateVars","_clearLayer","_onAdd","containerImages","_addImage","loc","overlayToRemove","_imageOverlay","getImageUrl","size","imageLayer","_step","_overlayToRemove","_scaleImage","_image","_pixelOrigins","getPixelOrigin","pixelOrigin","extentVarNames","guard","low","high","clone","p","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","_mult","div","_div","rotate","_rotate","rotateAround","_rotateAround","matMult","m","_matMult","unit","_unit","perp","_perp","_round","mag","sqrt","equals","other","dist","distSqr","dx","dy","angle","atan2","angleTo","angleWith","angleWithSep","cos","sin","constructor","convert","isArray","Error","ColorError","super","ColorError$1","parseToRgba","trim","normalizedColor","namedColorRegex","test","normalizedColorName","compressedColorMap","str","hash","charCodeAt","nameToHex","reducedHexMatch","reducedHexRegex","exec","arr","slice","parseInt","hexMatch","hexRegex","rgbaMatch","rgbaRegex","hslaMatch","hslaRegex","h","l","hslToRgb","colorToInt","replace","reduce","acc","next","substring","hex","prefix","amount","join","RegExp","roundColor","hue","saturation","lightness","huePrime","chroma","abs","secondComponent","red","green","blue","lightnessModification","finalRed","finalGreen","finalBlue","mix","color1","color2","weight","normalize","n","index","r1","g1","b1","a1","r2","g2","b2","a2","alphaDelta","normalizedWeight","weight2","weight1","alpha","toFixed","VectorTileFeature","pbf","end","_pbf","_geometry","_keys","_values","readFields","readFeature","loadGeometry","cmdLen","readVarint","lines","line","cmd","readSVarint","bbox","x1","Infinity","x2","y1","y2","toGeoJSON","pow","x0","y0","vtCoords","projectPoint","PI","atan","exp","projectLine","points","coordinates","polygon","rings","len","polygons","ccw","area","ring","sum","j","p1","p2","signedArea","classifyRings","tag","readTag","types","VectorTileLayer","version","readLayer","readString","readFloat","readDouble","readVarint64","readBoolean","readValueMessage","VectorTile","readTile","SHIFT_LEFT_32","SHIFT_RIGHT_32","utf8TextDecoder","TextDecoder","Pbf","buf","Uint8Array","ArrayBuffer","isView","dataView","DataView","buffer","readField","val","startPos","skip","readMessage","readFixed32","getUint32","readSFixed32","getInt32","readFixed64","readSFixed64","getFloat32","getFloat64","isSigned","toNum$1","readVarintRemainder$1","num","Boolean","decode","subarray","b0","bytesPerSequence","b3","String","fromCharCode","readUtf8","readBytes","readPackedVarint","readPackedEnd","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","writeVarint","realloc","set","finish","writeFixed32","setInt32","writeSFixed32","writeFixed64","writeSFixed64","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeSVarint","writeBoolean","writeString","lead","writeUtf8","makeRoomForExtraLength","writeFloat","setFloat32","writeDouble","setFloat64","writeBytes","writeRawMessage","fn","writeMessage","writePackedVarint","writePackedSVarint","writePackedBoolean","writePackedFloat","writePackedDouble","writePackedFixed32","writePackedSFixed32","writePackedFixed64","writePackedSFixed64","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","extraLen","LN2","freb","eb","start","u16","i32","__pow","__async","__this","__arguments","generator","fulfilled","rejected","throw","done","apply","u8","Uint16Array","Int32Array","fleb","fdeb","clim","_a","fl","fd","rev","hMap","cd","mb","le","co","rvb","sv","r_1","flt","fdt","inflt","dat","st","dict","sl","dl","f","noBuf","noSt","cbuf","l2","bl","nbuf","final","bt","lm","dm","d","lbt","dbt","tbts","bits","shft","t","err","flrm","fdrm","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","bits16","dsym","shift2","dend","slc","gzs","flg","zs","gzl","zls","o","ec","ind","msg","nt","code","captureStackTrace","et$1","decompressSync","data","opts","out","dictionary","td","stream","shift","unshift","getUint24","view","getUint16","getUint8","getUint48","queryTile","offsetLen","queryView","offset","isDir","byteLength","cmp","tz","tx","ty","compare","entrySort","parseEntry","dataview","zRaw","sortDir","entries","createDirectory","entry","v2_default","getHeader","resp","getBytes","jsonSize","rootEntries","dec","jsonMetadata","JSON","parse","tileCompression","compression","minzoom","maxzoom","centerLon","centerLat","centerZoom","minLon","minLat","maxLon","maxLat","specVersion","rootDirectoryOffset","rootDirectoryLength","jsonMetadataOffset","jsonMetadataLength","leafDirectoryOffset","leafDirectoryLength","tileDataOffset","tileDataLength","numAddressedTiles","numTileEntries","numTileContents","clustered","internalCompression","tileType","etag","getZxy","header","cache","signal","rootDir","getArrayBuffer","tileData","leafcoords","numEntries","leafLevel","levelDiff","trunc","deriveLeaf","leafdirEntry","queryLeafdir","leafDir","tileEntry","toNum","readVarintRemainder","tzValues","defaultDecompress","globalThis","DecompressionStream","Response","body","pipeThrough","arrayBuffer","FetchSource","customHeaders","mustReload","getKey","setHeaders","passedSignal","controller","AbortController","requestHeaders","contentRange","get","actualLength","substr","range","newEtag","EtagMismatch","contentLength","abort","cacheControl","expires","getUint64","wh","wl","deserializeIndex","lastId","tileId","runLength","getHeaderAndRoot","decompress","warn","detectVersion","bytes","bytesToHeader","rootDirData","dirKey","SharedPromiseCache","maxCacheEntries","prefetch","Map","invalidations","counter","cacheKey","cacheValue","lastUsed","res","prune","getDirectory","directory","has","minUsed","minKey","delete","invalidate","PMTiles","getZxyAttempt","ry","xy","rx","zxyToTileId","dO","dL","depth","findTile","getMetadataAttempt","decompressed","getMetadata","quickselect","quickselectStep","newLeft","newRight","sd","swap","defaultCompare","tmp","RBush","maxEntries","_maxEntries","_minEntries","ceil","clear","all","_all","search","intersects","toBBox","nodesToSearch","childBBox","leaf","pop","collides","load","insert","_build","tmpNode","_splitRoot","_insert","item","createNode","equalsFn","indexes","goingUp","items","findItem","_condense","compareMinX","minX","compareMinY","minY","toJSON","fromJSON","N","calcBBox","N2","N1","multiSelect","right2","right3","_chooseSubtree","level","minArea","minEnlargement","targetNode","bboxArea","enlargement","maxX","maxY","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","minOverlap","bbox1","distBBox","bbox2","overlap","compareNodeMinX","compareNodeMinY","_allDistMargin","leftBBox","rightBBox","margin","bboxMargin","siblings","destNode","stack","mid","pt","defineProperty","A","configurable","D","he","perFeature","M$1","be","T","pe","labelProps","textTransform","hasOwnProperty","props","E","ge","font","family","fontFamily","fontSize","fontWeight","fontStyle","ye","q","gt","u","beginIndex","beginDistance","endIndex","endDistance","acos","Ue","Ge","xe","lastIndexOf","rt","Line","Polygon","Y","kt","geom","geomType","numVertices","we","zoomaborts","shouldCancelZooms","H","ke","Q","_e","Qe","U","zt","et","G","Tt","tt","Pt","Lt","vt","Ct","ze","inflight","used","performance","now","queryFeatures","_","layerName","ee","St","Left","Center","Right","At","Ne","Se","S","Sw","W","Nw","zr","getContext","ve","pattern","fill","stroke","doStroke","before","globalAlpha","fillStyle","strokeStyle","lineWidth","createPattern","draw","beginPath","moveTo","lineTo","P","Tr","Dt","Mt","Ot","F","Pr","Le","Ce","dash","dashColor","dashWidth","lineCap","lineJoin","save","setLineDash","restore","O","sheet","dpr","window","devicePixelRatio","place","w","anchor","bboxes","drawImage","canvas","it","Ae","radius","arc","te","De","background","padding","scratch","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","fillRect","fillText","at","Me","list","Oe","re","Re","symbolizer","justify","Te","Fe","ot","je","lineHeight","letterSpacing","maxLineCodeUnits","maxLineChars","C","strokeText","ne","Xe","centered","I","Ye","offsetX","offsetY","placements","ddValues","bboxCollides","order","computeXaxisOffset","computeYaxisOffset","computeJustify","Pe","Ie","ie","Rt","Above","Below","Be","maxLabelCodeUnits","maxLabelChars","repeatDistance","overzoom","deduplicationKey","deduplicationDistance","$","R","ct","ae","dataLayer","earth","park_a","park_b","hospital","industrial","school","beach","zoo","wood_a","wood_b","scrub_a","scrub_b","glacier","sand","aerodrome","water","runway","pier","pedestrian","buildings","major","boundaries","railway","roads_label_minor","roads_label_minor_halo","roads_label_major","roads_label_major_halo","ocean_label","state_label","state_label_halo","country_label","city_label","city_circle","city_circle_stroke","city_label_halo","oe","light","military","tunnel_other_casing","tunnel_minor_casing","tunnel_link_casing","tunnel_medium_casing","tunnel_major_casing","tunnel_highway_casing","tunnel_other","tunnel_minor","tunnel_link","tunnel_medium","tunnel_major","tunnel_highway","transit_pier","minor_service_casing","minor_casing","link_casing","medium_casing","major_casing_late","highway_casing_late","minor_service","minor_a","minor_b","medium","major_casing_early","highway_casing_early","highway","waterway_label","bridges_other_casing","bridges_minor_casing","bridges_link_casing","bridges_medium_casing","bridges_major_casing","bridges_highway_casing","bridges_other","bridges_minor","bridges_link","bridges_medium","bridges_major","bridges_highway","peak_label","subplace_label","subplace_label_halo","dark","white","grayscale","black","ce","$e","tileCache","maxDataLevel","dataTilesForBounds","dataTile","origin","dim","dataTileForDisplayTile","getBbox","getDisplayTile","fe","maxDataZoom","pathname","endsWith","sources","Nt","log2","We","tree","maxLabeledTiles","hasPrefix","searchBbox","Set","indexedLabel","searchLabel","labelCollides","deduplicationCollides","makeEntry","tileKey","pruneOrNoop","pruneKey","removeLabel","Je","He","labelRules","callback","layout","visible","dataSource","findInvalidatedTiles","V","Ve","labelers","getIndex","Z","ue","miterLimit","rect","clip","strokeRect","K","ft","mt","Jt","lat","lng","Wt","Ht","ut","Ze","theme","paintRules","backgroundColor","views","debug","drawContext","promise","reason","elapsed","project","unproject","drawCanvas","arguments","clientWidth","clientHeight","lang","drawContextBounds","drawCanvasBounds","Zt","Kt","Pn","noWrap","attribution","lastRequestedZ","tasks","onTilesInvalidated","rerenderTile","tileDelay","renderTile","de","wrap","_getTiledPixelBounds","_pxBoundsToTileRange","distanceTo","clearRect","xray","me","_tiles","_wrapCoords","_keyToTileCoords","el","queryTileFeaturesDebug","clearLayout","rerenderTiles","_removeTile","removed","Sn","FontFace","fonts","ht","Image","onload","onerror","Ke","mapping","missingBox","btoa","img","XMLSerializer","serializeToString","boxes","maxWidth","box","last","spaces","space","potpack","templatedPMTilesLayer","TemplatedPMTilesLayer","location","ImageLayer","mapMLLayer","MapMLLayer","debugOverlay","DebugOverlay","protomapsL","freeze","__proto__","CenteredSymbolizer","CenteredTextSymbolizer","CircleSymbolizer","FlexSymbolizer","Font","GeomType","GroupSymbolizer","IconSymbolizer","Index","Justify","Labeler","Labelers","LineLabelPlacement","LineLabelSymbolizer","LineSymbolizer","OffsetSymbolizer","OffsetTextSymbolizer","Padding","PmtilesSource","PolygonSymbolizer","Sheet","ShieldSymbolizer","Static","TextPlacements","TextSymbolizer","TileCache","View","ZxySource","covering","isCcw","isInRing","leafletLayer","linear","paint","pointInPolygon","pointMinDistToLines","pointMinDistToPoints","sourcesToViews","toIndex","transformGeom","_pmtilesOptions","_mapInputNamesToProtomapsUrl","pmtilesRules","rules","PAINT_RULES","LABEL_RULES","rowName","find","colName","_pmtilesLayer","ImageOverlay","_location","_size","_angle","viewreset","_reset","_zoomAnimated","zoomanim","_animateZoom","_onImageLoad","_initImage","addInteractiveTarget","removeInteractiveTarget","loaded","Date","_updateOpacity","image","nextFrame","fade","setOpacity","cancelAnimFrame","_fadeFrame","requestAnimFrame","layerEl","_href","_mapmlTileContainer","_initialize","getHref","titleIsReadOnly","_titleIsReadOnly","setName","newName","_title","getName","_staticTileLayer","_attachSkipButtons","_calculateBounds","projectionBounds","getBoundsFromMeta","getZoomBoundsFromMeta","mapExtents","zoomMax","zoomMin","mapExtentLayer","_extentLayer","getAttribution","getBase","baseURI","native","licenseLink","licenseTitle","licenseUrl","attText","legendLink","_legendUrl","attributionControl","addAttribution","parseLicenseAndLegend","newTiles","importNode","processTiles","_mapmlvectors","_toggleControls","getQueryTemplates","queryLinks","templates","getBounds","_templateVars","content","getElementsByClassName","_eventParents","attachZoomLink","mapExtent","mapFocusButton","stop","_sortIndex","previousButton","featureCount","totalFeatures","nextButton","controlFocusButton","currentIndex","inBoundFeatures","_controlContainer","divider","focusFeature","focusEvent","composedPath","isTab","keyCode","shiftPressed","shiftKey","focusMap","stopPropagation","_popupClosed","featureEl","_groupLayer","tL","topLeft","gcrs","bR","bottomRight","latLngBounds","latLng","zoomLink","getZoomToZoom","locale","popupZoom","onclick","onkeydown","MouseEvent","zoomTo","insertBefore","featureIndexOverlayOption","removeHandlers","removeEvent","mapSize","_panel","debugPanel","_grid","debugGrid","_panes","mapPane","_vectors","debugVectors","toolPane","DebugPanel","_infoContainer","_debugContainer","infoContainer","_tileCoord","_tileMatrixCoord","_mapCoord","_tcrsCoord","_pcrsCoord","_gcrsCoord","_updateCoords","_visible","pointI","pointJ","DebugGrid","outline","DebugVectors","_mapLayerUpdate","_centerVector","circle","pointToLatLng","_addBounds","colors","boundsArray","boundsTestTag","boundsRect","projectedExtent","fillOpacity","totalBounds","totalLayerBounds","totalBoundsArray","ProjectedExtent","Path","_locations","locations","_rings","_subtract","_parts","_renderer","_updatePoly","QueryHandler","Handler","addHooks","_queryTopLayer","_queryTopLayerAtMapCenter","removeHooks","_getTopQueryableLayer","queryable","event","isFocused","layerPoint","latLngToLayerPoint","latLngToContainerPoint","_mapmlFeatures","_query","tcrs2pcrs","tcrs2gcrs","popupOptions","autoPan","maxHeight","tcrsClickLoc","latLngToPoint","tileMatrixClickLoc","tileBounds","Bounds","pcrsClick","fetches","tilei","tilej","mapi","mapj","pixelleft","pixeltop","pixelright","pixelbottom","column","longitude","latitude","mapbottom","mapleft","maptop","mapright","tilebottom","tileleft","tiletop","tileright","contenttype","queryMetas","mapmldoc","geometrylessFeatures","firstElementChild","cloneNode","featureDocument","featureCollection","html","featureDoc","append","message","fetchFeatures","results","openPopup","_popup","displayFeaturesPopup","ContextMenu","_touchstart","msPointer","pointer","activeIndex","excludedIndices","isRunned","_menuItems","CTXBACK","CTXFWD","CTXRELOAD","CTXFULLSCR","CTXSPACER1","CTXCOPY","CTXPASTE","CTXSPACER2","CTXCNTRLS","CTXDEBUG","CTXVWSRC","_items","cmBack","_goBack","cmForward","_goForward","cmReload","_reload","btnFullScreen","_toggleFullScreen","spacer","cmCopyCoords","_copyCoords","hideOnSelect","submenu","cmCopyMapML","_copyMapML","cmCopyExtent","_copyExtent","cmCopyLocation","_copyLocation","cmPasteLayer","_paste","cmToggleControls","cmToggleDebug","_toggleDebug","cmViewSource","_viewSource","defExtCS","defaultExtCoor","defLocCS","defaultLocCoor","LYRZOOMTO","LYRCOPY","_layerItems","lmZoomToLayer","_zoomToLayer","lmCopyLayer","_copyLayer","_extentLayerItems","lmZoomToExtent","_zoomToMapExtent","lmCopyExtent","_copyMapExtent","_mapMenuVisible","_keyboardEvent","_createItem","_copySubMenu","_clickEvent","CPYMENUMAP","CPYMENUEXTENT","CPYMENULOC","_hide","_onKeyDown","touch","contextmenu","_show","mousedown","_updateCS","KeyboardEvent","coord","_copyData","_layerClicked","layerElem","getOuterHTML","extentElem","forward","back","reload","controls","outerHTML","navigator","clipboard","readText","_pasteLayer","viewSource","toggleDebug","_showCopySubMenu","execCommand","menu","_copyTile","_copyTileMatrix","_copyMap","_copyTCRS","_copyPCRS","_copyGCRS","click","caption","h2","pointX","pointY","mapPt","_copyAllCoords","allData","_createSeparator","_insertElementAt","_createEventHandler","_onItemMouseOver","_onItemMouseOut","func","_showLocation","containerPointToLayerPoint","layerPointToLatLng","refEl","closest","_showAtPoint","layerList","checked","gecko","getBoundingClientRect","activeEl","button","activeElement","_elementInFocus","_layerMenuTabs","firstChild","_extentLayerMenuTabs","_setPosition","containerSize","_getElementSize","contextmenuAnchor","_leaflet_pos","_sizeChanged","offsetWidth","offsetHeight","_focusOnLayerControl","_setActiveItem","noActiveEl","disabled","nextIndex","prevIndex","copyEl","menuWidth","submenuWidth","_hideCopySubMenu","srcElement","toggleContextMenuItem","state","setViewFullScreenInnerHTML","btnExitFullScreen","tcrsTopLeft","tcrsBottomRight","tileMatrixTopLeft","tileMatrixBottomRight","minConverted","maxConverted","unprojectedMin","unprojectedMax","tcrs","FALLBACK_CS","isFinite","minPixel","maxPixel","minGCRS","maxGCRS","pixelToPCRSPoint","pointToPCRSPoint","contentArray","stringSplit","prop","containerPoints","pairs","element","array","_parseNumber","justPan","inPlace","open","postTraversalSetup","lon","pseudo","ShadowRoot","FALLBACK_PROJECTION","metaKeys","axes","csToAxes","nMin","nMax","mapmlEl","dfLayer","lastElementChild","dfPastedLayer","geojson2mapml","json","table","thead","createTHead","insertRow","th1","th2","createTextNode","tbody","createTBody","th","bboxExtent","label","geometryFunction","jsonType","setExtent","xmlStringLayer","multiPoint","linestring","multilinestring","multiPolygon","geometrycollection","NEGATIVE_INFINITY","clone_feature","curr_feature","featureCaption","HTMLElement","_properties2Table","_updateExtent","clone_point","clone_coords","clone_linestring","linestring_coordindates","clone_polygon","clone_multipoint","clone_multilinestring","geometries","fg","arrayOfArrays","tableData","tr","dest","pointConv","proj4","_breakArray","_pcrsToGcrs","poly","newArr","conv","propertyFunction","Proj","metas","ex","_table2properties","prop0","_geometry2geojson","geoms","bound","newZoom","mapCenterTCRS","mapHalf","mapTlNew","mapBrNew","mapTlPCRSNew","mapBrPCRSNew","mapPCRS","zOffset","selector","getClosest","host","matches","AttributionButton","Attribution","disableClickPropagation","_addAttribution","dialog","kbdShortcuts","kbdMovement","kbdPanUp","kbdPanDown","kbdPanLeft","kbdPanRight","btnZoomIn","btnZoomOut","kbdPanIncrement","kbdZoom","kbdFeature","kbdPrevFeature","kbdNextFeature","attribs","_attributions","prefixAndAttribs","btnAttribution","mergeOptions","toggleableAttributionControl","addInitHook","attributionButton","reloadButton","ReloadButton","scaleBar","ScaleBar","_goReload","_reloadButton","_updateDisabled","disable","_disabled","enable","Scale","updateWhenIdle","scaleControl","_scaleControl","_updateOutput","_focusOutput","addEventListener","_pixelsToDistance","px","dpi","_scaleLength","scaleLength","outputFocus","output","scaleLine","distance","metric","FullscreenButton","false","true","_toggleTitle","_click","toggleFullscreen","isFullscreen","include","_isFullscreen","pseudoFullscreen","_disablePseudoFullscreen","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","_enablePseudoFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","_setFullscreen","fullscreen","invalidateSize","_onFullscreenChange","fullscreenElement","fullscreenControl","fullscreenchange","onFullscreenChange","addControl","fullscreenButton","geolocationButton","GeolocationButton","crosshair","Crosshair","Geometry","CustomLocate","Locate","locateControl","showPopup","strings","btnLocTrackOff","locateOptions","MutationObserver","mutations","btnLocTrackOn","_marker","btnMyLocTrackOn","permanent","btnLocTrackLastKnown","btnMyLastKnownLocTrackOn","observe","attributeFilter","_isQueryable","_toggleEvents","_isMapFocused","_addOrRemoveCrosshair","_hasQueryableLayer","_addOrRemoveMapOutline","mapContainer","_outline","isLeafletContainer","_convertWrappers","_markup","_convertMarkup","_generateOutlinePoints","isClosed","_isClosed","attachLinkHandler","dragStart","handleMouse","visited","clientX","clientY","mouseup","onTop","nextLayer","nextElementSibling","eventPhase","Event","BUBBLING_PHASE","_handleLink","currentTarget","resolver","mouseout","mouseenter","addedMap","tileOrigin","zoomingTo","pixelRings","_convertRing","subP","subrings","pixelSubrings","pixelOutline","parts","interm","attr","featureAttributes","tabindex","first","subRings","_coordinateToArrays","cls","class","nodes","childNodes","cur","tempDiv","prev","main","subParts","isFirst","parents","span","noSpan","local","numPair","attrMap","wrapperAttr","linkTarget","linkType","getPCRSCenter","stampLayer","outlinePath","_createPath","_updateStyle","_rootGroup","outlineAdded","_removePath","_setPath","geometryToPath","_pointToMarker","_updatePathStyle","isMain","isOutline","dashArray","dashOffset","fillColor","fillRule","def","closed","len2","firstLayer","_openPopup","_handleFocus","updateInteraction","layerID","addToIndex","part","subPart","vectorMinZoom","vectorMaxZoom","openTooltip","closeTooltip","prevFocus","nextFocus","AnnounceMovement","layeradd","layerremove","announceBounds","dragging","_draggable","dragged","focusAnnouncement","removeEventListener","standard","amZoom","getMaxZoom","amMaxZoom","_layersMinZoom","amMinZoom","_traversalCall","getMinZoom","outOfBoundsPos","prevZoom","_historyIndex","inBoundsPos","amZoomedOut","wasDragged","amDraggedOut","amEastBound","amWestBound","amNorthBound","amSouthBound","whenLayersReady","FeatureIndex","outBoundFeatures","_mapPCRSBounds","_updateMapBounds","lc","mc","inbound","ac","bc","Options","announceMovement","announceScale","imperial","lcOpacity","amColumn","amRow","dfExtent","fIndexNoFeatures","Keyboard","altKey","metaKey","_panKeys","_panAnim","_inProgress","ctrlKey","panBy","maxBounds","panInsideBounds","_zoomKeys","187","107","61","171","189","109","54","173","setZoom","closeOnEscapeKey","featureIndexOverlay","FeatureIndexOverlay","createLayerControlExtentHTML","extentProperties","extentSettings","extentLabel","svgExtentControlIcon","extentControlPath1","extentControlPath2","extentNameIcon","extentItemControls","opacityControl","extentOpacitySummary","mapSelects","selectdetails","removeExtentButton","extentsettingsButton","extentItemNameSpan","defaultChecked","_layerControlCheckbox","ontouchstart","onmousedown","downEvent","TouchEvent","touches","control","moving","yPos","originalPosition","ontouchmove","onmousemove","moveEvent","pointerEvents","root","elementAt","elementFromPoint","swapControl","nextSibling","ontouchend","onmouseup","newPosition","controlsElems","extentZIndex","_extentRootFieldset","_opacityControl","_layerControlLabel","async","createLayerControlHTML","fieldset","layerItemName","settingsButtonNameIcon","layerItemProperty","layerItemSettings","itemToggleLabel","layerItemControls","opacityControlSummary","svgSettingsControlIcon","settingsControlPath1","settingsControlPath2","extentsFieldset","removeControlButton","disbaled","previousElementSibling","itemSettingControlButton","_layerControl","draggable","styleLinks","styles","getAlternateStyles","_layerItemSettingsHTML","_propertiesGroupAnatomy","_styles","mapExtentLayerControls","getLayerControlHTML","_output","_body","initialFocus","_addOrRemoveFeatureIndex","_checkOverlap","_calculateReticleBounds","wRatio","hRatio","reticleDimension","getComputedStyle","minPoint","maxPoint","popupClosed","featureIndexBounds","noFeaturesMessage","allFeatures","_addToggleKeys","_newContent","direction","newContent","ZoomInput","validateInput","getValue","HiddenInput","WidthInput","HeightInput","LocationInput","rel","axisCS","_templates","tileRange","_tileZoom","DOMTokenList","#element","#valueSet","#attribute","#domain","domain","hostingElement","domtokenlist","valueSet","token","oldToken","newToken","supports","toggle","force","thisArg","detectImagePath","getStyle","mime","mapOptions","head","WGS84","CRS","CBMTILE","APSTILE","OSMTILE","EPSG3857","convertPCRSBounds","axisToXY","_convertAndFormatPCRS","_splitCoordinate","_coordsToArray","_gcrsToTileMatrix","mapml2geojson","getZoomBounds","_createLayerControlExtentHTML","_createLayerControlHTML","TILE_SIZE"],"mappings":"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"}